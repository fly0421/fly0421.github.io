{"meta":{"title":"Fly Blog - à«®ê’° Ë¶â€¢ à¼ â€¢Ë¶ê’±áƒ","subtitle":"","description":"Here is Flyâ€™s Blos","author":"Fly","url":"http://example.com","root":"/"},"pages":[{"title":"","date":"2025-05-11T10:36:11.052Z","updated":"2025-05-11T10:36:11.052Z","comments":true,"path":"404/index.html","permalink":"http://example.com/404/index.html","excerpt":"","text":"404 å¾ˆæŠ±æ­‰ï¼Œæ‚¨è®¿é—®çš„é¡µé¢ä¸å­˜åœ¨ å¯èƒ½æ˜¯è¾“å…¥åœ°å€æœ‰è¯¯æˆ–è¯¥åœ°å€å·²è¢«åˆ é™¤"},{"title":"æ‰€æœ‰åˆ†ç±»","date":"2025-05-11T10:34:45.620Z","updated":"2025-05-11T10:34:45.620Z","comments":true,"path":"categories/index.html","permalink":"http://example.com/categories/index.html","excerpt":"","text":""},{"title":"","date":"2025-05-13T12:18:53.032Z","updated":"2025-05-13T12:18:53.032Z","comments":false,"path":"artitalk/index.html","permalink":"http://example.com/artitalk/index.html","excerpt":"","text":""},{"title":"","date":"2025-05-11T10:35:04.551Z","updated":"2025-05-11T10:35:04.551Z","comments":true,"path":"friends/index.html","permalink":"http://example.com/friends/index.html","excerpt":"","text":""},{"title":"","date":"2025-05-13T13:32:20.570Z","updated":"2025-05-13T13:32:20.570Z","comments":true,"path":"about/index.html","permalink":"http://example.com/about/index.html","excerpt":"","text":"å…³äºæˆ‘ æ¢¦æƒ³æ˜¯æ—©æ—¥æš´å¯Œï¼Œæ¢¦æƒ³æ˜¯æ—©æ—¥èººå¹³é€€ä¼‘æœ‰é¥­åƒ æ—¶é—´çº¿ OnGoingâ€¦ ç­‰å¾…é€€ä¼‘INGâ€¦ 2023.11.24 æ­£å¼å·¥ä½œ 2015.09.01 è¯»é«˜ä¸­ 2012.09.01 è¯»åˆä¸­ 2006.09.01 è¯»å°å­¦ 2003.09.01 è¯»å¹¼å„¿å›­"},{"title":"","date":"2025-05-12T13:44:01.139Z","updated":"2025-05-12T13:44:01.139Z","comments":true,"path":"html/index.html","permalink":"http://example.com/html/index.html","excerpt":"","text":""},{"title":"æ‰€æœ‰æ ‡ç­¾","date":"2025-05-11T10:34:56.134Z","updated":"2025-05-11T10:34:56.134Z","comments":true,"path":"tags/index.html","permalink":"http://example.com/tags/index.html","excerpt":"","text":""},{"title":"","date":"2025-05-13T15:21:52.571Z","updated":"2025-05-13T15:21:52.571Z","comments":true,"path":"photos/index.html","permalink":"http://example.com/photos/index.html","excerpt":"","text":"ç›¸å†Œ note ç›¸å†Œä¸€ ç¬¬ä¸€å¼ å›¾ç‰‡ç¬¬äºŒå¼ å›¾ç‰‡ç¬¬ä¸‰å¼ å›¾ç‰‡ note ç›¸å†ŒäºŒ å›¾ç‰‡1å›¾ç‰‡2å›¾ç‰‡3å›¾ç‰‡4å›¾ç‰‡5å›¾ç‰‡6å›¾ç‰‡7å›¾ç‰‡8å›¾ç‰‡9å›¾ç‰‡10å›¾ç‰‡11å›¾ç‰‡12å›¾ç‰‡13å›¾ç‰‡14å›¾ç‰‡15å›¾ç‰‡16å›¾ç‰‡17å›¾ç‰‡18å›¾ç‰‡19å›¾ç‰‡10å›¾ç‰‡11å›¾ç‰‡12å›¾ç‰‡13å›¾ç‰‡14 note éšæœºå›¾ç‰‡ éšæœºé£æ™¯å¿…åº”å£çº¸ note ğŸ“ChinaÂ·ç æµ· çˆ±æƒ…é‚®å±€åŸå¸‚é˜³å°æ—¥æœˆè´ note éšæ‰‹æ‹ Â· ç™½äº‘ Â· å¤•é˜³ Â· å¤©ç©º å¿åŸå‚æ™šç æµ·é¦™æ´²åŒºå¤•é˜³ç ç§‘æ ¡å›­ç ç§‘æ ¡å›­ç ç§‘æ ¡å›­ç ç§‘æ ¡å›­ç»ƒè½¦æ—¶å€™æ‹çš„ä»åŒ–æ²³è¾¹ä»åŒ–å…¬å›­ä»åŒ–å…¬å›­ä»åŒ–å…¬å›­å®¿èˆé˜³å°å®¿èˆé˜³å°ç æµ·é¦™æ´²åŒºå¤•é˜³ç æµ·"}],"posts":[{"title":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","date":"2025-05-11T10:05:24.000Z","updated":"2025-05-13T14:39:58.987Z","comments":true,"path":"2025/05/11/è®¾è®¡æ¨¡å¼/","permalink":"http://example.com/2025/05/11/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/","excerpt":"","text":"1ã€ç®€å•å·¥å‚æ¨¡å¼ç®€å•å·¥å‚æ¨¡å¼(Simple Factory Pattern) åˆç§°ä¸ºé™æ€å·¥å‚æ–¹æ³•(Static Factory Method)æ¨¡å¼ï¼Œå®ƒå±äºç±»åˆ›å»ºå‹æ¨¡å¼ã€‚ åœ¨ç®€å•å·¥å‚æ¨¡å¼ä¸­ï¼Œå¯ä»¥æ ¹æ®å‚æ•°çš„ä¸åŒè¿”å›ä¸åŒç±»çš„å®ä¾‹ã€‚ç®€å•å·¥å‚æ¨¡å¼ä¸“é—¨å®šä¹‰ä¸€ä¸ªç±»æ¥è´Ÿè´£åˆ›å»ºå…¶ä»–ç±»çš„å®ä¾‹ï¼Œè¢«åˆ›å»ºçš„å®ä¾‹é€šå¸¸éƒ½å…·æœ‰å…±åŒçš„çˆ¶ç±»ã€‚ 1234567891011121314151617181920public class OperationFactory&#123; public static Operation createOperate(string operate)&#123; Operation oper = null; switch(operate)&#123; case &quot;+&quot;: oper = new OperationAdd(); break; case &quot;-&quot;: oper = new OperationSub(); break; case &quot;*&quot;: oper = new OperationMul(); break; case &quot;/&quot;: oper = new OperationDiv(); break; &#125; return oper; &#125;&#125; 12345Operation oper;oper = OperationFactory.createOperateï¼ˆâ€œ+â€ï¼‰;oper.NumberA = 1;oper.NumberB = 2;double result = oper.GetResultï¼ˆï¼‰; 2ã€ç­–ç•¥æ¨¡å¼ç­–ç•¥æ¨¡å¼å°±æ˜¯ç”¨æ¥å°è£…ç®—æ³•çš„ï¼Œä½†åœ¨å®è·µä¸­ï¼Œæˆ‘ä»¬å‘ç°å¯ä»¥ç”¨å®ƒæ¥å°è£…å‡ ä¹ä»»ä½•ç±»å‹çš„è§„åˆ™ï¼Œåªè¦åœ¨åˆ†æè¿‡ç¨‹ä¸­å¬åˆ°éœ€è¦åœ¨ä¸åŒæ—¶é—´åº”ç”¨ä¸åŒçš„ä¸šåŠ¡è§„åˆ™ï¼Œå°±å¯ä»¥è€ƒè™‘ä½¿ç”¨ç­–ç•¥æ¨¡å¼å¤„ç†è¿™ç§å˜åŒ–çš„å¯èƒ½æ€§ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354// ç­–ç•¥æ¥å£interface SortStrategy &#123; void sort(int[] array);&#125;// å…·ä½“ç­–ç•¥ç±»ï¼šå¿«é€Ÿæ’åºclass QuickSortStrategy implements SortStrategy &#123; @Override public void sort(int[] array) &#123; // å¿«é€Ÿæ’åºç®—æ³•å®ç° System.out.println(&quot;Using Quick Sort&quot;); // æ’åºé€»è¾‘ &#125;&#125;// å…·ä½“ç­–ç•¥ç±»ï¼šå†’æ³¡æ’åºclass BubbleSortStrategy implements SortStrategy &#123; @Override public void sort(int[] array) &#123; // å†’æ³¡æ’åºç®—æ³•å®ç° System.out.println(&quot;Using Bubble Sort&quot;); // æ’åºé€»è¾‘ &#125;&#125;// ä¸Šä¸‹æ–‡ç±»ï¼šè´Ÿè´£ä½¿ç”¨ç­–ç•¥class SortingContext &#123; private SortStrategy strategy; // è®¾ç½®ç­–ç•¥ public void setStrategy(SortStrategy strategy) &#123; this.strategy = strategy; &#125; // æ‰§è¡Œæ’åº public void executeSort(int[] array) &#123; strategy.sort(array); &#125;&#125;// æµ‹è¯•public class StrategyPatternExample &#123; public static void main(String[] args) &#123; SortingContext context = new SortingContext(); // ä½¿ç”¨å¿«é€Ÿæ’åºç­–ç•¥ context.setStrategy(new QuickSortStrategy()); context.executeSort(new int[]&#123;3, 1, 2&#125;); // ä½¿ç”¨å†’æ³¡æ’åºç­–ç•¥ context.setStrategy(new BubbleSortStrategy()); context.executeSort(new int[]&#123;3, 1, 2&#125;); &#125;&#125;","categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://example.com/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}],"tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://example.com/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}],"author":"fly"},{"title":"WPFç¼–ç¨‹åŸºç¡€ä¸‹ï¼ˆäºŒï¼‰","slug":"WPFåŸºç¡€å­¦ä¹ ä¸‹","date":"2025-05-11T10:02:24.000Z","updated":"2025-05-13T15:40:08.477Z","comments":true,"path":"2025/05/11/WPFåŸºç¡€å­¦ä¹ ä¸‹/","permalink":"http://example.com/2025/05/11/WPF%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0%E4%B8%8B/","excerpt":"","text":"å†…å®¹æ§ä»¶ControlåŸºç±»Controlæ˜¯è®¸å¤šæ§ä»¶çš„åŸºç±»ã€‚æ¯”å¦‚æœ€å¸¸è§çš„æŒ‰é’®ï¼ˆButtonï¼‰ã€å•é€‰(RadioButton)ã€å¤é€‰ï¼ˆCheckBoxï¼‰ã€æ–‡æœ¬æ¡†ï¼ˆTextBoxï¼‰ã€ListBoxã€DataGridã€æ—¥æœŸæ§ä»¶ç­‰ç­‰ã€‚è¿™äº›æ§ä»¶é€šå¸¸ç”¨äºå±•ç¤ºç¨‹åºçš„æ•°æ®æˆ–è·å–ç”¨æˆ·è¾“å…¥çš„æ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¿™ä¸€ç±»å‹çš„æ§ä»¶ç§°ä¸ºå†…å®¹æ§ä»¶æˆ–æ•°æ®æ§ä»¶ï¼Œå®ƒä»¬ä¸å‰é¢çš„å¸ƒå±€æ§ä»¶æœ‰ä¸€å®šçš„åŒºåˆ«ï¼Œå¸ƒå±€æ§ä»¶æ›´ä¸“æ³¨äºç•Œé¢ï¼Œè€Œå†…å®¹æ§ä»¶æ›´ä¸“æ³¨äºæ•°æ®ï¼ˆä¸šåŠ¡ï¼‰ã€‚ Controlç±»è™½ç„¶å¯ä»¥å®ä¾‹åŒ–ï¼Œä½†æ˜¯åœ¨ç•Œé¢ä¸Šæ˜¯ä¸ä¼šæœ‰ä»»ä½•æ˜¾ç¤ºçš„ã€‚åªæœ‰é‚£äº›ç»§æ‰¿äº†Controlçš„å­ç±»ï¼ˆæ§ä»¶ï¼‰æ‰ä¼šåœ¨ç•Œé¢ä¸Šæ˜¾ç¤ºï¼Œè€Œä¸”æ‰€å‘ˆç°çš„æ ·å­å„ä¸ç›¸åŒï¼Œä¸ºä»€ä¹ˆä¼šæ˜¯è¿™æ ·å‘¢ï¼Ÿ å› ä¸ºControlç±»æä¾›äº†ä¸€ä¸ªæ§ä»¶æ¨¡æ¿ï¼ˆControlTemplateï¼‰ï¼Œè€Œå‡ ä¹æ‰€æœ‰çš„å­ç±»éƒ½å¯¹è¿™ä¸ªControlTemplateè¿›è¡Œäº†å„è‡ªçš„å®ç°ï¼Œæ‰€ä»¥åœ¨å‘ˆç°å­ç±»æ—¶ï¼Œæˆ‘ä»¬æ‰ä¼šçœ‹åˆ°Buttonæ‹¥æœ‰Buttonçš„æ ·å­ï¼ŒTextBoxæ‹¥æœ‰TextBoxçš„æ ·å­ã€‚ ControlåŸºç±»è¯´ æˆ‘ç»™ä½ ä»¬ä¸€å¼ ç™½çº¸(ControlTemplate)ï¼Œä½ ä»¬å¯ä»¥åœ¨ä¸Šé¢æƒ³ç”»ä»€ä¹ˆå°±ç”»ä»€ä¹ˆ æˆ‘ä»¬åœ¨è¿™ä¸€ç« èŠ‚å¹¶ä¸å¯¹æ¨¡æ¿(Template)è¿›è¡Œè¯¦ç»†çš„ä»‹ç»ï¼Œåªæ˜¯å…ˆé˜è¿°æ¨¡æ¿çš„æ¦‚å¿µï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å…ˆå°†ç›®å…‰èšç„¦åˆ°Controlçš„ç»“æ„å®šä¹‰ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950public class Control : FrameworkElement&#123;public static readonly DependencyProperty BorderBrushProperty;public static readonly RoutedEvent PreviewMouseDoubleClickEvent;public static readonly DependencyProperty TemplateProperty;public static readonly DependencyProperty PaddingProperty;public static readonly DependencyProperty IsTabStopProperty;public static readonly DependencyProperty TabIndexProperty;public static readonly DependencyProperty VerticalContentAlignmentProperty;public static readonly DependencyProperty HorizontalContentAlignmentProperty;public static readonly RoutedEvent MouseDoubleClickEvent;public static readonly DependencyProperty FontStyleProperty;public static readonly DependencyProperty FontStretchProperty;public static readonly DependencyProperty FontSizeProperty;public static readonly DependencyProperty FontFamilyProperty;public static readonly DependencyProperty ForegroundProperty;public static readonly DependencyProperty BackgroundProperty;public static readonly DependencyProperty BorderThicknessProperty;public static readonly DependencyProperty FontWeightProperty; public Control(); public FontStyle FontStyle &#123; get; set; &#125;public FontStretch FontStretch &#123; get; set; &#125;public double FontSize &#123; get; set; &#125;public FontFamily FontFamily &#123; get; set; &#125;public Brush Foreground &#123; get; set; &#125;public Brush Background &#123; get; set; &#125;public Thickness BorderThickness &#123; get; set; &#125;public bool IsTabStop &#123; get; set; &#125;public VerticalAlignment VerticalContentAlignment &#123; get; set; &#125;public int TabIndex &#123; get; set; &#125;public Thickness Padding &#123; get; set; &#125;public ControlTemplate Template &#123; get; set; &#125;public FontWeight FontWeight &#123; get; set; &#125;public Brush BorderBrush &#123; get; set; &#125;public HorizontalAlignment HorizontalContentAlignment &#123; get; set; &#125;protected internal virtual bool HandlesScrolling &#123; get; &#125; public event MouseButtonEventHandler MouseDoubleClick;public event MouseButtonEventHandler PreviewMouseDoubleClick; public override string ToString();protected override Size ArrangeOverride(Size arrangeBounds);protected override Size MeasureOverride(Size constraint);protected virtual void OnMouseDoubleClick(MouseButtonEventArgs e);protected virtual void OnPreviewMouseDoubleClick(MouseButtonEventArgs e);protected virtual void OnTemplateChanged(ControlTemplate oldTemplate, ControlTemplate newTemplate); &#125; æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ControlåŸºç±»ä¸ºå®ƒçš„å­ç±»ä»¬æä¾›äº†å“ªäº›å±æ€§ å±æ€§ è¯´æ˜ FontStyle è·å–æˆ–è®¾ç½®æ§ä»¶çš„å­—ä½“ç»“æ„ï¼Œç±»ä¼¼äºWordä¸­å­—ä½“çš„å¸¸è§„ã€æ–œä½“æˆ–å€¾æ–œ FontStretch è·å–æˆ–è®¾ç½®ç´§ç¼©æˆ–åœ¨å±å¹•ä¸Šå±•å¼€ä¸€ç§å­—ä½“çš„ç¨‹åº¦ã€‚ FontSize è·å–æˆ–è®¾ç½®å­—ä½“å¤§å°ã€‚ FontFamily è·å–æˆ–è®¾ç½®æ§ä»¶çš„å­—ä½“ç³»åˆ—ã€‚å¦‚ï¼šå¾®è½¯é›…é»‘ &#x3D; â€œMicrosoft YaHei UIâ€ Foreground è·å–æˆ–è®¾ç½®æ§ä»¶çš„å­—ä½“é¢œè‰²ï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„å‰æ™¯è‰²ç”»ç¬”ï¼Œå®ƒæ˜¯ä¸€ä¸ªåˆ·å­ï¼ˆBrushï¼‰ Background è·å–æˆ–è®¾ç½®ä¸€ä¸ªç”¨äºæè¿°æ§ä»¶çš„èƒŒæ™¯ç”»ç¬”ã€‚ BorderThickness è·å–æˆ–è®¾ç½®æ§ä»¶çš„è¾¹æ¡†å®½åº¦ã€‚ IsTabStop è·å–æˆ–è®¾ç½®ä¸€ä¸ªå€¼ï¼Œè¯¥å€¼æŒ‡ç¤ºæ§ä»¶æ˜¯å¦åŒ…æ‹¬åœ¨é€‰é¡¹å¡ä¸Šçš„å¯¼èˆªçª—æ ¼ä¸­ã€‚ VerticalContentAlignment è·å–æˆ–è®¾ç½®æ§ä»¶çš„å†…å®¹çš„å‚ç›´å¯¹é½æ–¹å¼ã€‚ TabIndex è·å–æˆ–è®¾ç½®ä¸€ä¸ªå€¼ï¼Œç¡®å®šå½“ç”¨æˆ·å¯¼èˆªæ§ä»¶é€šè¿‡ä½¿ç”¨ TAB é”®å…ƒç´ æ¥æ”¶ç„¦ç‚¹çš„é¡ºåºã€‚ Padding è·å–æˆ–è®¾ç½®åœ¨æ§ä»¶ä¸­çš„å¡«å……é‡ã€‚ Template è·å–æˆ–è®¾ç½®æ§ä»¶æ¨¡æ¿ã€‚ FontWeight è·å–æˆ–è®¾ç½®æŒ‡å®šçš„å­—ä½“ç²—ç»†ã€‚ BorderBrush è·å–æˆ–è®¾ç½®ä¸€ä¸ªç”¨äºæè¿°ä¸€ä¸ªæ§ä»¶çš„è¾¹æ¡†èƒŒæ™¯ç”»ç¬”ã€‚ HorizontalContentAlignment è·å–æˆ–è®¾ç½®æ§ä»¶çš„å†…å®¹çš„æ°´å¹³å¯¹é½æ–¹å¼ã€‚ å¤§éƒ¨åˆ†çš„å±æ€§éƒ½æ¯”è¾ƒå¥½ç†è§£ï¼Œè¿™é‡Œç€é‡ä»‹ç»ä¸€ä¸‹Templateå±æ€§ã€‚å¦‚æœæŠŠäººæ¯”ä½œæ˜¯ä¸€ä¸ªControl(æ§ä»¶)ï¼Œé‚£ä¹ˆâ€ç€è£…â€œå°±æ˜¯Templateï¼ˆæ¨¡æ¿ï¼‰ã€‚åœ¨å¤§è¡—ä¸Šï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°ä¸åŒç€è£…çš„äººæ¥æ¥å¾€å¾€ã€‚ æ‰€ä»¥Controlçš„Templateå®šä¹‰äº†æ§ä»¶çš„å¤–è§‚ï¼ˆç€è£…ï¼‰ã€‚ æ•°æ®æ¨¡æ¿ ä¸æ§ä»¶æ¨¡æ¿ç±»ä¼¼çš„ï¼Œè¿˜æœ‰ä¸€ä¸ªæ¦‚å¿µå«æ•°æ®æ¨¡æ¿ã€‚å½¢è±¡åœ°è¯´ï¼Œè¿˜æ˜¯æŠŠäººæ¯”ä½œæ§ä»¶ï¼Œé‚£ä¹ˆäººä½“çš„äº”è„å…­è…‘å°±æ˜¯è¿™ä¸ªæ§ä»¶çš„æ•°æ®ï¼Œè€Œäº”è„å…­è…‘ï¼ˆæ•°æ®ï¼‰çš„å¤–è§‚å°±æ˜¯æŒ‡æ•°æ®æ¨¡æ¿ã€‚ æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªå®é™…çš„ä¾‹å­ 12345678910111213&lt;Window x:Class=&quot;HelloWorld.MainWindow&quot; xmlns=&quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot; xmlns:x=&quot;http://schemas.microsoft.com/winfx/2006/xaml&quot; xmlns:d=&quot;http://schemas.microsoft.com/expression/blend/2008&quot; xmlns:mc=&quot;http://schemas.openxmlformats.org/markup-compatibility/2006&quot; xmlns:local=&quot;clr-namespace:HelloWorld&quot; mc:Ignorable=&quot;d&quot; Title=&quot;HelloWorld - www.wpfsoft.com&quot; Height=&quot;350&quot; Width=&quot;500&quot;&gt; &lt;Control Margin=&quot;10&quot;&gt; &lt;/Control&gt; &lt;/Window&gt; æˆ‘ä»¬åœ¨Windowçª—ä½“ä¸­å®ä¾‹åŒ–äº†ä¸€ä¸ªControlç±»ï¼Œä½†æ˜¯ï¼Œç•Œé¢ä¸Šç©ºæ— ä¸€ç‰©ã€‚è¿™æ˜¯å› ä¸ºå½“å‰è¿™ä¸ªControlå¯¹è±¡è¿˜æ²¡æœ‰â€ç©¿è¡£æœâ€œï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒçš„Templateå¹¶æ²¡æœ‰å†…å®¹ï¼Œå®é™…ä¸Šï¼Œæ­¤åˆ»Templateå±æ€§ç­‰äºnullã€‚ é‚£æˆ‘ä»¬å°è¯•ç»™ä»–ç©¿ä¸€ä»¶è¡£æœå§ã€‚ 123456789101112131415161718&lt;Window x:Class=&quot;HelloWorld.MainWindow&quot; xmlns=&quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot; xmlns:x=&quot;http://schemas.microsoft.com/winfx/2006/xaml&quot; xmlns:d=&quot;http://schemas.microsoft.com/expression/blend/2008&quot; xmlns:mc=&quot;http://schemas.openxmlformats.org/markup-compatibility/2006&quot; xmlns:local=&quot;clr-namespace:HelloWorld&quot; mc:Ignorable=&quot;d&quot; Title=&quot;HelloWorld - www.wpfsoft.com&quot; Height=&quot;350&quot; Width=&quot;500&quot;&gt; &lt;Control Margin=&quot;10&quot;&gt; &lt;Control.Template&gt; &lt;ControlTemplate TargetType=&quot;Control&quot;&gt; &lt;Border Background=&quot;LightBlue&quot;&gt; &lt;TextBlock Text=&quot;WPFä¸­æ–‡ç½‘&quot; FontSize=&quot;20&quot; HorizontalAlignment=&quot;Center&quot; VerticalAlignment=&quot;Center&quot;/&gt; &lt;/Border&gt; &lt;/ControlTemplate&gt; &lt;/Control.Template&gt; &lt;/Control&gt;&lt;/Window&gt; æˆ‘ä»¬ä¸ºControlçš„Templateå®ä¾‹åŒ–äº†ä¸€ä¸ªControlTemplateå¯¹è±¡ï¼Œå¹¶åœ¨è¿™ä¸ªå¯¹è±¡ä¸­å¢åŠ äº†ä¸€ä¸ªBorderï¼Œåœ¨Borderä¸­åˆå¢åŠ äº†ä¸€ä¸ªTextBlockå­å…ƒç´ ï¼Œäºæ˜¯Controlå°±æœ‰äº†è¿™æ ·ä¸€ä»¶æ–°è¡£æœã€‚ åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬è¦æ˜ç™½ä¸€ä¸ªè¦ç‚¹æ˜¯ï¼ŒControlç±»çš„Templateå±æ€§æ˜¯ControlTemplateç±»å‹çš„ã€‚æ‰€ä»¥ä¸Šé¢çš„ä»£ç æ‰å¿…é¡»è¿™æ ·å†™æ‰å¯ä»¥ã€‚è€ŒControlTemplateåˆæ˜¯ä»€ä¹ˆä¸œä¸œï¼Ÿä¸ºä»€ä¹ˆåœ¨xamlä¸­å®ä¾‹åŒ–æ—¶ï¼Œåé¢è¦è·Ÿä¸€å¥TargetType&#x3D;â€Controlâ€ï¼Ÿå…³äºè¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬å°†åœ¨åé¢ä¸“é—¨æ‹¿ä¸€ç« èŠ‚æ¥é˜è¿°ControlTemplateä»¥åŠå®ƒçš„çˆ¶ç±»ã€‚ äº‹ä»¶ åœ¨è¿™ä¸€å°èŠ‚é‡Œï¼Œæ‚¨åªè¦èƒ½æ˜ç™½Templateçš„æ¦‚å¿µå°±è¡Œäº†ã€‚é™¤äº†è¿™ä¸ªå±æ€§ï¼ŒControlç±»è¿˜æä¾›äº†ä¸¤ä¸ªäº‹ä»¶ï¼Œå®ƒä»¬åˆ†åˆ«æ˜¯PreviewMouseDoubleClickå’ŒMouseDoubleClickã€‚ äº‹ä»¶åç§° è¯´æ˜ PreviewMouseDoubleClick è¡¨ç¤ºé¼ æ ‡åŒå‡»æˆ–å¤šæ¬¡å•å‡»æ—¶è§¦å‘çš„äº‹ä»¶ MouseDoubleClick è¡¨ç¤ºé¼ æ ‡åŒå‡»æˆ–å¤šæ¬¡å•å‡»æ—¶è§¦å‘çš„äº‹ä»¶ ä»¥Previewå¼€å¤´çš„äº‹ä»¶å«éš§é“äº‹ä»¶æˆ–é¢„è§ˆäº‹ä»¶ï¼Œè€ŒMouseDoubleClickæ²¡æœ‰ä»¥Previewå¼€å¤´ï¼Œæ‰€ä»¥å®ƒå«å†’æ³¡äº‹ä»¶ã€‚ WPFçš„å‰ç«¯ä»£ç å…¶å®æ˜¯ä¸€æ£µæ ‘ï¼Œå½“æˆ‘ä»¬åœ¨æŸä¸ªç›®æ ‡æ§ä»¶ä¸Šè¿›è¡Œé¼ æ ‡æ“ä½œæ—¶ï¼Œæ‰€å¼•å‘çš„äº‹ä»¶æœ‰ä¸¤ä¸ªæ–¹å‘ï¼Œä¸€æ˜¯ä»Winowæ ¹èŠ‚ç‚¹ä¸€ç›´è·¯ç”±åˆ°ç›®æ ‡æ§ä»¶ä¸Šï¼Œçœ‹èµ·æ¥å°±å¥½åƒæ˜¯ä»å¤–é¢ä¸€ç›´æ²¿ç€è¿™æ£µæ ‘è·¯ç”±å¼•å‘è‡³é‡Œé¢ï¼Œè¿™å°±åƒæˆ‘ä»¬å¼€è½¦è¿›å…¥éš§é“ä¸€æ ·ï¼Œæ‰€ä»¥Previewå¼€å¤´çš„äº‹ä»¶å«éš§é“äº‹ä»¶ã€‚ å†’æ³¡äº‹ä»¶äº‹ä»¶çš„è·¯ç”±æ–¹å‘ç›¸åï¼Œæ˜¯ä»ç›®æ ‡æ§ä»¶ä½ç½®å¼€å§‹ï¼Œä¸€ç›´è·¯ç”±å¼•å‘è‡³æœ€å¤–å±‚çš„Windowçª—ä½“ã€‚ å…³äºè·¯ç”±äº‹ä»¶ï¼Œæˆ‘ä»¬ä¼šåœ¨åé¢æ‹¿ä¸€ç« èŠ‚ä¸“é—¨è®²è§£ï¼Œè¿™é‡Œåªæä¸€ä¸‹è¿™ä¸ªæ¦‚å¿µã€‚ é€šå¸¸ï¼Œæˆ‘ä»¬å¹¶ä¸ä¼šç›´æ¥å®ä¾‹åŒ–ControlåŸºç±»ï¼Œç¡®å®è¿™æ ·åšå¯¹æˆ‘ä»¬å®é™…å¸®åŠ©ä¸å¤§ï¼Œæˆ‘ä»¬è¦ä½¿ç”¨çš„â€”â€”æ˜¯å®ƒè†ä¸‹å„ä¸ªå­æ§ä»¶ï¼Œè€Œåœ¨è¿™ä¼—å¤šçš„å­æ§ä»¶ä¸­ï¼ŒButtonæ˜¯æœ€å¸¸è§æœ€ç®€å•çš„æ§ä»¶äº†ã€‚ä¸è¿‡ï¼ŒButtonçš„åŸºç±»æ˜¯ButtonBaseï¼ŒButtonBaseçš„åŸºç±»æ˜¯ContentControlï¼ŒContentControlçš„åŸºç±»æ˜¯Controlã€‚å¦‚æœæˆ‘ä»¬è¦æ¢è®¨Buttonæ§ä»¶ï¼Œçœ‹æ ·å­å¿…é¡»è¦å…ˆä»‹ç»ä¸€ä¸‹ContentControlåŸºç±»å’ŒButtonBaseåŸºç±»æ‰è¡Œäº†ã€‚ ContentControlç±»ï¼ˆå†…å®¹æ§ä»¶ï¼‰ContentControlæ˜¯ä¸€ä¸ªç¥å¥‡çš„ç±»ï¼ ä¸ºä»€ä¹ˆè¿™ä¹ˆè¯´å‘¢ï¼Œå› ä¸ºå®ƒæœ‰ä¸€ä¸ªContentå±æ€§ï¼Œå…³é”®æ˜¯è¿™ä¸ªå±æ€§çš„ç±»å‹æ˜¯objectã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæœ¬è´¨ä¸Šï¼Œå®ƒå¯ä»¥æ¥æ”¶ä»»æ„å¼•ç”¨ç±»å‹çš„å®ä¾‹ã€‚ ä½†æ˜¯ï¼Œé€šå¸¸æƒ…å†µä¸‹ï¼ŒContentå±æ€§æ¥æ”¶UIæ§ä»¶ã€‚å› ä¸ºï¼ŒContentControlæ§ä»¶æœ€ç»ˆä¼šæŠŠContentå±æ€§é‡Œé¢çš„å†…å®¹æ˜¾ç¤ºåˆ°ç•Œé¢ä¸Šã€‚ æˆ‘ä»¬å…ˆçœ‹çœ‹å®ƒçš„ç»“æ„å®šä¹‰ï¼š 1234567891011121314151617181920212223242526public class ContentControl : Control, IAddChild&#123; public static readonly DependencyProperty ContentProperty; public static readonly DependencyProperty HasContentProperty; public static readonly DependencyProperty ContentTemplateProperty; public static readonly DependencyProperty ContentTemplateSelectorProperty; public static readonly DependencyProperty ContentStringFormatProperty; public ContentControl(); public DataTemplate ContentTemplate &#123; get; set; &#125; public bool HasContent &#123; get; &#125; public object Content &#123; get; set; &#125; public string ContentStringFormat &#123; get; set; &#125; public DataTemplateSelector ContentTemplateSelector &#123; get; set; &#125; protected internal override IEnumerator LogicalChildren &#123; get; &#125; public virtual bool ShouldSerializeContent(); protected virtual void AddChild(object value); protected virtual void AddText(string text); protected virtual void OnContentChanged(object oldContent, object newContent); protected virtual void OnContentStringFormatChanged(string oldContentStringFormat, string newContentStringFormat); protected virtual void OnContentTemplateChanged(DataTemplate oldContentTemplate, DataTemplate newContentTemplate); protected virtual void OnContentTemplateSelectorChanged(DataTemplateSelector oldContentTemplateSelector, DataTemplateSelector newContentTemplateSelector); &#125; é‚£ä¹ˆï¼Œæˆ‘å¦‚æœéè¦æŠŠå…¶å®ƒç±»å‹çš„å¯¹è±¡ï¼ˆæ¯”å¦‚å­—ç¬¦ä¸²ï¼‰å¼ºè¡Œå¡ç»™Contentå±æ€§å‘¢ï¼Ÿ 123456789101112&lt;Window x:Class=&quot;HelloWorld.MainWindow&quot; xmlns=&quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot; xmlns:x=&quot;http://schemas.microsoft.com/winfx/2006/xaml&quot; xmlns:d=&quot;http://schemas.microsoft.com/expression/blend/2008&quot; xmlns:mc=&quot;http://schemas.openxmlformats.org/markup-compatibility/2006&quot; xmlns:local=&quot;clr-namespace:HelloWorld&quot; mc:Ignorable=&quot;d&quot; Title=&quot;HelloWorld - www.wpfsoft.com&quot; Height=&quot;350&quot; Width=&quot;500&quot;&gt; &lt;ContentControl Foreground=&quot;Red&quot; FontSize=&quot;36&quot; HorizontalAlignment=&quot;Center&quot; VerticalAlignment=&quot;Center&quot;&gt; WPFä¸­æ–‡ç½‘ &lt;/ContentControl&gt;&lt;/Window&gt; å¦‚ä¸Šæ‰€ç¤ºï¼Œæˆ‘ä»¬åœ¨ContentControl å†…éƒ¨åªå†™äº†ä¸€å¥â€œWPFä¸­æ–‡ç½‘â€ï¼Œå¹¶è®¾ç½®äº†Foregroundå’ŒFontSizeç­‰å±æ€§ï¼Œå±…ç„¶ä¸ä½†æ²¡æŠ¥é”™ï¼Œè¿˜å°†å­—ç¬¦ä¸²æ˜¾ç¤ºå‡ºæ¥äº†ï¼Œè¿™çœŸæ˜¯å¤ªç¥å¥‡äº†ï¼ é‡åº†æ•™ä¸»å‹æƒ…æç¤º åˆ«å¿˜è®°äº†ContentControl ç»§æ‰¿äºControl åŸºç±»ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„ContentControl ä¹Ÿå¯ä»¥è®¾ç½®Foregroundå’ŒFontSizeå“¦ï¼ ContentTemplateå±æ€§ï¼ˆå†…å®¹æ¨¡æ¿ï¼‰ è¿™ä¸ªå±æ€§è¡¨ç¤ºè·å–æˆ–è®¾ç½®ç”¨æ¥æ˜¾ç¤ºçš„å†…å®¹çš„æ•°æ®æ¨¡æ¿ï¼Œè¯´ç™½äº†ï¼Œå°±æ˜¯å†³å®šâ€œWPFä¸­æ–‡ç½‘â€è¿™å‡ ä¸ªå­—çš„ç©¿ç€ï¼Œå¦‚æœæ²¡æœ‰è®¾ç½®æ•°æ®æ¨¡æ¿ï¼Œå®ƒå°†ä»¥é»˜è®¤çš„æ•°æ®æ¨¡æ¿æ¥æ˜¾ç¤ºè¿™å‡ ä¸ªå­—ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¼”ç¤ºä¸€ä¸‹è¿™ä¸ªå±æ€§çš„ç”¨æ³•ï¼Œå¹¶ç®€è¦è¯´æ˜å…¶ä¸­çš„å…³ç³»ã€‚ 1234567891011121314151617&lt;Window x:Class=&quot;HelloWorld.MainWindow&quot; xmlns=&quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot; xmlns:x=&quot;http://schemas.microsoft.com/winfx/2006/xaml&quot; xmlns:d=&quot;http://schemas.microsoft.com/expression/blend/2008&quot; xmlns:mc=&quot;http://schemas.openxmlformats.org/markup-compatibility/2006&quot; xmlns:local=&quot;clr-namespace:HelloWorld&quot; mc:Ignorable=&quot;d&quot; Title=&quot;HelloWorld - www.wpfsoft.com&quot; Height=&quot;350&quot; Width=&quot;500&quot;&gt; &lt;ContentControl Foreground=&quot;Red&quot; FontSize=&quot;36&quot; HorizontalAlignment=&quot;Center&quot; VerticalAlignment=&quot;Center&quot;&gt; &lt;ContentControl.ContentTemplate&gt; &lt;DataTemplate&gt; &lt;TextBlock Text=&quot;&#123;Binding&#125;&quot; Foreground=&quot;Green&quot; FontSize=&quot;16&quot;/&gt; &lt;/DataTemplate&gt; &lt;/ContentControl.ContentTemplate&gt; WPFä¸­æ–‡ç½‘ &lt;/ContentControl&gt;&lt;/Window&gt; ContentControlç±»çš„ContentTemplateå±æ€§æ˜¯DataTemplateç±»å‹ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨xamlä¸­å®ä¾‹åŒ–äº†ä¸€ä¸ªDataTemplateï¼ˆæ•°æ®æ¨¡æ¿ï¼‰å¯¹è±¡ï¼Œå¹¶åœ¨å…¶ä¸­å¢åŠ äº†ä¸€ä¸ªTextBlockæ§ä»¶ï¼Œå°†TextBlockæ§ä»¶çš„Textå±æ€§å†™æˆäº†Bindingå½¢å¼ï¼Œå¹¶è®¾ç½®äº†å­—ä½“é¢œè‰²å’Œå¤§å°ã€‚ æœ€ç»ˆå‘ˆç°çš„æ•ˆæœä¸Šå›¾æ‰€ç¤ºï¼Œå­—ä½“é¢œè‰²ä¸ºç»¿è‰²ï¼Œå¤§å°ä¸º16ã€‚è™½ç„¶ContentControlä¹Ÿè®¾ç½®äº†å­—ä½“é¢œè‰²ä¸ºçº¢è‰²ï¼Œå¤§å°ä¸º36ï¼Œä½†æ˜¯å·²ç»å¤±æ•ˆäº†ã€‚å¥½æ¯”ContentControlç»™Contentæä¾›äº†ä¸€ä»¶çº¢è‰²çš„å¤–è¡£ï¼Œä½†æ˜¯ï¼Œæˆ‘ä»¬åˆç‰¹åœ°æä¾›äº†ä¸€ä»¶ç»¿è‰²çš„å¤–è¡£ï¼Œäºæ˜¯ï¼ŒContentControlå°±è¢«ç»¿äº†ã€‚ å…³äºæ•°æ®æ¨¡æ¿ä¸­çš„TextBlockæ§ä»¶çš„Textå±æ€§å†™æˆäº†Binding(ç»‘å®š)å½¢å¼ï¼Œè¿™æ˜¯æŒ‡å°†ContentContentæ§ä»¶çš„Contnetå±æ€§ç»‘å®šåˆ°TextBlockæ§ä»¶çš„Textå±æ€§ä¸­ï¼Œå†™æˆä¼ªä»£ç å°±æ˜¯ï¼š 1TextBlock.Text = ContentContent.Content è¿™æ˜¯æ‚¨ç¬¬ä¸€æ¬¡åœ¨è¿™ä¸ªç³»åˆ—ä¸­çœ‹åˆ°Bindingï¼ˆç»‘å®šï¼‰çš„å‡ºç°ã€‚æˆ‘ä»¬å°†åœ¨åé¢ä¸“é—¨æ‹¿ä¸€ç« èŠ‚è¿›è¡Œæ¢è®¨ã€‚è¿™é‡Œèƒ½ç†è§£è¿™ä¸ªContentTemplateå°±è¡Œäº†ã€‚ ContentControlæ§ä»¶èƒ½ä¸èƒ½å®¹çº³å¤šä¸ªå­æ§ä»¶ï¼Ÿ ä¸èƒ½ï¼å› ä¸ºContentControlæ§ä»¶åªèƒ½æ˜¾ç¤ºContentå±æ€§é‡Œé¢çš„å†…å®¹ï¼Œè€ŒContentå±æ€§æ˜¯objectï¼Œåªèƒ½æ¥æ”¶ä¸€ä¸ªå¯¹è±¡ã€‚ HasContentå±æ€§ï¼šè¡¨ç¤ºContentControlæ˜¯å¦æœ‰å†…å®¹ã€‚ ContentStringFormatå±æ€§ï¼šè·å–æˆ–è®¾ç½®ContentControlè¦æ˜¾ç¤ºå­—ç¬¦ä¸²çš„æ ¼å¼ã€‚ ContentTemplateSelectorå±æ€§ï¼šæ¨¡æ¿é€‰æ‹©å™¨ï¼Œ æˆ‘ä»¬ä¼šåœ¨æ¨¡æ¿ä¸€ç« èŠ‚ä»‹ç»ã€‚ å¸¸è§„ç”¨æ³• 123456789101112&lt;Window x:Class=&quot;HelloWorld.MainWindow&quot; xmlns=&quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot; xmlns:x=&quot;http://schemas.microsoft.com/winfx/2006/xaml&quot; xmlns:d=&quot;http://schemas.microsoft.com/expression/blend/2008&quot; xmlns:mc=&quot;http://schemas.openxmlformats.org/markup-compatibility/2006&quot; xmlns:local=&quot;clr-namespace:HelloWorld&quot; mc:Ignorable=&quot;d&quot; Title=&quot;HelloWorld - www.wpfsoft.com&quot; Height=&quot;350&quot; Width=&quot;500&quot;&gt; &lt;ContentControl Foreground=&quot;Red&quot; FontSize=&quot;60&quot; HorizontalAlignment=&quot;Center&quot; VerticalAlignment=&quot;Center&quot;&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘&quot;/&gt; &lt;/ContentControl&gt;&lt;/Window&gt; è¿™æ¬¡æˆ‘ä»¬åœ¨ContentControlæ”¾äº†ä¸€ä¸ªButtonï¼Œéœ€è¦æ³¨æ„ä¸€ç‚¹çš„æ˜¯ï¼šButtonçš„å­—å·ä¼šéšç€ContentControlçš„è®¾ç½®è€Œå˜åŒ–ï¼Œä½†æ˜¯å­—ä½“é¢œè‰²ä¸ä¼šéšç€ContentControlçš„è®¾ç½®è€Œå˜åŒ–ã€‚ ButtonBaseåŸºç±»æŒ‰é’®ï¼Œå‡ ä¹æ¯ä¸ªå…·æœ‰UIç•Œé¢çš„è½¯ä»¶éƒ½ä¼šæœ‰å®ƒçš„èº«å½±ï¼Œè€ŒæŒ‰é’®çš„å½¢å¼ä¹Ÿæ˜¯æœ‰å¤šç§å¤šæ ·çš„ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œç®€å•çš„ç½—åˆ—ä¸€ä¸‹ã€‚ æŒ‰é’®åç§° è¯´æ˜ Button æ™®é€šæŒ‰é’® CheckBox å¤é€‰æ¡†æŒ‰é’® RadioButton å•é€‰æ¡†æŒ‰é’® ToggleButton æ˜¯CheckBoxã€RadioButtonçš„åŸºç±»ï¼Œè¡¨ç¤ºå¯ä»¥åˆ‡æ¢çŠ¶æ€ RepeatButton é‡å¤ï¼Œè¡¨ç¤ºä»æŒ‰ä¸‹åˆ°å¼¹å‡ºè¿‡ç¨‹ä¸­é‡å¤å¼•å‘Clickäº‹ä»¶ GridViewColumnHeader è¡¨ç¤ºGridViewColumn çš„åˆ—æ ‡é¢˜ï¼Œå…¶å®å®ƒä¹Ÿæ˜¯ä¸€ä¸ªæŒ‰é’® DataGridColumnHeader è¡¨ç¤ºDataGrid åˆ—æ ‡é¢˜ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªæŒ‰é’® DataGridRowHeader è¡¨ç¤ºDataGrid è¡Œæ ‡é¢˜ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªæŒ‰é’® ä¸Šé¢ä¾¿æ˜¯WPFä¸­çš„æŒ‰é’®ä½“ç³»ï¼Œè¿™äº›æŒ‰é’®éƒ½æœ‰ä¸€ä¸ªå…±åŒçš„åŸºç±»ButtonBaseï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬äº†è§£æ¸…æ¥šäº†ButtonBaseï¼Œå¯¹äºå­¦ä¹ ä¸Šé¢è¿™äº›æŒ‰é’®ï¼Œæœ‰è«å¤§çš„å¸®åŠ©ã€‚ ä¸€ã€ButtonBaseæ¦‚è¿° ButtonBaseæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œæ‰€ä»¥ï¼Œå®ƒä¸èƒ½è¢«å®ä¾‹åŒ–ã€‚æˆ‘ä»¬åªèƒ½åœ¨å®ƒçš„å­ç±»ä¸­å»ä½¿ç”¨å®ƒæä¾›çš„ä¸€äº›å±æ€§ã€äº‹ä»¶æˆ–æ–¹æ³•æˆå‘˜ã€‚å®ƒåªæœ‰ä¸€ä¸ªäº‹ä»¶ï¼Œå°±æ˜¯Clickå•å‡»äº‹ä»¶ï¼Œæ¯•ç«Ÿé¼ æ ‡åŒå‡»äº‹ä»¶åœ¨å®ƒçš„ControlåŸºç±»å°±æœ‰äº†å˜›ã€‚å¦å¤–ï¼Œå®ƒè¿˜æœ‰ä¸€ä¸ªéå¸¸å‰å®³çš„Commandå±æ€§ï¼Œè¿™ä¸ªå±æ€§å…¶å®æ˜¯ä¸€ä¸ªæ¥å£ï¼Œèµ·ä»€ä¹ˆä½œç”¨å‘¢ï¼Ÿå°±æ˜¯åœ¨å•å‡»æŒ‰é’®æ—¶ï¼Œå»æ‰§è¡Œè¿™ä¸ªCommandå±æ€§æ‰€æŒ‡å®šçš„ä¸€ä¸ªå…·ä½“å‘½ä»¤ã€‚ è¿™ä¸ªCommandå‘½ä»¤æ˜¯WPFå‘½ä»¤ç³»ç»Ÿé‡Œé¢çš„è§’è‰²ï¼Œä¹Ÿæ˜¯WPFä¼˜äºWinformçš„ä¸€ä¸ªå…·ä½“è¡¨ç°ï¼ŒCommandå‘½ä»¤ä¹Ÿæ˜¯MVVMæ¨¡å¼ä¸­æœ€é‡è¦çš„ä¸€ç¯ã€‚æˆ‘ä»¬ä¼šåœ¨åé¢ä¸“é—¨æ¢è®¨WPFçš„å‘½ä»¤ç³»ç»Ÿã€‚ æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å…ˆçœ‹çœ‹ButtonBaseçš„ç»“æ„å®šä¹‰ï¼š 1234567891011121314151617181920212223242526272829303132333435public abstract class ButtonBase : ContentControl, ICommandSource&#123; public static readonly RoutedEvent ClickEvent; public static readonly DependencyProperty CommandProperty; public static readonly DependencyProperty CommandParameterProperty; public static readonly DependencyProperty CommandTargetProperty; public static readonly DependencyProperty IsPressedProperty; public static readonly DependencyProperty ClickModeProperty; protected ButtonBase(); public IInputElement CommandTarget &#123; get; set; &#125; public object CommandParameter &#123; get; set; &#125; public ICommand Command &#123; get; set; &#125; public bool IsPressed &#123; get; protected set; &#125; public ClickMode ClickMode &#123; get; set; &#125; protected override bool IsEnabledCore &#123; get; &#125; public event RoutedEventHandler Click; protected override void OnAccessKey(AccessKeyEventArgs e); protected virtual void OnClick(); protected virtual void OnIsPressedChanged(DependencyPropertyChangedEventArgs e); protected override void OnKeyDown(KeyEventArgs e); protected override void OnKeyUp(KeyEventArgs e); protected override void OnLostKeyboardFocus(KeyboardFocusChangedEventArgs e); protected override void OnLostMouseCapture(MouseEventArgs e); protected override void OnMouseEnter(MouseEventArgs e); protected override void OnMouseLeave(MouseEventArgs e); protected override void OnMouseLeftButtonDown(MouseButtonEventArgs e); protected override void OnMouseLeftButtonUp(MouseButtonEventArgs e); protected override void OnMouseMove(MouseEventArgs e); protected internal override void OnRenderSizeChanged(SizeChangedInfo sizeInfo); &#125; äºŒã€ButtonBaseçš„å±æ€§ å±æ€§åç§° è¯´æ˜ CommandTarget è·å–æˆ–è®¾ç½®è¦å¯¹å…¶å¼•å‘æŒ‡å®šçš„å‘½ä»¤çš„å…ƒç´ ã€‚ CommandParameter è·å–æˆ–è®¾ç½®ä¸€ä¸ªå‘½ä»¤å‚æ•°ï¼Œè¿™ä¸ªå‚æ•°æ˜¯ä¼ é€’ç»™Command å±æ€§æ‰€æŒ‡å‘çš„å‘½ä»¤ã€‚ Command è·å–æˆ–è®¾ç½®è¦åœ¨æŒ‰æ­¤æŒ‰é’®æ—¶è°ƒç”¨çš„å‘½ä»¤ã€‚ IsPressed è·å–å½“å‰æŒ‰é’®æ˜¯å¦å¤„äºæ¿€æ´»çŠ¶æ€ã€‚ ClickMode è·å–æˆ–è®¾ç½®æŒ‰é’®çš„å•å‡»æ¨¡å¼ IsEnabledCore è·å–çš„å€¼ System.Windows.ContentElement.IsEnabled å±æ€§ã€‚ ä¸‰ã€ButtonBaseæ–¹æ³• ButtonBaseè¿˜æä¾›äº†ä¸¤ä¸ªè™šæ–¹æ³•ï¼Œåˆ†åˆ«æ˜¯OnClick()å’ŒOnIsPressedChangedï¼ˆï¼‰ã€‚è¯´æ˜è¿™ä¸¤ä¸ªæ–¹æ³•ä¹Ÿæ˜¯å¯ä»¥é‡å†™çš„ï¼ŒOnClickè¡¨ç¤ºåœ¨æŒ‰é’®å•å‡»æ—¶æ‰§è¡Œçš„æ–¹æ³•ã€‚ ButtonæŒ‰é’®Buttonå› ä¸ºç»§æ‰¿äº†ButtonBaseï¼Œè€ŒButtonBaseåˆç»§æ‰¿äº†ContentControlï¼Œæ‰€ä»¥ï¼ŒButtonå¯ä»¥é€šè¿‡è®¾ç½®Contentå±æ€§æ¥è®¾ç½®è¦æ˜¾ç¤ºçš„å†…å®¹ã€‚ä¾‹å¦‚ 1&lt;Button Content=&quot;WPFä¸­æ–‡ç½‘&quot;/&gt; æˆ‘ä»¬ä½¿ç”¨Buttonçš„æ—¶æœºï¼Œé€šå¸¸æ˜¯é¼ æ ‡ç‚¹å‡»äº‹ä»¶éœ€è¦æœ‰å“åº”æ“ä½œæ—¶ï¼Œæ‰€ä»¥ï¼ŒButtonçš„Clickäº‹ä»¶æ˜¯æœ€å¥½çš„é€‰æ‹©ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å…ˆçœ‹çœ‹å®ƒçš„ç»“æ„å®šä¹‰ï¼š 12345678910111213141516public class Button : ButtonBase&#123; public static readonly DependencyProperty IsDefaultProperty; public static readonly DependencyProperty IsCancelProperty; public static readonly DependencyProperty IsDefaultedProperty; public Button(); public bool IsDefault &#123; get; set; &#125; public bool IsCancel &#123; get; set; &#125; public bool IsDefaulted &#123; get; &#125; protected override void OnClick(); protected override AutomationPeer OnCreateAutomationPeer(); &#125; å±æ€§åˆ†æ å±æ€§ è¯´æ˜ IsDefault ç”¨æˆ·é€šè¿‡æŒ‰ ENTER é”®æ—¶è°ƒç”¨çš„é»˜è®¤æŒ‰é’®ã€‚ IsCancel ç”¨æˆ·å¯ä»¥é€šè¿‡æŒ‰ ESC é”®æ¥æ¿€æ´»å–æ¶ˆæŒ‰é’®ã€‚ IsDefaulted è·å–æŒ‰é’®æ˜¯å¦ä¸ºæŒ‰ ENTER é”®æ—¶è°ƒç”¨çš„é»˜è®¤æŒ‰é’®ã€‚ æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥åˆ†æButtonæ§ä»¶çš„ç”¨æ³•ä¸ç‰¹ç‚¹ã€‚ å‰ç«¯ä»£ç  1234567891011121314&lt;Window x:Class=&quot;HelloWorld.MainWindow&quot; xmlns=&quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot; xmlns:x=&quot;http://schemas.microsoft.com/winfx/2006/xaml&quot; xmlns:d=&quot;http://schemas.microsoft.com/expression/blend/2008&quot; xmlns:mc=&quot;http://schemas.openxmlformats.org/markup-compatibility/2006&quot; xmlns:local=&quot;clr-namespace:HelloWorld&quot; mc:Ignorable=&quot;d&quot; Title=&quot;HelloWorld - www.wpfsoft.com&quot; Height=&quot;350&quot; Width=&quot;500&quot;&gt; &lt;Button x:Name=&quot;_button&quot; Content=&quot;é€€å‡º&quot; Width=&quot;100&quot; Height=&quot;25&quot; Click=&quot;_button_Click&quot; IsDefault=&quot;True&quot;/&gt;&lt;/Window&gt; åç«¯ä»£ç  123456789101112131415161718namespace HelloWorld&#123; /// &lt;summary&gt; /// MainWindow.xaml çš„äº¤äº’é€»è¾‘ /// &lt;/summary&gt; public partial class MainWindow : Window &#123; public MainWindow() &#123; InitializeComponent(); &#125; private void _button_Click(object sender, RoutedEventArgs e) &#123; this.Close(); &#125; &#125;&#125; ToggleButtonåŸºç±»å› ä¸ºToggleButtonä½œä¸ºCheckBoxï¼ˆå¤é€‰æ¡†ï¼‰å’ŒRadioButtonï¼ˆå•é€‰æ¡†ï¼‰çš„åŸºç±»ï¼Œæˆ‘ä»¬åœ¨å­¦ä¹ CheckBoxå’ŒRadioButtonä¹‹å‰è¦å…ˆäº†è§£ä¸€ä¸‹è¿™ä¸ªåŸºç±»ã€‚ 12345678910111213141516171819202122232425public class ToggleButton : ButtonBase&#123; public static readonly RoutedEvent CheckedEvent; public static readonly RoutedEvent UncheckedEvent; public static readonly RoutedEvent IndeterminateEvent; public static readonly DependencyProperty IsCheckedProperty; public static readonly DependencyProperty IsThreeStateProperty; public ToggleButton(); public bool IsThreeState &#123; get; set; &#125; public bool? IsChecked &#123; get; set; &#125; public event RoutedEventHandler Checked; public event RoutedEventHandler Indeterminate; public event RoutedEventHandler Unchecked; public override string ToString(); protected virtual void OnChecked(RoutedEventArgs e); protected override void OnClick(); protected override AutomationPeer OnCreateAutomationPeer(); protected virtual void OnIndeterminate(RoutedEventArgs e); protected virtual void OnUnchecked(RoutedEventArgs e); protected internal virtual void OnToggle();&#125; ToggleButtonåŸºç±»æä¾›äº†ä¸¤ä¸ªå±æ€§å’Œä¸‰ä¸ªäº‹ä»¶ IsThreeStateå±æ€§ä¸ºtrueè¡¨ç¤ºæ§ä»¶æ”¯æŒ3ä¸ªçŠ¶æ€ï¼ŒIsCheckedå±æ€§ä¸ºtrueè¡¨ç¤ºå½“å‰æ§ä»¶å·²è¢«é€‰ä¸­ã€‚Checkedäº‹ä»¶è¡¨ç¤ºé€‰ä¸­æ—¶å¼•å‘çš„äº‹ä»¶ï¼ŒUncheckedäº‹ä»¶è¡¨ç¤ºä»é€‰ä¸­çŠ¶æ€æ”¹ä¸ºæœªé€‰çŠ¶æ€æ—¶å¼•å‘çš„äº‹ä»¶ï¼ŒIndeterminateäº‹ä»¶è¡¨ç¤ºä¸ç¡®å®šçŠ¶æ€æ—¶å¼•å‘çš„äº‹ä»¶ CheckBoxå¤é€‰æ¡†CheckBoxç»§æ‰¿äºToggleButtonï¼Œè€ŒToggleButtonæ‰ç»§æ‰¿äºButtonBaseåŸºç±»ã€‚ CheckBoxæ§ä»¶çš„ç»“æ„å®šä¹‰ï¼š 123456789public class CheckBox : ToggleButton&#123; public CheckBox(); protected override void OnAccessKey(AccessKeyEventArgs e); protected override AutomationPeer OnCreateAutomationPeer(); protected override void OnKeyDown(KeyEventArgs e); &#125; CheckBoxè‡ªèº«æ²¡æœ‰ä»€ä¹ˆç‰¹åˆ«å†…å®¹ã€‚ä¸€åˆ‡éƒ½ä½¿ç”¨å®ƒçš„çˆ¶ç±»æä¾›çš„å±æ€§ã€æ–¹æ³•å’Œäº‹ä»¶ã€‚æˆ‘ä»¬ä¸¾ä¾‹æ¥è¯´æ˜å®ƒçš„ç”¨æ³•ã€‚ å‰ç«¯ä»£ç  12345678910111213141516&lt;Window x:Class=&quot;HelloWorld.MainWindow&quot; xmlns=&quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot; xmlns:x=&quot;http://schemas.microsoft.com/winfx/2006/xaml&quot; xmlns:d=&quot;http://schemas.microsoft.com/expression/blend/2008&quot; xmlns:mc=&quot;http://schemas.openxmlformats.org/markup-compatibility/2006&quot; xmlns:local=&quot;clr-namespace:HelloWorld&quot; mc:Ignorable=&quot;d&quot; Title=&quot;HelloWorld - www.wpfsoft.com&quot; Height=&quot;350&quot; Width=&quot;500&quot;&gt; &lt;StackPanel Orientation=&quot;Horizontal&quot; HorizontalAlignment=&quot;Center&quot; VerticalAlignment=&quot;Center&quot;&gt; &lt;TextBlock Text=&quot;ä»Šæ™šåƒä»€ä¹ˆèœ?&quot; Margin=&quot;5&quot;/&gt; &lt;CheckBox Name=&quot;_checkbox1&quot; Content=&quot;çº¢çƒ§ç‰›è‚‰&quot; Margin=&quot;5&quot;/&gt; &lt;CheckBox Name=&quot;_checkbox2&quot; Content=&quot;éº»å©†è±†è…&quot; Margin=&quot;5&quot;/&gt; &lt;CheckBox Name=&quot;_checkbox3&quot; Content=&quot;å¤«å¦»è‚ºç‰‡&quot; Margin=&quot;5&quot;/&gt; &lt;Button x:Name=&quot;_button&quot; Content=&quot;æŸ¥çœ‹èœå•&quot; Click=&quot;_button_Click&quot;/&gt; &lt;/StackPanel&gt;&lt;/Window&gt; åç«¯ä»£ç  1234567891011121314151617181920212223242526namespace HelloWorld&#123; /// &lt;summary&gt; /// MainWindow.xaml çš„äº¤äº’é€»è¾‘ /// &lt;/summary&gt; public partial class MainWindow : Window &#123; public MainWindow() &#123; InitializeComponent(); &#125; private void _button_Click(object sender, RoutedEventArgs e) &#123; string order = string.Empty; if (_checkbox1.IsChecked == true) order += _checkbox1.Content + &quot;,&quot;; if (_checkbox2.IsChecked == true) order += _checkbox2.Content + &quot;,&quot;; if (_checkbox3.IsChecked == true) order += _checkbox3.Content; if(!string.IsNullOrEmpty(order)) MessageBox.Show(order); &#125; &#125;&#125; å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œè¿™æ˜¯å‰ç«¯ä»£ç å‘ˆç°çš„ç•Œé¢ã€‚F5å¯åŠ¨åï¼Œæˆ‘ä»¬å‹¾é€‰ä¸¤ä¸ªé€‰é¡¹ï¼Œç„¶åç‚¹å‡»æŸ¥çœ‹èœå•ï¼Œè§‚å¯Ÿç»“æœã€‚ æˆ‘ä»¬é€šè¿‡åˆ¤æ–­CheckBoxçš„IsCheckedå±æ€§ï¼Œæ¥è·å–å‰ç«¯ç”¨æˆ·çš„é€‰æ‹©ï¼Œè¿™é€šå¸¸æ˜¯CheckBoxæ§ä»¶æœ€å¸¸ç”¨çš„ç”¨æ³•ï¼Œç”±äºIsCheckedæ˜¯ä¸€ä¸ªä¾èµ–å±æ€§ï¼Œå®ƒè¿˜å¯ä»¥å‚ä¸ç»‘å®šï¼Œå½¢æˆMVMMçš„åº”ç”¨æ¨¡å¼ï¼Œå¾…æˆ‘ä»¬è®²åˆ°æ•°æ®ç»‘å®šç« èŠ‚ï¼Œè¿˜ä¼šè¿›ä¸€æ­¥è®²è§£æ§ä»¶å±æ€§çš„ç»‘å®šåº”ç”¨ã€‚ RadioButtonå•é€‰æ¡†RadioButtonä¹Ÿç»§æ‰¿äºToggleButtonï¼Œä½œç”¨æ˜¯å•é¡¹é€‰æ‹©ï¼Œæ‰€ä»¥è¢«ç§°ä¸ºå•é€‰æ¡†ã€‚æœ¬è´¨ä¸Šï¼Œå®ƒä¾ç„¶æ˜¯ä¸€ä¸ªæŒ‰é’®ï¼Œä¸€æ—¦è¢«é€‰ä¸­ï¼Œä¸ä¼šæ¸…é™¤ï¼Œé™¤éå®ƒâ€æ—è¾¹â€œçš„å•é€‰æ¡†è¢«é€‰ä¸­ã€‚ 1234567891011121314public class RadioButton : ToggleButton&#123; public static readonly DependencyProperty GroupNameProperty; public RadioButton(); public string GroupName &#123; get; set; &#125; protected override void OnAccessKey(AccessKeyEventArgs e); protected override void OnChecked(RoutedEventArgs e); protected override AutomationPeer OnCreateAutomationPeer(); protected internal override void OnToggle(); &#125; è¿™ä¸ªæ§ä»¶æœ‰ä¸€ä¸ªé‡è¦å±æ€§å«GroupNameâ€”â€”åˆ†ç»„åç§°ã€‚é»˜è®¤å€¼æ˜¯ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ã€‚ç”¨æ¥æŒ‡å®šå“ªäº›RadioButtonä¹‹é—´æ˜¯äº’ç›¸æ’æ–¥çš„ã€‚ æˆ‘ä»¬å°†å‰é¢çš„ä¾‹å­ç®€å•ä¿®æ”¹ä¸€ä¸‹ä»£ç ã€‚ å‰ç«¯ä»£ç  1234567&lt;StackPanel Orientation=&quot;Horizontal&quot; HorizontalAlignment=&quot;Center&quot; VerticalAlignment=&quot;Center&quot;&gt; &lt;TextBlock Text=&quot;ä»Šæ™šåƒä»€ä¹ˆèœ?&quot; Margin=&quot;5&quot;/&gt; &lt;RadioButton Name=&quot;_RadioButton1&quot; Content=&quot;çº¢çƒ§ç‰›è‚‰&quot; Margin=&quot;5&quot;/&gt; &lt;RadioButton Name=&quot;_RadioButton2&quot; Content=&quot;éº»å©†è±†è…&quot; Margin=&quot;5&quot;/&gt; &lt;RadioButton Name=&quot;_RadioButton3&quot; Content=&quot;å¤«å¦»è‚ºç‰‡&quot; Margin=&quot;5&quot;/&gt; &lt;Button x:Name=&quot;_button&quot; Content=&quot;æŸ¥çœ‹èœå•&quot; Click=&quot;_button_Click&quot;/&gt;&lt;/StackPanel&gt; åç«¯ä»£ç  1234567891011121314151617181920212223242526namespace HelloWorld&#123; /// &lt;summary&gt; /// MainWindow.xaml çš„äº¤äº’é€»è¾‘ /// &lt;/summary&gt; public partial class MainWindow : Window &#123; public MainWindow() &#123; InitializeComponent(); &#125; private void _button_Click(object sender, RoutedEventArgs e) &#123; string order = string.Empty; if (_RadioButton1.IsChecked == true) order += _RadioButton1.Content + &quot;,&quot;; if (_RadioButton2.IsChecked == true) order += _RadioButton2.Content + &quot;,&quot;; if (_RadioButton3.IsChecked == true) order += _RadioButton3.Content; if(!string.IsNullOrEmpty(order)) MessageBox.Show(order); &#125; &#125;&#125; F5è¿è¡Œä¹‹åï¼Œæˆ‘ä»¬ä¼šå‘ç°ï¼Œæ— è®ºæˆ‘ä»¬æ€ä¹ˆé€‰ï¼Œå§‹ç»ˆåªæœ‰ä¸€ä¸ªRadioButtonæŒ‰é’®è¢«é€‰ä¸­ã€‚ å¦‚æœæˆ‘ä»¬å¸Œæœ›RadioButtonæŒ‰åˆ†ç»„è¿›è¡Œå•é¡¹é€‰æ‹©ï¼Œè¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ æˆ‘ä»¬å¯ä»¥ä½¿ç”¨GroupNameåˆ†ç»„å±æ€§ï¼Œä¸¤ä¸¤ä¸€ç»„ï¼Œè®©ç”¨æˆ·å§‹ç»ˆéƒ½åªèƒ½é€‰æ‹©ä¸€è¤ä¸€ç´ ä¸¤ä¸ªèœï¼Œè¯·çœ‹ä»£ç ã€‚ å‰ç«¯ä»£ç  12345678&lt;StackPanel Orientation=&quot;Horizontal&quot; HorizontalAlignment=&quot;Center&quot; VerticalAlignment=&quot;Center&quot;&gt; &lt;TextBlock Text=&quot;ä»Šæ™šåƒä»€ä¹ˆèœ?&quot; Margin=&quot;5&quot;/&gt; &lt;RadioButton Name=&quot;_RadioButton1&quot; Content=&quot;çº¢çƒ§ç‰›è‚‰&quot; GroupName=&quot;è¤èœ&quot; Margin=&quot;5&quot;/&gt; &lt;RadioButton Name=&quot;_RadioButton2&quot; Content=&quot;ç³–é†‹æ’éª¨&quot; GroupName=&quot;è¤èœ&quot; Margin=&quot;5&quot;/&gt; &lt;RadioButton Name=&quot;_RadioButton3&quot; Content=&quot;éº»å©†è±†è…&quot; GroupName=&quot;ç´ èœ&quot; Margin=&quot;5&quot;/&gt; &lt;RadioButton Name=&quot;_RadioButton4&quot; Content=&quot;æ¸…ç‚’æ—¶è”¬&quot; GroupName=&quot;ç´ èœ&quot; Margin=&quot;5&quot;/&gt; &lt;Button x:Name=&quot;_button&quot; Content=&quot;æŸ¥çœ‹èœå•&quot; Click=&quot;_button_Click&quot;/&gt;&lt;/StackPanel&gt; åç«¯ä»£ç  123456789101112131415161718192021public partial class MainWindow : Window&#123; public MainWindow() &#123; InitializeComponent(); &#125; private void _button_Click(object sender, RoutedEventArgs e)&#123; string order = string.Empty; if (_RadioButton1.IsChecked == true) order += _RadioButton1.Content + &quot;,&quot;; if (_RadioButton2.IsChecked == true) order += _RadioButton2.Content + &quot;,&quot;; if (_RadioButton3.IsChecked == true) order += _RadioButton3.Content + &quot;,&quot;; if (_RadioButton4.IsChecked == true) order += _RadioButton4.Content; if (!string.IsNullOrEmpty(order)) MessageBox.Show(order);&#125; æ­¤æ—¶å†æ“ä½œæ—¶æˆ‘ä»¬å‘ç°ï¼Œçº¢çƒ§ç‰›è‚‰å’Œç³–é†‹æ’éª¨åªèƒ½äºŒé€‰ä¸€ï¼Œéº»å©†è±†è…å’Œæ¸…ç‚’æ—¶è”¬ä¹Ÿåªèƒ½äºŒé€‰ä¸€ã€‚ RepeatButtoné‡å¤æŒ‰é’®RepeatButton,é¡¾åæ€ä¹‰ï¼Œé‡å¤æ‰§è¡Œçš„æŒ‰é’®ã€‚å°±æ˜¯å½“æŒ‰é’®è¢«æŒ‰ä¸‹æ—¶ï¼Œæ‰€è®¢é˜…çš„å›è°ƒå‡½æ•°ä¼šä¸æ–­è¢«æ‰§è¡Œã€‚é‚£ä¹ˆï¼Œå¤šé•¿æ—¶é—´æ‰§è¡Œä¸€æ¬¡ï¼Ÿ æˆ‘ä»¬å…ˆçœ‹çœ‹å®ƒçš„ç»“æ„å®šä¹‰ï¼š 123456789101112131415161718192021public class RepeatButton : ButtonBase&#123; public static readonly DependencyProperty DelayProperty; public static readonly DependencyProperty IntervalProperty; public RepeatButton(); public int Delay &#123; get; set; &#125; public int Interval &#123; get; set; &#125; protected override void OnClick(); protected override AutomationPeer OnCreateAutomationPeer(); protected override void OnKeyDown(KeyEventArgs e); protected override void OnKeyUp(KeyEventArgs e); protected override void OnLostMouseCapture(MouseEventArgs e); protected override void OnMouseEnter(MouseEventArgs e); protected override void OnMouseLeave(MouseEventArgs e); protected override void OnMouseLeftButtonDown(MouseButtonEventArgs e); protected override void OnMouseLeftButtonUp(MouseButtonEventArgs e); &#125; ä¸€ã€å±æ€§åˆ†æ RepeatButton è‡ªèº«æä¾›äº†ä¸¤ä¸ªæ•´å‹å±æ€§ï¼Œåˆ†åˆ«æ˜¯Delay å’ŒInterval ã€‚ Delay å±æ€§ï¼šè¡¨ç¤ºå»¶æ—¶é‡å¤æ‰§è¡Œçš„æ¯«ç§’æ•°ï¼Œå°±æ˜¯è¯´ï¼ŒRepeatButtonè¢«æŒ‰ä¸‹åä¼šç«‹å³æ‰§è¡Œä¸€æ¬¡å›è°ƒå‡½æ•°ï¼Œå¦‚æœæ‚¨ä¸æ¾å¼€é¼ æ ‡ï¼Œåœ¨ç­‰å¾…Delay æ¯«ç§’åï¼Œå°±å¼€å§‹è¿›è¡Œé‡å¤æ‰§è¡Œé˜¶æ®µã€‚ Interval å±æ€§ï¼šè¡¨ç¤ºé‡å¤æ‰§è¡Œå›è°ƒå‡½æ•°çš„æ—¶é—´é—´éš”æ¯«ç§’æ•°ã€‚ æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è§‚å¯Ÿä¸‹é¢çš„ä»£ç çš„è¿è¡Œç»“æœã€‚ äºŒã€RepeatButton åº”ç”¨ç¤ºä¾‹ 1234&lt;StackPanel Orientation=&quot;Horizontal&quot; HorizontalAlignment=&quot;Center&quot; VerticalAlignment=&quot;Center&quot;&gt; &lt;TextBlock Text=&quot;ç‰™è†å·²åœ¨æ‰‹&quot; Margin=&quot;5 7 5 5&quot;/&gt; &lt;RepeatButton Name=&quot;_Button1&quot; Content=&quot;å¼€å§‹æŒ¤ç‰™è†&quot; Delay=&quot;1000&quot; Interval=&quot;500&quot; Click=&quot;_Button1_Click&quot; Margin=&quot;5&quot;/&gt; &lt;/StackPanel&gt; 123456789101112131415161718namespace HelloWorld&#123; /// &lt;summary&gt; /// MainWindow.xaml çš„äº¤äº’é€»è¾‘ /// &lt;/summary&gt; public partial class MainWindow : Window &#123; public MainWindow() &#123; InitializeComponent(); &#125; int count = 1; private void _Button1_Click(object sender, RoutedEventArgs e) &#123; Console.WriteLine($&quot;é‡å¤æ—¶é—´:&#123;DateTime.Now.ToLongTimeString()&#125; &#123;DateTime.Now.Millisecond&#125;,é‡å¤æ¬¡æ•°:&#123;count++&#125;&quot;); &#125; &#125;&#125; æˆ‘ä»¬ä»¥ç”Ÿæ´»ä¸­æŒ¤ç‰™è†ä¸ºä¾‹ï¼Œå½“å¼€å§‹æŒ¤çš„åŠ¨ä½œå‘ç”Ÿåï¼Œæˆ‘ä»¬ä¼šæŒç»­ä¸€å°ä¼šå„¿ï¼Œç„¶åæ‰æ¾å¼€ï¼Œæ­¤æ—¶ç‰™è†åœæ­¢å¾€å¤–æº¢å‡ºã€‚è§‚å¯Ÿä¸‹é¢çš„è¾“å‡ºç»“æœï¼š 12345678é‡å¤æ—¶é—´:14:37:28 476,é‡å¤æ¬¡æ•°:1é‡å¤æ—¶é—´:14:37:29 548,é‡å¤æ¬¡æ•°:2é‡å¤æ—¶é—´:14:37:30 51,é‡å¤æ¬¡æ•°:3é‡å¤æ—¶é—´:14:37:30 549,é‡å¤æ¬¡æ•°:4é‡å¤æ—¶é—´:14:37:31 89,é‡å¤æ¬¡æ•°:5é‡å¤æ—¶é—´:14:37:31 598,é‡å¤æ¬¡æ•°:6é‡å¤æ—¶é—´:14:37:32 185,é‡å¤æ¬¡æ•°:7é‡å¤æ—¶é—´:14:37:32 718,é‡å¤æ¬¡æ•°:8 ç»“æœæ˜¾ç¤ºï¼Œç¬¬ä¸€æ¬¡å’Œç¬¬äºŒæ¬¡è¾“å‡ºæ—¶é—´åˆšå¥½ä¸º1000æ¯«ç§’ï¼Œä¹Ÿå°±æ˜¯Delayå±æ€§åœ¨èµ·ä½œç”¨ã€‚ç„¶åï¼Œä»ç¬¬2æ¬¡å¼€å§‹ï¼Œæ¯ä¸¤æ¬¡ä¹‹é—´çš„æ—¶é—´é—´éš”å¤§çº¦ä¸º500æ¯«ç§’ï¼Œè¿™æ˜¯å› ä¸ºIntervalå±æ€§è¢«è®¾ç½®ä¸º500ã€‚ç›¸ä¿¡é€šè¿‡è¿™ä¸ªä¾‹å­ï¼Œæ‚¨å·²æ˜ç™½è¿™ä¸ªæŒ‰é’®çš„ç”¨æ³•ã€‚ Labelæ ‡ç­¾Labelæ§ä»¶ç»§æ‰¿äºContentControlæ§ä»¶ï¼Œå®ƒæ˜¯ä¸€ä¸ªæ–‡æœ¬æ ‡ç­¾ï¼Œå¦‚æœæ‚¨æƒ³ä¿®æ”¹å®ƒçš„æ ‡ç­¾å†…å®¹ï¼Œè¯·è®¾ç½®Contentå±æ€§ã€‚æˆ‘ä»¬æ›¾æè¿‡ContentControlçš„Contentå±æ€§æ˜¯objectç±»å‹ï¼Œæ„å‘³ç€Labelçš„Contentä¹Ÿæ˜¯å¯ä»¥è®¾ç½®ä¸ºä»»æ„çš„å¼•ç”¨ç±»å‹çš„ã€‚ æˆ‘ä»¬æ¥ä¸¾ä¸ªä¾‹å­ã€‚ 12345678&lt;StackPanel Orientation=&quot;Horizontal&quot; HorizontalAlignment=&quot;Center&quot; VerticalAlignment=&quot;Center&quot;&gt; &lt;Label Content=&quot;è¿™æ˜¯ä¸€ä¸ªLabelæ ‡ç­¾&quot;/&gt; &lt;Label&gt; &lt;Label.Content&gt; &lt;Button Content=&quot;ç¡®å®š&quot; Click=&quot;_Button1_Click&quot;/&gt; &lt;/Label.Content&gt; &lt;/Label&gt;&lt;/StackPanel&gt; 1234567891011public partial class MainWindow : Window&#123; public MainWindow() &#123; InitializeComponent(); &#125; private void _Button1_Click(object sender, RoutedEventArgs e)&#123; this.Close();&#125; æˆ‘ä»¬ç»™ç¬¬äºŒä¸ªæ ‡ç­¾çš„Contentå±æ€§è®¾ç½®äº†ä¸€ä¸ªæŒ‰é’®ï¼Œå¹¶å¯¹æŒ‰é’®çš„Clickäº‹ä»¶åšäº†è®¢é˜…å›è°ƒï¼ŒF5è¿è¡Œï¼Œäº‹å®è¯æ˜ï¼Œæ­¤æ—¶çš„Buttonæ˜¯å¯ä»¥æ­£å¸¸ä½¿ç”¨ ã€‚åªä¸è¿‡ï¼Œé€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬çš„Labelåªæ˜¯ç”¨æ¥æ˜¾ç¤ºä¸€æ®µæ–‡å­—ï¼Œå¾ˆå°‘åœ¨Contneté‡Œé¢ç¼–å†™å…¶å®ƒæ§ä»¶ä»£ç ã€‚å¦‚æœè¦ç¼–å†™å…¶å®ƒæ§ä»¶ä»£ç ä»¥å®ç°æ›´å¤æ‚çš„è‡ªå®šä¹‰æ§ä»¶æ•ˆæœï¼Œæˆ‘ä»¬å»ºè®®ä½¿ç”¨UserControlç”¨æˆ·æ§ä»¶ã€‚ å¯¹äºæ–‡æœ¬çš„æ˜¾ç¤ºï¼Œé™¤äº†å¯ä»¥åœ¨Labelä¸­æ˜¾ç¤ºï¼Œæˆ‘ä»¬è¿˜æœ‰ä¸€ä¸ªæ§ä»¶ä¹Ÿå¯ä»¥å®ç°ï¼Œé‚£å°±æ˜¯TextBlockæ–‡å­—å—ã€‚è€Œä¸”ï¼ŒTextBlockæ§ä»¶ç›´æ¥ä»FrameworkElementåŸºç±»ç»§æ‰¿è€Œæ¥ï¼Œæ•ˆç‡æ¯”Labelæ ‡ç­¾æ›´é«˜å“¦ã€‚ TextBlockæ–‡å­—å—TextBlockæ˜¯ä¸“ä¸šå¤„ç†æ–‡æœ¬æ˜¾ç¤ºçš„æ§ä»¶ï¼Œåœ¨åŠŸèƒ½ä¸Šæ¯”Labelæ›´å…¨é¢ã€‚å…ˆçœ‹ç»“æ„å®šä¹‰ï¼Œåä¸¾ä¾‹è¯´æ˜ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788public class TextBlock : FrameworkElement, IContentHost, IAddChildInternal, IAddChild, IServiceProvider&#123; public static readonly DependencyProperty BaselineOffsetProperty; public static readonly DependencyProperty IsHyphenationEnabledProperty; public static readonly DependencyProperty TextWrappingProperty; public static readonly DependencyProperty TextAlignmentProperty; public static readonly DependencyProperty PaddingProperty; public static readonly DependencyProperty LineStackingStrategyProperty; public static readonly DependencyProperty LineHeightProperty; public static readonly DependencyProperty TextEffectsProperty; public static readonly DependencyProperty TextDecorationsProperty; public static readonly DependencyProperty TextTrimmingProperty; public static readonly DependencyProperty ForegroundProperty; public static readonly DependencyProperty FontSizeProperty; public static readonly DependencyProperty FontStretchProperty; public static readonly DependencyProperty FontWeightProperty; public static readonly DependencyProperty FontStyleProperty; public static readonly DependencyProperty FontFamilyProperty; public static readonly DependencyProperty TextProperty; public static readonly DependencyProperty BackgroundProperty; public TextBlock(); public TextBlock(Inline inline); public FontWeight FontWeight &#123; get; set; &#125; public FontStyle FontStyle &#123; get; set; &#125; public FontFamily FontFamily &#123; get; set; &#125; public string Text &#123; get; set; &#125; public TextPointer ContentEnd &#123; get; &#125; public Typography Typography &#123; get; &#125; public LineBreakCondition BreakAfter &#123; get; &#125; public LineBreakCondition BreakBefore &#123; get; &#125; public FontStretch FontStretch &#123; get; set; &#125; public double BaselineOffset &#123; get; set; &#125; public double FontSize &#123; get; set; &#125; public TextWrapping TextWrapping &#123; get; set; &#125; public Brush Background &#123; get; set; &#125; public TextDecorationCollection TextDecorations &#123; get; set; &#125; public TextEffectCollection TextEffects &#123; get; set; &#125; public double LineHeight &#123; get; set; &#125; public LineStackingStrategy LineStackingStrategy &#123; get; set; &#125; public Thickness Padding &#123; get; set; &#125; public TextAlignment TextAlignment &#123; get; set; &#125; public TextTrimming TextTrimming &#123; get; set; &#125; public TextPointer ContentStart &#123; get; &#125; public bool IsHyphenationEnabled &#123; get; set; &#125; public Brush Foreground &#123; get; set; &#125; public InlineCollection Inlines &#123; get; &#125; protected virtual IEnumerator&lt;IInputElement&gt; HostedElementsCore &#123; get; &#125; protected override int VisualChildrenCount &#123; get; &#125; protected internal override IEnumerator LogicalChildren &#123; get; &#125; public static double GetBaselineOffset(DependencyObject element); public static FontFamily GetFontFamily(DependencyObject element); public static double GetFontSize(DependencyObject element); public static FontStretch GetFontStretch(DependencyObject element); public static FontStyle GetFontStyle(DependencyObject element); public static FontWeight GetFontWeight(DependencyObject element); public static Brush GetForeground(DependencyObject element); public static double GetLineHeight(DependencyObject element); public static LineStackingStrategy GetLineStackingStrategy(DependencyObject element); public static TextAlignment GetTextAlignment(DependencyObject element); public static void SetBaselineOffset(DependencyObject element, double value); public static void SetFontFamily(DependencyObject element, FontFamily value); public static void SetFontSize(DependencyObject element, double value); public static void SetFontStretch(DependencyObject element, FontStretch value); public static void SetFontStyle(DependencyObject element, FontStyle value); public static void SetFontWeight(DependencyObject element, FontWeight value); public static void SetForeground(DependencyObject element, Brush value); public static void SetLineHeight(DependencyObject element, double value); public static void SetLineStackingStrategy(DependencyObject element, LineStackingStrategy value); public static void SetTextAlignment(DependencyObject element, TextAlignment value); public TextPointer GetPositionFromPoint(Point point, bool snapToText); public bool ShouldSerializeBaselineOffset(); public bool ShouldSerializeInlines(XamlDesignerSerializationManager manager); public bool ShouldSerializeText(); protected sealed override Size ArrangeOverride(Size arrangeSize); protected virtual ReadOnlyCollection&lt;Rect&gt; GetRectanglesCore(ContentElement child); protected override Visual GetVisualChild(int index); protected sealed override HitTestResult HitTestCore(PointHitTestParameters hitTestParameters); protected virtual IInputElement InputHitTestCore(Point point); protected sealed override Size MeasureOverride(Size constraint); protected virtual void OnChildDesiredSizeChangedCore(UIElement child); protected override AutomationPeer OnCreateAutomationPeer(); protected sealed override void OnPropertyChanged(DependencyPropertyChangedEventArgs e); protected sealed override void OnRender(DrawingContext ctx); &#125; TextBlockæä¾›äº†éå¸¸ä¸°å¯Œçš„æ–‡æœ¬ç›¸å…³çš„å±æ€§ã€‚ å±æ€§ è¯´æ˜ FontWeight è·å–æˆ–è®¾ç½®TextBlockçš„å­—ä½“ç²—ç»† FontStyle è·å–æˆ–è®¾ç½®TextBlockçš„å­—ä½“æ ·å¼ï¼Œå¦‚æ–œä½“å­—ä½“ FontFamily è·å–æˆ–è®¾ç½®TextBlockçš„å­—ä½“ç³»åˆ—ï¼Œå¦‚å¾®è½¯é›…é»‘ Text è·å–æˆ–è®¾ç½®TextBlockçš„å­—ä½“å†…å®¹ã€‚ ContentEnd è¡¨ç¤ºè·å–TextBlockå†…å®¹çš„æœ€æœ«å°¾çš„TextPointerå¯¹è±¡ Typography è·å–æ­¤å…ƒç´ çš„å†…å®¹å½“å‰æœ‰æ•ˆçš„ç‰ˆå¼å˜ä½“ã€‚ FontStretch è·å–æˆ–è®¾ç½® TextBlock çš„å¸¸ç”¨å­—ä½“æ‹‰ä¼¸ç‰¹å¾ã€‚ BaselineOffset è·å–æˆ–è®¾ç½®æ–‡æœ¬çš„æ¯ä¸ªè¡Œç›¸å¯¹äºåŸºçº¿çš„åç§»é‡ã€‚ FontSize è·å–æˆ–è®¾ç½®TextBlockçš„å­—å· TextWrapping è·å–æˆ–è®¾ç½®TextBlockçš„æ–‡å­—çš„æ¢è¡Œæ–¹å¼ Background è·å–æˆ–è®¾ç½®TextBlockæ§ä»¶çš„èƒŒæ™¯é¢œè‰²ï¼ˆç”»åˆ·ï¼‰ TextEffects è·å–æˆ–è®¾ç½®è¦åº”ç”¨äºæ­¤å…ƒç´ ä¸­çš„æ–‡æœ¬å†…å®¹çš„æ•ˆæœã€‚ LineHeight è·å–æˆ–è®¾ç½®å„è¡Œå†…å®¹çš„é«˜åº¦ã€‚ Padding æŒ‡ç¤ºå†…å®¹åŒºåŸŸçš„è¾¹ç•Œä¹‹é—´å¡«å……ç©ºé—´çš„å®½åº¦ TextAlignment æŒ‡ç¤ºæ–‡æœ¬å†…å®¹çš„æ°´å¹³å¯¹é½æ–¹å¼ã€‚ TextTrimming è·å–æˆ–è®¾ç½®åœ¨å†…å®¹è¶…å‡ºå†…å®¹åŒºåŸŸæ—¶è¦é‡‡ç”¨çš„æ–‡æœ¬å‰ªè£è¡Œä¸ºã€‚ Foreground è·å–æˆ–è®¾ç½®æ–‡æœ¬å†…å®¹çš„å­—ä½“é¢œè‰²ï¼ˆç”»åˆ·ï¼‰ Inlines è¿™ä¸ªå±æ€§æ˜¯ä¸€ä¸ªé›†åˆï¼Œå…¶ä¸­çš„å…ƒç´ è¡¨ç¤ºå†…è”æµå†…å®¹å…ƒç´ ï¼Œç®€å•ç‚¹è¯´ï¼Œä¸€è¡Œæ–‡æœ¬å¯ä»¥çœ‹æˆæ˜¯ä¸€ä¸ªInlineå…ƒç´ ï¼Œè€ŒTextBlockå¯ä»¥æ¥å—å¤šä¸ªInlineã€‚Runç»§æ‰¿äºInlineï¼Œå®é™…ä½¿ç”¨ä¸­ï¼Œæˆ‘ä»¬ä¼šåˆ›å»ºå¤šä¸ªRunå®ä¾‹ï¼Œå¯ä»¥å•ç‹¬ä¸ºæ¯ä¸ªRunå¯¹è±¡è®¾ç½®å­—ä½“å­—å·é¢œè‰²ç­‰ç­‰ã€‚ ContentStart è¡¨ç¤ºè·å–TextBlockå†…å®¹çš„æœ€å¼€å§‹çš„TextPointerå¯¹è±¡ æ¥ä¸‹æ¥ï¼Œ æˆ‘ä»¬å°†ä¸Šé¢å¸¸ç”¨çš„å±æ€§åœ¨ä¾‹å­ä¸­å¾—ä»¥ä½“ç°ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354&lt;Window x:Class=&quot;HelloWorld.MainWindow&quot; xmlns=&quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot; xmlns:x=&quot;http://schemas.microsoft.com/winfx/2006/xaml&quot; xmlns:d=&quot;http://schemas.microsoft.com/expression/blend/2008&quot; xmlns:mc=&quot;http://schemas.openxmlformats.org/markup-compatibility/2006&quot; xmlns:local=&quot;clr-namespace:HelloWorld&quot; mc:Ignorable=&quot;d&quot; FontSize=&quot;16&quot; Title=&quot;HelloWorld - www.wpfsoft.com&quot; Height=&quot;350&quot; Width=&quot;500&quot;&gt; &lt;WrapPanel&gt; &lt;TextBlock Text=&quot;è¿™æ˜¯ä¸€ä¸ªTextBlockæ–‡å­—å—&quot; Margin=&quot;5&quot;/&gt; &lt;TextBlock Text=&quot;ç²—ä½“æ–‡å­—&quot; FontWeight=&quot;Bold&quot; Margin=&quot;5&quot;/&gt; &lt;TextBlock Text=&quot;ç²—ä½“æ–‡å­—&quot; FontWeight=&quot;Light&quot; Margin=&quot;5&quot;/&gt; &lt;TextBlock Text=&quot;æ–œä½“æ–‡å­—&quot; FontStyle=&quot;Italic&quot; Margin=&quot;5&quot;/&gt; &lt;TextBlock Text=&quot;å¾®è½¯é›…é»‘&quot; FontFamily=&quot;Microsoft YaHei UI&quot; Margin=&quot;5&quot;/&gt; &lt;TextBlock Text=&quot;å¤§å·å­—ä½“&quot; FontSize=&quot;30&quot; Margin=&quot;5&quot;/&gt; &lt;TextBlock Text=&quot;çº¢è‰²æ–‡å­—&quot; Foreground=&quot;Red&quot; Margin=&quot;5&quot;/&gt; &lt;TextBlock Text=&quot;åº•è‰²æ–‡å­—&quot; Foreground=&quot;Yellow&quot; Background=&quot;Red&quot; Margin=&quot;5&quot;/&gt; &lt;TextBlock Text=&quot;å†…é—´è·æ–‡å­—&quot; Foreground=&quot;Yellow&quot; Background=&quot;Red&quot; Padding=&quot;10&quot; Margin=&quot;5&quot;/&gt; &lt;TextBlock Background=&quot;LightGray&quot; Height=&quot;25&quot;&gt; &lt;Run Foreground=&quot;Red&quot;&gt;è¿™è¡Œæ–‡å­—&lt;/Run&gt; &lt;Run Foreground=&quot;Green&quot;&gt;ç”±ä¸‰éƒ¨åˆ†&lt;/Run&gt; &lt;Run Foreground=&quot;Blue&quot;&gt;ç»„æˆ&lt;/Run&gt; &lt;/TextBlock&gt; &lt;Grid Width=&quot;150&quot; Height=&quot;100&quot; Margin=&quot;5&quot; Background=&quot;LightGoldenrodYellow&quot;&gt; &lt;TextBlock Text=&quot;è¿™æ®µæ–‡å­—ä½“ç°äº†æ–‡å­—çš„æ–‡æœ¬æ¢è¡Œå±æ€§TextWrapping&quot; TextWrapping=&quot;Wrap&quot; Margin=&quot;10&quot;/&gt; &lt;/Grid&gt; &lt;!--ä½¿ç”¨Run--&gt; &lt;Grid&gt; &lt;TextBlock x:Name=&quot;textblock&quot; Width=&quot;320&quot; Height=&quot;100&quot; FontSize=&quot;15&quot; FontFamily=&quot;å¾®è½¯é›…é»‘&quot; FontWeight=&quot;Black&quot; FontStretch=&quot;Condensed&quot; Foreground=&quot;#dddddd&quot; Background=&quot;Teal&quot; TextAlignment=&quot;Center&quot; TextWrapping=&quot;Wrap&quot; TextTrimming=&quot;CharacterEllipsis&quot; Margin=&quot;10&quot; Padding=&quot;5&quot; HorizontalAlignment=&quot;Left&quot; VerticalAlignment=&quot;Center&quot; LineHeight=&quot;30&quot; ToolTip=&quot;ã€Šä¸´æ±Ÿä»™Â·æ»šæ»šé•¿æ±Ÿä¸œé€æ°´ã€‹&quot;&gt; &lt;Run Foreground=&quot;#CDB632&quot; TextDecorations=&quot;Underline&quot;&gt; æ»šæ»šé•¿æ±Ÿä¸œé€æ°´ï¼ŒæµªèŠ±æ·˜å°½è‹±é›„ã€‚æ˜¯éæˆè´¥è½¬å¤´ç©ºã€‚é’å±±ä¾æ—§åœ¨ï¼Œå‡ åº¦å¤•é˜³çº¢ã€‚ &lt;/Run&gt; &lt;Run Text=&quot;ç™½å‘æ¸”æ¨µæ±Ÿæ¸šä¸Šï¼Œæƒ¯çœ‹ç§‹æœˆæ˜¥é£ã€‚ä¸€å£¶æµŠé…’å–œç›¸é€¢ã€‚å¤ä»Šå¤šå°‘äº‹ï¼Œéƒ½ä»˜ç¬‘è°ˆä¸­ã€‚ &quot;&gt; &lt;/Run&gt; &lt;/TextBlock&gt; &lt;/Grid&gt; &lt;/WrapPanel&gt;&lt;/Window&gt; TextBlockå¤§å¤šæ•°çš„å±æ€§åº”ç”¨éƒ½æ¯”è¾ƒç®€å•ï¼Œå®¹æ˜“ç†è§£ã€‚Inlineså±æ€§æ˜¯ä¸€ä¸ªæ¯”è¾ƒå¼ºå¤§çš„å±æ€§ï¼Œæ·±å…¥ç†è§£åï¼Œå¯ä»¥å®ç°æ„æƒ³ä¸åˆ°çš„æ•ˆæœã€‚å¦å¤–ï¼ŒTextEffectsä¹Ÿæ˜¯ä¸€ä¸ªéå¸¸å¼ºå¤§çš„å±æ€§ï¼Œè¿™éœ€è¦æŒæ¡WPFçš„åŠ¨ç”»ã€è§¦å‘å™¨ã€å…³é”®å¸§ç­‰çŸ¥è¯†ï¼Œæ‰èƒ½å®ç°æ–‡æœ¬çš„åŠ¨ç”»ç‰¹æ•ˆã€‚æˆ‘ä»¬å°†åœ¨å­¦å®ŒåŠ¨ç”»åï¼Œå†å›å¤´æ¢è®¨è¿™äº›å†…å®¹ã€‚ ä¸æ–‡æœ¬ç›¸å…³çš„è¿˜æœ‰ä¸¤ä¸ªè¾“å…¥æ§ä»¶ï¼Œå³TextBoxå’ŒPasswordBoxã€‚ä¸‹ä¸€èŠ‚ï¼Œæˆ‘ä»¬æ¥æ¢è®¨TextBoxã€‚ TextBoxæ–‡æœ¬æ¡†ä¸€ã€æ¦‚è¿° å‡ ä¹æ‰€æœ‰çš„æ–‡æœ¬ã€æ•°å­—ã€ç¬¦å·çš„è¾“å…¥éƒ½æ˜¯ç”¨TextBoxæ–‡æœ¬æ¡†æ¥å®Œæˆçš„ã€‚TextBoxç”¨æ¥è·å–ç”¨æˆ·çš„é”®ç›˜è¾“å…¥çš„ä¿¡æ¯ï¼Œè¿™ä¹Ÿæ˜¯ä¸€ä¸ªå¸¸ç”¨çš„æ§ä»¶ã€‚å®ƒç»§æ‰¿äºTextBoxBaseï¼Œè€ŒTextBoxBaseåˆç»§æ‰¿äºControlï¼Œæˆ‘ä»¬åœ¨å‰é¢å·²ç»ä»‹ç»è¿‡ControlåŸºç±»ï¼Œæˆ‘ä»¬å…ˆçœ‹çœ‹å®ƒåŠTextBoxBaseåŸºç±»çš„ç»“æ„å®šä¹‰ï¼š äºŒã€TextBoxBaseåŸºç±» 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091929394public abstract class TextBoxBase : Control&#123; public static readonly DependencyProperty IsReadOnlyProperty; public static readonly RoutedEvent SelectionChangedEvent; public static readonly RoutedEvent TextChangedEvent; public static readonly DependencyProperty IsSelectionActiveProperty; public static readonly DependencyProperty CaretBrushProperty; public static readonly DependencyProperty SelectionOpacityProperty; public static readonly DependencyProperty SelectionBrushProperty; public static readonly DependencyProperty AutoWordSelectionProperty; public static readonly DependencyProperty IsInactiveSelectionHighlightEnabledProperty; public static readonly DependencyProperty IsUndoEnabledProperty; public static readonly DependencyProperty VerticalScrollBarVisibilityProperty; public static readonly DependencyProperty HorizontalScrollBarVisibilityProperty; public static readonly DependencyProperty AcceptsTabProperty; public static readonly DependencyProperty AcceptsReturnProperty; public static readonly DependencyProperty IsReadOnlyCaretVisibleProperty; public static readonly DependencyProperty UndoLimitProperty; public double ViewportWidth &#123; get; &#125; public double ExtentHeight &#123; get; &#125; public double ExtentWidth &#123; get; &#125; public ScrollBarVisibility VerticalScrollBarVisibility &#123; get; set; &#125; public bool AcceptsReturn &#123; get; set; &#125; public SpellCheck SpellCheck &#123; get; &#125; public bool AcceptsTab &#123; get; set; &#125; public bool IsReadOnlyCaretVisible &#123; get; set; &#125; public double ViewportHeight &#123; get; &#125; public ScrollBarVisibility HorizontalScrollBarVisibility &#123; get; set; &#125; public double HorizontalOffset &#123; get; &#125; public double SelectionOpacity &#123; get; set; &#125; public bool CanUndo &#123; get; &#125; public bool CanRedo &#123; get; &#125; public bool IsUndoEnabled &#123; get; set; &#125; public int UndoLimit &#123; get; set; &#125; public bool AutoWordSelection &#123; get; set; &#125; public Brush SelectionBrush &#123; get; set; &#125; public bool IsReadOnly &#123; get; set; &#125; public Brush CaretBrush &#123; get; set; &#125; public bool IsSelectionActive &#123; get; &#125; public bool IsInactiveSelectionHighlightEnabled &#123; get; set; &#125; public double VerticalOffset &#123; get; &#125; public event TextChangedEventHandler TextChanged; public event RoutedEventHandler SelectionChanged; public void AppendText(string textData); public void BeginChange(); public void Copy(); public void Cut(); public IDisposable DeclareChangeBlock(); public void EndChange(); public void LineDown(); public void LineLeft(); public void LineRight(); public void LineUp(); public void LockCurrentUndoUnit(); public override void OnApplyTemplate(); public void PageDown(); public void PageLeft(); public void PageRight(); public void PageUp(); public void Paste(); public bool Redo(); public void ScrollToEnd(); public void ScrollToHome(); public void ScrollToHorizontalOffset(double offset); public void ScrollToVerticalOffset(double offset); public void SelectAll(); public bool Undo(); protected override void OnContextMenuOpening(ContextMenuEventArgs e); protected override void OnDragEnter(DragEventArgs e); protected override void OnDragLeave(DragEventArgs e); protected override void OnDragOver(DragEventArgs e); protected override void OnDrop(DragEventArgs e); protected override void OnGiveFeedback(GiveFeedbackEventArgs e); protected override void OnGotKeyboardFocus(KeyboardFocusChangedEventArgs e); protected override void OnKeyDown(KeyEventArgs e); protected override void OnKeyUp(KeyEventArgs e); protected override void OnLostFocus(RoutedEventArgs e); protected override void OnLostKeyboardFocus(KeyboardFocusChangedEventArgs e); protected override void OnMouseDown(MouseButtonEventArgs e); protected override void OnMouseMove(MouseEventArgs e); protected override void OnMouseUp(MouseButtonEventArgs e); protected override void OnMouseWheel(MouseWheelEventArgs e); protected override void OnPreviewKeyDown(KeyEventArgs e); protected override void OnQueryContinueDrag(QueryContinueDragEventArgs e); protected override void OnQueryCursor(QueryCursorEventArgs e); protected virtual void OnSelectionChanged(RoutedEventArgs e); protected override void OnTemplateChanged(ControlTemplate oldTemplate, ControlTemplate newTemplate); protected virtual void OnTextChanged(TextChangedEventArgs e); protected override void OnTextInput(TextCompositionEventArgs e); &#125; æˆ‘ä»¬çœ‹ä¸€çœ‹TextBoxBaseåŸºç±»éƒ½æä¾›äº†å“ªäº›æˆå‘˜ å±æ€§æˆå‘˜ å±æ€§åç§° è¯´æ˜ VerticalScrollBarVisibility å‚ç›´æ»šåŠ¨æ¡æ˜¯å¦æ˜¾ç¤º HorizontalScrollBarVisibility æ°´å¹³æ»šåŠ¨æ¡æ˜¯å¦æ˜¾ç¤º AcceptsReturn è¡¨ç¤ºç”¨æˆ·æŒ‰ä¸‹å›è½¦é”®æ—¶æ˜¯å¦æ’å…¥æ–°è¡Œã€‚ AcceptsTab ç”¨æ¥è®¾ç½®ç”¨æˆ·æŒ‰ä¸‹tabé”®çš„å“åº”ï¼Œä¸ºtrueè¡¨ç¤ºæ’å…¥ä¸€ä¸ªåˆ¶è¡¨ç¬¦ï¼Œå¦åˆ™å°†ç„¦ç‚¹ç§»åŠ¨åˆ°æ ‡è®°ä¸ºåˆ¶è¡¨ä½çš„ä¸‹ä¸€ä¸ªæ§ä»¶ä¸”ä¸æ’å…¥åˆ¶è¡¨ç¬¦ã€‚ IsReadOnlyCaretVisible è¡¨ç¤ºåªè¯»æ–‡æœ¬æ¡†æ˜¯å¦æ˜¾ç¤ºæ’å…¥ç¬¦å·ï¼Œç”¨å¾—è¾ƒå°‘ã€‚ SelectionOpacity ç”¨æ¥è®¾ç½®ç”¨æˆ·é€‰ä¸­çš„æ–‡æœ¬çš„é€æ˜åº¦ã€‚ IsUndoEnabled è¡¨ç¤ºæ–‡æœ¬ç¼–è¾‘æ§ä»¶æ˜¯å¦å¯ç”¨æ’¤æ¶ˆæ”¯æŒã€‚ UndoLimit è·å–æˆ–è®¾ç½®å­˜å‚¨åœ¨æ’¤æ¶ˆé˜Ÿåˆ—ä¸­çš„æ“ä½œæ•°ç›®ã€‚ AutoWordSelection è¡¨ç¤ºè‡ªåŠ¨é€‰æ‹©å­—è¯ï¼Œé»˜è®¤ä¸ºfalseã€‚ SelectionBrush è¡¨ç¤ºç”¨æˆ·é€‰æ‹©çš„æ–‡æœ¬æ®µè½çš„ç”»ç¬”ï¼Œæ¯”è¾ƒå¸¸ç”¨ã€‚ IsReadOnly è¡¨ç¤ºæ–‡æœ¬æ¡†æ˜¯å¦åªè¯»ï¼Œè¿™ä¸ªå±æ€§ç»å¸¸ä½¿ç”¨ã€‚ CaretBrush è¡¨ç¤ºè·å–æˆ–è®¾ç½®ç”¨äºç»˜åˆ¶çš„æ–‡æœ¬æ¡†ä¸­æ’å…¥ç¬¦å·çš„ç”»ç¬”ã€‚ IsInactiveSelectionHighlightEnabled è¡¨ç¤ºè·å–æˆ–è®¾ç½®ä¸€ä¸ªå€¼ï¼Œè¯¥å€¼æŒ‡ç¤ºå½“æ–‡æœ¬æ¡†æ²¡æœ‰ç„¦ç‚¹æ—¶ï¼Œæ–‡æœ¬æ¡†ä¸­æ˜¯å¦æ˜¾ç¤ºé€‰å®šçš„æ–‡æœ¬ã€‚ äº‹ä»¶æˆå‘˜ TextBoxBaseåŸºç±»æä¾›äº†ä¸¤ä¸ªäº‹ä»¶ï¼Œåˆ†åˆ«æ˜¯TextChangedå’ŒSelectionChangedã€‚ TextChangedäº‹ä»¶ï¼šåªè¦æ–‡æœ¬æ¡†ä¸­çš„å†…å®¹è¢«ä¿®æ”¹ï¼Œå°†ä¼šè§¦å‘å¼•äº‹ä»¶ï¼Œè¿™é€šå¸¸ç”¨æ¥åšä¸€äº›åˆ¤æ–­ä¸šåŠ¡ã€‚æ¯”å¦‚æŸä¸ªæ–‡æœ¬æ¡†åªèƒ½è¾“å…¥æ•°å­—ï¼Œé‚£å°±å¯ä»¥å»è®¢é˜…TextChangedäº‹ä»¶ã€‚ SelectionChangedäº‹ä»¶ï¼šé€‰ä¸­çš„æ–‡æœ¬æ¡†å†…å®¹å‘ç”Ÿæ”¹å˜æ—¶å¼•å‘çš„äº‹ä»¶ã€‚ ä¸‰ã€TextBoxæ§ä»¶ åœ¨äº†è§£TextBoxBaseåŸºç±»ä¹‹åï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹è¿™ä¸ªæ§ä»¶æœ¬èº«æä¾›äº†å“ªäº›å±æ€§ã€æ–¹æ³•å’Œäº‹ä»¶ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051public class TextBox : TextBoxBase, IAddChild, ITextBoxViewHost&#123; public static readonly DependencyProperty TextWrappingProperty; public static readonly DependencyProperty MinLinesProperty; public static readonly DependencyProperty MaxLinesProperty; public static readonly DependencyProperty TextProperty; public static readonly DependencyProperty CharacterCasingProperty; public static readonly DependencyProperty MaxLengthProperty; public static readonly DependencyProperty TextAlignmentProperty; public static readonly DependencyProperty TextDecorationsProperty; public TextBox(); public int MinLines &#123; get; set; &#125; public int MaxLines &#123; get; set; &#125; public string Text &#123; get; set; &#125; public CharacterCasing CharacterCasing &#123; get; set; &#125; public int MaxLength &#123; get; set; &#125; public TextAlignment TextAlignment &#123; get; set; &#125; public int CaretIndex &#123; get; set; &#125; public int SelectionLength &#123; get; set; &#125; public int SelectionStart &#123; get; set; &#125; public Typography Typography &#123; get; &#125; public int LineCount &#123; get; &#125; public TextDecorationCollection TextDecorations &#123; get; set; &#125; public string SelectedText &#123; get; set; &#125; public TextWrapping TextWrapping &#123; get; set; &#125; protected internal override IEnumerator LogicalChildren &#123; get; &#125; public void Clear(); public int GetCharacterIndexFromLineIndex(int lineIndex); public int GetCharacterIndexFromPoint(Point point, bool snapToText); public int GetFirstVisibleLineIndex(); public int GetLastVisibleLineIndex(); public int GetLineIndexFromCharacterIndex(int charIndex); public int GetLineLength(int lineIndex); public string GetLineText(int lineIndex); public int GetNextSpellingErrorCharacterIndex(int charIndex, LogicalDirection direction); public Rect GetRectFromCharacterIndex(int charIndex, bool trailingEdge); public Rect GetRectFromCharacterIndex(int charIndex); public SpellingError GetSpellingError(int charIndex); public int GetSpellingErrorLength(int charIndex); public int GetSpellingErrorStart(int charIndex); public void ScrollToLine(int lineIndex); public void Select(int start, int length); public bool ShouldSerializeText(XamlDesignerSerializationManager manager); protected override Size MeasureOverride(Size constraint); protected override AutomationPeer OnCreateAutomationPeer(); protected override void OnPropertyChanged(DependencyPropertyChangedEventArgs e); &#125; å±æ€§æˆå‘˜ å±æ€§åç§° è¯´æ˜ MinLines è·å–æˆ–è®¾ç½®æœ€å°å¯è§çš„è¡Œæ•°ã€‚ MaxLines è·å–æˆ–è®¾ç½®å¯è§è¡Œçš„æœ€å¤§æ•°ç›®ã€‚ Text è·å–æˆ–è®¾ç½®æ–‡æœ¬æ¡†çš„æ–‡æœ¬å†…å®¹ã€‚ CharacterCasing è·å–æˆ–è®¾ç½®æ–‡æœ¬æ¡†å­—ç¬¦çš„å¤§å°å†™å½¢å¼ï¼Œé»˜è®¤ä¸è½¬æ¢ã€‚ å®ƒæ˜¯ä¸€ä¸ªæšä¸¾ï¼ŒNormalè¡¨ç¤ºä¸è½¬æ¢å¤§å°å†™ï¼ŒLowerè¡¨ç¤ºå…¨éƒ¨è½¬æ¢æˆå°å†™ï¼ŒUpperè¡¨ç¤ºå…¨éƒ¨è½¬æ¢æˆå¤§å†™ MaxLength è·å–æˆ–è®¾ç½®æœ€å¤§å¯ä»¥åœ¨æ–‡æœ¬æ¡†ä¸­æ‰‹åŠ¨è¾“å…¥çš„å­—ç¬¦æ•°ã€‚ TextAlignment è·å–æˆ–è®¾ç½®æ–‡æœ¬æ¡†çš„å†…å®¹çš„æ°´å¹³å¯¹é½æ–¹å¼ã€‚ä¾‹å¦‚å·¦å¯¹é½ï¼Œå³å¯¹é½ï¼Œå±…åœ¨å¯¹é½å’Œä¸¤ç«¯å¯¹é½ã€‚ CaretIndex è·å–æˆ–è®¾ç½®æ’å…¥ç‚¹ç§»åŠ¨çš„æ’å…¥ä½ç½®ç´¢å¼•ã€‚ SelectionLength è·å–æˆ–è®¾ç½®ä¸€ä¸ªå€¼ï¼Œè¯¥å€¼åœ¨æ–‡æœ¬æ¡†ä¸­å½“å‰æ‰€é€‰å†…å®¹ä¸­çš„å­—ç¬¦æ•°ã€‚ SelectionStart è·å–æˆ–è®¾ç½®å½“å‰æ‰€é€‰å†…å®¹çš„èµ·å§‹ä½ç½®çš„å­—ç¬¦ç´¢å¼•ã€‚ Typography è·å–æ–‡æœ¬æ¡†ä¸­çš„æ–‡æœ¬å†…å®¹çš„å½“å‰æœ‰æ•ˆçš„ç‰ˆå¼å˜ä½“ã€‚ LineCount è·å–æ–‡æœ¬æ¡†ä¸­çš„æ€»è¡Œæ•°ã€‚ TextDecorations è·å–è¦åº”ç”¨äºæ–‡æœ¬æ¡†ä¸­çš„æ–‡æœ¬ä¿®é¥°ã€‚ SelectedText è·å–æˆ–è®¾ç½®æ–‡æœ¬æ¡†ä¸­å½“å‰é€‰æ‹©çš„å†…å®¹ã€‚ TextWrapping è·å–æˆ–è®¾ç½®æ–‡æœ¬æ¡†ä¸­æ–‡æœ¬çš„æ¢è¡Œæ–¹å¼ã€‚è¿™ä¸ªå±æ€§æ¯”è¾ƒå¸¸ç”¨ï¼Œåœ¨è¾ƒé•¿çš„æ–‡å­—æ®µè½æ˜¾ç¤ºæ—¶å¯ä»¥è®¾ç½®ä¸ºWrapï¼Œè¿™æ ·è‡ªåŠ¨æ¢è¡Œï¼Œç•Œé¢å‘ˆç°çš„æ•ˆæœæ¯”è¾ƒä»¤äººæ»¡æ„ã€‚ TextBoxæ–‡æœ¬æ¡†æœ¬èº«æ²¡æœ‰ä»»åŠ¡äº‹ä»¶ï¼Œéƒ½æ˜¯ç»§æ‰¿çˆ¶ç±»çš„äº‹ä»¶ã€‚æˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹å®ƒçš„ç®€å•ä½¿ç”¨ç¤ºä¾‹ã€‚ å‰ç«¯ä»£ç  1234567891011121314&lt;Window x:Class=&quot;HelloWorld.MainWindow&quot; xmlns=&quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot; xmlns:x=&quot;http://schemas.microsoft.com/winfx/2006/xaml&quot; xmlns:d=&quot;http://schemas.microsoft.com/expression/blend/2008&quot; xmlns:mc=&quot;http://schemas.openxmlformats.org/markup-compatibility/2006&quot; xmlns:local=&quot;clr-namespace:HelloWorld&quot; mc:Ignorable=&quot;d&quot; FontSize=&quot;16&quot; Title=&quot;HelloWorld - www.wpfsoft.com&quot; Height=&quot;350&quot; Width=&quot;500&quot;&gt; &lt;StackPanel Orientation=&quot;Horizontal&quot; HorizontalAlignment=&quot;Center&quot; VerticalAlignment=&quot;Center&quot;&gt; &lt;TextBlock Text=&quot;ç”¨æˆ·å&quot; Margin=&quot;5&quot;/&gt; &lt;TextBox x:Name=&quot;_textbox&quot; Width=&quot;100&quot; Height=&quot;25&quot; MaxLength=&quot;10&quot; CharacterCasing=&quot;Upper&quot;/&gt; &lt;Button x:Name=&quot;_button&quot; Content=&quot;ç¡®å®š&quot; Height=&quot;25&quot; Margin=&quot;5 0&quot; Click=&quot;_button_Click&quot;/&gt; &lt;/StackPanel&gt;&lt;/Window&gt; åç«¯ä»£ç  123456789101112131415161718namespace HelloWorld&#123; /// &lt;summary&gt; /// MainWindow.xaml çš„äº¤äº’é€»è¾‘ /// &lt;/summary&gt; public partial class MainWindow : Window &#123; public MainWindow() &#123; InitializeComponent(); &#125; private void _button_Click(object sender, RoutedEventArgs e) &#123; MessageBox.Show($&quot;æ‚¨çš„ç”¨æˆ·åï¼š&#123;_textbox.Text&#125;&quot;); &#125; &#125;&#125; æˆ‘ä»¬ä½¿ç”¨äº†CharacterCasing&#x3D;â€Upperâ€è¿™ä¸ªè®¾ç½®ï¼Œå¯ä»¥çœ‹åˆ°å›¾ç‰‡ä¸­çš„æ˜¾ç¤ºæ•ˆæœï¼Œè™½ç„¶æˆ‘åœ¨è¾“å…¥æ—¶æ˜¯å°å†™çš„chinaå­—ç¬¦ï¼Œä½†æ˜¯ï¼ŒTextBoxä¼šè½¬æ¢æˆå¤§å†™çš„CHINAï¼Œå¦å¤–ï¼Œæ€»é•¿åº¦ä¸èƒ½è¶…è¿‡10ä¸ªå­—ç¬¦ã€‚ æœ€åè¦è·å–TextBoxæ–‡æœ¬æ¡†çš„å†…å®¹ï¼Œä½¿ç”¨Textå±æ€§å³å¯ã€‚å½“æˆ‘ä»¬åœ¨å­¦ä¹ äº†æ ·å¼ä¹‹åï¼Œæˆ‘ä»¬è¿˜ä¼šå›è¿‡å¤´æ¥ï¼Œå¯¹TextBoxæ§ä»¶è¿›è¡Œæ·±å…¥å­¦ä¹ ã€‚å¦å¤–ï¼ŒTextBoxè¿˜æœ‰ä¸€ä¸ªå¤§å“¥ï¼Œä¹Ÿæ˜¯ç»§æ‰¿äºTextBoxBaseåŸºç±»ï¼Œå®ƒå«RichTextBox ç±»ã€‚è¿™ä¸ªæ§ä»¶çš„åŠŸèƒ½æ›´åŠ å¼ºå¤§ï¼Œèƒ½å¤Ÿå¯¹FlowDocumentæµæ–‡æ¡£è¿›è¡Œæ“ä½œã€‚å¦‚æœæ‚¨æƒ³å¼€å‘ç±»ä¼¼Wordçš„æ¡Œé¢è½¯ä»¶ï¼ŒRichTextBox å’ŒFlowDocumentæ­é…ç»„åˆæ˜¯éå¸¸å¥½çš„é€‰æ‹©ã€‚ RichTextBoxå¯Œæ–‡æœ¬æ¡†RichTextBoxç»§æ‰¿äºTextBoxBaseåŸºç±»ï¼Œæ‰€ä»¥å¾ˆå¤§ç¨‹åº¦ä¸Šä¸TextBoxæ§ä»¶ç±»ä¼¼ï¼Œä¸¤è€…åœ¨æŸäº›æƒ…å†µä¸‹å¯ä»¥äº’ç›¸æ›¿æ¢ã€‚ä½†æ˜¯ï¼Œå¦‚æœè¦ä¸ºç”¨æˆ·æä¾›æ›´å¼ºå¤§çš„æ–‡æ¡£ç¼–è¾‘åŠŸèƒ½ï¼ŒéRichTextBoxè«å±ã€‚åœ¨å­¦ä¹ è¿™ä¸ªæ§ä»¶ä¹‹å‰ï¼Œè¯·å‚é˜…FlowDocumentï¼ˆæµæ–‡æ¡£ï¼‰ä¸€èŠ‚ã€‚ é¦–å…ˆï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹RichTextBoxçš„ç»“æ„å®šä¹‰ï¼š 1234567891011121314151617181920212223public class RichTextBox : TextBoxBase, IAddChild&#123; public static readonly DependencyProperty IsDocumentEnabledProperty; public RichTextBox(); public RichTextBox(FlowDocument document); public FlowDocument Document &#123; get; set; &#125; public bool IsDocumentEnabled &#123; get; set; &#125; public TextSelection Selection &#123; get; &#125; public TextPointer CaretPosition &#123; get; set; &#125; protected internal override IEnumerator LogicalChildren &#123; get; &#125; public TextPointer GetNextSpellingErrorPosition(TextPointer position, LogicalDirection direction); public TextPointer GetPositionFromPoint(Point point, bool snapToText); public SpellingError GetSpellingError(TextPointer position); public TextRange GetSpellingErrorRange(TextPointer position); public bool ShouldSerializeDocument(); protected override Size MeasureOverride(Size constraint); protected override AutomationPeer OnCreateAutomationPeer(); protected override void OnDpiChanged(DpiScale oldDpiScaleInfo, DpiScale newDpiScaleInfo); &#125; RichTextBoxæ§ä»¶æœ‰ä¸€ä¸ªå¸¦å‚æ•°çš„æ„é€ å‡½æ•°ï¼Œå‚æ•°çš„ç±»å‹æ˜¯FlowDocumentç±»ï¼Œå¦å¤–ï¼Œå®ƒè¿˜æœ‰ä¸€ä¸ªDocumentå±æ€§ï¼Œç±»å‹ä¹Ÿæ˜¯FlowDocumentç±»ï¼Œè¯´æ˜RichTextBoxæ§ä»¶çš„å…ƒç´ å¿…é¡»ä¸”åªèƒ½æ˜¯FlowDocumentç±»ï¼Œå¦‚æœæ‚¨è¯•å›¾å°†RichTextBox.Document&#x3D;nullï¼Œä¼šå‘ç°å®ƒä¼šæŠ¥é”™ã€‚ æˆ‘ä»¬å‡å®šæ‚¨å¯¹FlowDocumentç±»æœ‰ä¸€å®šçš„äº†è§£ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬ç›´æ¥çœ‹ä¸€ä¸‹ç¤ºä¾‹ã€‚ å‰ç«¯ä»£ç  123456789101112131415161718192021222324252627282930313233343536373839404142&lt;Window x:Class=&quot;HelloWorld.MainWindow&quot; xmlns=&quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot; xmlns:x=&quot;http://schemas.microsoft.com/winfx/2006/xaml&quot; xmlns:d=&quot;http://schemas.microsoft.com/expression/blend/2008&quot; xmlns:mc=&quot;http://schemas.openxmlformats.org/markup-compatibility/2006&quot; xmlns:local=&quot;clr-namespace:HelloWorld&quot; mc:Ignorable=&quot;d&quot; FontSize=&quot;16&quot; Title=&quot;HelloWorld - www.wpfsoft.com&quot; Height=&quot;360&quot; Width=&quot;500&quot;&gt; &lt;StackPanel&gt; &lt;RichTextBox x:Name=&quot;_richTextBox&quot; Margin=&quot;10 5&quot; Height=&quot;270&quot;&gt; &lt;FlowDocument&gt; &lt;Paragraph&gt;RichTextBoxå¯Œæ–‡æœ¬æ¡†æ§ä»¶åˆ°åº•æœ‰ä»€ä¹ˆå¼ºå¤§çš„åŠŸèƒ½? &lt;Bold Foreground=&quot;DarkRed&quot;&gt;è¯·çœ‹ä¸‹é¢.&lt;/Bold&gt; &lt;/Paragraph&gt; &lt;Paragraph Foreground=&quot;Blue&quot;&gt;RichTextBoxå”¯ä¸€çš„å­å…ƒç´ æ˜¯FlowDocument&lt;/Paragraph&gt; &lt;Paragraph Foreground=&quot;DarkGreen&quot;&gt; FlowDocumentæ˜¯æŒ‡æµæ–‡æ¡£,ä¸€ä¸ªæµæ–‡æ¡£ç”±ä¸€ä¸ªæˆ–å¤šä¸ªBlockæ„æˆï¼Œ æ‰€ä»¥å®ƒæœ‰ä¸€ä¸ªBlockså±æ€§ã€‚Blockåªæ˜¯ä¸€ä¸ªæŠ½è±¡åŸºç±»ï¼Œ æ‰€ä»¥æµæ–‡æ¡£çš„å­å…ƒç´ å…¶å®æ˜¯ç»§æ‰¿äº†Blockçš„å­ç±»ï¼Œä¾‹å¦‚ï¼š &lt;/Paragraph&gt; &lt;List MarkerOffset=&quot;25&quot; MarkerStyle=&quot;Decimal&quot; StartIndex=&quot;1&quot;&gt; &lt;ListItem&gt; &lt;Paragraph&gt;BlockUIContainerï¼ˆUIå…ƒç´ å®¹å™¨ï¼‰&lt;/Paragraph&gt; &lt;/ListItem&gt; &lt;ListItem&gt; &lt;Paragraph&gt;Listï¼ˆæœ‰åºåˆ—è¡¨ï¼‰&lt;/Paragraph&gt; &lt;/ListItem&gt; &lt;ListItem&gt; &lt;Paragraph&gt;Paragraphï¼ˆæ®µè½ï¼‰&lt;/Paragraph&gt; &lt;/ListItem&gt; &lt;ListItem&gt; &lt;Paragraph&gt;Sectionï¼ˆåˆ†ç»„ï¼‰&lt;/Paragraph&gt; &lt;/ListItem&gt; &lt;ListItem&gt; &lt;Paragraph&gt;Tableï¼ˆç½‘æ ¼ï¼‰&lt;/Paragraph&gt; &lt;/ListItem&gt; &lt;/List&gt; &lt;/FlowDocument&gt; &lt;/RichTextBox&gt; &lt;Button x:Name=&quot;_button&quot; Content=&quot;ç¡®å®š&quot; Margin=&quot;10,5&quot; Click=&quot;_button_Click&quot;/&gt; &lt;/StackPanel&gt;&lt;/Window&gt; åç«¯ä»£ç  12345678910111213141516171819202122232425namespace HelloWorld&#123; /// &lt;summary&gt; /// MainWindow.xaml çš„äº¤äº’é€»è¾‘ /// &lt;/summary&gt; public partial class MainWindow : Window &#123; public MainWindow() &#123; InitializeComponent(); &#125; private void _button_Click(object sender, RoutedEventArgs e) &#123; TextRange textRange = new TextRange(_richTextBox.Document.ContentStart, _richTextBox.Document.ContentEnd); MessageBox.Show(textRange.Text); Paragraph paragraph = new Paragraph(); Run run = new Run($&quot;å½“å‰æ—¶é—´ï¼š&#123;DateTime.Now&#125;&quot;); //æ‰‹åŠ¨åŠ æ¢è¡Œ run.Foreground = Brushes.Black; paragraph.Inlines.Add(run); _richTextBox.Document.Blocks.Add(paragraph); &#125; &#125;&#125; å¦‚ä¸Šæ‰€ç¤ºï¼Œæˆ‘ä»¬åœ¨çª—ä½“ä¸­å®ä¾‹åŒ–äº†ä¸€ä¸ªRichTextBoxæ§ä»¶ï¼Œå¹¶å®ä¾‹åŒ–äº†ä¸€ä¸ªFlowDocumentå¯¹è±¡ã€‚RichTextBoxå”¯ä¸€çš„å­å…ƒç´ æ˜¯FlowDocumentï¼Œ FlowDocumentæ˜¯æŒ‡æµæ–‡æ¡£,ä¸€ä¸ªæµæ–‡æ¡£ç”±ä¸€ä¸ªæˆ–å¤šä¸ªBlockæ„æˆï¼Œæ‰€ä»¥å®ƒæœ‰ä¸€ä¸ªBlockså±æ€§ã€‚Blockåªæ˜¯ä¸€ä¸ªæŠ½è±¡åŸºç±»ï¼ŒFlowDocumentæµæ–‡æ¡£çš„å­å…ƒç´ éƒ½ç»§æ‰¿äº†BlockæŠ½è±¡åŸºç±»ï¼Œä¾‹å¦‚ï¼š BlockUIContainerï¼ˆUIå…ƒç´ å®¹å™¨ï¼‰ Listï¼ˆæœ‰åºåˆ—è¡¨ï¼‰ Paragraphï¼ˆæ®µè½ï¼‰ Sectionï¼ˆåˆ†ç»„ï¼‰ Tableï¼ˆç½‘æ ¼ï¼‰ BlockUIContaineræ˜¯ä¸€ä¸ªéå¸¸å¼ºå¤§çš„æ®µè½å…ƒç´ ï¼Œå› ä¸ºå®ƒå¯ä»¥ç›´æ¥åŒ…å«WPFçš„æ§ä»¶ã€‚è¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥å°†è®¾è®¡çš„UIå†™å…¥åˆ°æµæ–‡æ¡£ä¸­æ˜¾ç¤ºæˆ–æ‰“å°ã€‚ ä¸Šé¢è¿™äº”ä¸ªå…ƒç´ ç»§æ‰¿äº†TextElementã€FrameworkContentElementå’ŒContentElementä¸‰ä¸ªçˆ¶ç´ ï¼Œæ‰€ä»¥å®é™…ä¸Šè¿™äº”ä¸ªå­å…ƒç´ å°±æ‹¥æœ‰äº†è®¸å¤šå­—ä½“å±æ€§çš„è®¾ç½®ã€èµ„æºã€æ ·å¼ã€æ•°æ®ç»‘å®šã€ä»¥åŠå„ç§äº‹ä»¶çš„åº”ç”¨ã€‚ å¦‚æœè¦è·å–RichTextBoxçš„æ–‡æœ¬ä¿¡æ¯ï¼Œå¯ä»¥ä½¿ç”¨TextRangeç±»ã€‚FlowDocumentç±»æœ‰ä¸¤ä¸ªå±æ€§ï¼Œåˆ†åˆ«ContentStartå’ŒContentEndï¼Œè¡¨ç¤ºæ–‡å­—å†…å®¹çš„å¼€å§‹å’Œç»“æŸã€‚ æ‰€ä»¥é€šè¿‡TextRangeç±»çš„Textï¼Œæˆ‘ä»¬å°±èƒ½è®¿é—®åˆ°RichTextBoxæ§ä»¶çš„å†…å®¹ã€‚ ToolTipæ§ä»¶ï¼ˆæç¤ºå·¥å…·ï¼‰ToolTipæ§ä»¶ç»§æ‰¿äºContentControlï¼Œå®ƒä¸èƒ½æœ‰é€»è¾‘æˆ–è§†è§‰çˆ¶çº§ï¼Œæ„æ€æ˜¯è¯´ï¼Œå®ƒä¸èƒ½å•ç‹¬å­˜åœ¨äºWPFçš„è§†è§‰æ ‘ä¸Šï¼ˆä¸èƒ½ä»¥æ§ä»¶çš„å½¢å¼å®ä¾‹åŒ–ï¼‰ï¼Œå®ƒå¿…é¡»ä¾é™„äºæŸä¸ªæ§ä»¶ã€‚å› ä¸ºå®ƒçš„åŠŸèƒ½è¢«è®¾è®¡æˆæç¤ºä¿¡æ¯ï¼Œå½“é¼ æ ‡ç§»åŠ¨åˆ°æŸä¸ªæ§ä»¶ä¸Šæ–¹æ—¶ï¼Œæ‚¬åœä¸€ä¼šå„¿ï¼Œå°±ä¼šæ˜¾ç¤ºè¿™ä¸ªToolTipçš„å†…å®¹ã€‚ é€šå¸¸ToolTipä¼šæ˜¾ç¤ºä¸€å¥è¯ï¼Œç”¨æ¥é˜è¿°æŸä¸ªæ§ä»¶çš„è¯´æ˜ã€‚è¿™ä¸ªæ§ä»¶å­˜åœ¨äºFrameworkElementåŸºç±»ä¸­ï¼Œä¹Ÿå°±æ˜¯ToolTipå±æ€§ï¼Œè¿™ä¸ªå±æ€§åœ¨FrameworkElementè™½ç„¶è¢«å£°æ˜æˆobjectï¼Œè€Œä¸æ˜¯ToolTipç±»å‹ï¼Œä½†æ˜¯ï¼Œæˆ‘ä»¬ä»ç„¶å¯ä»¥è‡ªå®šä¹‰ToolTipçš„å†…å®¹ã€‚é‡ç‚¹ï¼šWPFå‡ ä¹æ‰€æœ‰æ§ä»¶éƒ½å¯ä»¥æ‹¥æœ‰ToolTipå°å‹æç¤ºå¼¹çª—ï¼ å› ä¸ºToolTipç»§æ‰¿äºContentControlæ§ä»¶ï¼Œæ‰€ä»¥ï¼ŒToolTipæ‹¥æœ‰çš„Contentå±æ€§å°±å¯ä»¥æ˜¾ç¤ºä»»ä½•ç±»å‹ï¼Œæ¯”å¦‚å­—ç¬¦ä¸²ã€å›¾åƒã€å…¶å®ƒæ§ä»¶ç»„åˆå¸ƒå±€ã€‚ 123456789101112131415161718192021222324252627282930313233343536public class ToolTip : ContentControl&#123; public static readonly DependencyProperty HorizontalOffsetProperty; public static readonly RoutedEvent OpenedEvent; public static readonly DependencyProperty StaysOpenProperty; public static readonly DependencyProperty CustomPopupPlacementCallbackProperty; public static readonly DependencyProperty PlacementProperty; public static readonly RoutedEvent ClosedEvent; public static readonly DependencyProperty PlacementTargetProperty; public static readonly DependencyProperty HasDropShadowProperty; public static readonly DependencyProperty IsOpenProperty; public static readonly DependencyProperty VerticalOffsetProperty; public static readonly DependencyProperty PlacementRectangleProperty; public ToolTip(); public bool IsOpen &#123; get; set; &#125; public bool StaysOpen &#123; get; set; &#125; public CustomPopupPlacementCallback CustomPopupPlacementCallback &#123; get; set; &#125; public PlacementMode Placement &#123; get; set; &#125; public Rect PlacementRectangle &#123; get; set; &#125; public UIElement PlacementTarget &#123; get; set; &#125; public double HorizontalOffset &#123; get; set; &#125; public double VerticalOffset &#123; get; set; &#125; public bool HasDropShadow &#123; get; set; &#125; public event RoutedEventHandler Closed; public event RoutedEventHandler Opened; protected virtual void OnClosed(RoutedEventArgs e); protected override void OnContentChanged(object oldContent, object newContent); protected override AutomationPeer OnCreateAutomationPeer(); protected virtual void OnOpened(RoutedEventArgs e); protected internal override void OnVisualParentChanged(DependencyObject oldParent); &#125; ç®€å•ä½¿ç”¨ 1&lt;Button Content=&quot;ç¡®å®š&quot; ToolTip=&quot;WPFä¸­æ–‡ç½‘ä¹‹æ§ä»¶è¯¾ç¨‹&quot;/&gt; è‡ªå®šä¹‰ToolTipå†…å®¹ 1234567891011121314&lt;Button x:Name=&quot;button2&quot; Content=&quot;ç½‘ç«™&quot; Width=&quot;100&quot; Height=&quot;30&quot; Margin=&quot;5&quot; Click=&quot;button2_Click&quot;&gt; &lt;Button.ToolTip&gt; &lt;StackPanel&gt; &lt;TextBlock Text=&quot;å®˜æ–¹ç½‘ç«™&quot; FontWeight=&quot;Bold&quot; /&gt; &lt;TextBlock Text=&quot;ç‚¹å‡»è¿™ä¸ªæŒ‰é’®ï¼Œè¿›å…¥WPFä¸­æ–‡ç½‘ç«™&quot;/&gt; &lt;Border BorderBrush=&quot;Silver&quot; BorderThickness=&quot;0,1,0,0&quot; Margin=&quot;0,4&quot;/&gt; &lt;TextBlock Text=&quot;http://www.wpfsoft.com&quot; FontStyle=&quot;Italic&quot;/&gt; &lt;/StackPanel&gt; &lt;/Button.ToolTip&gt;&lt;/Button&gt;private void button2_Click(object sender, RoutedEventArgs e)&#123; Process.Start(&quot;http://www.wpfsoft.com&quot;);&#125; è™½ç„¶ToolTipå¯ä»¥è‡ªå®šä¹‰å†…å®¹ï¼Œä½†æ˜¯ï¼ŒToolTipçš„å†…å®¹æ— æ³•æ¥æ”¶ç„¦ç‚¹ã€‚ ä¸ToolTipæœ‰ç‚¹ç±»ä¼¼çš„æ§ä»¶ï¼Œè¿˜æœ‰ä¸€ä¸ªå«Popupæ§ä»¶ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªå¼¹å‡ºçª—å£ï¼Œå¹¶å¯ä»¥åœ¨è¿™ä¸ªçª—å£å†…ä»»æ„å¸ƒå±€ã€‚æˆ‘ä»¬åœ¨ä¸‹ä¸€èŠ‚æ¥æ¢è®¨å®ƒã€‚ Popupå¼¹å‡ºçª—å£Popupç±»ä¼¼äºToolTipï¼Œåœ¨æŒ‡å®šçš„å…ƒç´ æˆ–çª—ä½“ä¸­å¼¹å‡ºä¸€ä¸ªå…·æœ‰ä»»æ„å†…å®¹çš„çª—å£ã€‚Popupç»§æ‰¿äºFrameworkElementï¼Œç®—å¾—ä¸Šæ˜¯ç‹¬é—¨ç‹¬æˆ·çš„æ§ä»¶ï¼Œå› ä¸ºå¤§å¤šæ•°æ§ä»¶éƒ½æ˜¯ä»Shapeã€Controlæˆ–Panelä¸‰ä¸ªç±»ç»§æ‰¿è€Œæ¥ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445public class Popup : FrameworkElement, IAddChild&#123; public static readonly DependencyProperty ChildProperty; public static readonly DependencyProperty IsOpenProperty; public static readonly DependencyProperty PlacementProperty; public static readonly DependencyProperty CustomPopupPlacementCallbackProperty; public static readonly DependencyProperty StaysOpenProperty; public static readonly DependencyProperty HorizontalOffsetProperty; public static readonly DependencyProperty VerticalOffsetProperty; public static readonly DependencyProperty PlacementTargetProperty; public static readonly DependencyProperty PlacementRectangleProperty; public static readonly DependencyProperty PopupAnimationProperty; public static readonly DependencyProperty AllowsTransparencyProperty; public static readonly DependencyProperty HasDropShadowProperty; public Popup(); public bool HasDropShadow &#123; get; &#125; public bool AllowsTransparency &#123; get; set; &#125; public PopupAnimation PopupAnimation &#123; get; set; &#125; public Rect PlacementRectangle &#123; get; set; &#125; public UIElement PlacementTarget &#123; get; set; &#125; public double VerticalOffset &#123; get; set; &#125; public double HorizontalOffset &#123; get; set; &#125; public bool StaysOpen &#123; get; set; &#125; public UIElement Child &#123; get; set; &#125; public bool IsOpen &#123; get; set; &#125; public PlacementMode Placement &#123; get; set; &#125; public CustomPopupPlacementCallback CustomPopupPlacementCallback &#123; get; set; &#125; protected internal override IEnumerator LogicalChildren &#123; get; &#125; public event EventHandler Closed; public event EventHandler Opened; public static void CreateRootPopup(Popup popup, UIElement child); protected override Size MeasureOverride(Size availableSize); protected virtual void OnClosed(EventArgs e); protected virtual void OnOpened(EventArgs e); protected override void OnPreviewMouseLeftButtonDown(MouseButtonEventArgs e); protected override void OnPreviewMouseLeftButtonUp(MouseButtonEventArgs e); protected override void OnPreviewMouseRightButtonDown(MouseButtonEventArgs e); protected override void OnPreviewMouseRightButtonUp(MouseButtonEventArgs e); protected internal override DependencyObject GetUIParentCore(); &#125; å±æ€§æˆå‘˜ å±æ€§åç§° è¯´æ˜ HasDropShadow åªè¯»å±æ€§ï¼Œæ§ä»¶æ˜¯å¦æœ‰æŠ•å½±æ•ˆæœã€‚ AllowsTransparency è·å–æˆ–è®¾ç½®æ§ä»¶æ˜¯å¦åŒ…å«é€æ˜å†…å®¹ã€‚ PopupAnimation è·å–æˆ–è®¾ç½®æ§ä»¶æ‰“å¼€æˆ–å…³é—­æ—¶çš„åŠ¨ç”»æ•ˆæœï¼ŒNoneè¡¨ç¤ºæ²¡æœ‰åŠ¨ç”»ï¼ŒFadeè¡¨ç¤ºé€æ¸æ˜¾ç¤ºæˆ–æ·¡å‡ºï¼ŒSlideè¡¨ç¤ºå‘ä¸Šå‘ä¸‹æ»‘å…¥ï¼ŒScrollè¡¨ç¤ºæ»šåŠ¨æ•ˆæœã€‚ PlacementRectangle è·å–æˆ–è®¾ç½®æ§ä»¶æ‰“å¼€æ—¶çš„çŸ©å½¢ä½ç½® ã€‚ PlacementTarget è·å–æˆ–è®¾ç½®Popupæ§ä»¶åœ¨å“ªä¸ªæ§ä»¶èº«è¾¹æ‰“å¼€ï¼ˆé‡ç‚¹ï¼‰ã€‚ VerticalOffset è·å–æˆ–è®¾ç½®ç›®æ ‡åŸç‚¹å’Œ popup å¯¹é½ç‚¹ä¹‹é—´çš„å‚ç›´è·ç¦»ã€‚ HorizontalOffset è·å–æˆ–è®¾ç½®ç›®æ ‡åŸç‚¹å’Œå¼¹å‡ºé¡¹å¯¹é½ä¹‹é—´çš„æ°´å¹³è·ç¦»ç‚¹ã€‚ StaysOpen é»˜è®¤å€¼ä¸ºtrueï¼Œè¡¨ç¤ºPopupæ‰“å¼€åï¼Œå¦‚æœå¤±å»ç„¦ç‚¹ï¼ŒPopupæ˜¯å¦ç»§ç»­æ˜¾ç¤ºï¼ˆé‡ç‚¹ï¼‰ã€‚ Child è·å–æˆ–è®¾ç½®æ§ä»¶çš„å†…å®¹ï¼Œç±»ä¼¼äºContentControlçš„Contentå±æ€§ï¼Œåªèƒ½æ‹¥æœ‰ä¸€ä¸ªå…ƒç´ ï¼ˆé‡ç‚¹ï¼‰ã€‚ IsOpen è·å–æˆ–è®¾ç½®Popupæ§ä»¶æ˜¯å¦å¯è§ã€‚ Placement æšä¸¾ç±»ï¼Œè¡¨ç¤ºPopup æ§ä»¶æ˜¾ç¤ºæ—¶çš„å¯¹é½æ–¹å¼ã€‚ äº‹ä»¶æˆå‘˜ Openedäº‹ä»¶ï¼šPopupæ§ä»¶æ‰“å¼€æ—¶å¼•å‘çš„äº‹ä»¶ã€‚ Closedäº‹ä»¶ï¼šPopupæ§ä»¶å…³é—­æ—¶å¼•å‘çš„äº‹ä»¶ 12345678910111213141516171819202122232425&lt;Window x:Class=&quot;HelloWorld.MainWindow&quot; xmlns=&quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot; xmlns:x=&quot;http://schemas.microsoft.com/winfx/2006/xaml&quot; xmlns:d=&quot;http://schemas.microsoft.com/expression/blend/2008&quot; xmlns:mc=&quot;http://schemas.openxmlformats.org/markup-compatibility/2006&quot; xmlns:local=&quot;clr-namespace:HelloWorld&quot; mc:Ignorable=&quot;d&quot; FontSize=&quot;16&quot; Title=&quot;WPFä¸­æ–‡ç½‘ä¹‹æ§ä»¶è¯¾ç¨‹ - www.wpfsoft.com&quot; Height=&quot;350&quot; Width=&quot;500&quot;&gt; &lt;StackPanel Orientation=&quot;Horizontal&quot; HorizontalAlignment=&quot;Center&quot; VerticalAlignment=&quot;Center&quot;&gt; &lt;CheckBox x:Name=&quot;checkbox&quot; Content=&quot;WPFä¸­æ–‡ç½‘&quot; Height=&quot;30&quot; Margin=&quot;5&quot; ToolTip=&quot;WPFä¸­æ–‡ç½‘ä¹‹æ§ä»¶è¯¾ç¨‹&quot;/&gt; &lt;Popup Name=&quot;myPopup&quot; IsOpen=&quot;&#123;Binding IsChecked, ElementName=checkbox&#125;&quot; PlacementTarget=&quot;&#123;Binding ElementName=checkbox&#125;&quot; StaysOpen=&quot;True&quot;&gt; &lt;Border BorderThickness=&quot;1&quot; Background=&quot;LightBlue&quot;&gt; &lt;StackPanel&gt; &lt;TextBlock Text=&quot;å®˜æ–¹ç½‘ç«™&quot; FontWeight=&quot;Bold&quot; /&gt; &lt;TextBlock Text=&quot;ç‚¹å‡»è¿™ä¸ªæŒ‰é’®ï¼Œè¿›å…¥WPFä¸­æ–‡ç½‘ç«™&quot;/&gt; &lt;Border BorderBrush=&quot;Silver&quot; BorderThickness=&quot;0,1,0,0&quot; Margin=&quot;0,4&quot;/&gt; &lt;TextBlock Text=&quot;http://www.wpfsoft.com&quot; FontStyle=&quot;Italic&quot;/&gt; &lt;/StackPanel&gt; &lt;/Border&gt; &lt;/Popup&gt; &lt;/StackPanel&gt;&lt;/Window&gt; ä»£ç åˆ†æ æˆ‘ä»¬åˆ†åˆ«å®ä¾‹åŒ–äº†åå«checkboxå’ŒmyPopupæ§ä»¶ï¼ŒmyPopupçš„IsOpenå±æ€§ç»‘å®šäº†checkboxçš„IsCheckedï¼Œæ„æ€æ˜¯ï¼Œ å½“ç”¨æˆ·ç‚¹å‡»checkboxæ—¶ï¼Œcheckboxçš„IsCheckedå±æ€§ä¸ºtrueï¼ŒmyPopupçš„IsOpenå±æ€§ä¹Ÿä¸ºtrueï¼Œäºæ˜¯å°±å¯ä»¥æ˜¾ç¤ºmyPopupçš„å†…å®¹äº†ã€‚ åŒæ—¶ï¼ŒmyPopupçš„PlacementTargetå±æ€§ä¹Ÿç»‘å®šåˆ°äº†checkboxæ§ä»¶ï¼Œæ„å‘³ç€myPopupå°†æ˜¾ç¤ºåœ¨checkboxæ§ä»¶èº«è¾¹ï¼Œè‡³äºå…·ä½“ä½ç½®ï¼Œå¯ä»¥è®¾ç½®Placementå±æ€§ï¼Œæœ‰å…´è¶£çš„å°ä¼™ä¼´å¯ä»¥å»å°è¯•ä¸€ä¸‹ã€‚ è¿™é‡Œæˆ‘ä»¬ç”¨åˆ°äº†Bindingè¿™ä¸ªç±»ï¼Œå¯ä»¥æŠŠå®ƒçœ‹æˆæ˜¯ä¸€åº§æ¡¥æ¢ï¼Œæˆ‘ä»¬ä¼šåœ¨åé¢ä¸“é—¨è¯¦ç»†è®²è§£Bindingçš„ç”¨æ³•ã€‚ Imageå›¾åƒæ§ä»¶Imageä¹Ÿç®—æ˜¯ç‹¬é—¨ç‹¬æˆ·çš„æ§ä»¶ï¼Œå› ä¸ºå®ƒä¹Ÿæ˜¯ç›´æ¥ç»§æ‰¿äºFrameworkElementåŸºç±»ã€‚Imageæ§ä»¶ï¼Œé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯å›¾åƒæ˜¾ç¤ºæ§ä»¶ã€‚Imageç±»èƒ½å¤ŸåŠ è½½æ˜¾ç¤ºçš„å›¾ç‰‡æ ¼å¼æœ‰.bmpã€.gifã€.icoã€.jpgã€.pngã€.wdp å’Œ .tiffã€‚è¦æ³¨æ„çš„æ˜¯ï¼ŒåŠ è½½.gifåŠ¨ç”»å›¾ç‰‡æ—¶ï¼Œä»…æ˜¾ç¤ºç¬¬ä¸€å¸§ã€‚å¦‚æœè¦æ˜¾ç¤ºgifå›¾ç‰‡ï¼Œå¯ä»¥åœ¨nugetæœåŠ¡å™¨ä¸­ä¸‹è½½WpfAnimatedGifç»„ä»¶ã€‚ ä¸€ã€Imageç±»çš„å®šä¹‰ 12345678910111213141516171819202122232425public class Image : FrameworkElement, IUriContext, IProvidePropertyFallback&#123; public static readonly DependencyProperty SourceProperty; public static readonly RoutedEvent DpiChangedEvent; public static readonly DependencyProperty StretchProperty; public static readonly DependencyProperty StretchDirectionProperty; public static readonly RoutedEvent ImageFailedEvent; public Image(); public StretchDirection StretchDirection &#123; get; set; &#125; public Stretch Stretch &#123; get; set; &#125; public ImageSource Source &#123; get; set; &#125; protected virtual Uri BaseUri &#123; get; set; &#125; public event DpiChangedEventHandler DpiChanged; public event EventHandler&lt;ExceptionRoutedEventArgs&gt; ImageFailed; protected override Size ArrangeOverride(Size arrangeSize); protected override Size MeasureOverride(Size constraint); protected override AutomationPeer OnCreateAutomationPeer(); protected override void OnDpiChanged(DpiScale oldDpi, DpiScale newDpi); protected override void OnRender(DrawingContext dc); &#125; äºŒã€å±æ€§æˆå‘˜ å±æ€§åç§° è¯´æ˜ StretchDirection æšä¸¾å‹ï¼Œè¡¨ç¤ºå›¾åƒç¼©æ”¾çš„æ¡ä»¶ï¼ŒUpOnlyè¡¨ç¤ºå†…å®¹ä»…åœ¨å°äºçˆ¶çº§æ—¶ç¼©æ”¾ï¼›DownOnlyè¡¨ç¤ºå†…å®¹ä»…å¤§äºçˆ¶çº§æ—¶ç¼©æ”¾ï¼›Bothè¡¨ç¤ºå…¼å®¹å‰é¢ä¸¤ç§ç¼©æ”¾æ¡ä»¶ã€‚ Stretch æšä¸¾å‹ï¼Œè¡¨ç¤ºå›¾åƒç¼©æ”¾çš„æ¨¡å¼ï¼ŒNoneè¡¨ç¤ºå†…å®¹ä¿æŒå…¶åŸå§‹å¤§å°ï¼›Fillè¡¨ç¤ºè°ƒæ•´å†…å®¹å¤§å°ä»¥å¡«å……ç›®æ ‡å°ºå¯¸ï¼Œä¸”ä¸ä¿ç•™çºµæ¨ªæ¯”ï¼›Uniformè¡¨ç¤ºåœ¨ä¿ç•™çºµæ¨ªæ¯”åŸºç¡€ä¸Šç¼©æ”¾ï¼›UniformToFillè¡¨ç¤ºåœ¨ä¿ç•™çºµæ¨ªæ¯”åŸºç¡€ä¸Šç¼©æ”¾ï¼ŒåŒæ—¶å…·æœ‰è£å‰ªåŠŸèƒ½ã€‚ Source å›¾åƒæºï¼Œå…¶ç±»å‹ä¸ºImageSourceã€‚ BaseUri è·å–æˆ–è®¾ç½®åŸº ç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦ (URI) ä¸º System.Windows.Controls.Imageã€‚ ä¸‰ã€äº‹ä»¶æˆå‘˜ äº‹ä»¶åç§° è¯´æ˜ DpiChanged æ˜¾ç¤ºå›¾åƒçš„å±å¹•çš„ DPI å‘ç”Ÿæ›´æ”¹åè§¦å‘ã€‚ ImageFailed åœ¨å›¾åƒä¸­å¤±è´¥æ—¶è§¦å‘ã€‚ å››ã€Imageæ§ä»¶åˆ†æ Imageæ§ä»¶æœ€å…³é”®çš„å°±æ˜¯Sourceå±æ€§â€”â€”å³ImageSourceç±»å‹ã€‚ImageSourceæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œè¡¨ç¤ºå…·æœ‰é«˜åº¦ã€å®½åº¦åŠImageMetadataå¯¹è±¡çš„å›¾åƒæ•°æ®æºã€‚ImageSourceæœ‰å¤šä¸ªå­ç±»ï¼Œå¦‚BitmapFrameã€BitmapSourceå’ŒDrawingImageã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬å¦‚æœè¦æ˜¾ç¤ºä¸€å¼ å›¾ç‰‡ï¼Œéœ€è¦å°†å›¾ç‰‡è½¬åŒ–æˆBitmapSourceæˆ–DrawingImageå®ä¾‹ï¼Œèµ‹å€¼ç»™Imageæ§ä»¶çš„Sourceå±æ€§å°±è¡Œäº†ã€‚ 4.1å¸¸è§„å›¾ç‰‡åŠ è½½ ä¾‹å¦‚ï¼šhttp://www.wpfsoft.com/wp-content/uploads/2023/08/2023080309592548.png æˆ‘ä»¬å°†ä¸Šé¢è¿™å¼ å›¾ç‰‡ä¸‹è½½åï¼Œå¯¼åˆ°å…¥HelloWorldé¡¹ç›®çš„Imagesç›®å½•ä¸­ï¼Œç„¶åå°±å¯ä»¥åœ¨å‰ç«¯ä»£ç ä¸­æ˜¾ç¤ºã€‚ 1&lt;Image Source=&quot;/Images/logo.png&quot; Width=&quot;120&quot; Height=&quot;120&quot;/&gt; æˆ–è€… ç»Ÿä¸€èµ„æºæ ‡è¯†Uri WPFå¼•å…¥äº†ç»Ÿä¸€èµ„æºæ ‡è¯†Uri(Unified Resource Identifier)æ¥æ ‡è¯†å’Œè®¿é—®èµ„æºã€‚å…¶ä¸­è¾ƒä¸ºå¸¸è§çš„æƒ…å†µæ˜¯ç”¨UriåŠ è½½å›¾åƒã€‚Uriè¡¨è¾¾å¼çš„ä¸€èˆ¬å½¢å¼ä¸ºï¼šåè®®+æˆæƒ+è·¯å¾„ï¼Œåè®®ï¼špack:&#x2F;&#x2F;ï¼Œæˆæƒï¼šæœ‰ä¸¤ç§ã€‚ä¸€ç§ç”¨äºè®¿é—®ç¼–è¯‘æ—¶å·²ç»çŸ¥é“çš„æ–‡ä»¶ï¼Œç”¨application:&#x2F;&#x2F;&#x2F;ä¸€ç§ç”¨äºè®¿é—®ç¼–è¯‘æ—¶ä¸çŸ¥é“ã€è¿è¡Œæ—¶æ‰çŸ¥é“çš„æ–‡ä»¶ï¼Œç”¨siteoforigin:&#x2F;&#x2F;&#x2F;ä¸€èˆ¬ç”¨é€—å·ä»£æ›¿æ–œæ ï¼Œä¹Ÿå°±æ˜¯æ”¹å†™ä½œapplication:,å’Œpack:,è·¯å¾„ï¼šåˆ†ä¸ºç»å¯¹è·¯å¾„å’Œç›¸å¯¹è·¯å¾„ã€‚ä¸€èˆ¬é€‰ç”¨ç›¸å¯¹è·¯å¾„ï¼Œæ™®é€‚æ€§æ›´å¼º 1&lt;Image Source=&quot;pack://application:,,,/Images/logo.png&quot; Width=&quot;120&quot; Height=&quot;120&quot;/&gt; æ˜æ˜Sourceæ˜¯ImageSourceç±»å‹ï¼Œä¸ºä»€ä¹ˆå¯ä»¥æ¥å—ä¸€ä¸ªä»£è¡¨å›¾ç‰‡è·¯å¾„çš„å­—ç¬¦ä¸²å‘¢ï¼Ÿå› ä¸ºImageSourceç±»ä¸­æœ‰ä¸€ä¸ªToString()é‡è½½æˆå‘˜ã€‚ 4.2æœ¬åœ°å›¾ç‰‡åŠ è½½ æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æŠŠè¿™ä¸ªå¼ å›¾ç‰‡æ”¾åˆ°Debugç›®å½•ä¸­ï¼Œè¯•è¯•ç”¨å¦ä¸€ç§æ–¹å¼åŠ è½½æœ¬åœ°å›¾ç‰‡ã€‚ æ­¤æ—¶ï¼Œè¿™å¼ å›¾ç‰‡å¹¶æ²¡æœ‰å¯¼å…¥åˆ°é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å¦‚ä½•åŠ è½½æœ¬åœ°å›¾ç‰‡ã€‚ å‰ç«¯ä»£ç  1234&lt;WrapPanel&gt; &lt;Image Source=&quot;/Images/logo.png&quot; Width=&quot;120&quot; Height=&quot;120&quot;/&gt; &lt;Image x:Name=&quot;image2&quot; Width=&quot;120&quot; Height=&quot;120&quot;/&gt;&lt;/WrapPanel&gt; åç«¯ä»£ç  12345678910public partial class MainWindow : Window&#123; public MainWindow() &#123; InitializeComponent(); var path = Environment.CurrentDirectory + &quot;\\\\&quot; + &quot;logo.png&quot;; var imageSource = BitmapFrame.Create(new Uri(path), BitmapCreateOptions.None, BitmapCacheOption.OnLoad); image2.Source = imageSource; &#125;&#125; åœ¨ä¸»çª—ä½“çš„æ„é€ å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬è·å–äº†å›¾ç‰‡çš„å®Œæ•´åœ°å€ï¼Œç„¶ååˆ©ç”¨BitmapFrameç±»Createæ–¹æ³•æˆå‘˜å°†æœ¬åœ°å›¾ç‰‡åŠ è½½è¿›æ¥å¹¶è¿”å›ä¸€ä¸ªBitmapFrameå¯¹è±¡ï¼ŒBitmapFrameå¯¹è±¡ç»§æ‰¿äºBitmapSourceï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å°†è¿™ä¸ªå®ä¾‹é€šè¿‡C#ä»£ç çš„æ–¹å¼èµ‹å€¼ç»™image2çš„Sourceå±æ€§ã€‚ GroupBoxæ ‡é¢˜å®¹å™¨æ§ä»¶GroupBoxæ§ä»¶çš„åŠŸèƒ½æ˜¯æä¾›ä¸€ä¸ªå¸¦æ ‡é¢˜çš„å†…å®¹å®¹å™¨ï¼Œå®ƒç»§æ‰¿äºHeaderedContentControlç±»ï¼ŒHeaderedContentControlç»§æ‰¿äºContentControlç±»ã€‚é€šå¸¸å®ƒç”¨æ¥åšä¸€äº›å±€éƒ¨çš„å¸ƒå±€ã€‚ç”±äºGroupBoxæœ¬èº«å¹¶æ²¡æœ‰ä»€ä¹ˆæˆå‘˜ï¼Œæ‰€ä»¥æˆ‘ä»¬ç›´æ¥è§‚å¯Ÿå®ƒçš„åŸºç±»ã€‚ ä¸€ã€HeaderedContentControlåŸºç±» 123456789101112131415161718192021222324public class HeaderedContentControl : ContentControl&#123; public static readonly DependencyProperty HeaderProperty; public static readonly DependencyProperty HasHeaderProperty; public static readonly DependencyProperty HeaderTemplateProperty; public static readonly DependencyProperty HeaderTemplateSelectorProperty; public static readonly DependencyProperty HeaderStringFormatProperty; public HeaderedContentControl(); public DataTemplateSelector HeaderTemplateSelector &#123; get; set; &#125; public DataTemplate HeaderTemplate &#123; get; set; &#125; public string HeaderStringFormat &#123; get; set; &#125; public bool HasHeader &#123; get; &#125; public object Header &#123; get; set; &#125; protected internal override IEnumerator LogicalChildren &#123; get; &#125; public override string ToString(); protected virtual void OnHeaderChanged(object oldHeader, object newHeader); protected virtual void OnHeaderStringFormatChanged(string oldHeaderStringFormat, string newHeaderStringFormat); protected virtual void OnHeaderTemplateChanged(DataTemplate oldHeaderTemplate, DataTemplate newHeaderTemplate); protected virtual void OnHeaderTemplateSelectorChanged(DataTemplateSelector oldHeaderTemplateSelector, DataTemplateSelector newHeaderTemplateSelector); &#125; åœ¨è¿™ä¸ªåŸºç±»ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä»–ç»§æ‰¿äºContentControlåŸºç±»ï¼Œæ‰€ä»¥GroupBoxè¦æ˜¾ç¤ºçš„å†…å®¹éƒ½ä¼šæ”¾åˆ°Contentå±æ€§ä¸­ï¼Œè€ŒGroupBoxçš„æ ‡é¢˜åˆ™æ”¾åœ¨Headerå±æ€§ä¸­ï¼Œæ³¨æ„ï¼ŒHeaderå±æ€§ä¹Ÿæ˜¯objectã€‚è¿™è¶³ä»¥è¯´æ˜GroupBoxåœ¨ç§äººå®šåˆ¶æ–¹é¢çš„å¼ºå¤§æ‰©å±•æ€§ã€‚ å†åŠ ä¸ŠHeaderTemplateå±æ€§ï¼Œå¯ä»¥å®šåˆ¶æ ‡é¢˜çš„å¤–è§‚ã€‚å¾…æˆ‘ä»¬åœ¨åé¢å­¦äº†æ¨¡æ¿å’Œæ ·å¼ï¼Œå†å›å¤´æ¥æ¢è®¨è¿™ä¸€ç±»çš„å±æ€§çš„åº”ç”¨ã€‚ GroupBoxçš„ç®€å•ç”¨æ³•å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334&lt;Window x:Class=&quot;HelloWorld.MainWindow&quot; xmlns=&quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot; xmlns:x=&quot;http://schemas.microsoft.com/winfx/2006/xaml&quot; xmlns:d=&quot;http://schemas.microsoft.com/expression/blend/2008&quot; xmlns:mc=&quot;http://schemas.openxmlformats.org/markup-compatibility/2006&quot; xmlns:local=&quot;clr-namespace:HelloWorld&quot; mc:Ignorable=&quot;d&quot; FontSize=&quot;16&quot; Title=&quot;WPFä¸­æ–‡ç½‘ä¹‹æ§ä»¶è¯¾ç¨‹ - www.wpfsoft.com&quot; Height=&quot;350&quot; Width=&quot;500&quot;&gt; &lt;GroupBox Header=&quot;ç¼©ç•¥å›¾&quot; Margin=&quot;5&quot;&gt; &lt;WrapPanel&gt; &lt;Border BorderBrush=&quot;LightGray&quot; BorderThickness=&quot;1&quot; CornerRadius=&quot;5&quot; Padding=&quot;3&quot; Margin=&quot;3&quot;&gt; &lt;Image Source=&quot;pack://application:,,,/Images/logo.png&quot; Width=&quot;100&quot; Height=&quot;100&quot;/&gt; &lt;/Border&gt; &lt;Border BorderBrush=&quot;LightGray&quot; BorderThickness=&quot;1&quot; CornerRadius=&quot;5&quot; Padding=&quot;3&quot; Margin=&quot;3&quot;&gt; &lt;Image Source=&quot;pack://application:,,,/Images/logo.png&quot; Width=&quot;100&quot; Height=&quot;100&quot;/&gt; &lt;/Border&gt; &lt;Border BorderBrush=&quot;LightGray&quot; BorderThickness=&quot;1&quot; CornerRadius=&quot;5&quot; Padding=&quot;3&quot; Margin=&quot;3&quot;&gt; &lt;Image Source=&quot;pack://application:,,,/Images/logo.png&quot; Width=&quot;100&quot; Height=&quot;100&quot;/&gt; &lt;/Border&gt; &lt;Border BorderBrush=&quot;LightGray&quot; BorderThickness=&quot;1&quot; CornerRadius=&quot;5&quot; Padding=&quot;3&quot; Margin=&quot;3&quot;&gt; &lt;Image Source=&quot;pack://application:,,,/Images/logo.png&quot; Width=&quot;100&quot; Height=&quot;100&quot;/&gt; &lt;/Border&gt; &lt;Border BorderBrush=&quot;LightGray&quot; BorderThickness=&quot;1&quot; CornerRadius=&quot;5&quot; Padding=&quot;3&quot; Margin=&quot;3&quot;&gt; &lt;Image Source=&quot;pack://application:,,,/Images/logo.png&quot; Width=&quot;100&quot; Height=&quot;100&quot;/&gt; &lt;/Border&gt; &lt;Border BorderBrush=&quot;LightGray&quot; BorderThickness=&quot;1&quot; CornerRadius=&quot;5&quot; Padding=&quot;3&quot; Margin=&quot;3&quot;&gt; &lt;Image Source=&quot;pack://application:,,,/Images/logo.png&quot; Width=&quot;100&quot; Height=&quot;100&quot;/&gt; &lt;/Border&gt; &lt;Border BorderBrush=&quot;LightGray&quot; BorderThickness=&quot;1&quot; CornerRadius=&quot;5&quot; Padding=&quot;3&quot; Margin=&quot;3&quot;&gt; &lt;Image Source=&quot;pack://application:,,,/Images/logo.png&quot; Width=&quot;100&quot; Height=&quot;100&quot;/&gt; &lt;/Border&gt; &lt;/WrapPanel&gt; &lt;/GroupBox&gt;&lt;/Window&gt; å› ä¸ºGroupBoxçš„Contentå±æ€§åªèƒ½æ˜¾ç¤ºä¸€ä¸ªå†…å®¹å¯¹è±¡ï¼Œå¦‚æœè¦æ˜¾ç¤ºå¤šä¸ªå¯¹è±¡ï¼Œé‚£æŠŠç»™Contentä¸€ä¸ªé›†åˆæ§ä»¶ï¼Œæ¯”å¦‚ä¸Šé¢çš„WrapPanelæ§ä»¶ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨WrapPanelæ§ä»¶ä¸­æ”¾å¤šä¸ªå­å…ƒç´ äº†ã€‚ åœ¨ä½¿ç”¨ä¸Šï¼Œæœ‰ä¸€ä¸ªé›†åˆæ§ä»¶ä¸GroupBoxç±»ä¼¼ï¼Œå› ä¸ºGroupBoxåªèƒ½æ˜¾ç¤ºä¸€ä¸ªåŒºåŸŸï¼Œå¦‚æœåŒºåŸŸè¿‡å¤§ï¼Œåœ¨æœ‰é™çš„çª—ä½“æ— æ³•å…¨éƒ¨æ˜¾ç¤ºå‡ºæ¥ï¼Œè¯¥æ€ä¹ˆåŠå‘¢ï¼ŸScrollViewerå¯ä»¥åšåˆ°è¿™ä¸€ç‚¹ã€‚ ä¸‹ä¸€èŠ‚ï¼Œæˆ‘ä»¬æ¥æ¢è®¨ä¸€ä¸‹ScrollVieweræ§ä»¶çš„ç”¨æ³•ã€‚ ScrollVieweræ§ä»¶å¦‚æœæŸä¸ªæ§ä»¶çš„å°ºå¯¸å¤ªå¤§ï¼Œå½“å‰ç•Œé¢æ— æ³•å…¨éƒ¨æ˜¾ç¤ºï¼Œåˆ™å¯ä»¥å°†è¿™ä¸ªæ§ä»¶åŒ…å«åœ¨ScrollViewerä¸­ï¼Œå› ä¸ºScrollVieweræ§ä»¶å°è£…äº†ä¸€ä¸ªæ°´å¹³æ»šåŠ¨æ¡ScrollBarå’Œä¸€ä¸ªå‚ç›´æ»šåŠ¨æ¡ScrollBarï¼Œæ‰€ä»¥ï¼ŒScrollViewerå°±æ˜¯ä¸€ä¸ªåŒ…å«å…¶å®ƒå¯è§†å…ƒç´ çš„å¯æ»šåŠ¨åŒºåŸŸæ§ä»¶ã€‚ ScrollViewerç»§æ‰¿äºContentControlï¼Œæ‰€ä»¥å®ƒä¹Ÿæ˜¯ä¸€ä¸ªå†…å®¹æ§ä»¶ï¼Œåªèƒ½åœ¨Contentå±æ€§ä¸­è®¾ç½®ä¸€ä¸ªå­å…ƒç´ ï¼Œå¦‚æœè¦åœ¨ScrollViewerä¸­æ˜¾ç¤ºå¤šä¸ªå­å…ƒç´ ï¼Œè¯·è®¾ç½®ä¸€ä¸ªé›†åˆæ§ä»¶ã€‚ ScrollViewer æ§ä»¶æ—¢å“åº”é¼ æ ‡å‘½ä»¤ï¼Œä¹Ÿå“åº”é”®ç›˜å‘½ä»¤ï¼Œå¹¶å®šä¹‰è®¸å¤šå¯ç”¨äºæŒ‰é¢„è®¾çš„å¢é‡æ»šåŠ¨å†…å®¹çš„æ–¹æ³•ã€‚ å¯ä»¥ä½¿ç”¨ ScrollChanged äº‹ä»¶æ¥æ£€æµ‹ ScrollViewer çŠ¶æ€çš„å˜åŒ–ã€‚ ä¸€ã€ScrollViewerç±»çš„å®šä¹‰ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596public class ScrollViewer : ContentControl&#123; public static readonly DependencyProperty CanContentScrollProperty; public static readonly DependencyProperty PanningRatioProperty; public static readonly DependencyProperty PanningDecelerationProperty; public static readonly DependencyProperty PanningModeProperty; public static readonly RoutedEvent ScrollChangedEvent; public static readonly DependencyProperty IsDeferredScrollingEnabledProperty; public static readonly DependencyProperty ViewportWidthProperty; public static readonly DependencyProperty ScrollableHeightProperty; public static readonly DependencyProperty ScrollableWidthProperty; public static readonly DependencyProperty ExtentHeightProperty; public static readonly DependencyProperty ViewportHeightProperty; public static readonly DependencyProperty ContentHorizontalOffsetProperty; public static readonly DependencyProperty ContentVerticalOffsetProperty; public static readonly DependencyProperty HorizontalOffsetProperty; public static readonly DependencyProperty ExtentWidthProperty; public static readonly DependencyProperty VerticalOffsetProperty; public static readonly DependencyProperty ComputedVerticalScrollBarVisibilityProperty; public static readonly DependencyProperty ComputedHorizontalScrollBarVisibilityProperty; public static readonly DependencyProperty VerticalScrollBarVisibilityProperty; public static readonly DependencyProperty HorizontalScrollBarVisibilityProperty; public ScrollViewer(); public bool CanContentScroll &#123; get; set; &#125; public ScrollBarVisibility HorizontalScrollBarVisibility &#123; get; set; &#125; public ScrollBarVisibility VerticalScrollBarVisibility &#123; get; set; &#125; public Visibility ComputedHorizontalScrollBarVisibility &#123; get; &#125; public Visibility ComputedVerticalScrollBarVisibility &#123; get; &#125; public double HorizontalOffset &#123; get; &#125; public double VerticalOffset &#123; get; &#125; public double ExtentWidth &#123; get; &#125; public double ExtentHeight &#123; get; &#125; public double PanningDeceleration &#123; get; set; &#125; public double ScrollableHeight &#123; get; &#125; public double ViewportWidth &#123; get; &#125; public double ViewportHeight &#123; get; &#125; public double ContentVerticalOffset &#123; get; &#125; public double ContentHorizontalOffset &#123; get; &#125; public bool IsDeferredScrollingEnabled &#123; get; set; &#125; public PanningMode PanningMode &#123; get; set; &#125; public double ScrollableWidth &#123; get; &#125; public double PanningRatio &#123; get; set; &#125; protected internal override bool HandlesScrolling &#123; get; &#125; protected internal IScrollInfo ScrollInfo &#123; get; set; &#125; public event ScrollChangedEventHandler ScrollChanged; public static bool GetCanContentScroll(DependencyObject element); public static ScrollBarVisibility GetHorizontalScrollBarVisibility(DependencyObject element); public static bool GetIsDeferredScrollingEnabled(DependencyObject element); public static double GetPanningDeceleration(DependencyObject element); public static PanningMode GetPanningMode(DependencyObject element); public static double GetPanningRatio(DependencyObject element); public static ScrollBarVisibility GetVerticalScrollBarVisibility(DependencyObject element); public static void SetCanContentScroll(DependencyObject element, bool canContentScroll); public static void SetHorizontalScrollBarVisibility(DependencyObject element, ScrollBarVisibility horizontalScrollBarVisibility); public static void SetIsDeferredScrollingEnabled(DependencyObject element, bool value); public static void SetPanningDeceleration(DependencyObject element, double value); public static void SetPanningMode(DependencyObject element, PanningMode panningMode); public static void SetPanningRatio(DependencyObject element, double value); public static void SetVerticalScrollBarVisibility(DependencyObject element, ScrollBarVisibility verticalScrollBarVisibility); public void InvalidateScrollInfo(); public void LineDown(); public void LineLeft(); public void LineRight(); public void LineUp(); public override void OnApplyTemplate(); public void PageDown(); public void PageLeft(); public void PageRight(); public void PageUp(); public void ScrollToBottom(); public void ScrollToEnd(); public void ScrollToHome(); public void ScrollToHorizontalOffset(double offset); public void ScrollToLeftEnd(); public void ScrollToRightEnd(); public void ScrollToTop(); public void ScrollToVerticalOffset(double offset); protected override Size ArrangeOverride(Size arrangeSize); protected override HitTestResult HitTestCore(PointHitTestParameters hitTestParameters); protected override Size MeasureOverride(Size constraint); protected override AutomationPeer OnCreateAutomationPeer(); protected override void OnKeyDown(KeyEventArgs e); protected override void OnManipulationCompleted(ManipulationCompletedEventArgs e); protected override void OnManipulationDelta(ManipulationDeltaEventArgs e); protected override void OnManipulationInertiaStarting(ManipulationInertiaStartingEventArgs e); protected override void OnManipulationStarting(ManipulationStartingEventArgs e); protected override void OnMouseLeftButtonDown(MouseButtonEventArgs e); protected override void OnMouseWheel(MouseWheelEventArgs e); protected virtual void OnScrollChanged(ScrollChangedEventArgs e); protected override void OnStylusSystemGesture(StylusSystemGestureEventArgs e); &#125; äºŒã€å±æ€§æˆå‘˜ HorizontalScrollBarVisibilityï¼šæ˜¯å¦éšè—æ°´å¹³æ»šåŠ¨æ¡ï¼Œä¸ºtrueè¡¨ç¤ºéšè—ï¼Œæ­¤æ—¶æ°´å¹³æ–¹å‘ä¸å¯æ»šåŠ¨ã€‚ VerticalScrollBarVisibilityï¼šæ˜¯å¦éšè—å‚ç›´æ»šåŠ¨æ¡ï¼Œä¸ºtrueè¡¨ç¤ºéšè—ï¼Œæ­¤æ—¶å‚ç›´æ–¹å‘ä¸å¯æ»šåŠ¨ã€‚ ä¸‰ã€äº‹ä»¶æˆå‘˜ ScrollChangedï¼šå½“æ§ä»¶çš„æ»šåŠ¨ä½ç½®å‘ç”Ÿå˜åŒ–æ—¶å°†è§¦å‘æ­¤äº‹ä»¶ã€‚ å››ã€ç¤ºä¾‹ å‰ç«¯ä»£ç  123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136&lt;Window x:Class=&quot;HelloWorld.MainWindow&quot; xmlns=&quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot; xmlns:x=&quot;http://schemas.microsoft.com/winfx/2006/xaml&quot; xmlns:d=&quot;http://schemas.microsoft.com/expression/blend/2008&quot; xmlns:mc=&quot;http://schemas.openxmlformats.org/markup-compatibility/2006&quot; xmlns:local=&quot;clr-namespace:HelloWorld&quot; mc:Ignorable=&quot;d&quot; FontSize=&quot;16&quot; Title=&quot;WPFä¸­æ–‡ç½‘ä¹‹æ§ä»¶è¯¾ç¨‹ - www.wpfsoft.com&quot; Height=&quot;350&quot; Width=&quot;500&quot;&gt; &lt;ScrollViewer&gt; &lt;WrapPanel&gt; &lt;Border BorderBrush=&quot;LightGray&quot; BorderThickness=&quot;1&quot; CornerRadius=&quot;5&quot; Padding=&quot;3&quot; Margin=&quot;3&quot;&gt; &lt;Image Source=&quot;pack://application:,,,/Images/logo.png&quot; Width=&quot;100&quot; Height=&quot;100&quot;/&gt; &lt;/Border&gt; &lt;Border BorderBrush=&quot;LightGray&quot; BorderThickness=&quot;1&quot; CornerRadius=&quot;5&quot; Padding=&quot;3&quot; Margin=&quot;3&quot;&gt; &lt;Image Source=&quot;pack://application:,,,/Images/logo.png&quot; Width=&quot;100&quot; Height=&quot;100&quot;/&gt; &lt;/Border&gt; &lt;Border BorderBrush=&quot;LightGray&quot; BorderThickness=&quot;1&quot; CornerRadius=&quot;5&quot; Padding=&quot;3&quot; Margin=&quot;3&quot;&gt; &lt;Image Source=&quot;pack://application:,,,/Images/logo.png&quot; Width=&quot;100&quot; Height=&quot;100&quot;/&gt; &lt;/Border&gt; &lt;Border BorderBrush=&quot;LightGray&quot; BorderThickness=&quot;1&quot; CornerRadius=&quot;5&quot; Padding=&quot;3&quot; Margin=&quot;3&quot;&gt; &lt;Image Source=&quot;pack://application:,,,/Images/logo.png&quot; Width=&quot;100&quot; Height=&quot;100&quot;/&gt; &lt;/Border&gt; &lt;Border BorderBrush=&quot;LightGray&quot; BorderThickness=&quot;1&quot; CornerRadius=&quot;5&quot; Padding=&quot;3&quot; Margin=&quot;3&quot;&gt; &lt;Image Source=&quot;pack://application:,,,/Images/logo.png&quot; Width=&quot;100&quot; Height=&quot;100&quot;/&gt; &lt;/Border&gt; &lt;Border BorderBrush=&quot;LightGray&quot; BorderThickness=&quot;1&quot; CornerRadius=&quot;5&quot; Padding=&quot;3&quot; Margin=&quot;3&quot;&gt; &lt;Image Source=&quot;pack://application:,,,/Images/logo.png&quot; Width=&quot;100&quot; Height=&quot;100&quot;/&gt; &lt;/Border&gt; &lt;Border BorderBrush=&quot;LightGray&quot; BorderThickness=&quot;1&quot; CornerRadius=&quot;5&quot; Padding=&quot;3&quot; Margin=&quot;3&quot;&gt; &lt;Image Source=&quot;pack://application:,,,/Images/logo.png&quot; Width=&quot;100&quot; Height=&quot;100&quot;/&gt; &lt;/Border&gt; &lt;Border BorderBrush=&quot;LightGray&quot; BorderThickness=&quot;1&quot; CornerRadius=&quot;5&quot; Padding=&quot;3&quot; Margin=&quot;3&quot;&gt; &lt;Image Source=&quot;pack://application:,,,/Images/logo.png&quot; Width=&quot;100&quot; Height=&quot;100&quot;/&gt; &lt;/Border&gt; &lt;Border BorderBrush=&quot;LightGray&quot; BorderThickness=&quot;1&quot; CornerRadius=&quot;5&quot; Padding=&quot;3&quot; Margin=&quot;3&quot;&gt; &lt;Image Source=&quot;pack://application:,,,/Images/logo.png&quot; Width=&quot;100&quot; Height=&quot;100&quot;/&gt; &lt;/Border&gt; &lt;Border BorderBrush=&quot;LightGray&quot; BorderThickness=&quot;1&quot; CornerRadius=&quot;5&quot; Padding=&quot;3&quot; Margin=&quot;3&quot;&gt; &lt;Image Source=&quot;pack://application:,,,/Images/logo.png&quot; Width=&quot;100&quot; Height=&quot;100&quot;/&gt; &lt;/Border&gt; &lt;Border BorderBrush=&quot;LightGray&quot; BorderThickness=&quot;1&quot; CornerRadius=&quot;5&quot; Padding=&quot;3&quot; Margin=&quot;3&quot;&gt; &lt;Image Source=&quot;pack://application:,,,/Images/logo.png&quot; Width=&quot;100&quot; Height=&quot;100&quot;/&gt; &lt;/Border&gt; &lt;Border BorderBrush=&quot;LightGray&quot; BorderThickness=&quot;1&quot; CornerRadius=&quot;5&quot; Padding=&quot;3&quot; Margin=&quot;3&quot;&gt; &lt;Image Source=&quot;pack://application:,,,/Images/logo.png&quot; Width=&quot;100&quot; Height=&quot;100&quot;/&gt; &lt;/Border&gt; &lt;Border BorderBrush=&quot;LightGray&quot; BorderThickness=&quot;1&quot; CornerRadius=&quot;5&quot; Padding=&quot;3&quot; Margin=&quot;3&quot;&gt; &lt;Image Source=&quot;pack://application:,,,/Images/logo.png&quot; Width=&quot;100&quot; Height=&quot;100&quot;/&gt; &lt;/Border&gt; &lt;Border BorderBrush=&quot;LightGray&quot; BorderThickness=&quot;1&quot; CornerRadius=&quot;5&quot; Padding=&quot;3&quot; Margin=&quot;3&quot;&gt; &lt;Image Source=&quot;pack://application:,,,/Images/logo.png&quot; Width=&quot;100&quot; Height=&quot;100&quot;/&gt; &lt;/Border&gt; &lt;Border BorderBrush=&quot;LightGray&quot; BorderThickness=&quot;1&quot; CornerRadius=&quot;5&quot; Padding=&quot;3&quot; Margin=&quot;3&quot;&gt; &lt;Image Source=&quot;pack://application:,,,/Images/logo.png&quot; Width=&quot;100&quot; Height=&quot;100&quot;/&gt; &lt;/Border&gt; &lt;Border BorderBrush=&quot;LightGray&quot; BorderThickness=&quot;1&quot; CornerRadius=&quot;5&quot; Padding=&quot;3&quot; Margin=&quot;3&quot;&gt; &lt;Image Source=&quot;pack://application:,,,/Images/logo.png&quot; Width=&quot;100&quot; Height=&quot;100&quot;/&gt; &lt;/Border&gt; &lt;Border BorderBrush=&quot;LightGray&quot; BorderThickness=&quot;1&quot; CornerRadius=&quot;5&quot; Padding=&quot;3&quot; Margin=&quot;3&quot;&gt; &lt;Image Source=&quot;pack://application:,,,/Images/logo.png&quot; Width=&quot;100&quot; Height=&quot;100&quot;/&gt; &lt;/Border&gt; &lt;Border BorderBrush=&quot;LightGray&quot; BorderThickness=&quot;1&quot; CornerRadius=&quot;5&quot; Padding=&quot;3&quot; Margin=&quot;3&quot;&gt; &lt;Image Source=&quot;pack://application:,,,/Images/logo.png&quot; Width=&quot;100&quot; Height=&quot;100&quot;/&gt; &lt;/Border&gt; &lt;Border BorderBrush=&quot;LightGray&quot; BorderThickness=&quot;1&quot; CornerRadius=&quot;5&quot; Padding=&quot;3&quot; Margin=&quot;3&quot;&gt; &lt;Image Source=&quot;pack://application:,,,/Images/logo.png&quot; Width=&quot;100&quot; Height=&quot;100&quot;/&gt; &lt;/Border&gt; &lt;Border BorderBrush=&quot;LightGray&quot; BorderThickness=&quot;1&quot; CornerRadius=&quot;5&quot; Padding=&quot;3&quot; Margin=&quot;3&quot;&gt; &lt;Image Source=&quot;pack://application:,,,/Images/logo.png&quot; Width=&quot;100&quot; Height=&quot;100&quot;/&gt; &lt;/Border&gt; &lt;Border BorderBrush=&quot;LightGray&quot; BorderThickness=&quot;1&quot; CornerRadius=&quot;5&quot; Padding=&quot;3&quot; Margin=&quot;3&quot;&gt; &lt;Image Source=&quot;pack://application:,,,/Images/logo.png&quot; Width=&quot;100&quot; Height=&quot;100&quot;/&gt; &lt;/Border&gt; &lt;Border BorderBrush=&quot;LightGray&quot; BorderThickness=&quot;1&quot; CornerRadius=&quot;5&quot; Padding=&quot;3&quot; Margin=&quot;3&quot;&gt; &lt;Image Source=&quot;pack://application:,,,/Images/logo.png&quot; Width=&quot;100&quot; Height=&quot;100&quot;/&gt; &lt;/Border&gt; &lt;Border BorderBrush=&quot;LightGray&quot; BorderThickness=&quot;1&quot; CornerRadius=&quot;5&quot; Padding=&quot;3&quot; Margin=&quot;3&quot;&gt; &lt;Image Source=&quot;pack://application:,,,/Images/logo.png&quot; Width=&quot;100&quot; Height=&quot;100&quot;/&gt; &lt;/Border&gt; &lt;Border BorderBrush=&quot;LightGray&quot; BorderThickness=&quot;1&quot; CornerRadius=&quot;5&quot; Padding=&quot;3&quot; Margin=&quot;3&quot;&gt; &lt;Image Source=&quot;pack://application:,,,/Images/logo.png&quot; Width=&quot;100&quot; Height=&quot;100&quot;/&gt; &lt;/Border&gt; &lt;Border BorderBrush=&quot;LightGray&quot; BorderThickness=&quot;1&quot; CornerRadius=&quot;5&quot; Padding=&quot;3&quot; Margin=&quot;3&quot;&gt; &lt;Image Source=&quot;pack://application:,,,/Images/logo.png&quot; Width=&quot;100&quot; Height=&quot;100&quot;/&gt; &lt;/Border&gt; &lt;Border BorderBrush=&quot;LightGray&quot; BorderThickness=&quot;1&quot; CornerRadius=&quot;5&quot; Padding=&quot;3&quot; Margin=&quot;3&quot;&gt; &lt;Image Source=&quot;pack://application:,,,/Images/logo.png&quot; Width=&quot;100&quot; Height=&quot;100&quot;/&gt; &lt;/Border&gt; &lt;Border BorderBrush=&quot;LightGray&quot; BorderThickness=&quot;1&quot; CornerRadius=&quot;5&quot; Padding=&quot;3&quot; Margin=&quot;3&quot;&gt; &lt;Image Source=&quot;pack://application:,,,/Images/logo.png&quot; Width=&quot;100&quot; Height=&quot;100&quot;/&gt; &lt;/Border&gt; &lt;Border BorderBrush=&quot;LightGray&quot; BorderThickness=&quot;1&quot; CornerRadius=&quot;5&quot; Padding=&quot;3&quot; Margin=&quot;3&quot;&gt; &lt;Image Source=&quot;pack://application:,,,/Images/logo.png&quot; Width=&quot;100&quot; Height=&quot;100&quot;/&gt; &lt;/Border&gt; &lt;Border BorderBrush=&quot;LightGray&quot; BorderThickness=&quot;1&quot; CornerRadius=&quot;5&quot; Padding=&quot;3&quot; Margin=&quot;3&quot;&gt; &lt;Image Source=&quot;pack://application:,,,/Images/logo.png&quot; Width=&quot;100&quot; Height=&quot;100&quot;/&gt; &lt;/Border&gt; &lt;Border BorderBrush=&quot;LightGray&quot; BorderThickness=&quot;1&quot; CornerRadius=&quot;5&quot; Padding=&quot;3&quot; Margin=&quot;3&quot;&gt; &lt;Image Source=&quot;pack://application:,,,/Images/logo.png&quot; Width=&quot;100&quot; Height=&quot;100&quot;/&gt; &lt;/Border&gt; &lt;Border BorderBrush=&quot;LightGray&quot; BorderThickness=&quot;1&quot; CornerRadius=&quot;5&quot; Padding=&quot;3&quot; Margin=&quot;3&quot;&gt; &lt;Image Source=&quot;pack://application:,,,/Images/logo.png&quot; Width=&quot;100&quot; Height=&quot;100&quot;/&gt; &lt;/Border&gt; &lt;Border BorderBrush=&quot;LightGray&quot; BorderThickness=&quot;1&quot; CornerRadius=&quot;5&quot; Padding=&quot;3&quot; Margin=&quot;3&quot;&gt; &lt;Image Source=&quot;pack://application:,,,/Images/logo.png&quot; Width=&quot;100&quot; Height=&quot;100&quot;/&gt; &lt;/Border&gt; &lt;Border BorderBrush=&quot;LightGray&quot; BorderThickness=&quot;1&quot; CornerRadius=&quot;5&quot; Padding=&quot;3&quot; Margin=&quot;3&quot;&gt; &lt;Image Source=&quot;pack://application:,,,/Images/logo.png&quot; Width=&quot;100&quot; Height=&quot;100&quot;/&gt; &lt;/Border&gt; &lt;Border BorderBrush=&quot;LightGray&quot; BorderThickness=&quot;1&quot; CornerRadius=&quot;5&quot; Padding=&quot;3&quot; Margin=&quot;3&quot;&gt; &lt;Image Source=&quot;pack://application:,,,/Images/logo.png&quot; Width=&quot;100&quot; Height=&quot;100&quot;/&gt; &lt;/Border&gt; &lt;Border BorderBrush=&quot;LightGray&quot; BorderThickness=&quot;1&quot; CornerRadius=&quot;5&quot; Padding=&quot;3&quot; Margin=&quot;3&quot;&gt; &lt;Image Source=&quot;pack://application:,,,/Images/logo.png&quot; Width=&quot;100&quot; Height=&quot;100&quot;/&gt; &lt;/Border&gt; &lt;Border BorderBrush=&quot;LightGray&quot; BorderThickness=&quot;1&quot; CornerRadius=&quot;5&quot; Padding=&quot;3&quot; Margin=&quot;3&quot;&gt; &lt;Image Source=&quot;pack://application:,,,/Images/logo.png&quot; Width=&quot;100&quot; Height=&quot;100&quot;/&gt; &lt;/Border&gt; &lt;Border BorderBrush=&quot;LightGray&quot; BorderThickness=&quot;1&quot; CornerRadius=&quot;5&quot; Padding=&quot;3&quot; Margin=&quot;3&quot;&gt; &lt;Image Source=&quot;pack://application:,,,/Images/logo.png&quot; Width=&quot;100&quot; Height=&quot;100&quot;/&gt; &lt;/Border&gt; &lt;Border BorderBrush=&quot;LightGray&quot; BorderThickness=&quot;1&quot; CornerRadius=&quot;5&quot; Padding=&quot;3&quot; Margin=&quot;3&quot;&gt; &lt;Image Source=&quot;pack://application:,,,/Images/logo.png&quot; Width=&quot;100&quot; Height=&quot;100&quot;/&gt; &lt;/Border&gt; &lt;Border BorderBrush=&quot;LightGray&quot; BorderThickness=&quot;1&quot; CornerRadius=&quot;5&quot; Padding=&quot;3&quot; Margin=&quot;3&quot;&gt; &lt;Image Source=&quot;pack://application:,,,/Images/logo.png&quot; Width=&quot;100&quot; Height=&quot;100&quot;/&gt; &lt;/Border&gt; &lt;Border BorderBrush=&quot;LightGray&quot; BorderThickness=&quot;1&quot; CornerRadius=&quot;5&quot; Padding=&quot;3&quot; Margin=&quot;3&quot;&gt; &lt;Image Source=&quot;pack://application:,,,/Images/logo.png&quot; Width=&quot;100&quot; Height=&quot;100&quot;/&gt; &lt;/Border&gt; &lt;Border BorderBrush=&quot;LightGray&quot; BorderThickness=&quot;1&quot; CornerRadius=&quot;5&quot; Padding=&quot;3&quot; Margin=&quot;3&quot;&gt; &lt;Image Source=&quot;pack://application:,,,/Images/logo.png&quot; Width=&quot;100&quot; Height=&quot;100&quot;/&gt; &lt;/Border&gt; &lt;/WrapPanel&gt; &lt;/ScrollViewer&gt;&lt;/Window&gt; å¦‚ä¸Šæ‰€ç¤ºï¼Œæˆ‘ä»¬åœ¨WrapPanelä¸­å¢åŠ äº†è®¸å¤šå­å…ƒç´ ï¼Œç„¶ååœ¨å¤–é¢å¥—äº†ä¸€å±‚ScrollViewerï¼Œç”±äºWrapPanelæ˜¯è‡ªåŠ¨æ¢è¡Œæ˜¾ç¤ºæ‰€æœ‰å­å…ƒç´ ï¼ˆå›¾ç‰‡ï¼‰ï¼Œæ‰€ä»¥ï¼ŒScrollViewerä¼šåšå‡ºç›¸åº”é€‚é…ï¼Œåªæ˜¾ç¤ºå‚ç›´æ»šåŠ¨æ¡ã€‚ æ—¢ç„¶ScrollViewerç±»å°è£…äº†ä¸¤ä¸ªæ»šåŠ¨æ¡ï¼ˆScrollBarï¼‰ï¼Œé‚£æˆ‘ä»¬å°±å¿…é¡»è¦äº†è§£ä¸€ä¸‹ScrollBarçš„ç‰¹æ€§ä¸ç”¨æ³•ï¼Œä»¥åŠ å¼ºæˆ‘ä»¬å¯¹WPFæ§ä»¶çš„è¿ç”¨èƒ½åŠ›ã€‚ä¸‹ä¸€èŠ‚ï¼Œæˆ‘ä»¬å°†ä»‹ç»ScrollBarã€‚ ScrollBaræ»šåŠ¨æ¡ScrollBarè¡¨ç¤ºä¸€ä¸ªæ»šåŠ¨æ¡ï¼Œè¯¥æ»šåŠ¨æ¡å…·æœ‰ä¸€ä¸ªæ»‘åŠ¨ Thumbï¼Œå…¶ä½ç½®å¯¹åº”äºä¸€ä¸ªå€¼ã€‚å®ƒç»§æ‰¿äºRangeBaseæŠ½è±¡åŸºç±»ï¼ŒRangeBaseåŸºç±»ç»§æ‰¿äºControlåŸºç±»ã€‚å¸¦æ»šåŠ¨ç‰¹è´¨çš„è¿˜æœ‰ä¸¤ä¸ªæ§ä»¶ï¼Œä¹Ÿç»§æ‰¿äºRangeBaseæŠ½è±¡åŸºç±»ï¼Œå®ƒä»¬åˆ†åˆ«æ˜¯ProgressBarï¼ˆè¿›åº¦æ¡ï¼‰å’ŒSliderï¼ˆæ»‘åŠ¨æ¡ï¼‰ã€‚å¾…æˆ‘ä»¬æ¢è®¨å®ŒScrollBarï¼Œå†æ¥æ¢è®¨ProgressBarå’ŒSliderã€‚ ä¸€ã€RangeBaseæŠ½è±¡åŸºç±»å®šä¹‰ 12345678910111213141516171819202122232425public abstract class RangeBase : Control&#123; public static readonly RoutedEvent ValueChangedEvent; public static readonly DependencyProperty MinimumProperty; public static readonly DependencyProperty MaximumProperty; public static readonly DependencyProperty ValueProperty; public static readonly DependencyProperty LargeChangeProperty; public static readonly DependencyProperty SmallChangeProperty; protected RangeBase(); public double LargeChange &#123; get; set; &#125; public double SmallChange &#123; get; set; &#125; public double Value &#123; get; set; &#125; public double Maximum &#123; get; set; &#125; public double Minimum &#123; get; set; &#125; public event RoutedPropertyChangedEventHandler&lt;double&gt; ValueChanged; public override string ToString(); protected virtual void OnMaximumChanged(double oldMaximum, double newMaximum); protected virtual void OnMinimumChanged(double oldMinimum, double newMinimum); protected virtual void OnValueChanged(double oldValue, double newValue); &#125; RangeBase åªæœ‰5ä¸ªå±æ€§ å±æ€§åç§° è¯´æ˜ LargeChange è¡¨ç¤ºç»™Valueå±æ€§åŠ å‡çš„æœ€å¤§å€¼ã€‚é»˜è®¤ä¸º1 SmallChange è¡¨ç¤ºç»™Valueå±æ€§åŠ å‡çš„æœ€å°å€¼ã€‚é»˜è®¤ä¸º0.1 Value è·å–æˆ–è®¾ç½®èŒƒå›´æ§ä»¶çš„å½“å‰æ•°é‡ã€‚é»˜è®¤ä¸º0 Maximum è·å–æˆ–è®¾ç½®Valueå±æ€§çš„æœ€å¤§å€¼ Minimum è·å–æˆ–è®¾ç½®Valueå±æ€§çš„æœ€å°å€¼ RangeBaseäº‹ä»¶æˆå‘˜ ValueChangedï¼šå½“å‰Valueå±æ€§å‘ç”Ÿæ”¹å˜æ—¶è§¦å‘çš„äº‹ä»¶ã€‚ æ€»ç»“ï¼ŒScrollBarã€ProgressBarå’ŒSlideréƒ½å°†ç»§æ‰¿ä¸Šé¢çš„å±æ€§ã€æ–¹é¢ä¸äº‹ä»¶æˆå‘˜ã€‚ äºŒã€ScrollBarç±»å®šä¹‰ 123456789101112131415161718192021222324252627282930313233343536373839404142public class ScrollBar : RangeBase&#123; public static readonly RoutedEvent ScrollEvent; public static readonly RoutedCommand ScrollHereCommand; public static readonly RoutedCommand DeferScrollToVerticalOffsetCommand; public static readonly RoutedCommand DeferScrollToHorizontalOffsetCommand; public static readonly RoutedCommand ScrollToVerticalOffsetCommand; public static readonly RoutedCommand ScrollToHorizontalOffsetCommand; public static readonly RoutedCommand ScrollToTopCommand; public static readonly RoutedCommand ScrollToLeftEndCommand; public static readonly RoutedCommand ScrollToRightEndCommand; public static readonly RoutedCommand ScrollToHomeCommand; public static readonly RoutedCommand ScrollToEndCommand; public static readonly RoutedCommand ScrollToBottomCommand; public static readonly RoutedCommand PageLeftCommand; public static readonly RoutedCommand PageDownCommand; public static readonly RoutedCommand PageUpCommand; public static readonly RoutedCommand LineRightCommand; public static readonly RoutedCommand PageRightCommand; public static readonly RoutedCommand LineLeftCommand; public static readonly RoutedCommand LineDownCommand; public static readonly RoutedCommand LineUpCommand; public static readonly DependencyProperty ViewportSizeProperty; public static readonly DependencyProperty OrientationProperty; public ScrollBar(); public Orientation Orientation &#123; get; set; &#125; public double ViewportSize &#123; get; set; &#125; public Track Track &#123; get; &#125; protected override bool IsEnabledCore &#123; get; &#125; public event ScrollEventHandler Scroll; public override void OnApplyTemplate(); protected override void OnContextMenuClosing(ContextMenuEventArgs e); protected override void OnContextMenuOpening(ContextMenuEventArgs e); protected override AutomationPeer OnCreateAutomationPeer(); protected override void OnPreviewMouseLeftButtonDown(MouseButtonEventArgs e); protected override void OnPreviewMouseRightButtonUp(MouseButtonEventArgs e); &#125; ScrollBarè‡ªèº«æœ‰ä¸¤ä¸ªå±æ€§æ˜¯æˆ‘ä»¬å¿…é¡»è¦æŒæ¡çš„ï¼Œé‚£å°±æ˜¯Orientation å’ŒViewportSize ã€‚ Orientation ï¼šè¡¨ç¤ºå½“å‰æ»šåŠ¨æ¡æ˜¯æ°´å¹³çš„è¿˜æ˜¯å‚ç›´çš„ã€‚ ViewportSizeï¼šè·å–æˆ–è®¾ç½®å½“å‰å¯è§çš„å¯æ»šåŠ¨å†…å®¹çš„æ•°é‡ã€‚é»˜è®¤å€¼ä¸º0ã€‚ å¦å¤–ï¼Œå®ƒè¿˜æœ‰ä¸€ä¸ªæ»šåŠ¨äº‹ä»¶Scrollå¯ä»¥ä½¿ç”¨ã€‚æˆ‘ä»¬è¿˜æ˜¯ä»¥å®é™…çš„ä¾‹å­æ¥è¯´æ˜å®ƒçš„ç”¨æ³•å§ã€‚ å‰ç«¯ä»£ç  12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970&lt;Window x:Class=&quot;HelloWorld.MainWindow&quot; xmlns=&quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot; xmlns:x=&quot;http://schemas.microsoft.com/winfx/2006/xaml&quot; xmlns:d=&quot;http://schemas.microsoft.com/expression/blend/2008&quot; xmlns:mc=&quot;http://schemas.openxmlformats.org/markup-compatibility/2006&quot; xmlns:local=&quot;clr-namespace:HelloWorld&quot; mc:Ignorable=&quot;d&quot; FontSize=&quot;16&quot; Title=&quot;WPFä¸­æ–‡ç½‘ä¹‹æ§ä»¶è¯¾ç¨‹ - www.wpfsoft.com&quot; Height=&quot;350&quot; Width=&quot;500&quot;&gt; &lt;Grid x:Name=&quot;viewport&quot; &gt; &lt;Grid.RowDefinitions&gt; &lt;RowDefinition Height=&quot;115&quot;/&gt; &lt;RowDefinition Height=&quot;auto&quot;/&gt; &lt;RowDefinition/&gt; &lt;/Grid.RowDefinitions&gt; &lt;Canvas&gt; &lt;StackPanel x:Name=&quot;element&quot; Orientation=&quot;Horizontal&quot; Canvas.Left=&quot;&#123;Binding CanvasLeft&#125;&quot;&gt; &lt;Border BorderBrush=&quot;LightGray&quot; BorderThickness=&quot;1&quot; CornerRadius=&quot;5&quot; Padding=&quot;3&quot; Margin=&quot;3&quot;&gt; &lt;Image Source=&quot;pack://application:,,,/Images/logo.png&quot; Width=&quot;100&quot; Height=&quot;100&quot;/&gt; &lt;/Border&gt; &lt;Border BorderBrush=&quot;LightGray&quot; BorderThickness=&quot;1&quot; CornerRadius=&quot;5&quot; Padding=&quot;3&quot; Margin=&quot;3&quot;&gt; &lt;Image Source=&quot;pack://application:,,,/Images/logo.png&quot; Width=&quot;100&quot; Height=&quot;100&quot;/&gt; &lt;/Border&gt; &lt;Border BorderBrush=&quot;LightGray&quot; BorderThickness=&quot;1&quot; CornerRadius=&quot;5&quot; Padding=&quot;3&quot; Margin=&quot;3&quot;&gt; &lt;Image Source=&quot;pack://application:,,,/Images/logo.png&quot; Width=&quot;100&quot; Height=&quot;100&quot;/&gt; &lt;/Border&gt; &lt;Border BorderBrush=&quot;LightGray&quot; BorderThickness=&quot;1&quot; CornerRadius=&quot;5&quot; Padding=&quot;3&quot; Margin=&quot;3&quot;&gt; &lt;Image Source=&quot;pack://application:,,,/Images/logo.png&quot; Width=&quot;100&quot; Height=&quot;100&quot;/&gt; &lt;/Border&gt; &lt;Border BorderBrush=&quot;LightGray&quot; BorderThickness=&quot;1&quot; CornerRadius=&quot;5&quot; Padding=&quot;3&quot; Margin=&quot;3&quot;&gt; &lt;Image Source=&quot;pack://application:,,,/Images/logo.png&quot; Width=&quot;100&quot; Height=&quot;100&quot;/&gt; &lt;/Border&gt; &lt;Border BorderBrush=&quot;LightGray&quot; BorderThickness=&quot;1&quot; CornerRadius=&quot;5&quot; Padding=&quot;3&quot; Margin=&quot;3&quot;&gt; &lt;Image Source=&quot;pack://application:,,,/Images/logo.png&quot; Width=&quot;100&quot; Height=&quot;100&quot;/&gt; &lt;/Border&gt; &lt;Border BorderBrush=&quot;LightGray&quot; BorderThickness=&quot;1&quot; CornerRadius=&quot;5&quot; Padding=&quot;3&quot; Margin=&quot;3&quot;&gt; &lt;Image Source=&quot;pack://application:,,,/Images/logo.png&quot; Width=&quot;100&quot; Height=&quot;100&quot;/&gt; &lt;/Border&gt; &lt;Border BorderBrush=&quot;LightGray&quot; BorderThickness=&quot;1&quot; CornerRadius=&quot;5&quot; Padding=&quot;3&quot; Margin=&quot;3&quot;&gt; &lt;Image Source=&quot;pack://application:,,,/Images/logo.png&quot; Width=&quot;100&quot; Height=&quot;100&quot;/&gt; &lt;/Border&gt; &lt;Border BorderBrush=&quot;LightGray&quot; BorderThickness=&quot;1&quot; CornerRadius=&quot;5&quot; Padding=&quot;3&quot; Margin=&quot;3&quot;&gt; &lt;Image Source=&quot;pack://application:,,,/Images/logo.png&quot; Width=&quot;100&quot; Height=&quot;100&quot;/&gt; &lt;/Border&gt; &lt;Border BorderBrush=&quot;LightGray&quot; BorderThickness=&quot;1&quot; CornerRadius=&quot;5&quot; Padding=&quot;3&quot; Margin=&quot;3&quot;&gt; &lt;Image Source=&quot;pack://application:,,,/Images/logo.png&quot; Width=&quot;100&quot; Height=&quot;100&quot;/&gt; &lt;/Border&gt; &lt;Border BorderBrush=&quot;LightGray&quot; BorderThickness=&quot;1&quot; CornerRadius=&quot;5&quot; Padding=&quot;3&quot; Margin=&quot;3&quot;&gt; &lt;Image Source=&quot;pack://application:,,,/Images/logo.png&quot; Width=&quot;100&quot; Height=&quot;100&quot;/&gt; &lt;/Border&gt; &lt;Border BorderBrush=&quot;LightGray&quot; BorderThickness=&quot;1&quot; CornerRadius=&quot;5&quot; Padding=&quot;3&quot; Margin=&quot;3&quot;&gt; &lt;Image Source=&quot;pack://application:,,,/Images/logo.png&quot; Width=&quot;100&quot; Height=&quot;100&quot;/&gt; &lt;/Border&gt; &lt;Border BorderBrush=&quot;LightGray&quot; BorderThickness=&quot;1&quot; CornerRadius=&quot;5&quot; Padding=&quot;3&quot; Margin=&quot;3&quot;&gt; &lt;Image Source=&quot;pack://application:,,,/Images/logo.png&quot; Width=&quot;100&quot; Height=&quot;100&quot;/&gt; &lt;/Border&gt; &lt;Border BorderBrush=&quot;LightGray&quot; BorderThickness=&quot;1&quot; CornerRadius=&quot;5&quot; Padding=&quot;3&quot; Margin=&quot;3&quot;&gt; &lt;Image Source=&quot;pack://application:,,,/Images/logo.png&quot; Width=&quot;100&quot; Height=&quot;100&quot;/&gt; &lt;/Border&gt; &lt;Border BorderBrush=&quot;LightGray&quot; BorderThickness=&quot;1&quot; CornerRadius=&quot;5&quot; Padding=&quot;3&quot; Margin=&quot;3&quot;&gt; &lt;Image Source=&quot;pack://application:,,,/Images/logo.png&quot; Width=&quot;100&quot; Height=&quot;100&quot;/&gt; &lt;/Border&gt; &lt;/StackPanel&gt; &lt;/Canvas&gt; &lt;ScrollBar Grid.Row=&quot;1&quot; Orientation=&quot;Horizontal&quot; Maximum=&quot;&#123;Binding Maximum&#125;&quot; Value=&quot;&#123;Binding X&#125;&quot; ViewportSize=&quot;&#123;Binding ElementName=viewport,Path=ActualWidth&#125;&quot;/&gt; &lt;TextBlock Grid.Row=&quot;2&quot; Text=&quot;ScrollBar&quot; HorizontalAlignment=&quot;Center&quot; VerticalAlignment=&quot;Center&quot; FontSize=&quot;24&quot;/&gt; &lt;/Grid&gt;&lt;/Window&gt; è§‚å¯Ÿè¿™ä¸ªUIè®¾è®¡ï¼Œæˆ‘ä»¬æ•…æ„åœ¨StackPanelæ§ä»¶ä¸­å¢åŠ äº†å¤šå¼ å›¾ç‰‡ï¼Œä½¿å…¶ä¸èƒ½å®Œå…¨åœ¨Canvasä¸­æ˜¾ç¤ºå‡ºæ¥ï¼Œç„¶ååœ¨ä¸‹é¢å®ä¾‹åŒ–äº†ä¸€æ ¹æ°´å¹³æ»šåŠ¨æ¡ã€‚æ³¨æ„æ»šåŠ¨æ¡çš„å…¶ä¸­ä¸‰ä¸ªå‚æ•°ä½¿ç”¨äº†ç»‘å®šï¼Œä¸ç†Ÿæ‚‰çš„å°ä¼™ä¼´å¯å‚é˜…æ•°æ®ç»‘å®šé‚£ä¸€ç« èŠ‚ã€‚ Maximumï¼šè¡¨ç¤ºè¿™æ ¹æ»šåŠ¨æ¡çš„æœ€å¤§å€¼ã€‚ Valueï¼šè¡¨ç¤ºæ»šåŠ¨æ¡çš„å½“å‰å€¼ã€‚ ViewportSizeï¼šè¡¨ç¤ºæ»šåŠ¨æ¡è¦ä½œç”¨äºæŸä¸ªæ§ä»¶çš„å®½åº¦ï¼ˆè¿™é‡Œå®é™…ä¸ŠæŒ‡Gridçš„å®½åº¦ï¼‰ã€‚ æœ€åï¼Œæˆ‘ä»¬å°†StackPanelæ§ä»¶çš„Canvas.Leftä¾èµ–å±æ€§ç»‘å®šåˆ°ä¸€ä¸ªCanvasLeftå±æ€§ã€‚åªè¦CanvasLeftå±æ€§çš„å€¼å‘ç”Ÿæ”¹å˜ï¼Œé‚£ä¹ˆStackPanelç›¸å¯¹äºCanvasæ°´å¹³ä½ç½®å°±å‘ç”Ÿæ”¹å˜ã€‚ é‚£ä¹ˆCanvasLeftå±æ€§æ˜¯æ€æ ·å‘ç”Ÿæ”¹å˜çš„å‘¢ï¼Ÿè¿™ä¸€åˆ‡å°†åœ¨åå°ä»£ç ä¸­å®ç°ã€‚ åç«¯ä»£ç  123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566using System.ComponentModel;using System.Windows; namespace HelloWorld&#123; /// &lt;summary&gt; /// MainWindow.xaml çš„äº¤äº’é€»è¾‘ /// &lt;/summary&gt; public partial class MainWindow : Window,INotifyPropertyChanged &#123; public MainWindow() &#123; InitializeComponent(); DataContext = this;//å°†å½“å‰çª—ä½“ä½œä¸ºViewModelèµ‹å€¼ç»™å½“å‰çª—ä½“çš„DataContext Loaded += (s, e) =&gt; &#123; //è®¡ç®—æ»šåŠ¨æ¡çš„æœ€å¤§å€¼ Maximum = element.ActualWidth - viewport.ActualWidth; &#125;; &#125; private double maximum = 0; /// &lt;summary&gt; /// æ»šåŠ¨æ¡çš„æœ€å¤§å€¼ /// &lt;/summary&gt; public double Maximum &#123; get &#123; return maximum; &#125; set &#123; maximum = value; NotifyPropertyChanged(&quot;Maximum&quot;); &#125; &#125; private double x = 0; /// &lt;summary&gt; /// æ»šåŠ¨æ¡çš„å½“å‰å€¼ /// &lt;/summary&gt; public double X &#123; get &#123; return x; &#125; set &#123; x = value; CanvasLeft = -x; NotifyPropertyChanged(&quot;X&quot;); &#125; &#125; private double canvasLeft = 0; /// &lt;summary&gt; /// ç›¸å¯¹äºCanvasæ§ä»¶Leftè¾¹è· /// &lt;/summary&gt; public double CanvasLeft &#123; get &#123; return canvasLeft; &#125; set &#123; canvasLeft = value; NotifyPropertyChanged(&quot;CanvasLeft&quot;); &#125; &#125; public event PropertyChangedEventHandler PropertyChanged; /// &lt;summary&gt; /// å±æ€§é€šçŸ¥æ–¹æ³• /// &lt;/summary&gt; /// &lt;param name=&quot;propertyName&quot;&gt;&lt;/param&gt; protected virtual void NotifyPropertyChanged(string propertyName) &#123; if (this.PropertyChanged != null) &#123; this.PropertyChanged(this, new PropertyChangedEventArgs(propertyName)); &#125; &#125; &#125;&#125; å¦‚ä¸Šæ‰€ç¤ºï¼Œæˆ‘ä»¬è·å–åˆ°æ»šåŠ¨æ¡çš„å€¼Xï¼Œç„¶åå–ååèµ‹å€¼ç»™CanvasLeftå±æ€§ï¼Œè€ŒCanvasLeftå±æ€§æ‹¥æœ‰â€œå±æ€§é€šçŸ¥â€åŠŸèƒ½ï¼Œæ•…è€Œå‰ç«¯StackPanelçš„ç›¸å¯¹ä½ç½®ä¼šéšç€ç”¨æˆ·æ‹–åŠ¨æ»šåŠ¨æ¡è€Œå˜åŒ–ã€‚ å…³äºå±æ€§é€šçŸ¥åŠINotifyPropertyChangedæ¥å£ï¼Œæˆ‘ä»¬å°†åœ¨æ•°æ®ç»‘å®šä¸€ç« è®²è§£ã€‚ æŒæ¡äº†ScrollBarçš„ç”¨æ³•åï¼ŒSlideræ§ä»¶ä¹ŸåŸºæœ¬å°±æŒæ¡äº†ï¼Œä¸‹ä¸€èŠ‚ï¼Œæˆ‘ä»¬æ¥æ¢è®¨Sliderã€‚å¯¹äº†ï¼Œå¦‚æœæŠŠä¸‹é¢è¿™æ®µä»£ç æ¢æˆSlideræ§ä»¶ï¼Œä¹Ÿæ˜¯å¯ä»¥ç”¨çš„å“¦ã€‚ æ›´æ¢å‰ 1234&lt;ScrollBar Grid.Row=&quot;1&quot; Orientation=&quot;Horizontal&quot; Maximum=&quot;&#123;Binding Maximum&#125;&quot; Value=&quot;&#123;Binding X&#125;&quot; ViewportSize=&quot;&#123;Binding ElementName=viewport,Path=ActualWidth&#125;&quot;/&gt; æ›´æ¢å 1&lt;Slider Grid.Row=&quot;1&quot; Maximum=&quot;&#123;Binding Maximum&#125;&quot; Value=&quot;&#123;Binding X&#125;&quot;/&gt; Slideræ»‘åŠ¨æ¡Slideræ»‘åŠ¨æ¡ä¸ScrollBaræ»šåŠ¨æ¡æœ‰ç‚¹ç›¸ä¼¼ï¼Œç”šè‡³æŸäº›æƒ…å†µä¸‹ï¼Œä¸¤è€…è¿˜å¯ä»¥äº’æ¢ä½¿ç”¨ã€‚Sliderä¹Ÿç»§æ‰¿äºRangeBaseåŸºç±»ï¼Œå…¶åŠŸèƒ½æ˜¯æä¾›ä¸€ä¸ªå¯ä»¥æ»‘åŠ¨å–å€¼çš„æ§ä»¶ã€‚ ä¸€ã€Sliderç±»å®šä¹‰ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758public class Slider : RangeBase&#123; public static readonly DependencyProperty OrientationProperty; public static readonly DependencyProperty IsMoveToPointEnabledProperty; public static readonly DependencyProperty SelectionEndProperty; public static readonly DependencyProperty SelectionStartProperty; public static readonly DependencyProperty IsSelectionRangeEnabledProperty; public static readonly DependencyProperty TickFrequencyProperty; public static readonly DependencyProperty TickPlacementProperty; public static readonly DependencyProperty TicksProperty; public static readonly DependencyProperty AutoToolTipPrecisionProperty; public static readonly DependencyProperty AutoToolTipPlacementProperty; public static readonly DependencyProperty IntervalProperty; public static readonly DependencyProperty DelayProperty; public static readonly DependencyProperty IsDirectionReversedProperty; public static readonly DependencyProperty IsSnapToTickEnabledProperty; public Slider(); public static RoutedCommand MinimizeValue &#123; get; &#125; public static RoutedCommand IncreaseSmall &#123; get; &#125; public static RoutedCommand DecreaseSmall &#123; get; &#125; public static RoutedCommand MaximizeValue &#123; get; &#125; public static RoutedCommand DecreaseLarge &#123; get; &#125; public static RoutedCommand IncreaseLarge &#123; get; &#125; public bool IsSnapToTickEnabled &#123; get; set; &#125; public int AutoToolTipPrecision &#123; get; set; &#125; public AutoToolTipPlacement AutoToolTipPlacement &#123; get; set; &#125; public int Interval &#123; get; set; &#125; public int Delay &#123; get; set; &#125; public bool IsDirectionReversed &#123; get; set; &#125; public Orientation Orientation &#123; get; set; &#125; public double TickFrequency &#123; get; set; &#125; public DoubleCollection Ticks &#123; get; set; &#125; public double SelectionStart &#123; get; set; &#125; public TickPlacement TickPlacement &#123; get; set; &#125; public bool IsSelectionRangeEnabled &#123; get; set; &#125; public bool IsMoveToPointEnabled &#123; get; set; &#125; public double SelectionEnd &#123; get; set; &#125; public override void OnApplyTemplate(); protected override Size ArrangeOverride(Size finalSize); protected override AutomationPeer OnCreateAutomationPeer(); protected virtual void OnDecreaseLarge(); protected virtual void OnDecreaseSmall(); protected virtual void OnIncreaseLarge(); protected virtual void OnIncreaseSmall(); protected virtual void OnMaximizeValue(); protected override void OnMaximumChanged(double oldMaximum, double newMaximum); protected virtual void OnMinimizeValue(); protected override void OnMinimumChanged(double oldMinimum, double newMinimum); protected override void OnPreviewMouseLeftButtonDown(MouseButtonEventArgs e); protected virtual void OnThumbDragCompleted(DragCompletedEventArgs e); protected virtual void OnThumbDragDelta(DragDeltaEventArgs e); protected virtual void OnThumbDragStarted(DragStartedEventArgs e); protected override void OnValueChanged(double oldValue, double newValue); &#125; äºŒã€å±æ€§æˆå‘˜ å±æ€§åç§° è¯´æ˜ IsSnapToTickEnabled Sliderä¼šæœ‰ä¸€äº›åˆ»åº¦çº¿ï¼Œå¦‚æœè¦æ±‚Thumbç§»åŠ¨åˆ°æœ€è¿‘çš„åˆ»åº¦çº¿ï¼Œåˆ™å¯å°†è¯¥å€¼è®¾ç½®ä¸ºtrueã€‚ AutoToolTipPrecision è·å–æˆ–è®¾ç½®Sliderçš„å€¼çš„å°æ•°ç‚¹ä½æ•°ã€‚ AutoToolTipPlacement è·å–æˆ–è®¾ç½®æŒ‰ä¸‹Thumbæ—¶æ˜¯å¦æ˜¾ç¤ºæç¤ºå·¥å…·ã€‚ Interval è·å–æˆ–è®¾ç½®ç”¨æˆ·æŒ‰ä¸‹RepeatButtonæ—¶æ‰§è¡Œå¢åŠ å‡å°‘å‘½ä»¤çš„æ—¶é—´é—´éš”ï¼ˆæ¯«ç§’ï¼‰ã€‚ Delay è·å–æˆ–è®¾ç½®ç”¨æˆ·æŒ‰ä¸‹RepeatButtonæ—¶å»¶æ—¶å¤šå°‘æ¯«ç§’åæ‰§è¡Œå‘½ä»¤ IsDirectionReversed è·å–æˆ–è®¾ç½®å¢åŠ å€¼çš„æ–¹å‘ã€‚ Orientation è·å–æˆ–è®¾ç½®Sliderçš„æ–¹å‘ã€‚æ°´å¹³æˆ–å‚ç›´ã€‚ TickFrequency è·å–æˆ–è®¾ç½®åˆ»åº¦çº¿ä¹‹é—´çš„é—´éš”ã€‚é»˜è®¤ä¸º1.0 Ticks è·å–æˆ–è®¾ç½®ä¸º System.Windows.Controls.Slider æ˜¾ç¤ºçš„åˆ»åº¦çº¿çš„ä½ç½®ã€‚ SelectionStart è·å–æˆ–è®¾ç½® System.Windows.Controls.Slider çš„æŒ‡å®šé€‰æ‹©å†…å®¹çš„æœ€å¤§å€¼ã€‚ TickPlacement è·å–æˆ–è®¾ç½®åˆ»åº¦çº¿çš„ä½ç½® IsSelectionRangeEnabled è·å–æˆ–è®¾ç½®æ˜¾ç¤ºé€‰æ‹©èŒƒå›´ IsMoveToPointEnabled å¦‚æœThumb ç«‹å³ç§»åŠ¨åˆ°é¼ æ ‡å•å‡»çš„ä½ç½®ï¼Œåˆ™ä¸ºtrueã€‚ SelectionEnd è·å–æˆ–è®¾ç½® System.Windows.Controls.Slider çš„æŒ‡å®šé€‰æ‹©å†…å®¹çš„æœ€å¤§å€¼ã€‚ ä¸‰ã€Sliderç¤ºä¾‹ è§‚å¯Ÿä¸‹é¢çš„ä¾‹å­ï¼Œçœ‹çœ‹Sliderå¦‚ä½•é€šè¿‡æ‹–åŠ¨å»æ”¹å˜å…ƒç´ çš„å°ºå¯¸ã€‚ 123456789101112131415161718192021222324252627&lt;Window x:Class=&quot;HelloWorld.MainWindow&quot; xmlns=&quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot; xmlns:x=&quot;http://schemas.microsoft.com/winfx/2006/xaml&quot; xmlns:d=&quot;http://schemas.microsoft.com/expression/blend/2008&quot; xmlns:mc=&quot;http://schemas.openxmlformats.org/markup-compatibility/2006&quot; xmlns:local=&quot;clr-namespace:HelloWorld&quot; mc:Ignorable=&quot;d&quot; FontSize=&quot;16&quot; Title=&quot;WPFä¸­æ–‡ç½‘ä¹‹æ§ä»¶è¯¾ç¨‹ - www.wpfsoft.com&quot; Height=&quot;350&quot; Width=&quot;500&quot;&gt; &lt;Grid x:Name=&quot;viewport&quot; &gt; &lt;Grid.RowDefinitions&gt; &lt;RowDefinition Height=&quot;*&quot;/&gt; &lt;RowDefinition Height=&quot;auto&quot;/&gt; &lt;RowDefinition Height=&quot;auto&quot;/&gt; &lt;/Grid.RowDefinitions&gt; &lt;Canvas&gt; &lt;Border BorderBrush=&quot;LightGray&quot; BorderThickness=&quot;1&quot; CornerRadius=&quot;5&quot; Padding=&quot;3&quot; Margin=&quot;3&quot;&gt; &lt;Image Source=&quot;pack://application:,,,/Images/logo.png&quot; Width=&quot;&#123;Binding ElementName=slider,Path=Value&#125;&quot; Height=&quot;&#123;Binding ElementName=slider,Path=Value&#125;&quot;/&gt; &lt;/Border&gt; &lt;/Canvas&gt; &lt;DockPanel Grid.Row=&quot;1&quot;&gt; &lt;TextBlock Text=&quot;æ»‘åŠ¨æ”¹å˜å›¾ç‰‡å¤§å°&quot; Margin=&quot;3&quot; FontSize=&quot;14&quot;/&gt; &lt;Slider x:Name=&quot;slider&quot; Minimum=&quot;50&quot; Maximum=&quot;500&quot; Value=&quot;50&quot; Margin=&quot;3&quot;/&gt; &lt;/DockPanel&gt; &lt;/Grid&gt;&lt;/Window&gt; ProgressBarè¿›åº¦æ¡ProgressBarè¿›åº¦æ¡é€šå¸¸åœ¨æˆ‘ä»¬æ‰§è¡ŒæŸä¸ªä»»åŠ¡éœ€è¦èŠ±è´¹å¤§é‡æ—¶é—´æ—¶ä½¿ç”¨ï¼Œè¿™æ—¶å¯ä»¥é‡‡ç”¨è¿›åº¦æ¡æ˜¾ç¤ºä»»åŠ¡æˆ–çº¿ç¨‹çš„æ‰§è¡Œè¿›åº¦ï¼Œä»¥ä¾¿ç»™ç”¨æˆ·è‰¯å¥½çš„ä½¿ç”¨ä½“éªŒã€‚ ä¸€ã€ProgressBarç±»å®šä¹‰ 1234567891011121314151617public class ProgressBar : RangeBase&#123; public static readonly DependencyProperty IsIndeterminateProperty; public static readonly DependencyProperty OrientationProperty; public ProgressBar(); public bool IsIndeterminate &#123; get; set; &#125; public Orientation Orientation &#123; get; set; &#125; public override void OnApplyTemplate(); protected override AutomationPeer OnCreateAutomationPeer(); protected override void OnMaximumChanged(double oldMaximum, double newMaximum); protected override void OnMinimumChanged(double oldMinimum, double newMinimum); protected override void OnValueChanged(double oldValue, double newValue); &#125; ProgressBarè‡ªèº«åªæœ‰ä¸¤ä¸ªå±æ€§ï¼Œåˆ†åˆ«æ˜¯IsIndeterminateå’ŒOrientation ã€‚ IsIndeterminateå±æ€§ï¼šå¦‚æœä¸ºtrueï¼Œè¡¨ç¤ºä»¥åŠ¨ç”»ä»å·¦åˆ°å³æ»‘åŠ¨çš„æ–¹å¼å±•ç¤ºè¿›åº¦æ•ˆæœã€‚ Orientationå±æ€§ï¼šè¡¨ç¤ºè¿›åº¦æ¡çš„æ–¹å¼ï¼Œæ°´å¹³æ—¶ä»å·¦è‡³å³å¢é•¿ï¼Œå‚ç›´æ—¶ä»ä¸‹åˆ°ä¸Šå¢é•¿ã€‚ äºŒã€ProgressBarä¾‹å­ å‰ç«¯ä»£ç  12345678910111213141516171819202122&lt;Window x:Class=&quot;HelloWorld.MainWindow&quot; xmlns=&quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot; xmlns:x=&quot;http://schemas.microsoft.com/winfx/2006/xaml&quot; xmlns:d=&quot;http://schemas.microsoft.com/expression/blend/2008&quot; xmlns:mc=&quot;http://schemas.openxmlformats.org/markup-compatibility/2006&quot; xmlns:local=&quot;clr-namespace:HelloWorld&quot; mc:Ignorable=&quot;d&quot; FontSize=&quot;16&quot; Title=&quot;WPFä¸­æ–‡ç½‘ä¹‹æ§ä»¶è¯¾ç¨‹ - www.wpfsoft.com&quot; Height=&quot;350&quot; Width=&quot;500&quot;&gt; &lt;StackPanel VerticalAlignment=&quot;Center&quot;&gt; &lt;ProgressBar x:Name=&quot;_ProgressBar&quot; IsIndeterminate=&quot;False&quot; Value=&quot;50&quot; Minimum=&quot;0&quot; Maximum=&quot;100&quot; Orientation=&quot;Horizontal&quot; Height=&quot;10&quot; Margin=&quot;15&quot;/&gt; &lt;TextBlock x:Name=&quot;_TextBlock&quot; Text=&quot;50%&quot; HorizontalAlignment=&quot;Center&quot;/&gt; &lt;/StackPanel&gt;&lt;/Window&gt; åç«¯ä»£ç  123456789101112131415161718192021222324public partial class MainWindow : Window &#123; public MainWindow() &#123; InitializeComponent(); Loaded += (s, e) =&gt; &#123; Task.Factory.StartNew(() =&gt; &#123; for (int i = 0; i &lt;= 100; i++) &#123; Dispatcher.Invoke(() =&gt; &#123; _TextBlock.Text = $&quot;&#123;i&#125;%&quot;; _ProgressBar.Value = i; &#125;); Task.Delay(25).Wait(); &#125; &#125;); &#125;; &#125; &#125; ä¸‰ã€ä»£ç åˆ†æ æˆ‘ä»¬åœ¨ä¸»çª—ä½“çš„Loadedäº‹ä»¶ä¸­å¢åŠ äº†ä¸€ä¸ªå­çº¿ç¨‹ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨å­çº¿ç¨‹ä¸­ä¸å¯ä»¥ç›´æ¥æ›´æ–°UIçº¿ç¨‹çš„æ§ä»¶ï¼Œæ‰€ä»¥æˆ‘ä»¬åˆ©ç”¨Dispatcherç±»ï¼Œå°†è®¿é—®UIçº¿ç¨‹çš„ä»£ç æˆæˆä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œäº¤ç»™Dispatcherå»æ‰§è¡Œã€‚F5è¿è¡Œåï¼Œæ‚¨å°†çœ‹åˆ°ä¸€ä¸ªè¿›åº¦æ¡ä»0å¢é•¿åˆ°100ã€‚ Calendaræ—¥å†æ§ä»¶Calendaræä¾›ä¸€ä¸ªæ—¥å†ç•Œé¢ï¼Œä¾›ç”¨æˆ·é€‰æ‹©æ—¥æœŸï¼Œå®ƒç»§æ‰¿äºControlåŸºç±»ã€‚ ä¸€ã€Calendarç±»çš„å®šä¹‰ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647public class Calendar : Control&#123; public static readonly RoutedEvent SelectedDatesChangedEvent; public static readonly DependencyProperty SelectionModeProperty; public static readonly DependencyProperty SelectedDateProperty; public static readonly DependencyProperty FirstDayOfWeekProperty; public static readonly DependencyProperty DisplayModeProperty; public static readonly DependencyProperty DisplayDateStartProperty; public static readonly DependencyProperty IsTodayHighlightedProperty; public static readonly DependencyProperty DisplayDateProperty; public static readonly DependencyProperty CalendarItemStyleProperty; public static readonly DependencyProperty CalendarDayButtonStyleProperty; public static readonly DependencyProperty CalendarButtonStyleProperty; public static readonly DependencyProperty DisplayDateEndProperty; public Calendar(); public DateTime? DisplayDateStart &#123; get; set; &#125; public Style CalendarItemStyle &#123; get; set; &#125; public Style CalendarDayButtonStyle &#123; get; set; &#125; public Style CalendarButtonStyle &#123; get; set; &#125; public CalendarBlackoutDatesCollection BlackoutDates &#123; get; &#125; public CalendarMode DisplayMode &#123; get; set; &#125; public DateTime? DisplayDateEnd &#123; get; set; &#125; public bool IsTodayHighlighted &#123; get; set; &#125; public DateTime? SelectedDate &#123; get; set; &#125; public SelectedDatesCollection SelectedDates &#123; get; &#125; public CalendarSelectionMode SelectionMode &#123; get; set; &#125; public DateTime DisplayDate &#123; get; set; &#125; public DayOfWeek FirstDayOfWeek &#123; get; set; &#125; public event EventHandler&lt;SelectionChangedEventArgs&gt; SelectedDatesChanged; public event EventHandler&lt;CalendarDateChangedEventArgs&gt; DisplayDateChanged; public event EventHandler&lt;EventArgs&gt; SelectionModeChanged; public event EventHandler&lt;CalendarModeChangedEventArgs&gt; DisplayModeChanged; public override void OnApplyTemplate(); public override string ToString(); protected override AutomationPeer OnCreateAutomationPeer(); protected virtual void OnDisplayDateChanged(CalendarDateChangedEventArgs e); protected virtual void OnDisplayModeChanged(CalendarModeChangedEventArgs e); protected override void OnKeyDown(KeyEventArgs e); protected override void OnKeyUp(KeyEventArgs e); protected virtual void OnSelectedDatesChanged(SelectionChangedEventArgs e); protected virtual void OnSelectionModeChanged(EventArgs e); &#125; äºŒã€å±æ€§æˆå‘˜ å±æ€§åç§° è¯´æ˜ DisplayDateStart è·å–æˆ–è®¾ç½®å¯åœ¨æ—¥å†ä¸­çš„ç¬¬ä¸€ä¸ªæ—¥æœŸã€‚ CalendarItemStyle è·å–æˆ–è®¾ç½®CalendarItemçš„æ ·å¼ CalendarDayButtonStyle è·å–æˆ–è®¾ç½®CalendarDayButtonçš„æ ·å¼ CalendarButtonStyle è·å–æˆ–è®¾ç½®CalendarButtonçš„æ ·å¼ BlackoutDates è·å–æ ‡è®°ä¸ºä¸å¯é€‰æ‹©çš„æ—¥æœŸçš„é›†åˆã€‚ DisplayMode è·å–æˆ–è®¾ç½®ä¸€ä¸ªå€¼ï¼Œè¯¥å€¼æŒ‡ç¤ºæ˜¯å¦æ—¥å†æ˜¾ç¤ºæœˆã€ å¹´æˆ–åå¹´ã€‚ DisplayDateEnd è·å–æˆ–è®¾ç½®å¯åœ¨æ—¥å†ä¸­çš„æ—¥æœŸèŒƒå›´å†…çš„æœ€åæ—¥æœŸã€‚ IsTodayHighlighted è·å–æˆ–è®¾ç½®ä¸€ä¸ªå€¼ï¼Œè¯¥å€¼æŒ‡ç¤ºæ˜¯å¦çªå‡ºæ˜¾ç¤ºå½“å‰æ—¥æœŸã€‚é»˜è®¤trueã€‚ SelectedDate è·å–æˆ–è®¾ç½®å½“å‰é€‰å®šçš„æ—¥æœŸã€‚[é‡è¦] SelectedDates è·å–é€‰å®šæ—¥æœŸçš„é›†åˆã€‚ SelectionMode è·å–æˆ–è®¾ç½®ä¸€ä¸ªå€¼ï¼ŒæŒ‡ç¤ºå…è®¸åŒ…å«ä»€ä¹ˆæ ·çš„é€‰æ‹©ã€‚å¦‚æœæ˜¯å¤šé€‰çš„å·ï¼Œå°±å¯ä»¥ä»SelectedDateså±æ€§è·å–æ‰€æœ‰å·²é€‰çš„æ—¥æœŸã€‚ DisplayDate è·å–æˆ–è®¾ç½®è¦æ˜¾ç¤ºçš„æ—¥æœŸã€‚ FirstDayOfWeek è·å–æˆ–è®¾ç½®åœ¨ä¸€å¤©ä¸­è¢«è§†ä¸ºå‘¨çš„å¼€å§‹ã€‚ ä¸‰ã€äº‹ä»¶æˆå‘˜ äº‹ä»¶åç§° è¯´æ˜ SelectedDatesChanged å¼€å¯å¤šé€‰åï¼Œå½“æ‰€é€‰é›†åˆçš„å…ƒç´ æ•°é‡å‘ç”Ÿå˜åŒ–æ—¶å¼•å‘ DisplayDateChanged DisplayDateå±æ€§è¢«ä¿®æ”¹åå¼•å‘ SelectionModeChanged SelectionModeå±æ€§ï¼ˆé€‰æ‹©æ¨¡å¼ï¼‰å‘ç”Ÿæ”¹å˜åå¼•å‘ DisplayModeChanged DisplayModeå±æ€§ï¼ˆæ˜¾ç¤ºæ¨¡å¼ï¼‰å‘ç”Ÿæ”¹å˜åå¼•å‘ å››ã€Calendarç¤ºä¾‹ å‰ç«¯ä»£ç  12345678910111213141516171819&lt;Window x:Class=&quot;HelloWorld.MainWindow&quot; xmlns=&quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot; xmlns:x=&quot;http://schemas.microsoft.com/winfx/2006/xaml&quot; xmlns:d=&quot;http://schemas.microsoft.com/expression/blend/2008&quot; xmlns:mc=&quot;http://schemas.openxmlformats.org/markup-compatibility/2006&quot; xmlns:local=&quot;clr-namespace:HelloWorld&quot; mc:Ignorable=&quot;d&quot; FontSize=&quot;14&quot; Title=&quot;WPFä¸­æ–‡ç½‘ä¹‹æ§ä»¶è¯¾ç¨‹ - www.wpfsoft.com&quot; Height=&quot;350&quot; Width=&quot;500&quot;&gt; &lt;StackPanel HorizontalAlignment=&quot;Center&quot; Margin=&quot;30&quot;&gt; &lt;Calendar x:Name=&quot;_Calendar&quot; HorizontalAlignment=&quot;Left&quot; VerticalAlignment=&quot;Top&quot; Margin=&quot;0,15&quot; DisplayDateStart=&quot;2020/1/1 00:00:00&quot; DisplayDateEnd=&quot;2030/1/1 00:00:00&quot; SelectionMode=&quot;MultipleRange&quot;/&gt; &lt;Button Content=&quot;é€‰æ‹©&quot; Click=&quot;Button_Click&quot;/&gt; &lt;/StackPanel&gt;&lt;/Window&gt; åç«¯ä»£ç  1234567891011121314public partial class MainWindow : Window &#123; public MainWindow() &#123; InitializeComponent(); &#125; private void Button_Click(object sender, RoutedEventArgs e) &#123; var list = _Calendar.SelectedDates; var current = _Calendar.SelectedDate; MessageBox.Show($&quot;å½“å‰æ—¥æœŸæ•°é‡:&#123;list.Count&#125;,å½“å‰æ—¥æœŸï¼š&#123;current&#125;&quot;); &#125; &#125; æˆ‘ä»¬è®¾ç½®äº†Calendarçš„DisplayDateStartå’ŒDisplayDateEndå±æ€§ï¼Œè¿™æ ·å°†æ—¥æœŸçš„å¯é€‰èŒƒå›´é™åˆ¶åœ¨2020å¹´-2030å¹´ä¹‹é—´ï¼ŒåŒæ—¶å¼€å¯äº†Calendarå¤šé¡¹é€‰æ‹©ï¼Œæœ€ååœ¨åç«¯å»è·å–æ‰€é€‰çš„æ—¥æœŸé›†åˆä¸å½“å‰æ—¥æœŸã€‚ å½“å‰æ—¥æœŸæ˜¯å¤šé€‰æ—¶çš„ç¬¬ä¸€ä¸ªæ—¥æœŸã€‚ åœ¨WPFä¸­è¿˜æœ‰ä¸€ä¸ªé€‰æ‹©æ—¥æœŸæ§ä»¶â€”â€”DatePickerï¼Œå®ƒå¯¹å½“å‰è¿™ä¸ªCalendaræ§ä»¶è¿›è¡Œäº†å°è£…ï¼Œé€šå¸¸DatePickerä¼šæ›´å¸¸ç”¨ä¸€äº›ã€‚ä¸‹ä¸€èŠ‚ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹DatePickeræ§ä»¶çš„ç”¨æ³•ã€‚ DatePickeræ—¥æœŸæ§ä»¶DatePickerä¸Calenderåœ¨æŸäº›å±æ€§ä¸Šå¾ˆç›¸ä¼¼ï¼Œåªæ˜¯ä¸ºäº†æ–¹ä¾¿æ˜¾ç¤ºå’Œæ“ä½œï¼ŒDatePickerå°†Calenderè¿›è¡Œäº†å°è£…ã€‚ ä¸€ã€DatePickerå®šä¹‰ 12345678910111213141516171819202122232425262728293031323334353637383940414243public class DatePicker : Control&#123; public static readonly RoutedEvent SelectedDateChangedEvent; public static readonly DependencyProperty TextProperty; public static readonly DependencyProperty SelectedDateFormatProperty; public static readonly DependencyProperty IsTodayHighlightedProperty; public static readonly DependencyProperty IsDropDownOpenProperty; public static readonly DependencyProperty SelectedDateProperty; public static readonly DependencyProperty DisplayDateStartProperty; public static readonly DependencyProperty DisplayDateEndProperty; public static readonly DependencyProperty DisplayDateProperty; public static readonly DependencyProperty CalendarStyleProperty; public static readonly DependencyProperty FirstDayOfWeekProperty; public DatePicker(); public CalendarBlackoutDatesCollection BlackoutDates &#123; get; &#125; public DateTime? DisplayDateStart &#123; get; set; &#125; public DateTime? DisplayDateEnd &#123; get; set; &#125; public DateTime DisplayDate &#123; get; set; &#125; public Style CalendarStyle &#123; get; set; &#125; public bool IsTodayHighlighted &#123; get; set; &#125; public bool IsDropDownOpen &#123; get; set; &#125; public DatePickerFormat SelectedDateFormat &#123; get; set; &#125; public string Text &#123; get; set; &#125; public DayOfWeek FirstDayOfWeek &#123; get; set; &#125; public DateTime? SelectedDate &#123; get; set; &#125; protected internal override bool HasEffectiveKeyboardFocus &#123; get; &#125; public event RoutedEventHandler CalendarClosed; public event RoutedEventHandler CalendarOpened; public event EventHandler&lt;SelectionChangedEventArgs&gt; SelectedDateChanged; public event EventHandler&lt;DatePickerDateValidationErrorEventArgs&gt; DateValidationError; public override void OnApplyTemplate(); public override string ToString(); protected virtual void OnCalendarClosed(RoutedEventArgs e); protected virtual void OnCalendarOpened(RoutedEventArgs e); protected override AutomationPeer OnCreateAutomationPeer(); protected virtual void OnDateValidationError(DatePickerDateValidationErrorEventArgs e); protected virtual void OnSelectedDateChanged(SelectionChangedEventArgs e); &#125; äºŒã€å±æ€§æˆå‘˜ å±æ€§æˆå‘˜ è¯´æ˜ BlackoutDates è·å–æˆ–è®¾ç½®ä¸ºä¸å¯é€‰æ‹©çš„æ—¥æœŸçš„æ ‡è®°é›†åˆã€‚ä¸å¸¸ç”¨ã€‚ DisplayDateStart è·å–æˆ–è®¾ç½®è¦æ˜¾ç¤ºçš„ç¬¬ä¸€ä¸ªæ—¥æœŸã€‚ DisplayDateEnd è·å–æˆ–è®¾ç½®è¦æ˜¾ç¤ºçš„æœ€åæ—¥æœŸã€‚ DisplayDate è·å–æˆ–è®¾ç½®è¦æ˜¾ç¤ºçš„æ—¥æœŸã€‚ CalendarStyle è·å–æˆ–è®¾ç½®å‘ˆç°æ—¥å†æ—¶æ‰€ä½¿ç”¨çš„æ ·å¼ã€‚ IsTodayHighlighted è·å–æˆ–è®¾ç½®ä¸€ä¸ªå€¼ï¼Œè¯¥å€¼æŒ‡ç¤ºæ˜¯å¦å°†çªå‡ºæ˜¾ç¤ºå½“å‰æ—¥æœŸã€‚ IsDropDownOpen è·å–æˆ–è®¾ç½®ä¸€ä¸ªå€¼ï¼Œè¯¥å€¼æŒ‡ç¤ºCalendar ä¸‹æ‹‰åˆ—è¡¨æ˜¯æ‰“å¼€è¿˜æ˜¯å…³é—­ã€‚ SelectedDateFormat è·å–æˆ–è®¾ç½®ç”¨äºæ˜¾ç¤ºæ‰€é€‰çš„æ—¥æœŸçš„æ ¼å¼ã€‚ Text è·å–DatePickeræ˜¾ç¤ºæ–‡æœ¬ï¼Œæˆ–è®¾ç½®é€‰å®šçš„æ—¥æœŸ FirstDayOfWeek è·å–æˆ–è®¾ç½®åœ¨ä¸€å¤©ä¸­è¢«è§†ä¸ºå‘¨çš„å¼€å§‹ã€‚ SelectedDate è·å–æˆ–è®¾ç½®å½“å‰é€‰å®šçš„æ—¥æœŸã€‚ HasEffectiveKeyboardFocus è·å–ä¸€ä¸ªå€¼ï¼Œè¯¥å€¼æŒ‡ç¤ºDatePicker æ˜¯å¦ å…·æœ‰ç„¦ç‚¹ã€‚ ä¸‰ã€äº‹ä»¶æˆå‘˜ äº‹ä»¶åç§° è¯´æ˜ CalendarClosed DatePickerä¸‹æ‹‰åˆ—è¡¨å…³é—­æ—¶å¼•å‘æ­¤äº‹ä»¶ CalendarOpened DatePickerä¸‹æ‹‰åˆ—è¡¨æ‰“å¼€æ—¶å¼•å‘æ­¤äº‹ä»¶ SelectedDateChanged SelectedDateå±æ€§å‘ç”Ÿæ”¹å˜æ—¶å¼•å‘æ­¤äº‹ä»¶ DateValidationError å½“Textå±æ€§ä¸æ˜¯æ—¥æœŸå½¢å¼çš„å­—ç¬¦ä¸²æ—¶å¼•å‘æ­¤äº‹ä»¶ æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä»¥ä¸€ä¸ªä¾‹å­æ¥è¯´æ˜å®ƒçš„ç”¨æ³• å››ã€DatePickerç¤ºä¾‹ å‰ç«¯ä»£ç  123456789101112131415161718192021&lt;Window x:Class=&quot;HelloWorld.MainWindow&quot; xmlns=&quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot; xmlns:x=&quot;http://schemas.microsoft.com/winfx/2006/xaml&quot; xmlns:d=&quot;http://schemas.microsoft.com/expression/blend/2008&quot; xmlns:mc=&quot;http://schemas.openxmlformats.org/markup-compatibility/2006&quot; xmlns:local=&quot;clr-namespace:HelloWorld&quot; mc:Ignorable=&quot;d&quot; FontSize=&quot;14&quot; Title=&quot;WPFä¸­æ–‡ç½‘ä¹‹æ§ä»¶è¯¾ç¨‹ - www.wpfsoft.com&quot; Height=&quot;350&quot; Width=&quot;500&quot;&gt; &lt;StackPanel HorizontalAlignment=&quot;Center&quot; Margin=&quot;30&quot; VerticalAlignment=&quot;Center&quot;&gt; &lt;StackPanel Orientation=&quot;Horizontal&quot; Margin=&quot;10&quot;&gt; &lt;TextBlock Text=&quot;å¼€å§‹æ—¥æœŸ&quot; VerticalAlignment=&quot;Center&quot; Margin=&quot;10,0&quot;/&gt; &lt;DatePicker x:Name=&quot;_DatePickerStart&quot; VerticalAlignment=&quot;Center&quot; Width=&quot;120&quot;/&gt; &lt;/StackPanel&gt; &lt;StackPanel Orientation=&quot;Horizontal&quot; Margin=&quot;10&quot;&gt; &lt;TextBlock Text=&quot;ç»“æŸæ—¥æœŸ&quot; VerticalAlignment=&quot;Center&quot; Margin=&quot;10,0&quot;/&gt; &lt;DatePicker x:Name=&quot;_DatePickerEnd&quot; VerticalAlignment=&quot;Center&quot; Width=&quot;120&quot;/&gt; &lt;/StackPanel&gt; &lt;Button Content=&quot;æŸ¥è¯¢&quot; Click=&quot;Button_Click&quot; Margin=&quot;10,0&quot;/&gt; &lt;/StackPanel&gt;&lt;/Window&gt; åç«¯ä»£ç  1234567891011121314public partial class MainWindow : Window &#123; public MainWindow() &#123; InitializeComponent(); &#125; private void Button_Click(object sender, RoutedEventArgs e) &#123; var selectedDate = $&quot;æŸ¥è¯¢æ—¥æœŸ:&#123;_DatePickerStart.SelectedDate&#125; &#123;_DatePickerEnd.SelectedDate&#125;\\r\\n&quot;; var text = $&quot;æ–‡æœ¬å€¼:&#123;_DatePickerStart.Text&#125; &#123;_DatePickerEnd.Text&#125;&quot;; MessageBox.Show($&quot;&#123;selectedDate&#125; &#123;text&#125;&quot;); &#125; &#125; éœ€è¦æ³¨æ„ä¸€ç‚¹çš„æ˜¯ï¼ŒDatePickerçš„SelectedDateå±æ€§æ˜¯ä¸€ä¸ªDateTime?æ—¥æœŸå‹ï¼Œè€ŒTextå±æ€§æ˜¯ä¸€ä¸ªstringç±»å‹ï¼Œæ‰€ä»¥ä¸¤è€…çš„å†…å®¹æ˜¯ä¸ç›¸ç­‰çš„ã€‚çœ‹ä¸€ä¸‹è¿è¡Œç»“æœï¼š SelectedDateå±æ€§åé¢ä¼šå¸¦ä¸Šæ—¶åˆ†ç§’ä¿¡æ¯ã€‚ ExpanderæŠ˜å æ§ä»¶Expanderä¹Ÿæ˜¯ä¸€ä¸ªå†…å®¹æ§ä»¶ï¼Œå®ƒæœ‰ä¸€ä¸ªæ ‡é¢˜å±æ€§å’Œå†…å®¹å±æ€§ã€‚æˆ‘ä»¬æ›¾åœ¨å‰é¢è®²è§£GroupBoxæ—¶æåˆ°è¿‡çˆ¶ç±»HeaderedContentControlï¼ˆæ ‡é¢˜å†…å®¹æ§ä»¶ï¼‰ã€‚æ‰€ä»¥ï¼Œæ„Ÿå…´è¶£çš„å°ä¼™ä¼´å¯ä»¥å•å‡»å…¶é“¾æ¥å‰å¾€å¤ä¹ ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬åªå…³æ³¨Expanderçš„åŸºæœ¬åŠŸèƒ½ï¼Œä¹Ÿå°±æ˜¯å¯æŠ˜å ã€‚ ä¸€ã€Expanderç±»çš„å®šä¹‰ 123456789101112131415161718192021public class Expander : HeaderedContentControl&#123; public static readonly DependencyProperty ExpandDirectionProperty; public static readonly DependencyProperty IsExpandedProperty; public static readonly RoutedEvent ExpandedEvent; public static readonly RoutedEvent CollapsedEvent; public Expander(); public ExpandDirection ExpandDirection &#123; get; set; &#125; public bool IsExpanded &#123; get; set; &#125; public event RoutedEventHandler Expanded; public event RoutedEventHandler Collapsed; public override void OnApplyTemplate(); protected virtual void OnCollapsed(); protected override AutomationPeer OnCreateAutomationPeer(); protected virtual void OnExpanded(); &#125; Expanderè‡ªèº«åªæä¾›äº†ä¸¤ä¸ªå±æ€§ï¼Œåˆ†åˆ«æ˜¯ExpandDirectionå’ŒIsExpandedã€‚ ExpandDirectionå±æ€§å®šä¹‰äº†Expanderçš„å†…å®¹åœ¨æ‰“å¼€æ—¶çš„æ–¹å‘ã€‚å®ƒæ˜¯ä¸€ä¸ªæšä¸¾å€¼ï¼Œåˆ†åˆ«æœ‰Downã€Upã€Leftå’ŒRightå››ä¸ªæ–¹å‘ï¼Œé»˜è®¤æ–¹å‘ä¸ºDownã€‚ IsExpandedå±æ€§ç”¨æ¥è·å–æˆ–è®¾ç½®å†…å®¹çª—å£æ˜¯å¦å¯è§ã€‚æ¯”å¦‚åœ¨åç«¯ä»£ç ä¸­ï¼Œå°†è¿™ä¸ªå±æ€§èµ‹å€¼trueï¼Œæ„å‘³ç€å±•å¼€Expanderã€‚ å®ƒè¿˜æœ‰ä¸¤ä¸ªäº‹ä»¶æˆå‘˜ï¼Œåˆ†åˆ«æ˜¯Expandedå’ŒCollapsedï¼Œä¹Ÿå°±æ˜¯å…¶å†…å®¹åœ¨å±•å¼€å’Œéšè—æ—¶è§¦å‘ã€‚ äºŒã€Expanderç¤ºä¾‹ å‰ç«¯ä»£ç  123456789101112131415161718192021222324252627282930313233343536373839404142&lt;Window x:Class=&quot;HelloWorld.MainWindow&quot; xmlns=&quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot; xmlns:x=&quot;http://schemas.microsoft.com/winfx/2006/xaml&quot; xmlns:d=&quot;http://schemas.microsoft.com/expression/blend/2008&quot; xmlns:mc=&quot;http://schemas.openxmlformats.org/markup-compatibility/2006&quot; xmlns:local=&quot;clr-namespace:HelloWorld&quot; mc:Ignorable=&quot;d&quot; FontSize=&quot;14&quot; Title=&quot;WPFä¸­æ–‡ç½‘ä¹‹æ§ä»¶è¯¾ç¨‹ - www.wpfsoft.com&quot; Height=&quot;350&quot; Width=&quot;500&quot;&gt; &lt;StackPanel Margin=&quot;15&quot;&gt; &lt;TextBlock Text=&quot;æ§ä»¶è¯¾ç¨‹&quot;/&gt; &lt;Expander Header=&quot;Buttonæ§ä»¶&quot; ExpandDirection=&quot;Down&quot; Expanded=&quot;Expander_Expanded&quot; Collapsed=&quot;Expander_Collapsed&quot;&gt; &lt;Grid Background=&quot;#FFE5E5E5&quot;&gt; &lt;TextBlock TextWrapping=&quot;Wrap&quot; Padding=&quot;10&quot;&gt; è¡¨ç¤º Windows æŒ‰é’®æ§ä»¶ï¼Œè¯¥æŒ‰é’®å¯¹ Click äº‹ä»¶åšå‡ºååº”ã€‚ Buttonç±» ç›´æ¥ä» System.Windows.Controls.Primitives.ButtonBase ç±»ç»§æ‰¿ã€‚ Buttonæ˜¯å†…å®¹æ¨¡å‹ContentControlçš„å­ç±»ã€‚ContentControlå†…å®¹å±æ€§ä¸º Contentã€‚ åœ¨ç”¨æˆ·å•å‡» Buttonæ—¶åšå‡ºå“åº”çš„äº‹ä»¶å«ButtonBase.Click ã€‚ &lt;/TextBlock&gt; &lt;/Grid&gt; &lt;/Expander&gt; &lt;Expander Header=&quot;TextBoxæ§ä»¶&quot; ExpandDirection=&quot;Left&quot;&gt; &lt;Grid Background=&quot;#FFE5E5E5&quot;&gt; &lt;TextBlock TextWrapping=&quot;Wrap&quot; Padding=&quot;10&quot;&gt; TextBoxæ§ä»¶æ˜¯WPFçš„æ–‡æœ¬è¾“å…¥æ§ä»¶ï¼Œä½¿ç”¨æˆ·è¾“å…¥å½•å…¥ç³»ç»Ÿæ•°æ®çš„å…¥å£ä¹‹ä¸€ã€‚ æœ‰äº†æ­¤æ§ä»¶ï¼Œç”¨æˆ·å¯ä»¥å°†æ•°æ®æŒ‰ç…§è½¯ä»¶çš„æµç¨‹å½•å…¥è¿›å»ã€‚å®ƒå…è®¸ç”¨æˆ·è¾“å…¥ä¸€è¡Œæˆ–å¤šè¡Œæ•°æ®ã€‚ &lt;/TextBlock&gt; &lt;/Grid&gt; &lt;/Expander&gt; &lt;Expander Header=&quot;ListBoxæ§ä»¶&quot; ExpandDirection=&quot;Right&quot;&gt; &lt;Grid Background=&quot;#FFE5E5E5&quot;&gt; &lt;TextBlock TextWrapping=&quot;Wrap&quot; Padding=&quot;10&quot;&gt; ListBoxæ§ä»¶ç»§æ‰¿è‡ªContentControlç±»ï¼Œæ˜¯ä¸€ä¸ªå®¹å™¨ç±»çš„æ§ä»¶ï¼Œ å‘ListBoxæ§ä»¶ä¸­åŒ…å«ListBoxItemå…ƒç´ å‘å®¹å™¨ä¸­æ·»åŠ æˆåˆ†ï¼Œ ä¹Ÿå¯ä»¥æ·»åŠ å…¶ä»–ä»»æ„çš„æ§ä»¶ã€‚ &lt;/TextBlock&gt; &lt;/Grid&gt; &lt;/Expander&gt; &lt;/StackPanel&gt;&lt;/Window&gt; åç«¯ä»£ç  123456789101112131415161718public partial class MainWindow : Window &#123; public MainWindow() &#123; InitializeComponent(); &#125; private void Expander_Expanded(object sender, RoutedEventArgs e) &#123; MessageBox.Show(&quot;Expanderå±•å¼€&quot;); &#125; private void Expander_Collapsed(object sender, RoutedEventArgs e) &#123; MessageBox.Show(&quot;Expanderéšè—&quot;); &#125; &#125; MediaElementåª’ä½“æ’­æ”¾å™¨MediaElementï¼Œä¸€ä¸ªå¯ä»¥æ’­æ”¾éŸ³é¢‘æˆ–è§†é¢‘çš„æ§ä»¶ï¼Œç»§æ‰¿äºFrameworkElementåŸºç±»ã€‚MediaElementåŒ…å«äº†å¸¸è§çš„éŸ³é¢‘æˆ–è§†é¢‘æ ¼å¼ï¼Œå¦‚æœæ‚¨éœ€è¦æ›´å¼ºå¤§çš„åŠŸèƒ½ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨VLCåº“ã€‚ å®˜æ–¹è¯´æ˜ MediaElement å¯ä»¥åœ¨ä¸¤ç§ä¸åŒçš„æ¨¡å¼ä¸‹ä½¿ç”¨ï¼Œå…·ä½“å–å†³äºé©±åŠ¨æ§ä»¶çš„å†…å®¹ï¼šç‹¬ç«‹æ¨¡å¼æˆ–æ—¶é’Ÿæ¨¡å¼ã€‚ åœ¨ç‹¬ç«‹æ¨¡å¼ä¸‹ä½¿ç”¨ æ—¶ï¼Œ MediaElement ç±»ä¼¼äºå›¾åƒï¼Œ Source å¯ä»¥ç›´æ¥æŒ‡å®š URIã€‚ åœ¨æ—¶é’Ÿæ¨¡å¼ä¸‹ï¼Œ MediaElement å¯ä»¥å°† è§†ä¸ºåŠ¨ç”»çš„ç›®æ ‡ï¼Œå› æ­¤å®ƒå°†åœ¨è®¡æ—¶æ ‘ä¸­å…·æœ‰ç›¸åº”çš„ Timeline å’Œ Clock æ¡ç›®ã€‚ ä¸€ã€MediaElementçš„å®šä¹‰ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859public class MediaElement : FrameworkElement, IUriContext&#123; public static readonly DependencyProperty SourceProperty; public static readonly RoutedEvent ScriptCommandEvent; public static readonly RoutedEvent BufferingEndedEvent; public static readonly RoutedEvent BufferingStartedEvent; public static readonly RoutedEvent MediaOpenedEvent; public static readonly RoutedEvent MediaFailedEvent; public static readonly DependencyProperty StretchDirectionProperty; public static readonly RoutedEvent MediaEndedEvent; public static readonly DependencyProperty LoadedBehaviorProperty; public static readonly DependencyProperty UnloadedBehaviorProperty; public static readonly DependencyProperty ScrubbingEnabledProperty; public static readonly DependencyProperty IsMutedProperty; public static readonly DependencyProperty BalanceProperty; public static readonly DependencyProperty VolumeProperty; public static readonly DependencyProperty StretchProperty; public MediaElement(); public MediaState LoadedBehavior &#123; get; set; &#125; public bool CanPause &#123; get; &#125; public bool IsBuffering &#123; get; &#125; public double DownloadProgress &#123; get; &#125; public double BufferingProgress &#123; get; &#125; public int NaturalVideoHeight &#123; get; &#125; public Duration NaturalDuration &#123; get; &#125; public bool HasAudio &#123; get; &#125; public bool HasVideo &#123; get; &#125; public TimeSpan Position &#123; get; set; &#125; public double SpeedRatio &#123; get; set; &#125; public MediaState UnloadedBehavior &#123; get; set; &#125; public int NaturalVideoWidth &#123; get; &#125; public bool ScrubbingEnabled &#123; get; set; &#125; public MediaClock Clock &#123; get; set; &#125; public double Balance &#123; get; set; &#125; public double Volume &#123; get; set; &#125; public StretchDirection StretchDirection &#123; get; set; &#125; public Stretch Stretch &#123; get; set; &#125; public Uri Source &#123; get; set; &#125; public bool IsMuted &#123; get; set; &#125; public event RoutedEventHandler BufferingEnded; public event RoutedEventHandler BufferingStarted; public event RoutedEventHandler MediaOpened; public event EventHandler&lt;ExceptionRoutedEventArgs&gt; MediaFailed; public event RoutedEventHandler MediaEnded; public event EventHandler&lt;MediaScriptCommandRoutedEventArgs&gt; ScriptCommand; public void Close(); public void Pause(); public void Play(); public void Stop(); protected override Size ArrangeOverride(Size finalSize); protected override Size MeasureOverride(Size availableSize); protected override AutomationPeer OnCreateAutomationPeer(); protected override void OnRender(DrawingContext drawingContext); &#125; äºŒã€å±æ€§æˆå‘˜ å±æ€§åç§° è¯´æ˜ LoadedBehavior è·å–æˆ–è®¾ç½®åŠ è½½åª’ä½“çš„è¡Œä¸ºï¼Œå¦‚æœåŠ è½½å¸Œæœ›æ‰‹åŠ¨æ§åˆ¶æ’­æ”¾ï¼Œè¯·è®¾ç½®ä¸ºManualã€‚ CanPause è·å–ä¸€ä¸ªå€¼ï¼Œè¯¥å€¼æŒ‡ç¤ºæ˜¯å¦å¯ä»¥æš‚åœåª’ä½“ã€‚ IsBuffering è·å–ä¸€ä¸ªå€¼ï¼Œè¯¥å€¼æŒ‡ç¤ºæ˜¯å¦ç¼“å†²åª’ä½“ã€‚ DownloadProgress è·å–ä¸€ä¸ªç™¾åˆ†æ¯”å€¼ï¼Œè¯¥å€¼ä¸ºä½äºè¿œç¨‹æœåŠ¡å™¨ä¸Šçš„å†…å®¹å®Œæˆçš„ä¸‹è½½é‡ã€‚ BufferingProgress è·å–ä¸€ä¸ªå€¼ï¼Œè¯¥å€¼æŒ‡ç¤ºç¼“å†²è¿›åº¦çš„ç™¾åˆ†æ¯”ã€‚0-1ä¹‹é—´ NaturalVideoHeight è·å–ä¸åª’ä½“å…³è”çš„è§†é¢‘çš„é«˜åº¦ã€‚ NaturalDuration è·å–ä»‹è´¨çš„è‡ªç„¶æŒç»­æ—¶é—´ã€‚ä¹Ÿå°±æ˜¯è§†é¢‘æ’­æ”¾æ€»æ—¶é•¿ã€‚ HasAudio è·å–ä¸€ä¸ªå€¼ï¼Œè¯¥å€¼æŒ‡ç¤ºåª’ä½“æ˜¯å¦å…·æœ‰éŸ³é¢‘ã€‚ HasVideo è·å–ä¸€ä¸ªå€¼ï¼Œè¯¥å€¼æŒ‡ç¤ºåª’ä½“æ˜¯å¦å…·æœ‰è§†é¢‘ã€‚ Position é€šè¿‡åª’ä½“çš„æ’­æ”¾æ—¶é—´è·å–æˆ–è®¾ç½®è¿›åº¦çš„å½“å‰ä½ç½®ã€‚ SpeedRatio è·å–æˆ–è®¾ç½®åª’ä½“çš„é€Ÿç‡ã€‚ä¹Ÿå°±æ˜¯æŒ‰å‡ å€æ’­æ”¾è§†é¢‘ã€‚ UnloadedBehavior è·å–æˆ–è®¾ç½®å¸è½½åª’ä½“çš„è¡Œä¸ºã€‚ NaturalVideoWidth è·å–ä¸åª’ä½“å…³è”çš„è§†é¢‘çš„å®½åº¦ã€‚ ScrubbingEnabled è·å–æˆ–è®¾ç½®ä¸€ä¸ªå€¼ï¼Œè¯¥å€¼æŒ‡ç¤ºMediaElement æ˜¯å¦å°†æ›´æ–°å¸§çš„æŸ¥æ‰¾æ“ä½œåœ¨æš‚åœçŠ¶æ€ã€‚ Clock è·å–æˆ–è®¾ç½®MediaElement åª’ä½“æ’­æ”¾ç›¸å…³è”çš„æ—¶é’Ÿã€‚ Balance è·å–æˆ–è®¾ç½®æ‰¬å£°å™¨çš„éŸ³é‡æ¯”ã€‚ Volume è·å–æˆ–è®¾ç½®åª’ä½“çš„éŸ³é‡ã€‚0-1ä¹‹é—´ï¼Œé»˜è®¤0.5 StretchDirection è·å–æˆ–è®¾ç½®ä¸€ä¸ªå€¼ï¼Œç¡®å®šæ‰©å±•çš„é™åˆ¶åº”ç”¨äºæ˜ åƒã€‚ Stretch è·å–æˆ–è®¾ç½®MediaElementåª’ä½“çš„æ‹‰ä¼¸æ–¹å¼ã€‚ Source è·å–æˆ–è®¾ç½®MediaElementåª’ä½“æº[é‡ç‚¹] IsMuted æ˜¯å¦é™éŸ³ ä¸‰ã€äº‹ä»¶æˆå‘˜ äº‹ä»¶åç§° è¯´æ˜ BufferingEnded åª’ä½“ç¼“å†²ç»“æŸæ—¶å‘ç”Ÿã€‚ BufferingStarted åª’ä½“ç¼“å†²å¼€å§‹æ—¶å‘ç”Ÿã€‚ MediaOpened åª’ä½“åŠ è½½å·²å®Œæˆæ—¶å‘ç”Ÿã€‚ MediaFailed é‡åˆ°é”™è¯¯æ—¶å‘ç”Ÿã€‚ MediaEnded åª’ä½“ç»“æŸæ—¶å‘ç”Ÿã€‚ ScriptCommand åœ¨åª’ä½“ä¸­é‡åˆ°çš„è„šæœ¬å‘½ä»¤æ—¶å‘ç”Ÿã€‚ å››ã€MediaElementç¤ºä¾‹ æˆ‘ä»¬ä»¥MediaElementçš„ç‹¬ç«‹æ¨¡å¼ä¸ºä¾‹ï¼Œå¼€å‘ä¸€ä¸ªåŸºç¡€ç‰ˆæœ¬çš„è§†é¢‘æ’­æ”¾å™¨ï¼Œè¯¥é¡¹ç›®å°†ä¼šç”¨åˆ°MediaElementã€Girdã€Borderã€TextBlockã€Buttonã€Sliderã€ProgressBarç­‰æ§ä»¶ï¼Œä¹Ÿç®—æ˜¯å¯¹ä¹‹å‰å­¦è¿‡çš„æ§ä»¶ç« èŠ‚ä¸€æ¬¡æ€»ç»“å’Œå›é¡¾ã€‚ å‰ç«¯ä»£ç  12345678910111213141516171819202122232425262728293031323334353637&lt;Window x:Class=&quot;HelloWorld.MainWindow&quot; xmlns=&quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot; xmlns:x=&quot;http://schemas.microsoft.com/winfx/2006/xaml&quot; xmlns:d=&quot;http://schemas.microsoft.com/expression/blend/2008&quot; xmlns:mc=&quot;http://schemas.openxmlformats.org/markup-compatibility/2006&quot; xmlns:local=&quot;clr-namespace:HelloWorld&quot; mc:Ignorable=&quot;d&quot; FontSize=&quot;14&quot; Title=&quot;WPFä¸­æ–‡ç½‘ä¹‹æ§ä»¶è¯¾ç¨‹ - www.wpfsoft.com&quot; Height=&quot;400&quot; Width=&quot;550&quot;&gt; &lt;Grid&gt; &lt;Grid.RowDefinitions&gt; &lt;RowDefinition/&gt; &lt;RowDefinition Height=&quot;auto&quot;/&gt; &lt;RowDefinition Height=&quot;auto&quot;/&gt; &lt;/Grid.RowDefinitions&gt; &lt;Grid&gt; &lt;MediaElement x:Name=&quot;_MediaElement&quot; LoadedBehavior=&quot;Manual&quot; /&gt; &lt;Border x:Name=&quot;_Border&quot; Background=&quot;Black&quot;&gt; &lt;TextBlock x:Name=&quot;_TextBlock&quot; Text=&quot;MediaElement | åª’ä½“æ’­æ”¾å™¨&quot; Foreground=&quot;LightCoral&quot; FontSize=&quot;20&quot; HorizontalAlignment=&quot;Center&quot; VerticalAlignment=&quot;Center&quot;/&gt; &lt;/Border&gt; &lt;/Grid&gt; &lt;StackPanel Orientation=&quot;Horizontal&quot; Grid.Row=&quot;1&quot;&gt; &lt;Button Content=&quot;æ‰“å¼€&quot; Width=&quot;60&quot; Height=&quot;25&quot; Margin=&quot;5&quot; Click=&quot;OpenMedia&quot;/&gt; &lt;Button Content=&quot;æ’­æ”¾&quot; Width=&quot;60&quot; Height=&quot;25&quot; Margin=&quot;5&quot; Click=&quot;PlayMedia&quot;/&gt; &lt;Button Content=&quot;åœæ­¢&quot; Width=&quot;60&quot; Height=&quot;25&quot; Margin=&quot;5&quot; Click=&quot;StopMedia&quot;/&gt; &lt;Button Content=&quot;åé€€&quot; Width=&quot;60&quot; Height=&quot;25&quot; Margin=&quot;5&quot; Click=&quot;BackMedia&quot;/&gt; &lt;Button Content=&quot;å‰è¿›&quot; Width=&quot;60&quot; Height=&quot;25&quot; Margin=&quot;5&quot; Click=&quot;ForwardMedia&quot;/&gt; &lt;TextBlock Text=&quot;éŸ³é‡&quot; VerticalAlignment=&quot;Center&quot; Margin=&quot;5&quot;/&gt; &lt;Slider x:Name=&quot;_Slider&quot; Width=&quot;120&quot; VerticalAlignment=&quot;Center&quot; Maximum=&quot;100&quot; Value=&quot;50&quot; ValueChanged=&quot;_Slider_ValueChanged&quot;/&gt; &lt;/StackPanel&gt; &lt;Grid Grid.Row=&quot;2&quot;&gt; &lt;ProgressBar x:Name=&quot;_ProgressBar&quot; Height=&quot;10&quot; Margin=&quot;5&quot;/&gt; &lt;/Grid&gt; &lt;/Grid&gt;&lt;/Window&gt; åç«¯ä»£ç  1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283using System;using System.Windows;using System.Windows.Threading; namespace HelloWorld&#123; /// &lt;summary&gt; /// MainWindow.xaml çš„äº¤äº’é€»è¾‘ /// &lt;/summary&gt; public partial class MainWindow : Window &#123; private string file = string.Empty; public MainWindow() &#123; InitializeComponent(); DispatcherTimer timer = new DispatcherTimer(); timer.Interval = TimeSpan.FromMilliseconds(1000); timer.Tick += (s, e) =&gt; &#123; var ts = _MediaElement.Position; _ProgressBar.Value = ts.TotalMilliseconds;//æ›´æ–°å½“å‰æ’­æ”¾è¿›åº¦ &#125;; timer.Start(); &#125; private void OpenMedia(object sender, RoutedEventArgs e) &#123; var openFileDialog = new Microsoft.Win32.OpenFileDialog() &#123; Filter = &quot;è§†é¢‘æ–‡ä»¶ (.mp4)|*.mp4&quot;, Multiselect = true &#125;; var result = openFileDialog.ShowDialog(); if (result == true) &#123; file = openFileDialog.FileName; _MediaElement.MediaOpened += _MediaElement_MediaOpened; _MediaElement.Source = new System.Uri(file); this.Title = file; _TextBlock.Text = file; &#125; &#125; private void _MediaElement_MediaOpened(object sender, RoutedEventArgs e) &#123; if (_MediaElement.NaturalDuration.HasTimeSpan) &#123; var ts = _MediaElement.NaturalDuration.TimeSpan; _ProgressBar.Maximum = ts.TotalMilliseconds;//è®¾ç½®æ’­æ”¾è¿›åº¦æ¡æ€»é•¿ &#125; &#125; private void PlayMedia(object sender, RoutedEventArgs e) &#123; _MediaElement.Play();//æ’­æ”¾ _Border.Visibility = Visibility.Collapsed; &#125; private void StopMedia(object sender, RoutedEventArgs e) &#123; _MediaElement.Pause();//æš‚åœ &#125; private void BackMedia(object sender, RoutedEventArgs e) &#123; _MediaElement.Position = _MediaElement.Position - TimeSpan.FromSeconds(10);//å¿«é€€10ç§’ &#125; private void ForwardMedia(object sender, RoutedEventArgs e) &#123; _MediaElement.Position = _MediaElement.Position + TimeSpan.FromSeconds(10);//å¿«è¿›10ç§’ &#125; private void _Slider_ValueChanged(object sender, RoutedPropertyChangedEventArgs&lt;double&gt; e) &#123; _MediaElement.Volume = _Slider.Value;//è®¾ç½®éŸ³é‡ &#125; &#125;&#125; å¦‚å›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬å°†å‰é¢æ‰€å­¦çš„æ§ä»¶çŸ¥è¯†ç»¼åˆåˆ©ç”¨èµ·æ¥ï¼Œè®¾è®¡å‡ºä¸€æ¬¾æ’­æ”¾ç•Œé¢ã€‚MediaElementæ§ä»¶æ²¡æœ‰Backgroundå±æ€§ï¼Œæ‰€ä»¥æˆ‘ä»¬æ”¾äº†ä¸€ä¸ªBorderæ§ä»¶ï¼ˆé»‘è‰²èƒŒæ™¯ï¼‰åœ¨MediaElementæ§ä»¶çš„ä¸Šæ–¹ï¼Œå¾…åŠ è½½è§†é¢‘å¹¶æ’­æ”¾æ—¶ï¼Œå°†Borderéšè—èµ·æ¥ã€‚ åœ¨åç«¯C#è¯­è¨€ä¸­ï¼Œæˆ‘ä»¬åœ¨æ„é€ å‡½æ•°é‡Œé€šè¿‡DispatcherTimer å¼€å¯äº†ä¸€ä¸ªå­çº¿ç¨‹ï¼Œç”¨ä»¥æ›´æ–°å½“å‰æ’­æ”¾è¿›åº¦ã€‚DispatcherTimeræ˜¯è¿è¡Œåœ¨UIçº¿ç¨‹ä¸Šçš„å®šæ—¶å™¨,å¯ä»¥ç›´æ¥æ›´æ–°UIå…ƒç´ ï¼Œä¸ä¼šå¼•å‘è·¨çº¿ç¨‹è°ƒç”¨çš„å¼‚å¸¸ã€‚ åœ¨æ‰“å¼€è§†é¢‘ä¸šåŠ¡ä¸­ï¼Œæˆ‘ä»¬é‡‡ç”¨Microsoft.Win32.OpenFileDialogå»è·å–è§†é¢‘æ–‡ä»¶åœ°å€ï¼Œç„¶ååˆ›å»ºä¸€ä¸ªUriå®ä¾‹ï¼Œæœ€åæŠŠè¿™ä¸ªå®ä¾‹èµ‹å€¼ç»™MediaElementçš„Sourceå±æ€§ã€‚ æœ€åï¼Œæˆ‘ä»¬åªéœ€è¦è°ƒç”¨MediaElementæä¾›çš„ä¸€ç³»åˆ—æ–¹æ³•æˆå‘˜ï¼Œæ¯”å¦‚Play()ã€Pause()ã€æˆ–è®¾ç½®æ’­æ”¾ä½ç½®çš„Positionå±æ€§ã€‚å¥½ï¼Œå…³äºMediaElementæ§ä»¶å°±å…ˆä»‹ç»åˆ°è¿™é‡Œå•¦ã€‚ é›†åˆæ§ä»¶ItemsControlåŸºç±»ä¸€ã€é›†åˆæ§ä»¶æ¦‚è¿° å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦æ˜¾ç¤ºå¤§é‡çš„æ•°æ®ï¼Œè¿™äº›æ•°æ®è™½ç„¶ä¼—å¤šï¼Œä½†æ˜¯æ•°æ®ç±»å‹ç»“æ„ç›¸åŒçš„ï¼Œç”±äºå†…å®¹æ§ä»¶åªèƒ½æ˜¾ç¤ºå•ä¸ªå…ƒç´ ï¼Œè¦æ˜¾ç¤ºæˆ–æ“ä½œå¤šä¸ªå…ƒç´ ç»„æˆçš„é›†åˆï¼Œé‚£ä¹ˆï¼Œé›†åˆæ§ä»¶å°±æ´¾ä¸Šç”¨åœºäº†ã€‚WPFä¸­çš„é›†åˆæ§ä»¶ç§ç±»ä¸°å¯Œï¼Œæœ‰ç±»ä¼¼è¡¨æ ¼çš„DataGridï¼Œæœ‰å•åˆ—è¡¨çš„ListBoxï¼Œä¹Ÿæœ‰ä»‹äºä¸¤è€…ä¹‹å‰çš„ListViewï¼Œè¿˜æœ‰ï¼Œè½¯ä»¶çš„èœå•é€šå¸¸ä¹Ÿæ˜¯ä¸€ä¸ªé›†åˆæ§ä»¶ï¼Œä»¥åŠè½¯ä»¶ä¸‹æ–¹çš„çŠ¶æ€æ ï¼ŒåŒæ ·ä¹Ÿæ˜¯ä¸€ä¸ªé›†åˆæ§ä»¶ã€‚ è¿™äº›é›†åˆæ§ä»¶éƒ½æœ‰ä¸€ä¸ªå…±åŒçš„åŸºç±»æ§ä»¶ï¼Œé‚£å°±æ˜¯ItemsControlç±»ï¼Œä¸‹é¢æˆ‘ä»¬ä»¥è¡¨æ ¼çš„å½¢å¼å±•ç¤ºä¸€ä¸‹å³å°†è¦å­¦ä¹ çš„é›†åˆæ§ä»¶ã€‚ æ§ä»¶å è¯´æ˜ ItemsControl é›†åˆæ§ä»¶çš„åŸºç±»ï¼Œæœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªå¯ä»¥å®ä¾‹åŒ–çš„æ§ä»¶ ListBox ä¸€ä¸ªåˆ—è¡¨é›†åˆæ§ä»¶ ListView è¡¨ç¤ºç”¨äºæ˜¾ç¤ºæ•°æ®é¡¹åˆ—è¡¨çš„æ§ä»¶ï¼Œå®ƒå¯ä»¥æœ‰åˆ—å¤´æ ‡é¢˜ DataGrid è¡¨ç¤ºå¯è‡ªå®šä¹‰çš„ç½‘æ ¼ä¸­æ˜¾ç¤ºæ•°æ®çš„æ§ä»¶ã€‚ ComboBox è¡¨ç¤ºå¸¦æœ‰ä¸‹æ‹‰åˆ—è¡¨çš„é€‰æ‹©æ§ä»¶ï¼Œé€šè¿‡å•å‡»æ§ä»¶ä¸Šçš„ç®­å¤´å¯æ˜¾ç¤ºæˆ–éšè—ä¸‹æ‹‰åˆ—è¡¨ã€‚ TabControl è¡¨ç¤ºåŒ…å«å¤šä¸ªå…±äº«ç›¸åŒçš„ç©ºé—´åœ¨å±å¹•ä¸Šçš„é¡¹çš„æ§ä»¶ã€‚ TreeView ç”¨æ ‘ç»“æ„(å…¶ä¸­çš„é¡¹å¯ä»¥å±•å¼€å’ŒæŠ˜å )ä¸­æ˜¾ç¤ºåˆ†å±‚æ•°æ®çš„æ§ä»¶ Menu è¡¨ç¤ºä¸€ä¸ª Windows èœå•æ§ä»¶ï¼Œè¯¥æ§ä»¶å¯ç”¨äºæŒ‰å±‚æ¬¡ç»„ç»‡ä¸å‘½ä»¤å’Œäº‹ä»¶å¤„ç†ç¨‹åºå…³è”çš„å…ƒç´ ã€‚ ContextMenu è¡¨ç¤ºä½¿æ§ä»¶èƒ½å¤Ÿå…¬å¼€ç‰¹å®šäºæ§ä»¶çš„ä¸Šä¸‹æ–‡çš„åŠŸèƒ½çš„å¼¹å‡ºèœå•ã€‚ StatusBar è¡¨ç¤ºåº”ç”¨ç¨‹åºçª—å£ä¸­çš„æ°´å¹³æ ä¸­æ˜¾ç¤ºé¡¹å’Œä¿¡æ¯çš„æ§ä»¶ã€‚ äºŒã€ItemsControlç±»å®šä¹‰ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475public class ItemsControl : Control, IAddChild, IGeneratorHost, IContainItemStorage&#123; public static readonly DependencyProperty ItemsSourceProperty; public static readonly DependencyProperty HasItemsProperty; public static readonly DependencyProperty DisplayMemberPathProperty; public static readonly DependencyProperty ItemTemplateProperty; public static readonly DependencyProperty ItemTemplateSelectorProperty; public static readonly DependencyProperty ItemStringFormatProperty; public static readonly DependencyProperty ItemBindingGroupProperty; public static readonly DependencyProperty ItemContainerStyleProperty; public static readonly DependencyProperty ItemContainerStyleSelectorProperty; public static readonly DependencyProperty ItemsPanelProperty; public static readonly DependencyProperty IsGroupingProperty; public static readonly DependencyProperty GroupStyleSelectorProperty; public static readonly DependencyProperty AlternationCountProperty; public static readonly DependencyProperty AlternationIndexProperty; public static readonly DependencyProperty IsTextSearchEnabledProperty; public static readonly DependencyProperty IsTextSearchCaseSensitiveProperty; public ItemsControl(); public int AlternationCount &#123; get; set; &#125; public GroupStyleSelector GroupStyleSelector &#123; get; set; &#125; public ObservableCollection&lt;GroupStyle&gt; GroupStyle &#123; get; &#125; public bool IsGrouping &#123; get; &#125; public ItemsPanelTemplate ItemsPanel &#123; get; set; &#125; public StyleSelector ItemContainerStyleSelector &#123; get; set; &#125; public Style ItemContainerStyle &#123; get; set; &#125; public BindingGroup ItemBindingGroup &#123; get; set; &#125; public string ItemStringFormat &#123; get; set; &#125; public DataTemplateSelector ItemTemplateSelector &#123; get; set; &#125; public DataTemplate ItemTemplate &#123; get; set; &#125; public string DisplayMemberPath &#123; get; set; &#125; public bool HasItems &#123; get; &#125; public ItemContainerGenerator ItemContainerGenerator &#123; get; &#125; public IEnumerable ItemsSource &#123; get; set; &#125; public ItemCollection Items &#123; get; &#125; public bool IsTextSearchCaseSensitive &#123; get; set; &#125; public bool IsTextSearchEnabled &#123; get; set; &#125; protected internal override IEnumerator LogicalChildren &#123; get; &#125; public static DependencyObject ContainerFromElement(ItemsControl itemsControl, DependencyObject element); public static int GetAlternationIndex(DependencyObject element); public static ItemsControl GetItemsOwner(DependencyObject element); public static ItemsControl ItemsControlFromItemContainer(DependencyObject container); public override void BeginInit(); public DependencyObject ContainerFromElement(DependencyObject element); public override void EndInit(); public bool IsItemItsOwnContainer(object item); public bool ShouldSerializeGroupStyle(); public bool ShouldSerializeItems(); public override string ToString(); protected virtual void AddChild(object value); protected virtual void AddText(string text); protected virtual void ClearContainerForItemOverride(DependencyObject element, object item); protected virtual DependencyObject GetContainerForItemOverride(); protected virtual bool IsItemItsOwnContainerOverride(object item); protected virtual void OnAlternationCountChanged(int oldAlternationCount, int newAlternationCount); protected virtual void OnDisplayMemberPathChanged(string oldDisplayMemberPath, string newDisplayMemberPath); protected virtual void OnGroupStyleSelectorChanged(GroupStyleSelector oldGroupStyleSelector, GroupStyleSelector newGroupStyleSelector); protected virtual void OnItemBindingGroupChanged(BindingGroup oldItemBindingGroup, BindingGroup newItemBindingGroup); protected virtual void OnItemContainerStyleChanged(Style oldItemContainerStyle, Style newItemContainerStyle); protected virtual void OnItemContainerStyleSelectorChanged(StyleSelector oldItemContainerStyleSelector, StyleSelector newItemContainerStyleSelector); protected virtual void OnItemsChanged(NotifyCollectionChangedEventArgs e); protected virtual void OnItemsPanelChanged(ItemsPanelTemplate oldItemsPanel, ItemsPanelTemplate newItemsPanel); protected virtual void OnItemsSourceChanged(IEnumerable oldValue, IEnumerable newValue); protected virtual void OnItemStringFormatChanged(string oldItemStringFormat, string newItemStringFormat); protected virtual void OnItemTemplateChanged(DataTemplate oldItemTemplate, DataTemplate newItemTemplate); protected virtual void OnItemTemplateSelectorChanged(DataTemplateSelector oldItemTemplateSelector, DataTemplateSelector newItemTemplateSelector); protected override void OnKeyDown(KeyEventArgs e); protected override void OnTextInput(TextCompositionEventArgs e); protected virtual void PrepareContainerForItemOverride(DependencyObject element, object item); protected virtual bool ShouldApplyItemContainerStyle(DependencyObject container, object item); &#125; äºŒã€ItemsControlç±»åˆ†æ ç”±äºæˆ‘ä»¬è¿˜æ²¡æœ‰è®²æ¨¡æ¿ã€æ ·å¼ã€æ•°æ®ç»‘å®šç­‰å†…å®¹ï¼Œæ‰€ä»¥å…³äºItemsControlç±»çš„åˆ†æï¼Œæˆ‘ä»¬å…ˆå…³æ³¨ä¸€äº›ä¸æ¨¡æ¿æ ·å¼å’Œæ•°æ®ç»‘å®šæ— å…³çš„å†…å®¹ï¼Œå…ˆè®²è®²ItemsControlæœ€åŸºç¡€çš„å†…å®¹ã€‚ 2.Itemså±æ€§ ItemsControlç±»ä½œä¸ºé›†åˆæ§ä»¶çš„åŸºç±»ï¼Œå®ƒæä¾›äº†ä¸€ä¸ªéå¸¸é‡è¦çš„å±æ€§ï¼Œé‚£å°±æ˜¯Itemså±æ€§ã€‚è¿™ä¸ªå±æ€§çš„ç±»å‹æ˜¯ItemCollectionï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªé›†åˆåˆ—è¡¨ï¼Œé‚£ä¹ˆè¿™ä¸ªåˆ—è¡¨çš„å…ƒç´ å†…å®¹æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ ç­”æ¡ˆæ˜¯objectã€‚ è¯´æ˜æˆ‘ä»¬å¯ä»¥åœ¨é›†åˆæ§ä»¶ä¸­æ”¾ä»»æ„å¼•ç”¨ç±»å‹çš„å…ƒç´ ã€‚ 2.2DisplayMemberPathå±æ€§ è¿™ä¸ªå±æ€§ç”¨æ¥è·å–æˆ–è®¾ç½®è¦æ˜¾ç¤ºçš„å†…å®¹ï¼Œå®ƒé€šå¸¸æŒ‡æŸä¸ªæ•°æ®æºçš„æŸä¸ªå±æ€§åç§°ï¼Œæ‰€ä»¥å®ƒæ˜¯stringç±»å‹ã€‚ 2.3HasItemså±æ€§ è¿™ä¸ªå±æ€§ç”¨æ¥åˆ¤æ–­å½“å‰é›†åˆæ§ä»¶æ˜¯å¦æœ‰å…ƒç´ ã€‚ 24.IsTextSearchCaseSensitiveå±æ€§ è¿™ä¸ªå±æ€§å¦‚æœä¸ºtrueï¼Œåˆ™æœç´¢å…ƒç´ æ—¶åŒºåˆ†å¤§å°å†™ã€‚ 2.5 IsTextSearchEnabledå±æ€§ è¡¨ç¤ºæ˜¯å¦å¯ç”¨æ–‡å­—æœç´¢ã€‚ å¥½ï¼Œæ¥ä¸‹æ¥çš„å‡ ä¸ªå±æ€§å°†åœ¨åç»­è¿›è¡Œå­¦ä¹ ï¼Œä¸è¿‡ï¼Œæˆ‘ä»¬å…ˆåœ¨è¿™é‡Œäº†è§£ä¸€ä¸‹å®ƒä»¬çš„ç”¨é€”ã€‚ 2.6 ItemsPanelå±æ€§[é‡è¦] ç”±äºä¸€ä¸ªé›†åˆæ§ä»¶é‡Œé¢ä¼šæ˜¾ç¤ºå¤šä¸ªæ•°æ®é¡¹ï¼ˆä¸€ä¸ªæ•°æ®ä»£è¡¨ä¸€ä¸ªå®¶ï¼‰ï¼Œé‚£ä¹ˆè¿™äº›æ•°æ®é¡¹æ€ä¹ˆæ’ç‰ˆï¼Ÿæ˜¯åƒStackPanelä¸€æ ·æ°´å¹³æˆ–å‚ç›´æ’åˆ—ï¼Œè¿˜æ˜¯åƒWrapPanelç€‘å¸ƒæµä¸€æ ·æ’ä¾‹ï¼Ÿè¿™ä¸ªItemsPanelå±æ€§æ¥å†³å®šã€‚ 2.7 ItemTemplateå±æ€§[é‡è¦] åœ¨é›†åˆæ§ä»¶é‡Œï¼Œæ•°æ®é¡¹æœ‰å¯èƒ½æ˜¯ä¸€ä¸ªå¤æ‚çš„å®ä½“ï¼Œé‚£ä¹ˆè¿™äº›æ•°æ®ä»¥ä»€ä¹ˆæ ·çš„UIå¸ƒå±€ç•Œé¢å‘ˆç°ï¼Ÿä¹Ÿå°±æ˜¯è¯´ï¼Œæ•°æ®æœ¬èº«ç©¿ä»€ä¹ˆè¡£æœï¼ŸItemTemplateå±æ€§å°±æ˜¯æ¥å†³å®šæ•°æ®çš„å¤–è§‚çš„ã€‚å¦‚æœæŠŠæ¯ä¸ªItemå…ƒç´ çœ‹æˆä¸€ä¸ªå®¶ï¼Œé‚£ä¹ˆå‰é¢çš„ItemsPanelå±æ€§å°±æ˜¯æ¥å†³å®šé‚»é‡Œä¹‹é—´çš„å®é™…è·ç¦»ä»¥åŠæˆ¿å­å’Œæˆ¿å­çš„æ’ä¾‹èµ°åŠ¿ã€‚ 2.8 ItemContainerStyleå±æ€§[é‡è¦] ItemTemplateå±æ€§åªèƒ½å†³å®šæ•°æ®çš„å¤–è§‚ï¼Œç›¸å½“äºè¿™ä¸ªå®¶çš„å†…éƒ¨è£…ä¿®ä»¥åŠå®¶ç”µå®¶å…·çš„æ ·å¼ï¼Œè€Œè¿™ä¸ªå®¶å¤–å¢™çš„è£…é¥°ï¼Œåˆ™å¿…é¡»ç”±ItemContainerStyleå±æ€§æ¥æ‰¿åŒ…ã€‚ 2.9 ItemContainerStyleSelectorå±æ€§[é‡è¦] å½“æˆ‘ä»¬é€‰ä¸­è¿™ä¸ªé›†åˆæ§ä»¶ä¸­çš„æŸä¸€é¡¹ï¼Œå¹¶å¸Œæœ›çªå‡ºè¿™ä¸€é¡¹ï¼Œé‚£å°±å¯ä»¥åœ¨ItemTemplateSelectorå±æ€§ä¸­è¿›è¡Œå®šä¹‰ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œé€‰æ‹©äº†æŸä¸€é¡¹ï¼ŒæŸä¸€é¡¹çš„å¤–å¢™è£…é¥°å‘ç”Ÿæ”¹å˜ã€‚é‚£åŒæ—¶è¦æ”¹å˜å†…éƒ¨çš„æ ·å¼å‘¢ï¼Ÿ 2.10 ItemTemplateSelectorå±æ€§[é‡è¦] å¦‚æœé€‰ä¸­äº†æŸä¸€é¡¹ï¼Œå¹¶å¸Œæœ›å®ƒçš„æ•°æ®æ¨¡å—è¢«é‡æ–°å®šä¹‰ï¼Œä»¥çªå‡ºè¿™ä¸€é¡¹è¢«é€‰ä¸­ï¼Œå¯ä»¥è®¾ç½®ItemTemplateSelectorå±æ€§ 2.11 Templateå±æ€§[é‡è¦] è¿˜è®°å¾—å—ï¼ŸItemsControlç±»ç»§æ‰¿äºControlç±»ï¼Œè€ŒControlç±»ä¸­æœ‰ä¸€ä¸ªå«Templateçš„å±æ€§ï¼Œæ‰€ä»¥ItemsControlç±»è‡ªç„¶ä¹Ÿå°±æ‹¥æœ‰äº†è¿™ä¸ªå±æ€§ï¼Œè¿™æ˜¯ä¸€ä¸ªä»€ä¹ˆå±æ€§ï¼Ÿå®ƒæ˜¯ControlTemplateç±»ï¼Œä¹Ÿå°±æ˜¯æ§ä»¶æ¨¡æ¿ï¼Œæ‰€ä»¥ï¼Œå¦‚æœæˆ‘ä»¬å¸Œæœ›æŠŠItemsControlç±»æœ¬èº«çš„å¤–è§‚è¿›è¡Œé‡å®šä¹‰ï¼Œé‚£å°±éœ€è¦å»è®¾ç½®Templateå±æ€§ é‡åº†æ•™ä¸»å‹æƒ…æç¤º ä¸Šé¢æˆ‘ä»¬ä¸€å£æ°”è®²äº†è¿™ä¹ˆå¤šçš„æ¨¡æ¿æ¦‚å¿µï¼Œè™½ç„¶çœ‹èµ·æ¥æ˜¯åœ¨å­¦ä¹ ItemsControlç±»çš„å±æ€§ï¼Œä½†æ˜¯åˆ«å¿˜è®°äº†ï¼Œå°†æ¥è¦å­¦ä¹ çš„é‚£äº›é›†åˆå­æ§ä»¶å…¨éƒ½ç»§æ‰¿äºItemsControlç±»ï¼Œæ„å‘³ç€å®ƒä»¬ä¹Ÿéƒ½æœ‰è¿™äº›æ¨¡æ¿å±æ€§å¯ä»¥ä½¿ç”¨å‘¢ï¼Œæ˜¯ä¸æ˜¯æœ‰ä¸€ç§äº‹åŠåŠŸå€çš„æ„Ÿè§‰å‘¢ï¼ æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥ä¸¾ä¸ªä¾‹å­ ä¸‰ã€ItemsControlç¤ºä¾‹ å‰ç«¯ä»£ç  12345678910111213141516171819202122232425262728&lt;Window x:Class=&quot;HelloWorld.MainWindow&quot; xmlns=&quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot; xmlns:x=&quot;http://schemas.microsoft.com/winfx/2006/xaml&quot; xmlns:d=&quot;http://schemas.microsoft.com/expression/blend/2008&quot; xmlns:mc=&quot;http://schemas.openxmlformats.org/markup-compatibility/2006&quot; xmlns:local=&quot;clr-namespace:HelloWorld&quot; xmlns:forms=&quot;clr-namespace:System.Windows.Forms;assembly=System.Windows.Forms&quot; mc:Ignorable=&quot;d&quot; FontSize=&quot;14&quot; Title=&quot;WPFä¸­æ–‡ç½‘ä¹‹æ§ä»¶è¯¾ç¨‹ - www.wpfsoft.com&quot; Height=&quot;350&quot; Width=&quot;500&quot;&gt; &lt;Grid&gt; &lt;ItemsControl&gt; &lt;Button Content=&quot;content&quot; Margin=&quot;0,5&quot;/&gt; &lt;Border Height=&quot;30&quot; Background=&quot;LightPink&quot; Margin=&quot;0,5&quot;/&gt; &lt;TextBlock Text=&quot;WPFä¸­æ–‡ç½‘ www.wpfsoft.com&quot; Background=&quot;LightGray&quot; Margin=&quot;0,5&quot;/&gt; &lt;ItemsControl Height=&quot;35&quot; Background=&quot;AliceBlue&quot;/&gt; &lt;CheckBox Content=&quot;CheckBoxå…ƒç´ &quot;/&gt; &lt;StackPanel Orientation=&quot;Horizontal&quot; Margin=&quot;0,5&quot;&gt; &lt;RadioButton Content=&quot;åˆçº§&quot;/&gt; &lt;RadioButton Content=&quot;ä¸­çº§&quot;/&gt; &lt;RadioButton Content=&quot;é«˜çº§&quot;/&gt; &lt;/StackPanel&gt; è¿™æ˜¯ä¸€ä¸²å­—ç¬¦ä¸² &lt;Label Content=&quot;è¿™æ˜¯Labelæ§ä»¶&quot; Margin=&quot;0,5&quot;/&gt; &lt;Control Background=&quot;Red&quot; Height=&quot;30&quot;/&gt; &lt;ProgressBar Value=&quot;50&quot; Height=&quot;20&quot; Maximum=&quot;100&quot; /&gt; &lt;/ItemsControl&gt; &lt;/Grid&gt;&lt;/Window&gt; é¦–å…ˆï¼Œæˆ‘ä»¬åœ¨XMALä¸­å®ä¾‹åŒ–äº†ä¸€ä¸ªItemsControlæ§ä»¶ï¼Œç„¶ååœ¨ItemsControlé‡Œé¢å®ä¾‹åŒ–äº†ä¸€ç³»åˆ—å­æ§ä»¶ï¼Œå®ƒä»¬åˆ†åˆ«æ˜¯Buttonã€Borderã€TextBlockã€ItemsControlã€CheckBoxã€StackPanelã€RadioButtonã€å­—ç¬¦ä¸²ã€Labelã€Controlå’ŒProgressBarã€‚ é™¤äº†Controlæ²¡æœ‰æ˜¾ç¤ºå‡ºæ¥ï¼Œå…¶å®ƒå…¨éƒ¨éƒ½å‘ˆç°åœ¨ItemsControlæ§ä»¶ä¹‹ä¸­ï¼Œå› ä¸ºè¿™äº›å­æ§ä»¶å…¨éƒ¨éƒ½åœ¨ItemsControlç±»çš„Itemsé›†åˆé‡Œé¢ï¼Œé‚£ä¹ˆï¼ŒControlè™½ç„¶èƒ½å®ä¾‹åŒ–ï¼Œä¸ºä»€ä¹ˆæ²¡æœ‰æ˜¾ç¤ºå‡ºæ¥å‘¢ï¼Ÿå°±è¿æ²¡æœ‰æ§ä»¶çš„å­—ç¬¦ä¸²éƒ½èƒ½æ˜¾ç¤ºå‡ºæ¥ï¼Œè¿™é‡Œé¢è‚¯å®šæœ‰åŸå› ã€‚ æ˜¯çš„ï¼Œè¿™é‡Œæˆ‘ä»¬å¼•å‡ºä¸€ä¸ªçŸ¥è¯†ç‚¹ï¼Œé‚£å°±æ˜¯æ§ä»¶æ¨¡æ¿ï¼Œå› ä¸ºControlåŸºç±»è™½ç„¶æœ‰Backgroundå±æ€§ï¼Œä½†æ˜¯æˆ‘ä»¬å¹¶æ²¡æœ‰ç»™ControlåŸºç±»çš„Templateå±æ€§è®¾ç½®ä¸€ä¸ªæ§ä»¶æ¨¡æ¿ï¼Œæ‰€ä»¥Controlèƒ½å®ä¾‹åŒ–ï¼Œä½†æ˜¯ä¸èƒ½æ˜¾ç¤ºã€‚åªèƒ½çœ‹åˆ°ä¸€ä¸ªé«˜åº¦ä¸º30çš„ç©ºç™½åŒºåŸŸã€‚ è€ŒBorderåœ¨è®¾ç½®Backgroundå±æ€§åï¼Œä¸ºä»€ä¹ˆèƒ½æ˜¾ç¤ºï¼Ÿå› ä¸ºBorderæ˜¯ä¸€ä¸ªè£…é¥°å™¨ï¼Œå®ƒç»§æ‰¿äºDecoratoråŸºç±»ã€‚ ä¸ºä»€ä¹ˆå•çº¯çš„å­—ç¬¦ä¸²ä¹Ÿèƒ½æ˜¾ç¤ºå‘¢ï¼Ÿå› ä¸ºå®é™…ä¸Šè¿™ä¸ªå­—ç¬¦ä¸²å¤–é¢è¢«åŒ…è£¹äº†ä¸€å±‚ContentPresenterå®ä¾‹ï¼Œè¿™ä¸ªå­—ç¬¦ä¸²æ˜¯è¢«èµ‹å€¼åˆ°äº†ContentPresenterçš„Contentå±æ€§ä¸Šï¼Œè€ŒContentPresenterçš„ContentTemplateæœ‰ä¸€ä¸ªé»˜è®¤æ¨¡æ¿ã€‚ å››ã€æ€»ç»“ ItemsControlé›†åˆåŸºç±»å¯ä»¥æ˜¾ç¤ºç»å¤§å¤šæ•°æ§ä»¶ï¼Œä¹Ÿå°±æ„å‘³ç€ï¼ŒListBoxï¼ŒListViewï¼ŒDataGridï¼ŒComboBoxï¼ŒTabControlï¼ŒTreeViewï¼ŒMenuï¼ŒContextMenuï¼ŒStatusBarè¿™äº›å­æ§ä»¶åœ¨æ˜¾ç¤ºé›†åˆå…ƒç´ æ—¶ï¼Œæ¯ä¸€ä¸ªå…ƒç´ çš„å¤–è§‚å¯ä»¥å‘ˆç°å‡ºæ›´å¤æ‚ã€æ›´æ¼‚äº®çš„UIæ•ˆæœï¼Œä»è€Œå¯ä»¥è®¾è®¡å‡ºæ›´å‹å¥½çš„äº¤äº’ç•Œé¢ã€‚ æœ‰äº†è¿™æ ·ä¸€ä¸ªåŸºè°ƒï¼Œé‚£æ¥ä¸‹æ¥æˆ‘ä»¬æ¥ä¸€ä¸€ç»†è¯´å„ä¸ªå­æ§ä»¶çš„åŸºç¡€åŠŸèƒ½ï¼Œå¾…å­¦ä¹ æ¨¡æ¿å’Œæ ·å¼ç« èŠ‚åï¼Œè¿›ä¸€æ­¥æ¢ç´¢è¿™äº›å­æ§ä»¶çš„å¼ºå¤§åŠŸèƒ½ã€‚å¦å¤–ï¼ŒListBoxï¼ŒListViewï¼ŒDataGridï¼ŒComboBoxï¼ŒTabControlè¿™5ä¸ªæ§ä»¶åˆéƒ½æœ‰ä¸€ä¸ªå…±åŒçš„åŸºç±»â€”â€”Selectorç±»ï¼ŒSelectorç»§æ‰¿äºItemsControlåŸºç±»ã€‚SelectoråŸºç±»åˆæ˜¯ä¸€ä¸ªæ€æ ·çš„ç±»ï¼Ÿå®ƒä¼šç»™æˆ‘ä»¬æä¾›å“ªäº›åŠŸèƒ½å‘¢ï¼Ÿ ä¸‹ä¸€èŠ‚ï¼Œæˆ‘ä»¬å…ˆä»SelectoråŸºç±»è¯´èµ·ã€‚ SelectoråŸºç±»Selectorç»§æ‰¿äºItemsControlï¼Œä½†å®ƒæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œæ‰€ä»¥ä¸èƒ½è¢«å®ä¾‹åŒ–ã€‚ä»å‘½åä¸Šçœ‹ï¼Œå®ƒæ˜¯ä¸€ä¸ªé€‰æ‹©å™¨ã€‚ ä¸€ã€Selectorç±»å®šä¹‰ 123456789101112131415161718192021222324252627282930313233343536373839public abstract class Selector : ItemsControl&#123; public static readonly RoutedEvent SelectionChangedEvent; public static readonly RoutedEvent SelectedEvent; public static readonly RoutedEvent UnselectedEvent; public static readonly DependencyProperty IsSelectionActiveProperty; public static readonly DependencyProperty IsSelectedProperty; public static readonly DependencyProperty IsSynchronizedWithCurrentItemProperty; public static readonly DependencyProperty SelectedIndexProperty; public static readonly DependencyProperty SelectedItemProperty; public static readonly DependencyProperty SelectedValueProperty; public static readonly DependencyProperty SelectedValuePathProperty; protected Selector(); public object SelectedValue &#123; get; set; &#125; public object SelectedItem &#123; get; set; &#125; public int SelectedIndex &#123; get; set; &#125; public bool? IsSynchronizedWithCurrentItem &#123; get; set; &#125; public string SelectedValuePath &#123; get; set; &#125; public event SelectionChangedEventHandler SelectionChanged; public static void AddSelectedHandler(DependencyObject element, RoutedEventHandler handler); public static void AddUnselectedHandler(DependencyObject element, RoutedEventHandler handler); public static bool GetIsSelected(DependencyObject element); public static bool GetIsSelectionActive(DependencyObject element); public static void RemoveSelectedHandler(DependencyObject element, RoutedEventHandler handler); public static void RemoveUnselectedHandler(DependencyObject element, RoutedEventHandler handler); public static void SetIsSelected(DependencyObject element, bool isSelected); protected override void ClearContainerForItemOverride(DependencyObject element, object item); protected override void OnInitialized(EventArgs e); protected override void OnIsKeyboardFocusWithinChanged(DependencyPropertyChangedEventArgs e); protected override void OnItemsChanged(NotifyCollectionChangedEventArgs e); protected override void OnItemsSourceChanged(IEnumerable oldValue, IEnumerable newValue); protected virtual void OnSelectionChanged(SelectionChangedEventArgs e); protected override void PrepareContainerForItemOverride(DependencyObject element, object item); &#125; æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹å®ƒæä¾›äº†å“ªäº›å¯ç”¨çš„å±æ€§ã€‚ äºŒã€Selectorç±»çš„å±æ€§ å±æ€§åç§° è¯´æ˜ SelectedValue è·å–æˆ–è®¾ç½®SelectedValuePathå±æ€§æŒ‡å®šçš„å…ƒç´ çš„å±æ€§å€¼ SelectedItem è·å–æˆ–è®¾ç½®å½“å‰æ‰€é€‰å†…å®¹ä¸­çš„ç¬¬ä¸€é¡¹æˆ–å¦‚æœæ‰€é€‰å†…å®¹ä¸ºç©ºåˆ™è¿”å› null SelectedIndex è·å–æˆ–è®¾ç½®å½“å‰æ‰€é€‰å†…å®¹æˆ–è¿”å›çš„ç¬¬ä¸€é¡¹çš„ç´¢å¼•ä¸ºè´Ÿä¸€ (-1) å¦‚æœæ‰€é€‰å†…å®¹ä¸ºç©ºã€‚ SelectedValuePath è·å–æˆ–è®¾ç½®SelectedItemå½“å‰å…ƒç´ çš„æŸä¸ªå±æ€§åï¼Œè¿™ä¸ªå…ƒç´ å±æ€§åå°†å†³å®šSelectedValueçš„å€¼ IsSynchronizedWithCurrentItem æ˜¯å¦åŒæ­¥å½“å‰é¡¹ã€‚ SelectedItemå’ŒSelectedValueæœ‰ç‚¹ç±»ä¼¼ï¼Œéƒ½æ˜¯objectç±»å‹ã€‚ä½†æ˜¯ï¼Œä»–ä»¬ä¿©ä¸ä¸€å®šæŒ‡åŒä¸€ä¸ªå†…å®¹ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬å°†æœ‰è¿™æ ·ä¸€ä¸ªæ•°æ®å®ä½“ç±»ã€‚ 123456public class Person&#123; public string Name &#123; get; set; &#125; public string Address &#123; get; set; &#125; public int Age &#123; get; set; &#125;&#125; ç„¶åæˆ‘ä»¬å®ä¾‹åŒ–å¤šä¸ªPersonç»„æˆä¸€ä¸ªé›†åˆç»‘å®šåˆ°Itemså±æ€§ä¸­ï¼Œè¿™ä¸ªæ—¶å€™é€‰ä¸­æŸä¸€ä¸ªå…ƒç´ ï¼ŒSelectedItemä¾¿ç­‰äºè¿™ä¸ªPersonå…ƒç´ ï¼Œä½†æ˜¯SelectedValueæ˜¯ä»€ä¹ˆï¼Œè¦çœ‹SelectedValuePathçš„å€¼ï¼Œå¦‚æœSelectedValuePathçš„å€¼æŒ‡å‘çš„æ˜¯Person.Nameï¼Œé‚£ä¹ˆSelectedValueå°±æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¦‚æœSelectedValuePathæŒ‡å‘çš„æ˜¯Personçš„Age ï¼Œé‚£ä¹ˆSelectedValueå°±æ˜¯ä¸€ä¸ªintæ•´æ•°ï¼Œ**åªæœ‰*ä¸è®¾ç½®*SelectedValuePathæ—¶ï¼ŒSelectedValueå’ŒSelectedItemä¸¤è€…æ‰ç›¸ç­‰ï¼Œå³Personå®ä¾‹ã€‚ å…·ä½“å…³äºè¿™ä¸€ä¸ªé‡ç‚¹ï¼Œæˆ‘ä»¬åœ¨ä¸‹ä¸€èŠ‚è®¨è®ºListBoxæ§ä»¶æ—¶è¿›è¡Œæ¼”ç¤ºå’Œè®²è§£ã€‚ ListBoxåˆ—è¡¨æ§ä»¶ListBoxæ˜¯ä¸€ä¸ªåˆ—è¡¨æ§ä»¶ï¼Œç”¨äºæ˜¾ç¤ºæ¡ç›®ç±»çš„æ•°æ®ï¼Œé»˜è®¤æ¯è¡Œåªèƒ½æ˜¾ç¤ºä¸€ä¸ªå†…å®¹é¡¹ï¼Œå½“ç„¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¿®æ”¹å®ƒçš„æ•°æ®æ¨¡æ¿ï¼Œæ¥è‡ªå®šä¹‰æ¯ä¸€è¡Œï¼ˆå…ƒç´ ï¼‰çš„æ•°æ®å¤–è§‚ï¼Œè¾¾åˆ°æ˜¾ç¤ºæ›´å¤šæ•°æ®çš„ç›®çš„ã€‚ ä¸€ã€ListBoxçš„å®šä¹‰ 1234567891011121314151617181920212223242526public class ListBox : Selector&#123; public static readonly DependencyProperty SelectionModeProperty; public static readonly DependencyProperty SelectedItemsProperty; public ListBox(); public IList SelectedItems &#123; get; &#125; public SelectionMode SelectionMode &#123; get; set; &#125; protected object AnchorItem &#123; get; set; &#125; protected internal override bool HandlesScrolling &#123; get; &#125; public void ScrollIntoView(object item); public void SelectAll(); public void UnselectAll(); protected override DependencyObject GetContainerForItemOverride(); protected override bool IsItemItsOwnContainerOverride(object item); protected override AutomationPeer OnCreateAutomationPeer(); protected override void OnIsMouseCapturedChanged(DependencyPropertyChangedEventArgs e); protected override void OnKeyDown(KeyEventArgs e); protected override void OnMouseMove(MouseEventArgs e); protected override void OnSelectionChanged(SelectionChangedEventArgs e); protected override void PrepareContainerForItemOverride(DependencyObject element, object item); protected bool SetSelectedItems(IEnumerable selectedItems); &#125; äºŒã€å±æ€§åˆ†æ ListBoxè‡ªèº«çš„å±æ€§æ¯”è¾ƒå°‘ï¼ŒSelectionMode å±æ€§æ¯”è¾ƒé‡è¦ï¼Œå®ƒå¯ä»¥å†³å®šå½“å‰çš„ListBoxæ§ä»¶æ˜¯å•é€‰è¿˜æ˜¯å¤šé€‰ï¼Œå®ƒçš„å€¼ä¸ºExtendedæ—¶ï¼Œè¡¨ç¤ºç”¨æˆ·éœ€è¦æŒ‰ä¸‹shifté”®æ‰èƒ½å¤šé€‰ã€‚å¦‚æœSelectionModeä¸ºå¤šé€‰çŠ¶æ€ï¼Œé‚£ä¹ˆå¤šé€‰çš„ç»“æœä¿å­˜åœ¨å“ªå»äº†ï¼Ÿ ç­”æ¡ˆæ˜¯SelectedItems å±æ€§ã€‚ å¦å¤–ï¼ŒListBoxè¿˜è‡ªå¸¦äº†æ»šåŠ¨æ¡ï¼Œå¦‚æœå†…å®¹è¶…å‡ºæ˜¾ç¤ºåŒºåŸŸï¼Œè¿™æ—¶æ»šåŠ¨æ¡ä¾¿èµ·ä½œç”¨ã€‚ æˆ‘ä»¬åœ¨ä¸Šä¸€ç« èŠ‚æè¿‡DisplayMemberPathã€SelectedValuePathã€SelectedItemå’ŒSelectedValueï¼Œé‚£ä¹ˆï¼Œæˆ‘ä»¬ä»¥ä¸€ä¸ªå®é™…çš„ä¾‹å­æ¥è¯´æ˜è¿™å‡ ä¸ªå±æ€§çš„ç”¨é€”ã€‚ ä¸‰ã€ListBoxç¤ºä¾‹ å‰ç«¯ä»£ç  1234567891011121314151617&lt;Window x:Class=&quot;HelloWorld.MainWindow&quot; xmlns=&quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot; xmlns:x=&quot;http://schemas.microsoft.com/winfx/2006/xaml&quot; xmlns:d=&quot;http://schemas.microsoft.com/expression/blend/2008&quot; xmlns:mc=&quot;http://schemas.openxmlformats.org/markup-compatibility/2006&quot; xmlns:local=&quot;clr-namespace:HelloWorld&quot; xmlns:forms=&quot;clr-namespace:System.Windows.Forms;assembly=System.Windows.Forms&quot; mc:Ignorable=&quot;d&quot; FontSize=&quot;14&quot; Title=&quot;WPFä¸­æ–‡ç½‘ä¹‹æ§ä»¶è¯¾ç¨‹ - www.wpfsoft.com&quot; Height=&quot;350&quot; Width=&quot;500&quot;&gt; &lt;StackPanel&gt; &lt;ListBox x:Name=&quot;listbox&quot; MinHeight=&quot;100&quot; DisplayMemberPath=&quot;Name&quot; SelectedValuePath=&quot;Age&quot;/&gt; &lt;Button Content=&quot;æŸ¥çœ‹ç»“æœ&quot; Click=&quot;Button_Click&quot;/&gt; &lt;TextBlock x:Name=&quot;_TextBlock&quot;/&gt; &lt;/StackPanel&gt;&lt;/Window&gt; åç«¯ä»£ç  12345678910111213141516171819202122232425262728293031323334353637using System;using System.Windows;using System.Windows.Controls;using System.Windows.Threading; namespace HelloWorld&#123; public class Person &#123; public string Name &#123; get; set; &#125; public int Age &#123; get; set; &#125; public string Address &#123; get; set; &#125; &#125; /// &lt;summary&gt; /// MainWindow.xaml çš„äº¤äº’é€»è¾‘ /// &lt;/summary&gt; public partial class MainWindow : Window &#123; public MainWindow() &#123; InitializeComponent(); listbox.Items.Add(new Person &#123; Name = &quot;å¼ ä¸‰&quot;, Age = 22, Address = &quot;å¹¿ä¸œçœå»‰æ±Ÿå¸‚è½¦æ¿é•‡å¤§åæ‘&quot; &#125;); listbox.Items.Add(new Person &#123; Name = &quot;æå››&quot;, Age = 23, Address = &quot;æ±Ÿè¥¿çœæ™¯å¾·é•‡å¸‚å¸‚è¾–åŒº&quot; &#125;); listbox.Items.Add(new Person &#123; Name = &quot;ç‹äº”&quot;, Age = 24, Address = &quot;ä¸Šæµ·å¸‚è™¹å£åŒº&quot; &#125;); &#125; private void Button_Click(object sender, RoutedEventArgs e) &#123; var selectedItem = listbox.SelectedItem; var selectedValue = listbox.SelectedValue; _TextBlock.Text = $&quot;&#123;selectedItem&#125;,&#123;selectedValue&#125;&quot;; &#125; &#125;&#125; ä»£ç åˆ†æ åœ¨å‰ç«¯ä»£ç ä¸­ï¼Œæˆ‘ä»¬è®¾ç½®äº†DisplayMemberPathå±æ€§å€¼ä¸ºâ€œNameâ€ï¼Œè€ŒSelectedValuePathå±æ€§å€¼ä¸ºâ€œAgeâ€ï¼Œè¿™ä¸¤ä¸ªå€¼å®é™…ä¸Šæ˜¯Personç±»çš„ä¸¤ä¸ªå±æ€§ï¼ŒF5å¯åŠ¨è°ƒè¯•åï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç•Œé¢ä¸Šçœ‹åˆ°å¼ ä¸‰ã€æå››å’Œç‹äº”çš„åå­—ï¼Œä½†æ˜¯çœ‹ä¸åˆ°ä»–ä»¬çš„å¹´é¾„å’Œåœ°å€ï¼Œè¿™æ˜¯å› ä¸ºListBoxé»˜è®¤æ¯è¡Œåªèƒ½æ˜¾ç¤ºä¸€ä¸ªå†…å®¹é¡¹ï¼Œè€Œä¸”è¿™é‡Œæˆ‘ä»¬è®¾ç½®äº†DisplayMemberPathå±æ€§ï¼Œåªèƒ½æ˜¾ç¤ºåå­—ã€‚ æˆ‘ä»¬é€‰ä¸­ListBoxä¸­çš„æå››ï¼Œç„¶åå•ç‚¹æŸ¥çœ‹ç»“æœæŒ‰é’®ï¼ŒSelectedItemå±æ€§å¾—åˆ°äº†ä¸€ä¸ªPersonç±»ï¼Œæ‰€ä»¥è¾“å‡ºçš„å€¼ä¸ºHelloWorld.Personï¼Œè€ŒSelectedValueå±æ€§å¾—åˆ°äº†æå››çš„å¹´é¾„ï¼Œæ‰€ä»¥è¾“å‡ºçš„ç»“æœæ˜¯23ã€‚ é‡åº†æ•™ä¸»è¯´ å¦‚æœæŠŠSelectionModeå±æ€§è®¾ä¸ºå¤šé€‰Multipleæˆ–Extendedï¼Œè¯•è¯•çœ‹ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆæ•ˆæœå‘¢ï¼Ÿ Itemså±æ€§æ˜¯ä¸€ä¸ªåªè¯»å±æ€§ï¼Œæ‰€ä»¥æˆ‘ä»¬åªèƒ½èƒ½è¿‡Itemsçš„Addæ–¹æ³•å‘é›†åˆå¢åŠ å…ƒç´ ã€‚ å››ã€ListBoxItemå­é¡¹ å…¶å®ï¼ŒListBoxè¿˜æœ‰å®ƒä¸“é—¨é…åˆä¸šåŠ¡å¼€å‘çš„å­é¡¹æ§ä»¶â€”â€”ListBoxItemã€‚ListBoxItemç»§æ‰¿äºContentControlå†…å®¹æ§ä»¶ï¼Œä»”ç»†æƒ³ï¼Œè¿™æ„å‘³ç€ä»€ä¹ˆï¼Ÿè¿˜è®°å¾—æˆ‘ä»¬åœ¨åˆ†äº«ContentControlæè¿‡â€å®ƒæœ‰ä¸€ä¸ªå«Contentå±æ€§â€œä¸€å˜´å—ï¼ŸContentå±æ€§å¯ä»¥å®¹çº³ä»»æ„å¼•ç”¨ç±»å‹ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒListBoxItemä¹Ÿå¯ä»¥å®¹çº³ä»»æ„å¼•ç”¨ç±»å‹ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒListBoxçš„å­é¡¹ä¹Ÿå¯ä»¥å®¹çº³ä»»æ„çš„å¼•ç”¨ç±»å‹ã€‚ è¿™ä¹ˆä¸€è¯´ï¼Œæ„Ÿè§‰ListBoxrè¿˜è›®å¼ºå¤§çš„å‘¢ï¼ æ‰€ä»¥ï¼ŒListBoxItemå¯ä»¥è¿™æ ·ä½¿ç”¨ 123456789101112131415161718192021222324252627282930313233&lt;Window x:Class=&quot;HelloWorld.MainWindow&quot; xmlns=&quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot; xmlns:x=&quot;http://schemas.microsoft.com/winfx/2006/xaml&quot; xmlns:d=&quot;http://schemas.microsoft.com/expression/blend/2008&quot; xmlns:mc=&quot;http://schemas.openxmlformats.org/markup-compatibility/2006&quot; xmlns:local=&quot;clr-namespace:HelloWorld&quot; xmlns:forms=&quot;clr-namespace:System.Windows.Forms;assembly=System.Windows.Forms&quot; mc:Ignorable=&quot;d&quot; FontSize=&quot;14&quot; Title=&quot;WPFä¸­æ–‡ç½‘ä¹‹æ§ä»¶è¯¾ç¨‹ - www.wpfsoft.com&quot; Height=&quot;350&quot; Width=&quot;500&quot;&gt; &lt;StackPanel&gt; &lt;ListBox x:Name=&quot;listbox&quot;&gt; &lt;ListBoxItem&gt; &lt;Button Content=&quot;è¿™æ˜¯ä¸€ä¸ªæŒ‰é’®&quot;/&gt; &lt;/ListBoxItem&gt; &lt;ListBoxItem&gt; &lt;Border Height=&quot;30&quot; Background=&quot;Red&quot;/&gt; &lt;/ListBoxItem&gt; &lt;ListBoxItem Content=&quot;è¿™æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²&quot;/&gt; &lt;ListBoxItem&gt; &lt;ProgressBar Maximum=&quot;100&quot; Value=&quot;50&quot; Height=&quot;25&quot; Width=&quot;450&quot;/&gt; &lt;/ListBoxItem&gt; è¿™é‡Œç›´æ¥å†™å­—ç¬¦ä¸² &lt;ListBoxItem&gt; &lt;StackPanel Orientation=&quot;Horizontal&quot;&gt; &lt;CheckBox Content=&quot;å¤é€‰æ¡†&quot;/&gt; &lt;RadioButton Content=&quot;å•é€‰æ¡† &quot;/&gt; &lt;/StackPanel&gt; &lt;/ListBoxItem&gt; &lt;/ListBox&gt; &lt;Button Content=&quot;æŸ¥çœ‹ç»“æœ&quot; Click=&quot;Button_Click&quot;/&gt; &lt;TextBlock x:Name=&quot;textblock&quot; TextWrapping=&quot;Wrap&quot;/&gt; &lt;/StackPanel&gt;&lt;/Window&gt; åå°ä»£ç  123456789101112131415161718192021public partial class MainWindow : Window &#123; public MainWindow() &#123; InitializeComponent(); &#125; private void Button_Click(object sender, RoutedEventArgs e) &#123; try &#123; var selectedItem = listbox.SelectedItem; var content = ((ContentControl)selectedItem).Content; textblock.Text = $&quot;selectedItem=&#123;selectedItem&#125;\\r\\ncontent=&#123;content&#125;&quot;; &#125; catch (Exception ex) &#123; MessageBox.Show(ex.Message); &#125; &#125; &#125; å¦‚ä¸Šæ‰€ç¤ºï¼Œæˆ‘ä»¬åœ¨ListBoxjæ§ä»¶é‡Œé¢å®ä¾‹åŒ–äº†å¥½å‡ ä¸ªListBoxItemï¼Œä½†æ˜¯æ¯ä¸ªListBoxItemçš„Contentå±æ€§éƒ½ä¸ä¸€æ ·ï¼Œæœ‰Buttonï¼ŒBorder ï¼ŒProgressBar ï¼Œå­—ç¬¦ä¸²ï¼Œæœ€åï¼Œæˆ‘ä»¬æ¥è·å–è¿™äº›é€‰ä¸­é¡¹çš„å†…å®¹ã€‚ é™¤äº†ç›´æ¥å†™çš„å­—ç¬¦ä¸²ä¸èƒ½è½¬æ¢ä¹‹å¤–ï¼Œå…¶å®ƒé¡¹çš„ç»“æœï¼ŒSelectedItemå±æ€§æ€»æ˜¯ListBoxItemï¼Œè€ŒContentå¯ä»¥æ˜¯æˆ‘ä»¬è®¾ç½®çš„å…¶å®ƒæ§åˆ¶ã€‚ è¦å…¨é¢äº†è§£ListBoxItemï¼Œä¸èƒ½ä¸çœ‹çœ‹å®ƒçš„å®šä¹‰ã€‚ 1234567891011121314151617181920212223public class ListBoxItem : ContentControl&#123; public static readonly DependencyProperty IsSelectedProperty; public static readonly RoutedEvent SelectedEvent; public static readonly RoutedEvent UnselectedEvent; public ListBoxItem(); public bool IsSelected &#123; get; set; &#125; public event RoutedEventHandler Selected; public event RoutedEventHandler Unselected; protected override AutomationPeer OnCreateAutomationPeer(); protected override void OnMouseEnter(MouseEventArgs e); protected override void OnMouseLeave(MouseEventArgs e); protected override void OnMouseLeftButtonDown(MouseButtonEventArgs e); protected override void OnMouseRightButtonDown(MouseButtonEventArgs e); protected virtual void OnSelected(RoutedEventArgs e); protected virtual void OnUnselected(RoutedEventArgs e); protected internal override void OnVisualParentChanged(DependencyObject oldParent); &#125; å¦‚ä¸Šæ‰€ç¤ºï¼Œå¯ä»¥çœ‹åˆ°ListBoxItemæœ‰ä¸€ä¸ªå«IsSelectedå±æ€§ï¼Œè¡¨ç¤ºè¯¥é¡¹æ˜¯å¦è¢«é€‰ä¸­ï¼ŒåŒæ—¶ï¼Œå®ƒè¿˜æœ‰ä¸¤ä¸ªäº‹ä»¶ï¼Œåˆ†åˆ«æ˜¯Selectedé€‰ä¸­å’ŒUnselectedæœªé€‰ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å»è®¢é˜…è¿™ä¸¤ä¸ªäº‹ä»¶ï¼Œä»¥æ­¤æ¥åšä¸€äº›ä¸šåŠ¡ã€‚ å…³äºListBoxä»¥åŠListBoxItemï¼Œæˆ‘ä»¬å°±å…ˆä»‹ç»è¿™ä¹ˆå¤šï¼Œå®é™…ä¸Šå®ƒçš„ç”¨æ³•è¿œä¸æ­¢è¿™äº›ï¼Œå¦‚æœåŠ ä¸Šæ¨¡æ¿ã€æ ·å¼ã€æ•°æ®ç»‘å®šã€è§¦å‘å™¨ï¼Œå®ƒè¿˜å¯ä»¥å®ç°è®¸å¤šæ„æƒ³ä¸åˆ°çš„æ•ˆæœã€‚å…³äºè¿™éƒ¨åˆ†çš„å†…å®¹ï¼Œè¯·å‚é˜…æ¨¡æ¿æ ·å¼ç« èŠ‚å…³äºListBoxæ§ä»¶çš„ç”¨æ³•ã€‚ æ‰€ä»¥ï¼ŒListBoxåˆ—è¡¨æ§ä»¶é»˜è®¤æƒ…å†µä¸‹ï¼Œåªèƒ½æ˜¾ç¤ºä¸€ä¸ªæ•°æ®é¡¹ï¼Œé‚£å¦‚æœæˆ‘æƒ³æŠŠPersonç±»çš„Nameã€Ageã€Addressä¸‰ä¸ªå±æ€§å€¼éƒ½æ˜¾ç¤ºå‡ºæ¥å‘¢ï¼Ÿæœ‰åŠæ³•â€”â€”ListViewæ§ä»¶å¯ä»¥åšåˆ°ã€‚ ListViewæ•°æ®åˆ—è¡¨æ§ä»¶ListViewç»§æ‰¿äºListBoxï¼Œåœ¨ListBoxæ§ä»¶çš„åŸºç¡€ä¸Šå¢åŠ äº†æ•°æ®è§†å›¾ã€‚ä»è€Œè®©æˆ‘ä»¬å¯ä»¥å¾ˆè½»æ¾çš„è®¾ç½®æ¯ä¸€åˆ—çš„æ ‡é¢˜ï¼Œä»¥æ˜¾ç¤ºæŸä¸ªæ•°æ®è¡¨ç»“æ„åŠå†…å®¹ã€‚ ä¸€ã€ListViewå®šä¹‰ 12345678910111213141516public class ListView : ListBox&#123; public static readonly DependencyProperty ViewProperty; public ListView(); public ViewBase View &#123; get; set; &#125; protected override void ClearContainerForItemOverride(DependencyObject element, object item); protected override DependencyObject GetContainerForItemOverride(); protected override bool IsItemItsOwnContainerOverride(object item); protected override AutomationPeer OnCreateAutomationPeer(); protected override void OnItemsChanged(NotifyCollectionChangedEventArgs e); protected override void PrepareContainerForItemOverride(DependencyObject element, object item); &#125; ListViewç±»å¢åŠ äº†ä¸€ä¸ªå«Viewçš„å±æ€§ï¼Œè¿™ä¸ªå±æ€§ç”¨æ¥å®šä¹‰æ§ä»¶çš„æ•°æ®æ ·å¼ï¼Œå†³å®šæ•°æ®æ€æ ·æ˜¾ç¤ºã€‚Viewå±æ€§çš„ç±»å‹æ˜¯ViewBaseï¼Œä½†æ˜¯ï¼Œæˆ‘ä»¬çœŸæ­£åœ¨ä½¿ç”¨Viewå±æ€§æ—¶ï¼Œå®é™…ä¸Šå®ä¾‹åŒ–çš„æ˜¯GridViewç±»ï¼Œå› ä¸ºGridViewç±»æ˜¯ViewBaseçš„å­ç±»ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬è¦çœ‹äº†è§£ä¸€ä¸‹GridViewçš„å®šä¹‰ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738public class GridView : ViewBase, IAddChild&#123; public static readonly DependencyProperty ColumnCollectionProperty; public static readonly DependencyProperty ColumnHeaderContainerStyleProperty; public static readonly DependencyProperty ColumnHeaderTemplateProperty; public static readonly DependencyProperty ColumnHeaderTemplateSelectorProperty; public static readonly DependencyProperty ColumnHeaderStringFormatProperty; public static readonly DependencyProperty AllowsColumnReorderProperty; public static readonly DependencyProperty ColumnHeaderContextMenuProperty; public static readonly DependencyProperty ColumnHeaderToolTipProperty; public GridView(); public static ResourceKey GridViewItemContainerStyleKey &#123; get; &#125; public static ResourceKey GridViewStyleKey &#123; get; &#125; public static ResourceKey GridViewScrollViewerStyleKey &#123; get; &#125; public string ColumnHeaderStringFormat &#123; get; set; &#125; public DataTemplateSelector ColumnHeaderTemplateSelector &#123; get; set; &#125; public DataTemplate ColumnHeaderTemplate &#123; get; set; &#125; public Style ColumnHeaderContainerStyle &#123; get; set; &#125; public GridViewColumnCollection Columns &#123; get; &#125; public object ColumnHeaderToolTip &#123; get; set; &#125; public bool AllowsColumnReorder &#123; get; set; &#125; public ContextMenu ColumnHeaderContextMenu &#123; get; set; &#125; protected internal override object ItemContainerDefaultStyleKey &#123; get; &#125; protected internal override object DefaultStyleKey &#123; get; &#125; public static GridViewColumnCollection GetColumnCollection(DependencyObject element); public static void SetColumnCollection(DependencyObject element, GridViewColumnCollection collection); public static bool ShouldSerializeColumnCollection(DependencyObject obj); public override string ToString(); protected virtual void AddChild(object column); protected virtual void AddText(string text); protected internal override void ClearItem(ListViewItem item); protected internal override IViewAutomationPeer GetAutomationPeer(ListView parent); protected internal override void PrepareItem(ListViewItem item); &#125; GridViewæä¾›äº†ä¸€äº›å¯ä¾›è®¾ç½®çš„æ¨¡æ¿å’Œæ ·å¼å±æ€§ï¼Œè¿™äº›æˆ‘ä»¬å…ˆæ”¾ä¸€è¾¹ï¼Œåœ¨WPFåŸºç¡€ç« èŠ‚çš„å†…å®¹å­¦ä¹ ä¸­ï¼Œæˆ‘ä»¬å…ˆå­¦ä¹ å®ƒçš„Columns å±æ€§ï¼Œå®ƒæ˜¯ä¸€ä¸ªé›†åˆå±æ€§ï¼Œè€Œé›†åˆä¸­å…ƒç´ çš„ç±»å‹æ˜¯GridViewColumnã€‚ GridViewColumnæœ€å…³é”®çš„åªæœ‰ä¸¤ä¸ªå±æ€§ï¼Œåˆ†åˆ«æ˜¯æ ‡é¢˜å’Œè¦æ˜¾ç¤ºçš„æˆå‘˜ï¼ˆæŒ‡å‘äº†Personå®ä½“çš„æŸä¸ªå±æ€§åï¼‰ã€‚ å¥½äº†ï¼Œæˆ‘ä»¬ä»¥ä¸Šä¸€èŠ‚ä¸­çš„Personå®ä½“ä¸ºä¾‹ã€‚ äºŒã€ListViewç¤ºä¾‹ å‰ç«¯ä»£ç  123456789101112131415161718192021222324252627282930313233343536373839&lt;Window x:Class=&quot;HelloWorld.MainWindow&quot; xmlns=&quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot; xmlns:x=&quot;http://schemas.microsoft.com/winfx/2006/xaml&quot; xmlns:d=&quot;http://schemas.microsoft.com/expression/blend/2008&quot; xmlns:mc=&quot;http://schemas.openxmlformats.org/markup-compatibility/2006&quot; xmlns:local=&quot;clr-namespace:HelloWorld&quot; xmlns:forms=&quot;clr-namespace:System.Windows.Forms;assembly=System.Windows.Forms&quot; mc:Ignorable=&quot;d&quot; FontSize=&quot;14&quot; Title=&quot;WPFä¸­æ–‡ç½‘ä¹‹æ§ä»¶è¯¾ç¨‹ - www.wpfsoft.com&quot; Height=&quot;350&quot; Width=&quot;500&quot;&gt; &lt;Grid&gt; &lt;Grid.ColumnDefinitions&gt; &lt;ColumnDefinition/&gt; &lt;ColumnDefinition Width=&quot;200&quot;/&gt; &lt;/Grid.ColumnDefinitions&gt; &lt;ListView Grid.Column=&quot;0&quot; x:Name=&quot;listview&quot; SelectionChanged=&quot;listview_SelectionChanged&quot;&gt; &lt;ListView.View&gt; &lt;GridView&gt; &lt;GridViewColumn Header=&quot;å§“å&quot; DisplayMemberBinding=&quot;&#123;Binding Name&#125;&quot;/&gt; &lt;GridViewColumn Header=&quot;å¹´é¾„&quot; DisplayMemberBinding=&quot;&#123;Binding Age&#125;&quot;/&gt; &lt;GridViewColumn Header=&quot;åœ°å€&quot; DisplayMemberBinding=&quot;&#123;Binding Address&#125;&quot;/&gt; &lt;/GridView&gt; &lt;/ListView.View&gt; &lt;/ListView&gt; &lt;StackPanel Grid.Column=&quot;1&quot;&gt; &lt;StackPanel Orientation=&quot;Horizontal&quot; Margin=&quot;5&quot;&gt; &lt;TextBlock Text=&quot;å§“å:&quot;/&gt; &lt;TextBlock x:Name=&quot;_TextBlockName&quot;/&gt; &lt;/StackPanel&gt; &lt;StackPanel Orientation=&quot;Horizontal&quot; Margin=&quot;5&quot;&gt; &lt;TextBlock Text=&quot;å¹´é¾„:&quot;/&gt; &lt;TextBlock x:Name=&quot;_TextBlockAge&quot;/&gt; &lt;/StackPanel&gt; &lt;StackPanel Orientation=&quot;Horizontal&quot; Margin=&quot;5&quot;&gt; &lt;TextBlock Text=&quot;åœ°å€:&quot;/&gt; &lt;TextBlock x:Name=&quot;_TextBlockAddress&quot;/&gt; &lt;/StackPanel&gt; &lt;/StackPanel&gt; &lt;/Grid&gt;&lt;/Window&gt; åç«¯ä»£ç  12345678910111213141516171819202122232425262728293031323334353637namespace HelloWorld&#123; public class Person &#123; public string Name &#123; get; set; &#125; public int Age &#123; get; set; &#125; public string Address &#123; get; set; &#125; &#125; /// &lt;summary&gt; /// MainWindow.xaml çš„äº¤äº’é€»è¾‘ /// &lt;/summary&gt; public partial class MainWindow : Window &#123; public MainWindow() &#123; InitializeComponent(); listview.Items.Add(new Person &#123; Name = &quot;å¼ ä¸‰&quot;, Age = 22, Address = &quot;å¹¿ä¸œçœå»‰æ±Ÿå¸‚è½¦æ¿é•‡å¤§åæ‘&quot; &#125;); listview.Items.Add(new Person &#123; Name = &quot;æå››&quot;, Age = 23, Address = &quot;æ±Ÿè¥¿çœæ™¯å¾·é•‡å¸‚å¸‚è¾–åŒº&quot; &#125;); listview.Items.Add(new Person &#123; Name = &quot;ç‹äº”&quot;, Age = 24, Address = &quot;ä¸Šæµ·å¸‚è™¹å£åŒº&quot; &#125;); &#125; private void listview_SelectionChanged(object sender, SelectionChangedEventArgs e) &#123; ListView listView = sender as ListView; if (listView == null) return; var person = listView.SelectedItem as Person; if (person == null) return; _TextBlockName.Text = person.Name; _TextBlockAge.Text = person.Age + &quot;å²&quot;; _TextBlockAddress.Text = person.Address; &#125; &#125;&#125; ä¸‰ã€ä»£ç åˆ†æ é¦–å…ˆï¼Œæˆ‘ä»¬åœ¨å‰ç«¯å®ä¾‹åŒ–äº†ä¸€ä¸ªListViewæ§ä»¶ï¼Œå¹¶ä¸ºViewå±æ€§å®ä¾‹åŒ–äº†ä¸€ä¸ªGridViewå¯¹è±¡ï¼ˆæ³¨æ„xamlè¯­æ³•çš„å†™æ³•ï¼‰,æœ€åä¸ºGridViewå¯¹è±¡å®ä¾‹åŒ–äº†3åˆ—GridViewColumn ï¼Œåˆ†åˆ«è®¾ç½®ä¸ºå§“åå¹´é¾„å’Œåœ°å€ï¼Œç‰¹åˆ«éœ€è¦æ³¨æ„çš„æ˜¯DisplayMemberBindingå±æ€§çš„å†™æ³•ï¼Œè¿™é‡Œé‡‡ç”¨äº†æ•°æ®ç»‘å®šçš„å†™æ³•ï¼Œæ„æ€æ˜¯å°†ListViewæ§ä»¶çš„æ•°æ®æºçš„Nameå±æ€§æ˜¾ç¤ºåœ¨å§“åé‚£ä¸€åˆ—ï¼ŒAgeå±æ€§æ˜¾ç¤ºåœ¨å¹´é¾„é‚£ä¸€åˆ—ï¼ŒAddresså±æ€§æ˜¾ç¤ºåœ¨åœ°å€é‚£ä¸€åˆ—ï¼ˆæˆ‘ä»¬æ˜ç¡®çŸ¥é“ListViewæ•°æ®æºçš„ç±»å‹å°±æ˜¯Personçš„å®ä¾‹é›†åˆï¼‰ã€‚ äº‹ä»¶å¤„ç† åœ¨ListViewæ§ä»¶çš„SelectionChangedäº‹ä»¶ä¸­ï¼Œæˆ‘ä»¬å…ˆå°†senderè½¬æˆListView ï¼Œå†ä»ä¸­è·å–å½“å‰é€‰ä¸­é¡¹ï¼ˆå³personï¼‰ï¼Œæœ€åæ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯åœ¨ç•Œé¢ä¸Šå³å¯ã€‚è¿™æ ·å°±æ¼”ç¤ºäº†æ•°æ®æ€ä¹ˆåŠ è½½æ˜¾ç¤ºåˆ°ListViewï¼Œåˆæ€ä¹ˆæ ·ä»ListViewä¸Šè·å–çš„è¿‡ç¨‹ã€‚ è€Œç±»ä¼¼äºListViewçš„æ•ˆæœæ•ˆæœï¼Œè¿˜æœ‰ä¸€ä¸ªä¸“é—¨ç”¨æ¥æ˜¾ç¤ºæ•°æ®çš„æ§ä»¶ï¼Œå®ƒå«DataGridï¼Œä»æŸç§æ„ä¹‰ä¸Šæ¥è¯´ï¼Œå®ƒç”šè‡³å¯ä»¥å¼€å‘ç±»ä¼¼Excelè¡¨æ ¼çš„æ•ˆæœã€‚ä¸è¿‡ï¼Œæˆ‘ä»¬åœ¨ä¸‹ä¸€èŠ‚ï¼Œè¿˜æ˜¯ä»¥å­¦ä¹ å®ƒçš„åŸºç¡€åŠŸèƒ½å…ˆã€‚ DataGridæ•°æ®è¡¨æ ¼æ§ä»¶DataGridæ˜¯ä¸€ä¸ªå¯ä»¥å¤šé€‰çš„æ•°æ®è¡¨æ ¼æ§ä»¶ã€‚æ‰€ä»¥ï¼Œå®ƒç»§æ‰¿ä¸€ä¸ªæ”¯æŒå¤šé€‰çš„çˆ¶ç±»â€”â€”MultiSelectorã€‚ 1234567891011121314public abstract class MultiSelector : Selector&#123; protected MultiSelector(); public IList SelectedItems &#123; get; &#125; protected bool CanSelectMultipleItems &#123; get; set; &#125; protected bool IsUpdatingSelectedItems &#123; get; &#125; public void SelectAll(); public void UnselectAll(); protected void BeginUpdateSelectedItems(); protected void EndUpdateSelectedItems(); &#125; ä»ä¸Šé¢çš„å®šä¹‰æ¥çœ‹ï¼ŒDataGridå¤šé€‰çš„ç»“æœä¼šä¿å­˜åœ¨SelectedItems åªè¯»å±æ€§ä¸­ï¼ŒCanSelectMultipleItems å±æ€§ç”¨æ¥è®¾ç½®æ˜¯å¦å¼€å¯å¤šé€‰ã€‚å¥½ï¼Œç„¶åæˆ‘ä»¬æ¥çœ‹çœ‹DataGridæ§ä»¶çš„å®šä¹‰ï¼Œè™½ç„¶å®ƒçš„å±æ€§ä¼—å¤šï¼Œåœ¨å­¦ä¹ æ¨¡æ¿æ ·å¼ä¹‹åï¼Œæˆ‘ä»¬è¿˜ä¼šè¿›ä¸€æ­¥å­¦ä¹ è¿™ä¸ªæ§ä»¶çš„ç”¨æ³•ã€‚ ä¸€ã€DataGridå®šä¹‰ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208public class DataGrid : MultiSelector&#123; public static readonly DependencyProperty CanUserResizeColumnsProperty; public static readonly DependencyProperty CurrentItemProperty; public static readonly DependencyProperty CurrentColumnProperty; public static readonly DependencyProperty CurrentCellProperty; public static readonly DependencyProperty CanUserAddRowsProperty; public static readonly DependencyProperty CanUserDeleteRowsProperty; public static readonly DependencyProperty RowDetailsVisibilityModeProperty; public static readonly DependencyProperty AreRowDetailsFrozenProperty; public static readonly DependencyProperty RowDetailsTemplateProperty; public static readonly DependencyProperty RowDetailsTemplateSelectorProperty; public static readonly DependencyProperty CanUserResizeRowsProperty; public static readonly DependencyProperty NewItemMarginProperty; public static readonly DependencyProperty SelectionModeProperty; public static readonly DependencyProperty SelectionUnitProperty; public static readonly DependencyProperty CanUserSortColumnsProperty; public static readonly DependencyProperty AutoGenerateColumnsProperty; public static readonly DependencyProperty FrozenColumnCountProperty; public static readonly DependencyProperty NonFrozenColumnsViewportHorizontalOffsetProperty; public static readonly DependencyProperty EnableColumnVirtualizationProperty; public static readonly DependencyProperty CanUserReorderColumnsProperty; public static readonly DependencyProperty DragIndicatorStyleProperty; public static readonly DependencyProperty DropLocationIndicatorStyleProperty; public static readonly DependencyProperty ClipboardCopyModeProperty; public static readonly DependencyProperty CellsPanelHorizontalOffsetProperty; public static readonly DependencyProperty IsReadOnlyProperty; public static readonly RoutedCommand CancelEditCommand; public static readonly DependencyProperty EnableRowVirtualizationProperty; public static readonly RoutedCommand BeginEditCommand; public static readonly RoutedCommand CommitEditCommand; public static readonly DependencyProperty ColumnWidthProperty; public static readonly DependencyProperty MinColumnWidthProperty; public static readonly DependencyProperty MaxColumnWidthProperty; public static readonly DependencyProperty HorizontalGridLinesBrushProperty; public static readonly DependencyProperty VerticalGridLinesBrushProperty; public static readonly DependencyProperty RowStyleProperty; public static readonly DependencyProperty RowValidationErrorTemplateProperty; public static readonly DependencyProperty RowStyleSelectorProperty; public static readonly DependencyProperty RowBackgroundProperty; public static readonly DependencyProperty AlternatingRowBackgroundProperty; public static readonly DependencyProperty RowHeightProperty; public static readonly DependencyProperty GridLinesVisibilityProperty; public static readonly DependencyProperty RowHeaderWidthProperty; public static readonly DependencyProperty VerticalScrollBarVisibilityProperty; public static readonly DependencyProperty MinRowHeightProperty; public static readonly DependencyProperty HorizontalScrollBarVisibilityProperty; public static readonly DependencyProperty RowHeaderTemplateProperty; public static readonly DependencyProperty RowHeaderStyleProperty; public static readonly DependencyProperty RowHeaderTemplateSelectorProperty; public static readonly DependencyProperty CellStyleProperty; public static readonly DependencyProperty HeadersVisibilityProperty; public static readonly DependencyProperty ColumnHeaderHeightProperty; public static readonly DependencyProperty RowHeaderActualWidthProperty; public static readonly DependencyProperty ColumnHeaderStyleProperty; public DataGrid(); public static ComponentResourceKey FocusBorderBrushKey &#123; get; &#125; public static RoutedUICommand SelectAllCommand &#123; get; &#125; public static IValueConverter HeadersVisibilityConverter &#123; get; &#125; public static IValueConverter RowDetailsScrollingConverter &#123; get; &#125; public static RoutedUICommand DeleteCommand &#123; get; &#125; public DataTemplate RowHeaderTemplate &#123; get; set; &#125; public DataTemplateSelector RowHeaderTemplateSelector &#123; get; set; &#125; public ScrollBarVisibility VerticalScrollBarVisibility &#123; get; set; &#125; public ScrollBarVisibility HorizontalScrollBarVisibility &#123; get; set; &#125; public bool CanUserAddRows &#123; get; set; &#125; public object CurrentItem &#123; get; set; &#125; public DataGridColumn CurrentColumn &#123; get; set; &#125; public DataGridCellInfo CurrentCell &#123; get; set; &#125; public bool CanUserDeleteRows &#123; get; set; &#125; public Style RowHeaderStyle &#123; get; set; &#125; public DataGridRowDetailsVisibilityMode RowDetailsVisibilityMode &#123; get; set; &#125; public bool IsReadOnly &#123; get; set; &#125; public Style ColumnHeaderStyle &#123; get; set; &#125; public Style RowStyle &#123; get; set; &#125; public DataGridHeadersVisibility HeadersVisibility &#123; get; set; &#125; public bool AreRowDetailsFrozen &#123; get; set; &#125; public Brush AlternatingRowBackground &#123; get; set; &#125; public Brush RowBackground &#123; get; set; &#125; public StyleSelector RowStyleSelector &#123; get; set; &#125; public ObservableCollection&lt;ValidationRule&gt; RowValidationRules &#123; get; &#125; public ControlTemplate RowValidationErrorTemplate &#123; get; set; &#125; public Brush VerticalGridLinesBrush &#123; get; set; &#125; public Brush HorizontalGridLinesBrush &#123; get; set; &#125; public DataGridGridLinesVisibility GridLinesVisibility &#123; get; set; &#125; public double MaxColumnWidth &#123; get; set; &#125; public double MinColumnWidth &#123; get; set; &#125; public DataGridLength ColumnWidth &#123; get; set; &#125; public bool CanUserResizeColumns &#123; get; set; &#125; public ObservableCollection&lt;DataGridColumn&gt; Columns &#123; get; &#125; public double RowHeaderWidth &#123; get; set; &#125; public double RowHeaderActualWidth &#123; get; &#125; public double ColumnHeaderHeight &#123; get; set; &#125; public Style CellStyle &#123; get; set; &#125; public DataTemplate RowDetailsTemplate &#123; get; set; &#125; public double MinRowHeight &#123; get; set; &#125; public bool CanUserResizeRows &#123; get; set; &#125; public double RowHeight &#123; get; set; &#125; public DataTemplateSelector RowDetailsTemplateSelector &#123; get; set; &#125; public double CellsPanelHorizontalOffset &#123; get; &#125; public DataGridClipboardCopyMode ClipboardCopyMode &#123; get; set; &#125; public Style DropLocationIndicatorStyle &#123; get; set; &#125; public bool CanUserReorderColumns &#123; get; set; &#125; public bool EnableColumnVirtualization &#123; get; set; &#125; public bool EnableRowVirtualization &#123; get; set; &#125; public Style DragIndicatorStyle &#123; get; set; &#125; public double NonFrozenColumnsViewportHorizontalOffset &#123; get; &#125; public int FrozenColumnCount &#123; get; set; &#125; public bool AutoGenerateColumns &#123; get; set; &#125; public Thickness NewItemMargin &#123; get; &#125; public bool CanUserSortColumns &#123; get; set; &#125; public DataGridSelectionUnit SelectionUnit &#123; get; set; &#125; public DataGridSelectionMode SelectionMode &#123; get; set; &#125; public IList&lt;DataGridCellInfo&gt; SelectedCells &#123; get; &#125; protected internal override bool HandlesScrolling &#123; get; &#125; public event DataGridSortingEventHandler Sorting; public event EventHandler AutoGeneratedColumns; public event EventHandler&lt;DataGridAutoGeneratingColumnEventArgs&gt; AutoGeneratingColumn; public event EventHandler&lt;DragDeltaEventArgs&gt; ColumnHeaderDragDelta; public event EventHandler&lt;DragStartedEventArgs&gt; ColumnHeaderDragStarted; public event EventHandler&lt;DragCompletedEventArgs&gt; ColumnHeaderDragCompleted; public event SelectedCellsChangedEventHandler SelectedCellsChanged; public event EventHandler&lt;DataGridColumnReorderingEventArgs&gt; ColumnReordering; public event EventHandler&lt;DataGridRowDetailsEventArgs&gt; RowDetailsVisibilityChanged; public event EventHandler&lt;DataGridRowEventArgs&gt; UnloadingRow; public event EventHandler&lt;DataGridRowDetailsEventArgs&gt; LoadingRowDetails; public event InitializingNewItemEventHandler InitializingNewItem; public event EventHandler&lt;DataGridPreparingCellForEditEventArgs&gt; PreparingCellForEdit; public event EventHandler&lt;DataGridBeginningEditEventArgs&gt; BeginningEdit; public event EventHandler&lt;EventArgs&gt; CurrentCellChanged; public event EventHandler&lt;DataGridCellEditEndingEventArgs&gt; CellEditEnding; public event EventHandler&lt;DataGridRowEditEndingEventArgs&gt; RowEditEnding; public event EventHandler&lt;DataGridRowEventArgs&gt; LoadingRow; public event EventHandler&lt;DataGridColumnEventArgs&gt; ColumnDisplayIndexChanged; public event EventHandler&lt;DataGridRowDetailsEventArgs&gt; UnloadingRowDetails; public event EventHandler&lt;AddingNewItemEventArgs&gt; AddingNewItem; public event EventHandler&lt;DataGridRowClipboardEventArgs&gt; CopyingRowClipboardContent; public event EventHandler&lt;DataGridColumnEventArgs&gt; ColumnReordered; public static Collection&lt;DataGridColumn&gt; GenerateColumns(IItemProperties itemProperties); public bool BeginEdit(); public bool BeginEdit(RoutedEventArgs editingEventArgs); public bool CancelEdit(); public bool CancelEdit(DataGridEditingUnit editingUnit); public void ClearDetailsVisibilityForItem(object item); public DataGridColumn ColumnFromDisplayIndex(int displayIndex); public bool CommitEdit(); public bool CommitEdit(DataGridEditingUnit editingUnit, bool exitEditingMode); public Visibility GetDetailsVisibilityForItem(object item); public override void OnApplyTemplate(); public void ScrollIntoView(object item); public void ScrollIntoView(object item, DataGridColumn column); public void SelectAllCells(); public void SetDetailsVisibilityForItem(object item, Visibility detailsVisibility); public void UnselectAllCells(); protected override void ClearContainerForItemOverride(DependencyObject element, object item); protected override DependencyObject GetContainerForItemOverride(); protected override bool IsItemItsOwnContainerOverride(object item); protected override Size MeasureOverride(Size availableSize); protected virtual void OnAddingNewItem(AddingNewItemEventArgs e); protected virtual void OnAutoGeneratedColumns(EventArgs e); protected virtual void OnAutoGeneratingColumn(DataGridAutoGeneratingColumnEventArgs e); protected virtual void OnBeginningEdit(DataGridBeginningEditEventArgs e); protected virtual void OnCanExecuteBeginEdit(CanExecuteRoutedEventArgs e); protected virtual void OnCanExecuteCancelEdit(CanExecuteRoutedEventArgs e); protected virtual void OnCanExecuteCommitEdit(CanExecuteRoutedEventArgs e); protected virtual void OnCanExecuteCopy(CanExecuteRoutedEventArgs args); protected virtual void OnCanExecuteDelete(CanExecuteRoutedEventArgs e); protected virtual void OnCellEditEnding(DataGridCellEditEndingEventArgs e); protected override void OnContextMenuOpening(ContextMenuEventArgs e); protected virtual void OnCopyingRowClipboardContent(DataGridRowClipboardEventArgs args); protected override AutomationPeer OnCreateAutomationPeer(); protected virtual void OnCurrentCellChanged(EventArgs e); protected virtual void OnExecutedBeginEdit(ExecutedRoutedEventArgs e); protected virtual void OnExecutedCancelEdit(ExecutedRoutedEventArgs e); protected virtual void OnExecutedCommitEdit(ExecutedRoutedEventArgs e); protected virtual void OnExecutedCopy(ExecutedRoutedEventArgs args); protected virtual void OnExecutedDelete(ExecutedRoutedEventArgs e); protected virtual void OnInitializingNewItem(InitializingNewItemEventArgs e); protected override void OnIsMouseCapturedChanged(DependencyPropertyChangedEventArgs e); protected override void OnItemsChanged(NotifyCollectionChangedEventArgs e); protected override void OnItemsSourceChanged(IEnumerable oldValue, IEnumerable newValue); protected override void OnKeyDown(KeyEventArgs e); protected virtual void OnLoadingRow(DataGridRowEventArgs e); protected virtual void OnLoadingRowDetails(DataGridRowDetailsEventArgs e); protected override void OnMouseMove(MouseEventArgs e); protected virtual void OnRowEditEnding(DataGridRowEditEndingEventArgs e); protected virtual void OnSelectedCellsChanged(SelectedCellsChangedEventArgs e); protected override void OnSelectionChanged(SelectionChangedEventArgs e); protected virtual void OnSorting(DataGridSortingEventArgs eventArgs); protected override void OnTemplateChanged(ControlTemplate oldTemplate, ControlTemplate newTemplate); protected override void OnTextInput(TextCompositionEventArgs e); protected virtual void OnUnloadingRow(DataGridRowEventArgs e); protected virtual void OnUnloadingRowDetails(DataGridRowDetailsEventArgs e); protected override void PrepareContainerForItemOverride(DependencyObject element, object item); protected internal virtual void OnColumnDisplayIndexChanged(DataGridColumnEventArgs e); protected internal virtual void OnColumnHeaderDragCompleted(DragCompletedEventArgs e); protected internal virtual void OnColumnHeaderDragDelta(DragDeltaEventArgs e); protected internal virtual void OnColumnHeaderDragStarted(DragStartedEventArgs e); protected internal virtual void OnColumnReordered(DataGridColumnEventArgs e); protected internal virtual void OnColumnReordering(DataGridColumnReorderingEventArgs e); protected internal virtual void OnPreparingCellForEdit(DataGridPreparingCellForEditEventArgs e); protected internal virtual void OnRowDetailsVisibilityChanged(DataGridRowDetailsEventArgs e); &#125; äºŒã€å±æ€§åˆ†æ DataGridæä¾›äº†å¤§é‡çš„ä¾èµ–å±æ€§ï¼Œåˆç†å……åˆ†åˆ©ç”¨è¿™äº›å±æ€§ï¼Œåœ¨å¼€å‘ERPã€CMSã€æŠ¥è¡¨ç­‰è½¯ä»¶æ—¶å¯è¾¾åˆ°äº‹åŠåŠŸå€çš„æ•ˆæœã€‚ä¸‹é¢æˆ‘ä»¬ä»¥è¡¨æ ¼çš„å½¢å¼ï¼Œå…ˆäº†è§£ä¸€ä¸‹å„å±æ€§çš„åŠŸèƒ½ï¼Œç„¶ååœ¨æœ¬èŠ‚ä¸­å­¦ä¹ ä¸€äº›åŸºç¡€å±æ€§ï¼Œä»¥æŒæ¡è¯¥æ§ä»¶çš„åŸºæœ¬ç”¨æ³•ï¼Œå‰©ä¸‹çš„å±æ€§æ”¾åˆ°æ¨¡æ¿æ ·å¼çš„ç« èŠ‚ä¸­å­¦ä¹ ã€‚ å±æ€§åç§° è¯´æ˜ å¤‡æ³¨ FocusBorderBrushKey è·å–å¼•ç”¨ç„¦ç‚¹çš„å•å…ƒæ ¼çš„é»˜è®¤è¾¹æ¡†ç”»ç¬”çš„é”®ã€‚ SelectAllCommand è¡¨ç¤ºæŒ‡ç¤ºæƒ³è¦é€‰æ‹©çš„æ‰€æœ‰å•å…ƒæ ¼çš„å‘½ä»¤ HeadersVisibilityConverter è·å–æ ‡é¢˜æ˜¾ç¤ºéšè—çš„è½¬æ¢å™¨ï¼Œå³HeadersVisibilityå±æ€§çš„è½¬æ¢å™¨ RowDetailsScrollingConverter è·å–å°†è½¬æ¢ä¸ºä¸€ä¸ªå¸ƒå°”å€¼è½¬æ¢å™¨ DeleteCommand è¡¨ç¤ºæŒ‡ç¤ºæƒ³è¦åˆ é™¤å½“å‰è¡Œçš„å‘½ä»¤ã€‚ RowHeaderTemplate è·å–æˆ–è®¾ç½®è¡Œæ ‡é¢˜çš„æ¨¡æ¿ã€‚ é‡è¦ RowHeaderTemplateSelector è·å–æˆ–è®¾ç½®è¡Œæ ‡é¢˜çš„æ¨¡æ¿é€‰æ‹©å™¨ã€‚ VerticalScrollBarVisibility æ˜¯å¦æ˜¾ç¤ºå‚ç›´æ»šåŠ¨æ¡ HorizontalScrollBarVisibility æ˜¯å¦æ˜¾ç¤ºæ°´å¹³æ»šåŠ¨æ¡ CanUserAddRows æ˜¯å¦å¯ä»¥æ·»åŠ æ–°è¡Œ é‡è¦ CurrentItem å½“å‰é€‰ä¸­è¡Œï¼ˆä¸€èˆ¬æŒ‡ç»‘å®šçš„æ•°æ®æºçš„æŸä¸€ä¸ªå…ƒç´ ï¼‰ å¸¸ç”¨ CurrentColumn è·å–æˆ–è®¾ç½®åŒ…å«å½“å‰å•å…ƒæ ¼çš„åˆ—ã€‚ CurrentCell è·å–æˆ–è®¾ç½®å…·æœ‰ç„¦ç‚¹çš„å•å…ƒæ ¼ã€‚ CanUserDeleteRows æ˜¯å¦å¯ä»¥åˆ é™¤è¡Œ é‡è¦ RowHeaderStyle è·å–æˆ–è®¾ç½®åº”ç”¨äºæ‰€æœ‰è¡Œæ ‡é¢˜çš„æ ·å¼ã€‚ é‡è¦ RowDetailsVisibilityMode è·å–æˆ–è®¾ç½®ä¸€ä¸ªå€¼ï¼Œè¯¥å€¼æŒ‡ç¤ºä½•æ—¶æ˜¾ç¤ºæŸè¡Œçš„è¯¦ç»†ä¿¡æ¯éƒ¨åˆ†ã€‚ IsReadOnly å½“å‰æ§ä»¶æ˜¯å¦åªè¯» å¸¸ç”¨ ColumnHeaderStyle è·å–æˆ–è®¾ç½®æ‰€æœ‰åˆ—æ ‡é¢˜çš„æ ·å¼ é‡è¦ RowStyle è·å–æˆ–è®¾ç½®åº”ç”¨åˆ°çš„æ‰€æœ‰è¡Œçš„æ ·å¼ã€‚ é‡è¦ HeadersVisibility è·å–æˆ–è®¾ç½®ç”¨äºæŒ‡å®šè¡Œå’Œåˆ—æ ‡é¢˜çš„å¯è§æ€§çš„å€¼ã€‚ AreRowDetailsFrozen è·å–æˆ–è®¾ç½®ä¸€ä¸ªå€¼ï¼Œè¯¥å€¼æŒ‡ç¤ºæ˜¯å¦å¯æ°´å¹³æ»šåŠ¨è¡Œè¯¦ç»†ä¿¡æ¯ã€‚ AlternatingRowBackground è·å–æˆ–è®¾ç½®äº¤æ›¿è¡Œä¸Šä½¿ç”¨çš„èƒŒæ™¯ç”»ç¬”ã€‚ é‡è¦ RowBackground è·å–æˆ–è®¾ç½®ç”¨äºè¡ŒèƒŒæ™¯çš„é»˜è®¤ç”»ç¬”ã€‚ RowStyleSelector è·å–æˆ–è®¾ç½®è¡Œçš„æ ·å¼é€‰æ‹©å™¨ã€‚ RowValidationRules è·å–ç”¨äºéªŒè¯æ¯ä¸ªè¡Œä¸­çš„æ•°æ®çš„è§„åˆ™ã€‚ RowValidationErrorTemplate è·å–æˆ–è®¾ç½®ç”¨äºä»¥å¯è§†æ–¹å¼æŒ‡ç¤ºè¡ŒéªŒè¯ä¸­çš„é”™è¯¯çš„æ¨¡æ¿ã€‚ VerticalGridLinesBrush è·å–æˆ–è®¾ç½®ç”¨äºç»˜åˆ¶å‚ç›´ç½‘æ ¼çº¿çš„ç”»ç¬”ã€‚ å¸¸ç”¨ HorizontalGridLinesBrush è·å–æˆ–è®¾ç½®ç”¨äºç»˜åˆ¶æ°´å¹³ç½‘æ ¼çº¿çš„ç”»ç¬”ã€‚ GridLinesVisibility è·å–æˆ–è®¾ç½®ä¸€ä¸ªå€¼ï¼Œè¯¥å€¼æŒ‡ç¤ºæ˜¾ç¤ºå“ªäº›ç½‘æ ¼çº¿ã€‚ MaxColumnWidth è·å–æˆ–è®¾ç½®åˆ—å’Œæ ‡å¤´ä¸­çš„æœ€å¤§å®½åº¦çº¦æŸ MinColumnWidth è·å–æˆ–è®¾ç½®åˆ—å’Œæ ‡å¤´ä¸­çš„æœ€å°å®½åº¦çº¦æŸ ColumnWidth è·å–æˆ–è®¾ç½®æ ‡å‡†å®½åº¦å’Œåˆ—å’Œä¸­çš„æ ‡å¤´çš„å¤§å°è°ƒæ•´æ¨¡å¼ CanUserResizeColumns è·å–æˆ–è®¾ç½®ç”¨æˆ·æ˜¯å¦å¯ä»¥é€šè¿‡ä½¿ç”¨é¼ æ ‡è°ƒæ•´åˆ—çš„å®½åº¦ã€‚ Columns è·å–ä¸€ä¸ªé›†åˆä¸­çš„æ‰€æœ‰åˆ— å¸¸ç”¨ RowHeaderWidth è·å–æˆ–è®¾ç½®è¡Œæ ‡é¢˜åˆ—çš„å®½åº¦ã€‚ RowHeaderActualWidth è·å–å‘ˆç°çš„è¡Œæ ‡é¢˜åˆ—çš„å®½åº¦ã€‚ ColumnHeaderHeight è·å–æˆ–è®¾ç½®åˆ—æ ‡é¢˜è¡Œçš„é«˜åº¦ã€‚ CellStyle è·å–æˆ–è®¾ç½®æ‰€æœ‰å•å…ƒæ ¼çš„æ ·å¼ å¸¸ç”¨ RowDetailsTemplate è·å–æˆ–è®¾ç½®ç”¨äºæ˜¾ç¤ºè¡Œè¯¦ç»†ä¿¡æ¯çš„æ¨¡æ¿ã€‚ MinRowHeight è·å–æˆ–è®¾ç½®è¡Œå’Œä¸­çš„æ ‡å¤´çš„æœ€å°é«˜åº¦çº¦æŸ CanUserResizeRows è·å–æˆ–è®¾ç½®ç”¨æˆ·æ˜¯å¦å¯ä»¥é€šè¿‡ä½¿ç”¨é¼ æ ‡è°ƒæ•´è¡Œçš„é«˜åº¦ã€‚ RowHeight è·å–æˆ–è®¾ç½®çš„æ‰€æœ‰è¡Œçš„å»ºè®®çš„é«˜åº¦ã€‚ RowDetailsTemplateSelector è·å–æˆ–è®¾ç½®ç”¨äºè¡Œè¯¦ç»†ä¿¡æ¯çš„æ¨¡æ¿é€‰æ‹©å™¨ã€‚ CellsPanelHorizontalOffset è·å–DataGridCellsPanelçš„æ°´å¹³åç§»é‡ ClipboardCopyMode è·å–æˆ–è®¾ç½®ä¸€ä¸ªå€¼ï¼ŒæŒ‡ç¤ºå¦‚ä½•å°†å†…å®¹å¤åˆ¶åˆ°å‰ªè´´æ¿ã€‚ NonFrozenColumns ViewportHorizontalOffset è·å–åœ¨è§†åŒºçš„å¯æ»šåŠ¨åˆ—çš„æ°´å¹³åç§»é‡ã€‚ FrozenColumnCount è·å–æˆ–è®¾ç½®éæ»šåŠ¨åˆ—çš„æ•°é‡ã€‚ å¸¸ç”¨ AutoGenerateColumns è·å–æˆ–è®¾ç½®ä¸€ä¸ªå€¼ï¼Œè¯¥å€¼æŒ‡ç¤ºæ˜¯å¦è‡ªåŠ¨åˆ›å»ºåˆ—ã€‚ å¸¸ç”¨ NewItemMargin è·å–æˆ–è®¾ç½®æ–°çš„é¡¹ç›®è¡Œçš„è¾¹è·ã€‚ CanUserSortColumns æ˜¯å¦å¯ä»¥å•å‡»åˆ—æ ‡é¢˜æ¥å¯¹åˆ—æ’åºã€‚ å¸¸ç”¨ SelectionUnit é€‰æ‹©è¡Œçš„æ¨¡å¼ SelectionMode æ˜¯å¦æ”¯æŒå¤šé€‰ é‡è¦ SelectedCells è·å–å½“å‰é€‰å®šçš„å•å…ƒæ ¼çš„åˆ—è¡¨ã€‚ HandlesScrolling æ˜¯å¦æ”¯æŒè‡ªå®šä¹‰é”®ç›˜æ»šåŠ¨ã€‚ åœ¨ä¸Šè¿°è¡¨æ ¼ä¸­ï¼ŒColumnså±æ€§æ˜¯DataGridæœ€åŸºæœ¬çš„ä¸€ä¸ªå±æ€§ã€‚å®ƒæ˜¯ä¸€ä¸ªObservableCollectionç±»å‹çš„é›†åˆï¼Œè¡¨ç¤ºDataGridçš„åˆ—çš„é›†åˆã€‚å…¶å®DataGridColumnåªæ˜¯ä¸€ä¸ªæŠ½è±¡åŸºç±»ï¼Œæˆ‘ä»¬çœŸæ­£åœ¨å®ä¾‹åŒ–æ—¶ï¼Œæ˜¯å®ä¾‹åŒ–DataGridColumnçš„å­ç±»ï¼Œç„¶åæ”¾åˆ°Columnså±æ€§ä¸­ã€‚ é‚£ä¹ˆDataGridColumnæœ‰å“ªäº›å­ç±»å‘¢ï¼Ÿ DataGridTextColumn è¡¨ç¤ºæ–‡æœ¬å†…å®¹çš„åˆ— DataGridCheckBoxColumn è¡¨ç¤ºå¤é€‰æ¡†çš„åˆ— DataGridComboBoxColumn è¡¨ç¤ºä¸‹æ‹‰æ¡†çš„åˆ— DataGridTemplateColumn è¡¨ç¤ºæ¨¡æ¿çš„åˆ—ï¼ˆä¸‡é‡‘æ²¹ï¼‰ åœ¨æœ¬åˆ—ä¸­ï¼Œæˆ‘ä»¬å°†ä»¥æœ€ç®€å•çš„DataGridTextColumn ä¸ºä¾‹ã€‚ ä¸‰ã€äº‹ä»¶æˆå‘˜ DataGridä¸€å…±æœ‰23ä¸ªäº‹ä»¶æˆå‘˜ï¼Œå®ƒä»¬åˆ†åˆ«å¦‚ä¸‹æ‰€ç¤º äº‹ä»¶åç§° è¯´æ˜ Sorting å¯¹åˆ—è¿›è¡Œæ’åºæ—¶å‘ç”Ÿã€‚ AutoGeneratedColumns æ‰€æœ‰åˆ—çš„è‡ªåŠ¨ç”Ÿæˆå®Œæˆåå‘ç”Ÿã€‚ AutoGeneratingColumn è‡ªåŠ¨ç”Ÿæˆå•ç‹¬çš„åˆ—æ—¶å‡ºç°ã€‚ ColumnHeaderDragDelta æ¯æ¬¡é¼ æ ‡ä½ç½®å‘ç”Ÿæ›´æ”¹æ—¶åœ¨ç”¨æˆ·æ‹–åŠ¨åˆ—æ ‡é¢˜æ—¶å‘ç”Ÿã€‚ ColumnHeaderDragStarted å½“ç”¨æˆ·å¼€å§‹ä½¿ç”¨é¼ æ ‡æ‹–åŠ¨åˆ—æ ‡é¢˜æ—¶å‘ç”Ÿã€‚ ColumnHeaderDragCompleted å½“ç”¨æˆ·ä½¿ç”¨é¼ æ ‡æ‹–åŠ¨åé‡Šæ”¾åˆ—æ ‡é¢˜æ—¶å‘ç”Ÿã€‚ SelectedCellsChanged å‘ç”Ÿæ—¶ DataGrid.SelectedCells é›†åˆæ›´æ”¹ã€‚ ColumnReordering åœ¨åˆ—ç§»è‡³çš„æ˜¾ç¤ºé¡ºåºä¸­çš„æ–°ä½ç½®ä¹‹å‰å‘ç”Ÿã€‚ RowDetailsVisibilityChanged å½“æŸä¸€è¡Œçš„å¯è§æ€§è¯¦ç»†ä¿¡æ¯å…ƒç´ æ›´æ”¹æ—¶å‘ç”Ÿã€‚ UnloadingRow å‘ç”Ÿæ—¶ DataGridRow å¯¹è±¡å°†æˆä¸ºå¯ä¾›é‡ç”¨ã€‚ LoadingRowDetails æ–°çš„è¡Œçš„è¯¦ç»†ä¿¡æ¯æ¨¡æ¿åº”ç”¨äºè¡Œæ—¶å‘ç”Ÿã€‚ InitializingNewItem åˆ›å»ºä¸€ä¸ªæ–°é¡¹æ—¶å‡ºç°ã€‚ PreparingCellForEdit åœ¨å•å…ƒæ ¼è¿›å…¥ç¼–è¾‘æ¨¡å¼æ—¶å‘ç”Ÿã€‚ BeginningEdit å‘ç”Ÿè¡Œæˆ–å•å…ƒæ ¼è¿›å…¥ç¼–è¾‘æ¨¡å¼ä¹‹å‰ã€‚ CurrentCellChanged åœ¨ DataGrid.CurrentCell å±æ€§çš„å€¼æ›´æ”¹åå‘ç”Ÿã€‚ CellEditEnding åœ¨å•å…ƒæ ¼çš„ç¼–è¾‘å°†åœ¨æäº¤æˆ–å–æ¶ˆå‰å‘ç”Ÿã€‚ RowEditEnding åœ¨æäº¤æˆ–å–æ¶ˆè¡Œç¼–è¾‘ä¹‹å‰å‘ç”Ÿã€‚ LoadingRow åŠ è½½rowæ—¶ ColumnDisplayIndexChanged å…¶ä¸­ä¸€ä¸ªåˆ—æ›´æ”¹å±æ€§æ—¶ UnloadingRowDetails è¡Œè¯¦ç»†ä¿¡æ¯å…ƒç´ æˆä¸ºå¯ä¾›é‡ç”¨æ—¶å‘ç”Ÿã€‚ AddingNewItem æ–°é¡¹æ·»åŠ åˆ°DataGridä¹‹å‰å‘ç”Ÿ CopyingRowClipboardContent é»˜è®¤è¡Œå†…å®¹å‡†å¤‡å¥½ä¹‹åå‘ç”Ÿã€‚ ColumnReordered åœ¨åˆ—ç§»è‡³çš„æ˜¾ç¤ºé¡ºåºä¸­çš„æ–°ä½ç½®æ—¶å‘ç”Ÿã€‚ å››ã€åŸºæœ¬ç¤ºä¾‹ å‰ç«¯ä»£ç  1234567891011121314151617181920212223242526272829303132333435363738394041&lt;Window x:Class=&quot;HelloWorld.MainWindow&quot; xmlns=&quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot; xmlns:x=&quot;http://schemas.microsoft.com/winfx/2006/xaml&quot; xmlns:d=&quot;http://schemas.microsoft.com/expression/blend/2008&quot; xmlns:mc=&quot;http://schemas.openxmlformats.org/markup-compatibility/2006&quot; xmlns:local=&quot;clr-namespace:HelloWorld&quot; xmlns:forms=&quot;clr-namespace:System.Windows.Forms;assembly=System.Windows.Forms&quot; mc:Ignorable=&quot;d&quot; FontSize=&quot;14&quot; Title=&quot;WPFä¸­æ–‡ç½‘ä¹‹æ§ä»¶è¯¾ç¨‹ - www.wpfsoft.com&quot; Height=&quot;350&quot; Width=&quot;500&quot;&gt; &lt;Grid&gt; &lt;Grid.ColumnDefinitions&gt; &lt;ColumnDefinition/&gt; &lt;ColumnDefinition Width=&quot;200&quot;/&gt; &lt;/Grid.ColumnDefinitions&gt; &lt;DataGrid x:Name=&quot;datagrid&quot; SelectionMode=&quot;Extended&quot; IsReadOnly=&quot;True&quot; SelectionChanged=&quot;datagrid_Selected&quot;&gt; &lt;DataGrid.Columns&gt; &lt;DataGridTextColumn Header=&quot;å§“å&quot; Binding=&quot;&#123;Binding Name&#125;&quot; /&gt; &lt;DataGridTextColumn Header=&quot;å¹´é¾„&quot; Binding=&quot;&#123;Binding Age&#125;&quot; /&gt; &lt;DataGridTextColumn Header=&quot;åœ°å€&quot; Binding=&quot;&#123;Binding Address&#125;&quot; /&gt; &lt;/DataGrid.Columns&gt; &lt;/DataGrid&gt; &lt;StackPanel Grid.Column=&quot;1&quot;&gt; &lt;StackPanel Orientation=&quot;Horizontal&quot; Margin=&quot;5&quot;&gt; &lt;TextBlock Text=&quot;å§“å:&quot;/&gt; &lt;TextBlock x:Name=&quot;_TextBlockName&quot;/&gt; &lt;/StackPanel&gt; &lt;StackPanel Orientation=&quot;Horizontal&quot; Margin=&quot;5&quot;&gt; &lt;TextBlock Text=&quot;å¹´é¾„:&quot;/&gt; &lt;TextBlock x:Name=&quot;_TextBlockAge&quot;/&gt; &lt;/StackPanel&gt; &lt;StackPanel Orientation=&quot;Horizontal&quot; Margin=&quot;5&quot;&gt; &lt;TextBlock Text=&quot;åœ°å€:&quot;/&gt; &lt;TextBlock x:Name=&quot;_TextBlockAddress&quot;/&gt; &lt;/StackPanel&gt; &lt;/StackPanel&gt; &lt;/Grid&gt;&lt;/Window&gt; åç«¯ä»£ç  1234567891011121314151617181920212223242526272829303132333435363738namespace HelloWorld&#123; public class Person &#123; public string Name &#123; get; set; &#125; public int Age &#123; get; set; &#125; public string Address &#123; get; set; &#125; &#125; /// &lt;summary&gt; /// MainWindow.xaml çš„äº¤äº’é€»è¾‘ /// &lt;/summary&gt; public partial class MainWindow : Window &#123; public MainWindow() &#123; InitializeComponent(); datagrid.Items.Add(new Person &#123; Name = &quot;å¼ ä¸‰&quot;, Age = 22, Address = &quot;å¹¿ä¸œçœå»‰æ±Ÿå¸‚è½¦æ¿é•‡å¤§åæ‘&quot; &#125;); datagrid.Items.Add(new Person &#123; Name = &quot;æå››&quot;, Age = 23, Address = &quot;æ±Ÿè¥¿çœæ™¯å¾·é•‡å¸‚å¸‚è¾–åŒº&quot; &#125;); datagrid.Items.Add(new Person &#123; Name = &quot;ç‹äº”&quot;, Age = 24, Address = &quot;ä¸Šæµ·å¸‚è™¹å£åŒº&quot; &#125;); &#125; private void datagrid_Selected(object sender, RoutedEventArgs e) &#123; DataGrid datagrid = sender as DataGrid; if (datagrid == null) return; var person = datagrid.SelectedItem as Person; if (person == null) return; _TextBlockName.Text = person.Name; _TextBlockAge.Text = person.Age + &quot;å²&quot;; _TextBlockAddress.Text = person.Address; &#125; &#125;&#125; åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å°½é‡è¿˜åŸäº†ä¸ListViewæ§ä»¶ä¸€è‡´çš„åŠŸèƒ½ï¼Œ éœ€è¦æ³¨æ„çš„ç»†èŠ‚æ˜¯ï¼šæˆ‘ä»¬å°†DataGridçš„IsReadOnly&#x3D;â€Trueâ€ï¼Œè¿™æ˜¯å› ä¸ºæˆ‘ä»¬ç›´æ¥å°†æ•°æ®å…ƒç´ ä¸€æ¡ä¸€æ¡çš„åŠ å…¥åˆ°DataGridçš„Itemså±æ€§ä¸­ï¼Œè€ŒItemså±æ€§æœ¬èº«æ˜¯ä¸€ä¸ªåªè¯»å±æ€§ï¼Œä¸æ”¯æŒå†™å…¥ã€‚è¿™æ ·çš„è¯ï¼Œå½“é¼ æ ‡åŒå‡»æ—¶ä¼šæŠ¥é”™ã€‚é”™è¯¯æç¤ºä¸ºï¼š å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿè¿™å°±è¦ç”¨åˆ°ItemsControlåŸºç±»ä¸­çš„ItemsSourceæ•°æ®æºå±æ€§ã€‚ æˆ‘ä»¬éœ€è¦é‡‡ç”¨DataGridå¦å¤–ä¸€ç§èµ‹å€¼æ–¹å¼â€”â€”æ•°æ®æºèµ‹å€¼ã€‚å³æŠŠä¸€ä¸ªé›†åˆç»‘å®šåˆ°è¯¥å±æ€§ä¸Šï¼Œè¿™æ ·åœ¨å‰ç«¯å°±å¯ä»¥ç¼–è¾‘æ•°æ®æºï¼Œä»è€Œä¸ä¼šå¼•å‘æŠ¥é”™ã€‚ åªéœ€è¦æ”¹åŠ¨ä¸€ç‚¹ç‚¹ä»£ç ã€‚ 1234567List&lt;Person&gt; list = new List&lt;Person&gt;(); list.Add(new Person &#123; Name = &quot;å¼ ä¸‰&quot;, Age = 22, Address = &quot;å¹¿ä¸œçœå»‰æ±Ÿå¸‚è½¦æ¿é•‡å¤§åæ‘&quot; &#125;);list.Add(new Person &#123; Name = &quot;æå››&quot;, Age = 23, Address = &quot;æ±Ÿè¥¿çœæ™¯å¾·é•‡å¸‚å¸‚è¾–åŒº&quot; &#125;);list.Add(new Person &#123; Name = &quot;ç‹äº”&quot;, Age = 24, Address = &quot;ä¸Šæµ·å¸‚è™¹å£åŒº&quot; &#125;); datagrid.ItemsSource = list; å‰ç«¯ä»£ç ä¹Ÿå¯ä»¥ä¿®æ”¹å¦‚ä¸‹ï¼ŒAutoGenerateColumnså±æ€§è®¾ä¸ºä¸å¯è‡ªåŠ¨åˆ›å»ºåˆ—ã€‚ 1234567891011&lt;DataGrid x:Name=&quot;datagrid&quot; SelectionMode=&quot;Extended&quot; IsReadOnly=&quot;False&quot; AutoGenerateColumns=&quot;False&quot; SelectionChanged=&quot;datagrid_Selected&quot;&gt; &lt;DataGrid.Columns&gt; &lt;DataGridTextColumn Header=&quot;å§“å&quot; Binding=&quot;&#123;Binding Name&#125;&quot; /&gt; &lt;DataGridTextColumn Header=&quot;å¹´é¾„&quot; Binding=&quot;&#123;Binding Age&#125;&quot; /&gt; &lt;DataGridTextColumn Header=&quot;åœ°å€&quot; Binding=&quot;&#123;Binding Address&#125;&quot; /&gt; &lt;/DataGrid.Columns&gt;&lt;/DataGrid&gt; å¦‚æ­¤ï¼Œæˆ‘ä»¬ä¾¿å¯ä»¥åœ¨DataGridä¸­æ–°å¢ä¸€è¡Œï¼Œå¹¶è¾“å…¥æ–°çš„æ•°æ®ã€‚ ComboBoxä¸‹æ‹‰æ¡†æ§ä»¶ComboBoxè¡¨ç¤ºå¸¦æœ‰ä¸‹æ‹‰åˆ—è¡¨çš„æ§ä»¶ï¼Œå®é™…ä¸Šæ‚¨å¯ä»¥æŠŠå®ƒçœ‹æˆä¸¤ä¸ªéƒ¨åˆ†ç»„æˆï¼Œä¸€ä¸ªç±»ä¼¼TextBoxæ–‡æœ¬è¾“å…¥æ¡†ï¼Œæ‰€ä»¥å®ƒæœ‰ä¸€ä¸ªTextæ–‡æœ¬å±æ€§ï¼Œç”¨äºè·å–ComboBoxæ¡†çš„æ–‡æœ¬å€¼ï¼Œå¦ä¸€ä¸ªæ˜¯ç±»ä¼¼ListBoxçš„åˆ—è¡¨æ¡†ï¼Œç”¨äºæ˜¾ç¤ºComboBoxç»‘å®šçš„æ‰€æœ‰æ•°æ®æºã€‚ ComboBoxç»§æ‰¿äºSelectorï¼Œæ‰€ä»¥ï¼Œå®ƒåªèƒ½æ˜¯å•é€‰æ“ä½œã€‚ç”±äºè¿™ä¸ªæ§ä»¶ç”±ä¸¤ä¸ªéƒ¨åˆ†æ„æˆï¼Œæ‰€ä»¥åœ¨ç”¨æ³•ä¸Šï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æœ‰ä¸¤ç§ä¸»è¦ç”¨æ³•â€”â€”ç±»ä¼¼TextBoxç”¨æ³•å’Œç±»ä¼¼ListBoxç”¨æ³•ã€‚ æˆ‘ä»¬åœ¨ä½¿ç”¨è¿™ä¸ªæ§ä»¶ä¹‹å‰ï¼Œå…ˆç†Ÿæ‚‰ä¸€ä¸‹å®ƒçš„å®šä¹‰ ä¸€ã€ComboBoxå®šä¹‰ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051[Localizability(LocalizationCategory.ComboBox)] [StyleTypedProperty(Property = &quot;ItemContainerStyle&quot;, StyleTargetType = typeof(ComboBoxItem))] [TemplatePart(Name = &quot;PART_EditableTextBox&quot;, Type = typeof(TextBox))] [TemplatePart(Name = &quot;PART_Popup&quot;, Type = typeof(Popup))]public class ComboBox : Selector&#123; public static readonly DependencyProperty MaxDropDownHeightProperty; public static readonly DependencyProperty IsDropDownOpenProperty; public static readonly DependencyProperty ShouldPreserveUserEnteredPrefixProperty; public static readonly DependencyProperty IsEditableProperty; public static readonly DependencyProperty TextProperty; public static readonly DependencyProperty IsReadOnlyProperty; public static readonly DependencyProperty SelectionBoxItemProperty; public static readonly DependencyProperty SelectionBoxItemTemplateProperty; public static readonly DependencyProperty SelectionBoxItemStringFormatProperty; public static readonly DependencyProperty StaysOpenOnEditProperty; public ComboBox(); public bool ShouldPreserveUserEnteredPrefix &#123; get; set; &#125; public bool IsEditable &#123; get; set; &#125; public string Text &#123; get; set; &#125; public bool IsReadOnly &#123; get; set; &#125; public object SelectionBoxItem &#123; get; &#125; public double MaxDropDownHeight &#123; get; set; &#125; public string SelectionBoxItemStringFormat &#123; get; &#125; public bool StaysOpenOnEdit &#123; get; set; &#125; public bool IsSelectionBoxHighlighted &#123; get; &#125; public bool IsDropDownOpen &#123; get; set; &#125; public DataTemplate SelectionBoxItemTemplate &#123; get; &#125; protected internal override bool HandlesScrolling &#123; get; &#125; protected internal override bool HasEffectiveKeyboardFocus &#123; get; &#125; public event EventHandler DropDownClosed; public event EventHandler DropDownOpened; public override void OnApplyTemplate(); protected override DependencyObject GetContainerForItemOverride(); protected override bool IsItemItsOwnContainerOverride(object item); protected override AutomationPeer OnCreateAutomationPeer(); protected virtual void OnDropDownClosed(EventArgs e); protected virtual void OnDropDownOpened(EventArgs e); protected override void OnIsKeyboardFocusWithinChanged(DependencyPropertyChangedEventArgs e); protected override void OnIsMouseCapturedChanged(DependencyPropertyChangedEventArgs e); protected override void OnKeyDown(KeyEventArgs e); protected override void OnMouseLeftButtonUp(MouseButtonEventArgs e); protected override void OnPreviewKeyDown(KeyEventArgs e); protected override void OnSelectionChanged(SelectionChangedEventArgs e); protected override void PrepareContainerForItemOverride(DependencyObject element, object item); &#125; äºŒã€å±æ€§æˆå‘˜ å±æ€§åç§° è¯´æ˜ ShouldPreserveUserEnteredPrefix æ˜¯å¦ä¿ç•™ç”¨æˆ·çš„è¾“å…¥ï¼Œæˆ–è€…è¾“å…¥æ›¿æ¢åŒ¹é…é¡¹ã€‚ IsEditable æ˜¯å¦å¯ç”¨æˆ–ç¦ç”¨ç¼–è¾‘æ–‡æœ¬æ¡†ä¸­æ–‡æœ¬ Text è·å–æˆ–è®¾ç½®å½“å‰é€‰å®šé¡¹çš„æ–‡æœ¬ã€‚ IsReadOnly æ–‡æœ¬å†…å®¹æ˜¯å¦åªè¯» SelectionBoxItem è·å–åœ¨é€‰æ‹©æ¡†ä¸­æ˜¾ç¤ºçš„é¡¹ã€‚ MaxDropDownHeight è·å–æˆ–è®¾ç½®ä¸€ä¸ªç»„åˆæ¡†ä¸‹æ‹‰åˆ—è¡¨çš„æœ€å¤§é«˜åº¦ã€‚ SelectionBoxItemStringFormat æŒ‡å®šé€‰æ‹©æ¡†ä¸­æ–‡æœ¬çš„æ˜¾ç¤ºæ ¼å¼ StaysOpenOnEdit åœ¨ç¼–è¾‘è¾“å…¥æ¡†æ–‡æœ¬æ—¶ï¼Œå¸Œæœ›ä¸‹æ‹‰æ¡†ä¿æŒæ‰“å¼€ï¼Œåˆ™ä¸ºtrue IsSelectionBoxHighlighted æ˜¯å¦çªå‡ºæ˜¾ç¤ºSelectionBoxItem IsDropDownOpen æ˜¯å¦æ‰“å¼€ç»„åˆæ¡†ä¸‹æ‹‰åˆ—è¡¨ã€‚ SelectionBoxItemTemplate è·å–é€‰æ‹©æ¡†å†…å®¹çš„é¡¹æ¨¡æ¿ã€‚ æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è¿˜æ˜¯ä¸€ä¸ªå®é™…çš„ä¾‹å­æ¥è¯´æ˜comboboxæ§ä»¶çš„ç”¨æ³•ã€‚ ä¸‰ã€ComboBoxç¤ºä¾‹ å‰ç«¯ä»£ç  1234567891011121314151617181920212223242526272829303132333435363738394041424344&lt;Window x:Class=&quot;HelloWorld.MainWindow&quot; xmlns=&quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot; xmlns:x=&quot;http://schemas.microsoft.com/winfx/2006/xaml&quot; xmlns:d=&quot;http://schemas.microsoft.com/expression/blend/2008&quot; xmlns:mc=&quot;http://schemas.openxmlformats.org/markup-compatibility/2006&quot; xmlns:local=&quot;clr-namespace:HelloWorld&quot; xmlns:forms=&quot;clr-namespace:System.Windows.Forms;assembly=System.Windows.Forms&quot; mc:Ignorable=&quot;d&quot; FontSize=&quot;14&quot; Title=&quot;WPFä¸­æ–‡ç½‘ä¹‹æ§ä»¶è¯¾ç¨‹ - www.wpfsoft.com&quot; Height=&quot;350&quot; Width=&quot;500&quot;&gt; &lt;Grid&gt; &lt;Grid.ColumnDefinitions&gt; &lt;ColumnDefinition/&gt; &lt;ColumnDefinition Width=&quot;200&quot;/&gt; &lt;/Grid.ColumnDefinitions&gt; &lt;StackPanel&gt; &lt;ComboBox x:Name=&quot;combobox1&quot; IsEditable=&quot;True&quot; Height=&quot;30&quot; Margin=&quot;20,10&quot; TextBoxBase.TextChanged=&quot;combobox1_TextChanged&quot;/&gt; &lt;ComboBox x:Name=&quot;combobox2&quot; StaysOpenOnEdit=&quot;True&quot; VerticalAlignment=&quot;Top&quot; SelectionChanged=&quot;combobox2_SelectionChanged&quot; Height=&quot;30&quot; Margin=&quot;20,10&quot; DisplayMemberPath=&quot;Name&quot;&gt; &lt;/ComboBox&gt; &lt;/StackPanel&gt; &lt;StackPanel Grid.Column=&quot;1&quot;&gt; &lt;StackPanel Orientation=&quot;Horizontal&quot; Margin=&quot;5&quot;&gt; &lt;TextBlock Text=&quot;ç”µè¯:&quot;/&gt; &lt;TextBlock x:Name=&quot;_TextBlockTel&quot;/&gt; &lt;/StackPanel&gt; &lt;StackPanel Orientation=&quot;Horizontal&quot; Margin=&quot;5&quot;&gt; &lt;TextBlock Text=&quot;å§“å:&quot;/&gt; &lt;TextBlock x:Name=&quot;_TextBlockName&quot;/&gt; &lt;/StackPanel&gt; &lt;StackPanel Orientation=&quot;Horizontal&quot; Margin=&quot;5&quot;&gt; &lt;TextBlock Text=&quot;å¹´é¾„:&quot;/&gt; &lt;TextBlock x:Name=&quot;_TextBlockAge&quot;/&gt; &lt;/StackPanel&gt; &lt;StackPanel Orientation=&quot;Horizontal&quot; Margin=&quot;5&quot;&gt; &lt;TextBlock Text=&quot;åœ°å€:&quot;/&gt; &lt;TextBlock x:Name=&quot;_TextBlockAddress&quot;/&gt; &lt;/StackPanel&gt; &lt;/StackPanel&gt; &lt;/Grid&gt;&lt;/Window&gt; åç«¯ä»£ç  1234567891011121314151617181920212223242526272829303132333435363738394041424344454647namespace HelloWorld&#123; public class Person &#123; public string Name &#123; get; set; &#125; public int Age &#123; get; set; &#125; public string Address &#123; get; set; &#125; &#125; /// &lt;summary&gt; /// MainWindow.xaml çš„äº¤äº’é€»è¾‘ /// &lt;/summary&gt; public partial class MainWindow : Window &#123; public MainWindow() &#123; InitializeComponent(); List&lt;Person&gt; list = new List&lt;Person&gt;(); list.Add(new Person &#123; Name = &quot;å¼ ä¸‰&quot;, Age = 22, Address = &quot;å¹¿ä¸œçœå»‰æ±Ÿå¸‚è½¦æ¿é•‡å¤§åæ‘&quot; &#125;); list.Add(new Person &#123; Name = &quot;æå››&quot;, Age = 23, Address = &quot;æ±Ÿè¥¿çœæ™¯å¾·é•‡å¸‚å¸‚è¾–åŒº&quot; &#125;); list.Add(new Person &#123; Name = &quot;ç‹äº”&quot;, Age = 24, Address = &quot;ä¸Šæµ·å¸‚è™¹å£åŒº&quot; &#125;); combobox2.ItemsSource = list; &#125; private void combobox1_TextChanged(object sender, TextChangedEventArgs e) &#123; _TextBlockTel.Text = combobox1.Text; &#125; private void combobox2_SelectionChanged(object sender, SelectionChangedEventArgs e) &#123; ComboBox combobox = sender as ComboBox; if (combobox == null) return; var person = combobox.SelectedItem as Person; if (person == null) return; _TextBlockName.Text = person.Name; _TextBlockAge.Text = person.Age + &quot;å²&quot;; _TextBlockAddress.Text = person.Address; &#125; &#125;&#125; æˆ‘ä»¬åœ¨xamlä¸­å®ä¾‹åŒ–äº†ä¸¤ä¸ªComboBoxï¼Œç¬¬ä¸€ä¸ªç›´æ¥å½“æˆäº†TextBoxæ¥ä½¿ç”¨ï¼›ç¬¬äºŒä¸ªåˆ™ç»‘å®šäº†ä¸€ä¸ªæ•°æ®æºï¼Œå¹¶åœ¨Xamlä¸­æŒ‡å®šäº†DisplayMemberPathå±æ€§æ˜¾ç¤ºPersonçš„Nameï¼Œæœ€ååœ¨åç«¯ä»£ç ä¸­ï¼Œä¾ç„¶ä½¿ç”¨SelectedItem å±æ€§è·å–å½“å‰é€‰ä¸­é¡¹ï¼Œè½¬åŒ–æˆPersonï¼Œä»¥è·å–å®é™…çš„é€‰ä¸­æ•°æ®ã€‚ è¿™äº›å°±æ˜¯è¯¥æ§ä»¶çš„åŸºæœ¬ç”¨æ³•ã€‚ TabControlæ§ä»¶TabControlè¡¨ç¤ºåŒ…å«å¤šä¸ªå…±äº«ç›¸åŒçš„ç©ºé—´åœ¨å±å¹•ä¸Šçš„é¡¹çš„æ§ä»¶ã€‚å®ƒä¹Ÿæ˜¯ç»§æ‰¿äºSelectoråŸºç±»ï¼Œæ‰€ä»¥TabControlä¹Ÿåªæ”¯æŒå•é€‰æ“ä½œã€‚å¦å¤–ï¼ŒTabControlçš„å…ƒç´ åªèƒ½æ˜¯TabItemï¼Œè¿™ä¸ªTabItemç»§æ‰¿äºHeaderedContentControlç±»ï¼Œæ‰€ä»¥TabControlçš„å…ƒç´ å®é™…ä¸Šæ˜¯ä¸€ä¸ªå¸¦æ ‡é¢˜çš„ContentControlå†…å®¹æ§ä»¶ã€‚ æˆ‘ä»¬æ›¾ç»åœ¨èŠGroupBoxæ§ä»¶å’ŒExpanderæŠ˜å æ§ä»¶æ—¶éƒ½æ›¾æåˆ°è¿‡è¿™ä¸ªHeaderedContentControlç±»ï¼ŒåŸæ¥å¤§å®¶éƒ½ç”¨äº†è¿™ä¸ªå¸¦æ ‡é¢˜çš„å†…å®¹æ§ä»¶ã€‚æ‰€ä»¥TabControlæ§ä»¶çœ‹èµ·æ¥å°±åƒæ˜¯å¤šä¸ªGroupBoxç»„åˆè€Œæ¥ã€‚ ä¸€ã€TabControlçš„å®šä¹‰ 1234567891011121314151617181920212223242526272829303132public class TabControl : Selector&#123; public static readonly DependencyProperty TabStripPlacementProperty; public static readonly DependencyProperty SelectedContentProperty; public static readonly DependencyProperty SelectedContentTemplateProperty; public static readonly DependencyProperty SelectedContentTemplateSelectorProperty; public static readonly DependencyProperty SelectedContentStringFormatProperty; public static readonly DependencyProperty ContentTemplateProperty; public static readonly DependencyProperty ContentTemplateSelectorProperty; public static readonly DependencyProperty ContentStringFormatProperty; public TabControl(); public DataTemplate ContentTemplate &#123; get; set; &#125; public string SelectedContentStringFormat &#123; get; &#125; public DataTemplateSelector SelectedContentTemplateSelector &#123; get; &#125; public DataTemplate SelectedContentTemplate &#123; get; &#125; public object SelectedContent &#123; get; &#125; public Dock TabStripPlacement &#123; get; set; &#125; public string ContentStringFormat &#123; get; set; &#125; public DataTemplateSelector ContentTemplateSelector &#123; get; set; &#125; public override void OnApplyTemplate(); protected override DependencyObject GetContainerForItemOverride(); protected override bool IsItemItsOwnContainerOverride(object item); protected override AutomationPeer OnCreateAutomationPeer(); protected override void OnInitialized(EventArgs e); protected override void OnItemsChanged(NotifyCollectionChangedEventArgs e); protected override void OnKeyDown(KeyEventArgs e); protected override void OnSelectionChanged(SelectionChangedEventArgs e); &#125; äºŒã€å±æ€§æˆå‘˜ å±æ€§åç§° è¯´æ˜ ContentTemplate è¡¨ç¤ºTabItemå…ƒç´ çš„å†…å®¹æ¨¡æ¿ SelectedContentStringFormat å½“å‰æ‰€é€‰å†…å®¹çš„æ ¼å¼ SelectedContentTemplateSelector è·å–å½“å‰é€‰å®šçš„TabItemé¡¹çš„æ¨¡æ¿é€‰æ‹©å™¨ SelectedContentTemplate å½“å‰é€‰å®šçš„TabItemé¡¹çš„æ¨¡æ¿ SelectedContent å½“å‰é€‰å®šçš„TabItemé¡¹é‡Œé¢çš„å†…å®¹ï¼ˆä¹Ÿæ˜¯ä¸€äº›æ§ä»¶ï¼‰ TabStripPlacement è·å–æˆ–è®¾ç½®é€‰é¡¹å¡æ ‡é¢˜ç›¸å¯¹äºé€‰é¡¹å¡ä¸Šå†…å®¹çš„å¯¹é½æ–¹å¼ã€‚ ContentStringFormat æŒ‡å®šå¦‚ä½•è®¾ç½®å†…å®¹çš„æ ¼å¼ ContentTemplateSelector è·å–æˆ–è®¾ç½®å†…å®¹æ¨¡æ¿é€‰æ‹©å™¨ TabControlçš„SelectedContentå¯èƒ½æ˜¯æˆ‘ä»¬æ¯”è¾ƒå¸¸ç”¨çš„ä¸€ä¸ªå±æ€§ï¼Œäº‹å®ä¸Šï¼ŒTabControlé€šå¸¸è¢«å½“æˆå¸ƒå±€æ§ä»¶æ¥ä½¿ç”¨ã€‚ ä¸‰ã€TabControlç¤ºä¾‹ å‰ç«¯ä»£ç  1234567891011121314151617181920212223242526272829303132333435363738394041424344&lt;Window x:Class=&quot;HelloWorld.MainWindow&quot; xmlns=&quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot; xmlns:x=&quot;http://schemas.microsoft.com/winfx/2006/xaml&quot; xmlns:d=&quot;http://schemas.microsoft.com/expression/blend/2008&quot; xmlns:mc=&quot;http://schemas.openxmlformats.org/markup-compatibility/2006&quot; xmlns:local=&quot;clr-namespace:HelloWorld&quot; xmlns:forms=&quot;clr-namespace:System.Windows.Forms;assembly=System.Windows.Forms&quot; mc:Ignorable=&quot;d&quot; FontSize=&quot;14&quot; Title=&quot;WPFä¸­æ–‡ç½‘ä¹‹æ§ä»¶è¯¾ç¨‹ - www.wpfsoft.com&quot; Height=&quot;350&quot; Width=&quot;500&quot;&gt; &lt;Grid&gt; &lt;Grid.RowDefinitions&gt; &lt;RowDefinition/&gt; &lt;RowDefinition Height=&quot;50&quot;/&gt; &lt;/Grid.RowDefinitions&gt; &lt;TabControl x:Name=&quot;_tabControl&quot; Grid.Row=&quot;0&quot; SelectionChanged=&quot;_tabControl_SelectionChanged&quot;&gt; &lt;TabItem Header=&quot;é¦–é¡µ&quot;&gt; &lt;Border Background=&quot;LightBlue&quot;&gt; &lt;TextBlock Text=&quot;é¦–é¡µçš„ç•Œé¢&quot; FontSize=&quot;24&quot; HorizontalAlignment=&quot;Center&quot; VerticalAlignment=&quot;Center&quot;/&gt; &lt;/Border&gt; &lt;/TabItem&gt; &lt;TabItem Header=&quot;WPFç›®å½•&quot;&gt; &lt;Border Background=&quot;LightCoral&quot;&gt; &lt;TextBlock Text=&quot;WPFç›®å½•çš„ç•Œé¢&quot; FontSize=&quot;24&quot; HorizontalAlignment=&quot;Center&quot; VerticalAlignment=&quot;Center&quot;/&gt; &lt;/Border&gt; &lt;/TabItem&gt; &lt;TabItem Header=&quot;å®˜æ–¹æ–‡æ¡£&quot;&gt; &lt;Border Background=&quot;LightCyan&quot;&gt; &lt;TextBlock Text=&quot;å®˜æ–¹æ–‡æ¡£çš„ç•Œé¢&quot; FontSize=&quot;24&quot; HorizontalAlignment=&quot;Center&quot; VerticalAlignment=&quot;Center&quot;/&gt; &lt;/Border&gt; &lt;/TabItem&gt; &lt;TabItem Header=&quot;ä»˜è´¹è¯¾ç¨‹&quot;&gt; &lt;Border Background=&quot;LightGoldenrodYellow&quot;&gt; &lt;TextBlock Text=&quot;ä»˜è´¹è¯¾ç¨‹çš„ç•Œé¢&quot; FontSize=&quot;24&quot; HorizontalAlignment=&quot;Center&quot; VerticalAlignment=&quot;Center&quot;/&gt; &lt;/Border&gt; &lt;/TabItem&gt; &lt;TabItem Header=&quot;ç»Ÿè®¡&quot;&gt; &lt;Border Background=&quot;LightGreen&quot;&gt; &lt;TextBlock Text=&quot;ç»Ÿè®¡çš„ç•Œé¢&quot; FontSize=&quot;24&quot; HorizontalAlignment=&quot;Center&quot; VerticalAlignment=&quot;Center&quot;/&gt; &lt;/Border&gt; &lt;/TabItem&gt; &lt;/TabControl&gt; &lt;TextBlock x:Name=&quot;_textBlock&quot; TextWrapping=&quot;Wrap&quot; Grid.Row=&quot;1&quot;/&gt; &lt;/Grid&gt;&lt;/Window&gt; åç«¯ä»£ç  123456789101112131415public partial class MainWindow : Window&#123; public MainWindow() &#123; InitializeComponent(); &#125; private void _tabControl_SelectionChanged(object sender, SelectionChangedEventArgs e) &#123; var tab = sender as TabControl; var item = tab.SelectedItem as TabItem; var content = tab.SelectedContent; _textBlock.Text = &quot;æ ‡é¢˜:&quot; + item.Header.ToString() + &quot; å†…å®¹:&quot; + content; &#125;&#125; æˆ‘ä»¬è®¢é˜…äº†TabControlæ§ä»¶çš„SelectionChangedäº‹ä»¶ï¼Œå¹¶åœ¨å›è°ƒå‡½æ•°ä¸­è·å–äº†å½“å‰é€‰ä¸­çš„TabItemå¯¹è±¡ä»¥åŠå®ƒé‡Œé¢çš„å†…å®¹ã€‚ TreeViewæ ‘æ§ä»¶TreeViewå…¶å®æ˜¯ä¸€ä¸ªæ¯”è¾ƒå¤æ‚çš„æ§ä»¶ï¼Œåƒæ“ä½œç³»ç»Ÿçš„èµ„æºç®¡ç†å™¨å°±æ˜¯ä¸€ä¸ªTreeViewã€‚æ‰€ä»¥å®ƒå¸¸ç”¨äºæ˜¾ç¤ºæ–‡ä»¶å¤¹ã€ç›®å½•ç­‰å…·æœ‰å±‚çº§ç»“æ„çš„æ•°æ®ã€‚TreeViewç”±èŠ‚ç‚¹å’Œåˆ†æ”¯æ„æˆï¼Œæ¯ä¸ªèŠ‚ç‚¹å¯ä»¥åŒ…å«é›¶ä¸ªæˆ–å¤šä¸ªå­èŠ‚ç‚¹ï¼Œåˆ†æ”¯è¡¨ç¤ºçˆ¶å­å…³ç³»ã€‚åœ¨TreeViewä¸­ï¼Œæ¯ä¸ªèŠ‚ç‚¹è¡¨ç¤ºä¸ºTreeViewItemå¯¹è±¡ï¼Œå¯ä»¥é€šè¿‡TreeViewçš„Itemså±æ€§æ¥è·å–æˆ–è®¾ç½®TreeViewItemå¯¹è±¡é›†åˆã€‚ åœ¨ä½¿ç”¨TreeViewåŠ è½½èŠ‚ç‚¹æ—¶ï¼Œéœ€è¦æŒæ¡ä¸€äº›é€’å½’æ€æƒ³ã€‚ ä¸€ã€TreeViewItemå…ƒç´ ç®€ä»‹ TreeViewItemä½œä¸ºTreeViewå”¯ä¸€çš„å…ƒç´ ç±»å‹ï¼Œå®ƒç»§æ‰¿äºHeaderedItemsControlï¼ˆå¸¦æ ‡é¢˜ï¼‰ï¼Œè€ŒHeaderedItemsControlåˆç»§æ‰¿äºItemsControlï¼Œç”±æ­¤å¯è§ï¼ŒTreeViewItemå…ƒç´ æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªé›†åˆæ§ä»¶ã€‚ TreeViewItemæœ‰ä¸¤ä¸ªå¸¸ç”¨çš„å±æ€§ï¼Œåˆ†åˆ«æ˜¯IsSelectedå±æ€§å’ŒIsExpandedå±æ€§ï¼ŒIsSelectedè¡¨ç¤ºå½“å‰å…ƒç´ æ˜¯å¦é€‰ä¸­ï¼ŒIsExpandedè¡¨ç¤ºå½“å‰å…ƒç´ æ˜¯å¦å±•å¼€ã€‚ äºŒã€TreeViewç±»çš„å®šä¹‰ 123456789101112131415161718192021222324252627public class TreeView : ItemsControl&#123; public static readonly DependencyProperty SelectedItemProperty; public static readonly DependencyProperty SelectedValueProperty; public static readonly DependencyProperty SelectedValuePathProperty; public static readonly RoutedEvent SelectedItemChangedEvent; public TreeView(); public string SelectedValuePath &#123; get; set; &#125; public object SelectedValue &#123; get; &#125; public object SelectedItem &#123; get; &#125; protected internal override bool HandlesScrolling &#123; get; &#125; public event RoutedPropertyChangedEventHandler&lt;object&gt; SelectedItemChanged; protected virtual bool ExpandSubtree(TreeViewItem container); protected override DependencyObject GetContainerForItemOverride(); protected override bool IsItemItsOwnContainerOverride(object item); protected override AutomationPeer OnCreateAutomationPeer(); protected override void OnGotFocus(RoutedEventArgs e); protected override void OnIsKeyboardFocusWithinChanged(DependencyPropertyChangedEventArgs e); protected override void OnItemsChanged(NotifyCollectionChangedEventArgs e); protected override void OnKeyDown(KeyEventArgs e); protected virtual void OnSelectedItemChanged(RoutedPropertyChangedEventArgs&lt;object&gt; e); &#125; SelectedValuePathå±æ€§ï¼šè·å–æˆ–è®¾ç½®SelectedItemæˆ–SelectedValueçš„è·¯å¾„ã€‚ SelectedValueå±æ€§ï¼šè·å–SelectedItemçš„å€¼ SelectedItemå±æ€§ï¼šè·å–å½“å‰é€‰ä¸­çš„é¡¹ ä¸‰ã€TreeViewç¤ºä¾‹ æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä»¥ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼Œæ¨¡ä»¿æ“ä½œç³»ç»Ÿçš„èµ„æºç®¡ç†å™¨çš„ç›®å½•åŠ è½½ã€‚ å‰ç«¯ä»£ç  12345678910111213141516171819202122&lt;Window x:Class=&quot;HelloWorld.MainWindow&quot; xmlns=&quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot; xmlns:x=&quot;http://schemas.microsoft.com/winfx/2006/xaml&quot; xmlns:d=&quot;http://schemas.microsoft.com/expression/blend/2008&quot; xmlns:mc=&quot;http://schemas.openxmlformats.org/markup-compatibility/2006&quot; xmlns:local=&quot;clr-namespace:HelloWorld&quot; xmlns:forms=&quot;clr-namespace:System.Windows.Forms;assembly=System.Windows.Forms&quot; mc:Ignorable=&quot;d&quot; FontSize=&quot;14&quot; Title=&quot;WPFä¸­æ–‡ç½‘ä¹‹æ§ä»¶è¯¾ç¨‹ - www.wpfsoft.com&quot; Height=&quot;350&quot; Width=&quot;500&quot;&gt; &lt;Grid&gt; &lt;Grid.RowDefinitions&gt; &lt;RowDefinition Height=&quot;auto&quot;/&gt; &lt;RowDefinition/&gt; &lt;/Grid.RowDefinitions&gt; &lt;StackPanel Orientation=&quot;Horizontal&quot;&gt; &lt;TextBlock Text=&quot;æ ¹ç›®å½•&quot; VerticalAlignment=&quot;Center&quot; Margin=&quot;3&quot;/&gt; &lt;TextBox x:Name=&quot;_TextBox&quot; Width=&quot;380&quot; Height=&quot;25&quot; Margin=&quot;3&quot;/&gt; &lt;Button Content=&quot;é€‰æ‹©...&quot; MinWidth=&quot;45&quot; Margin=&quot;3&quot; Click=&quot;Button_Click&quot;/&gt; &lt;/StackPanel&gt; &lt;TreeView x:Name=&quot;_TreeView&quot; Grid.Row=&quot;1&quot; SelectedItemChanged=&quot;_TreeView_SelectedItemChanged&quot;/&gt; &lt;/Grid&gt;&lt;/Window&gt; åç«¯ä»£ç  123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475public partial class MainWindow : Window&#123; public MainWindow() &#123; InitializeComponent(); &#125; private void Button_Click(object sender, RoutedEventArgs e) &#123; System.Windows.Forms.FolderBrowserDialog dialog = new System.Windows.Forms.FolderBrowserDialog(); if (dialog.ShowDialog() == System.Windows.Forms.DialogResult.OK) &#123; _TextBox.Text = dialog.SelectedPath; LoadTreeView(dialog.SelectedPath); &#125; &#125; private void LoadTreeView(string rootPath) &#123; // è®¾ç½®æ ¹èŠ‚ç‚¹ TreeViewItem rootNode = new TreeViewItem(); rootNode.Header = &quot;æ ¹ç›®å½•&quot;; // åŠ è½½å­æ–‡ä»¶å¤¹å’Œæ–‡ä»¶ LoadSubDirectory(rootNode, rootPath); // å°†æ ¹èŠ‚ç‚¹æ·»åŠ åˆ°TreeViewä¸­ _TreeView.Items.Add(rootNode); &#125; private void LoadSubDirectory(TreeViewItem node, string path) &#123; try &#123; DirectoryInfo dirInfo = new DirectoryInfo(path); // åŠ è½½å­æ–‡ä»¶å¤¹ foreach (DirectoryInfo subDirInfo in dirInfo.GetDirectories()) &#123; TreeViewItem subNode = new TreeViewItem(); subNode.Header = subDirInfo.Name; LoadSubDirectory(subNode, subDirInfo.FullName); node.Items.Add(subNode); &#125; // åŠ è½½æ–‡ä»¶ foreach (FileInfo fileInfo in dirInfo.GetFiles()) &#123; TreeViewItem subNode = new TreeViewItem(); subNode.Header = fileInfo.Name; node.Items.Add(subNode); &#125; &#125; catch (Exception ex) &#123; MessageBox.Show(ex.Message); &#125; &#125; private void _TreeView_SelectedItemChanged(object sender, RoutedPropertyChangedEventArgs&lt;object&gt; e) &#123; // è·å–é€‰ä¸­çš„èŠ‚ç‚¹ TreeViewItem selectedNode = _TreeView.SelectedItem as TreeViewItem; // æ˜¾ç¤ºé€‰ä¸­èŠ‚ç‚¹çš„Header if (selectedNode != null) &#123; MessageBox.Show(selectedNode.Header.ToString()); &#125; &#125;&#125; é¦–å…ˆï¼Œé€šè¿‡é¼ æ ‡æ“ä½œï¼Œé€‰æ‹©TreeViewçš„æ ¹ç›®å½•ï¼Œç„¶åï¼Œåˆ©ç”¨DirectoryInfoè·å–å½“å‰æ‰€æœ‰ç›®å½•ï¼Œå†åˆ©ç”¨é€’å½’è°ƒç”¨ï¼Œä¸€å±‚ä¸€å±‚çš„è·å–æ‰€æœ‰å­ç›®å½•ï¼Œæœ€åä»¥TreeViewItemå…ƒç´ ä¸€å±‚å±‚åŠ è½½åˆ°æ§ä»¶ä¸­ã€‚ Menuèœå•Menuæ§ä»¶ç»§æ‰¿äºMenuBaseï¼Œè€ŒMenuBaseç»§æ‰¿äºItemsControlã€‚æ‰€ä»¥å­¦ä¹ Menuä¹‹å‰ï¼Œè¦å…ˆäº†è§£ä¸€ä¸‹MenuBaseåŸºç±»ã€‚å®ƒæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œæ‹¥æœ‰ä¸€ä¸ªItemContainerTemplateSelectoræ¨¡æ¿é€‰æ‹©å™¨ï¼Œå¹¶é‡å†™äº†ä¸€äº›å…³äºé”®ç›˜å’Œé¼ æ ‡çš„æ–¹æ³•ã€‚ Menuçš„å­é¡¹å¿…é¡»ä¸ºMenuItemã€‚è¿™ä¸ªMenuItemå’Œå‰é¢çš„TreeViewItemç±»ä¼¼ï¼Œæ‹¥æœ‰å…±åŒçš„HeaderedItemsControlçˆ¶ç±»ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒMenuItemæœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªé›†åˆæ§ä»¶ï¼Œè‹¥è¦ä»¥ä»£ç å½¢å¼åŠ è½½Menuçš„å†…å®¹ï¼Œä¹Ÿå¿…é¡»è¦æŒæ¡é€’å½’çš„åŠ è½½æ€è·¯ã€‚ åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†ä»¥ä¸¤ç§æ–¹å¼åŠ è½½Menuçš„æ•°æ®ã€‚ä½†æ˜¯åœ¨å­¦ä¹ ä¹‹å‰ï¼Œå…ˆç†Ÿæ‚‰ä¸€ä¸‹MenuItemå…ƒç´ ï¼Œå› ä¸ºï¼Œå®é™…ä¸Šï¼Œæˆ‘ä»¬ä¸»è¦æ˜¯æ“ä½œMenuItemå…ƒç´ ã€‚ ä¸€ã€MenuItemå…ƒç´  123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081public class MenuItem : HeaderedItemsControl, ICommandSource&#123; public static readonly RoutedEvent ClickEvent; public static readonly DependencyProperty UsesItemContainerTemplateProperty; public static readonly DependencyProperty ItemContainerTemplateSelectorProperty; public static readonly DependencyProperty IsSuspendingPopupAnimationProperty; public static readonly DependencyProperty IconProperty; public static readonly DependencyProperty InputGestureTextProperty; public static readonly DependencyProperty StaysOpenOnClickProperty; public static readonly DependencyProperty IsCheckedProperty; public static readonly DependencyProperty IsHighlightedProperty; public static readonly DependencyProperty IsCheckableProperty; public static readonly DependencyProperty IsPressedProperty; public static readonly DependencyProperty IsSubmenuOpenProperty; public static readonly DependencyProperty CommandTargetProperty; public static readonly DependencyProperty CommandParameterProperty; public static readonly DependencyProperty CommandProperty; public static readonly RoutedEvent SubmenuClosedEvent; public static readonly RoutedEvent SubmenuOpenedEvent; public static readonly RoutedEvent UncheckedEvent; public static readonly RoutedEvent CheckedEvent; public static readonly DependencyProperty RoleProperty; public MenuItem(); public static ResourceKey SubmenuHeaderTemplateKey &#123; get; &#125; public static ResourceKey SubmenuItemTemplateKey &#123; get; &#125; public static ResourceKey SeparatorStyleKey &#123; get; &#125; public static ResourceKey TopLevelItemTemplateKey &#123; get; &#125; public static ResourceKey TopLevelHeaderTemplateKey &#123; get; &#125; public bool IsCheckable &#123; get; set; &#125; public object CommandParameter &#123; get; set; &#125; public IInputElement CommandTarget &#123; get; set; &#125; public bool IsSubmenuOpen &#123; get; set; &#125; public MenuItemRole Role &#123; get; &#125; public bool IsPressed &#123; get; protected set; &#125; public bool IsHighlighted &#123; get; protected set; &#125; public bool StaysOpenOnClick &#123; get; set; &#125; public string InputGestureText &#123; get; set; &#125; public object Icon &#123; get; set; &#125; public bool IsSuspendingPopupAnimation &#123; get; &#125; public ItemContainerTemplateSelector ItemContainerTemplateSelector &#123; get; set; &#125; public bool UsesItemContainerTemplate &#123; get; set; &#125; public bool IsChecked &#123; get; set; &#125; public ICommand Command &#123; get; set; &#125; protected override bool IsEnabledCore &#123; get; &#125; protected internal override bool HandlesScrolling &#123; get; &#125; public event RoutedEventHandler Unchecked; public event RoutedEventHandler Click; public event RoutedEventHandler Checked; public event RoutedEventHandler SubmenuClosed; public event RoutedEventHandler SubmenuOpened; public override void OnApplyTemplate(); protected override DependencyObject GetContainerForItemOverride(); protected override bool IsItemItsOwnContainerOverride(object item); protected override void OnAccessKey(AccessKeyEventArgs e); protected virtual void OnChecked(RoutedEventArgs e); protected virtual void OnClick(); protected override AutomationPeer OnCreateAutomationPeer(); protected override void OnGotKeyboardFocus(KeyboardFocusChangedEventArgs e); protected override void OnInitialized(EventArgs e); protected override void OnIsKeyboardFocusWithinChanged(DependencyPropertyChangedEventArgs e); protected override void OnItemsChanged(NotifyCollectionChangedEventArgs e); protected override void OnKeyDown(KeyEventArgs e); protected override void OnMouseEnter(MouseEventArgs e); protected override void OnMouseLeave(MouseEventArgs e); protected override void OnMouseLeftButtonDown(MouseButtonEventArgs e); protected override void OnMouseLeftButtonUp(MouseButtonEventArgs e); protected override void OnMouseMove(MouseEventArgs e); protected override void OnMouseRightButtonDown(MouseButtonEventArgs e); protected override void OnMouseRightButtonUp(MouseButtonEventArgs e); protected virtual void OnSubmenuClosed(RoutedEventArgs e); protected virtual void OnSubmenuOpened(RoutedEventArgs e); protected virtual void OnUnchecked(RoutedEventArgs e); protected override void PrepareContainerForItemOverride(DependencyObject element, object item); protected override bool ShouldApplyItemContainerStyle(DependencyObject container, object item); protected internal override void OnVisualParentChanged(DependencyObject oldParent); &#125; MenuItemä»é¼ æ ‡çš„äº¤äº’ä¸Šï¼Œæä¾›äº†ä¸¤ç§æ–¹å¼ã€‚ç¬¬ä¸€ç§æ˜¯æä¾›äº†Clickäº‹ä»¶ï¼Œå¼€å‘è€…å¯ä»¥è®¢é˜…è¯¥äº‹ä»¶ä»¥ç¼–å†™ç›¸åº”çš„ä¸šåŠ¡é€»è¾‘ã€‚ç¬¬äºŒç§æ˜¯æä¾›äº†ICommandæ¥å£å±æ€§å’ŒCommandParameterå‘½ä»¤å‚æ•°ï¼Œä»¥WPFå‘½ä»¤çš„å½¢å¼å¼€å‘ä¸šåŠ¡é€»è¾‘ã€‚ ä¸‹é¢ï¼Œæˆ‘ä»¬ä»¥ä¸€ç§äº¤äº’æ–¹å¼ä¸ºä¾‹ã€‚ äºŒã€Menuç¤ºä¾‹ å‰ç«¯ä»£ç  1234567891011121314151617181920212223242526272829303132333435&lt;Window x:Class=&quot;HelloWorld.MainWindow&quot; xmlns=&quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot; xmlns:x=&quot;http://schemas.microsoft.com/winfx/2006/xaml&quot; xmlns:d=&quot;http://schemas.microsoft.com/expression/blend/2008&quot; xmlns:mc=&quot;http://schemas.openxmlformats.org/markup-compatibility/2006&quot; xmlns:local=&quot;clr-namespace:HelloWorld&quot; xmlns:forms=&quot;clr-namespace:System.Windows.Forms;assembly=System.Windows.Forms&quot; mc:Ignorable=&quot;d&quot; FontSize=&quot;14&quot; Title=&quot;WPFä¸­æ–‡ç½‘ä¹‹æ§ä»¶è¯¾ç¨‹ - www.wpfsoft.com&quot; Height=&quot;350&quot; Width=&quot;500&quot;&gt; &lt;Grid&gt; &lt;Grid.RowDefinitions&gt; &lt;RowDefinition Height=&quot;auto&quot;/&gt; &lt;RowDefinition/&gt; &lt;/Grid.RowDefinitions&gt; &lt;Menu x:Name=&quot;_Menu&quot;&gt; &lt;MenuItem Header=&quot;æ–‡ä»¶&quot;&gt; &lt;MenuItem Header=&quot;æ–°å»º&quot; Click=&quot;MenuItem_Click&quot;/&gt; &lt;MenuItem Header=&quot;æ‰“å¼€&quot; Click=&quot;MenuItem_Click&quot;&gt; &lt;MenuItem.Icon&gt; &lt;Image Source=&quot;/Images/logo.png&quot;/&gt; &lt;/MenuItem.Icon&gt; &lt;/MenuItem&gt; &lt;/MenuItem&gt; &lt;MenuItem Header=&quot;ç¼–è¾‘&quot;/&gt; &lt;MenuItem Header=&quot;è§†å›¾&quot;/&gt; &lt;MenuItem Header=&quot;é¡¹ç›®&quot;/&gt; &lt;MenuItem Header=&quot;è°ƒè¯•&quot;/&gt; &lt;MenuItem Header=&quot;æµ‹è¯•&quot;/&gt; &lt;MenuItem Header=&quot;åˆ†æ&quot;/&gt; &lt;MenuItem Header=&quot;å·¥å…·&quot;/&gt; &lt;MenuItem Header=&quot;å¸®åŠ©&quot;/&gt; &lt;/Menu&gt; &lt;TextBlock x:Name=&quot;_TextBlock&quot; Grid.Row=&quot;1&quot; HorizontalAlignment=&quot;Center&quot; VerticalAlignment=&quot;Center&quot;&gt;&lt;/TextBlock&gt; &lt;/Grid&gt;&lt;/Window&gt; åç«¯ä»£ç  12345678910111213public partial class MainWindow : Window&#123; public MainWindow() &#123; InitializeComponent(); &#125; private void MenuItem_Click(object sender, RoutedEventArgs e) &#123; var item = sender as MenuItem; _TextBlock.Text = $&quot;ä½ å•å‡»äº† &#123;item.Header&#125;&quot;; &#125;&#125; ä¸Šé¢æ¼”ç¤ºäº†Menuæœ€åŸºæœ¬çš„ç”¨æ³•ï¼Œå¦‚æœå¸Œæœ›é‡‡ç”¨æ•°æ®ç»‘å®šçš„æ–¹å¼åŠ è½½èœå•ï¼Œåˆ™å¯ä»¥å‚è€ƒä¸‹é¢çš„ä½œæ³•ã€‚ ä¸‰ã€Menuæ•°æ®ç»‘å®š æˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªå®ä½“ç±»ï¼Œæ¥ä»£è¡¨Menuçš„æ¯ä¸€ä¸ªå­é¡¹ã€‚ 123456789/// &lt;summary&gt;/// ä¸»èœå•çš„å®ä½“/// &lt;/summary&gt;public class MenuModel&#123; public string Name &#123; get; set; &#125; public List&lt;MenuModel&gt; Children &#123; get; set; &#125; = new List&lt;MenuModel&gt;(); public string View &#123; get; set; &#125;&#125; åœ¨å‰ç«¯ä»£ç ä¸­ï¼Œéœ€è¦è®¾ç½®Menuçš„ItemTemplateå…ƒç´ æ¨¡æ¿ã€‚ 1234567891011121314151617181920212223&lt;Window x:Class=&quot;HelloWorld.MainWindow&quot; xmlns=&quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot; xmlns:x=&quot;http://schemas.microsoft.com/winfx/2006/xaml&quot; xmlns:d=&quot;http://schemas.microsoft.com/expression/blend/2008&quot; xmlns:mc=&quot;http://schemas.openxmlformats.org/markup-compatibility/2006&quot; xmlns:local=&quot;clr-namespace:HelloWorld&quot; xmlns:forms=&quot;clr-namespace:System.Windows.Forms;assembly=System.Windows.Forms&quot; mc:Ignorable=&quot;d&quot; FontSize=&quot;14&quot; Title=&quot;WPFä¸­æ–‡ç½‘ä¹‹æ§ä»¶è¯¾ç¨‹ - www.wpfsoft.com&quot; Height=&quot;350&quot; Width=&quot;500&quot;&gt; &lt;Grid&gt; &lt;Grid.RowDefinitions&gt; &lt;RowDefinition Height=&quot;auto&quot;/&gt; &lt;RowDefinition/&gt; &lt;/Grid.RowDefinitions&gt; &lt;Menu x:Name=&quot;_Menu&quot;&gt; &lt;Menu.ItemTemplate&gt; &lt;HierarchicalDataTemplate ItemsSource=&quot;&#123;Binding Children&#125;&quot;&gt; &lt;TextBlock Text=&quot;&#123;Binding Name&#125;&quot;/&gt; &lt;/HierarchicalDataTemplate&gt; &lt;/Menu.ItemTemplate&gt; &lt;/Menu&gt; &lt;/Grid&gt;&lt;/Window&gt; å› ä¸ºMenuModelå®ä½“ä¸­æœ‰Childrené›†åˆï¼Œæ‰€ä»¥åœ¨å‰ç«¯å°†Childrenä½œä¸ºHierarchicalDataTemplateçš„ItemsSourceã€‚å¹¶å°†Nameæ˜¾ç¤ºå‡ºæ¥ã€‚ æœ€åï¼Œå®ä¾‹åŒ–ä¸€äº›å­é¡¹æ•°æ®ï¼Œå½¢æˆä¸€ä¸ªæ•°æ®æºï¼Œå°†è¿™ä¸ªæ•°æ®æºç»‘å®šåˆ°Menuçš„ItemsSourceå³å¯ æ¥çœ‹çœ‹åç«¯ä»£ç  12345678910111213141516171819202122232425public partial class MainWindow : Window&#123; public List&lt;MenuModel&gt; Menus &#123; get; set; &#125; = new List&lt;MenuModel&gt;(); public MainWindow() &#123; InitializeComponent(); for (int i = 0; i &lt; 5; i++) &#123; MenuModel parent = new MenuModel(); parent.Name = $&quot;ä¸€çº§èœå• &quot;; for (int j = 0; j &lt; 5; j++) &#123; MenuModel child = new MenuModel(); child.Name = $&quot;äºŒçº§èœå• &quot;; parent.Children.Add(child); &#125; Menus.Add(parent); &#125; _Menu.ItemsSource = Menus; &#125; &#125; ContextMenuä¸Šä¸‹æ–‡èœå•ContextMenuä¸Šä¸‹æ–‡èœå•å¿…é¡»è¦ä¾é™„äºä¸€ä¸ªâ€œå®¿ä¸»æ§ä»¶â€ã€‚ç”±äºFrameworkElementåŸºç±»æœ‰ä¸€ä¸ªå«ContextMenuçš„å±æ€§ï¼Œä»£è¡¨äº†é¼ æ ‡å³é”®æ—¶å¼¹å‡ºä¸€ä¸ªèœå•ï¼Œæ‰€ä»¥å¤§å¤šæ•°æ§ä»¶éƒ½å¯ä»¥è®¾ç½®â€œä¸Šä¸‹æ–‡èœå•â€ã€‚ ContextMenuç»§æ‰¿äºMenuBaseï¼Œè€ŒMenuBaseç»§æ‰¿äºItemsControlã€‚æ‰€ä»¥ï¼ŒContextMenuæœ¬è´¨ä¸Šä¹Ÿæ˜¯ä¸€ä¸ªé›†åˆæ§ä»¶ã€‚è€Œå®ƒçš„å…ƒç´ åˆ™æ˜¯MenuItemã€‚åœ¨ç”¨æ³•ä¸Šï¼Œä¸Menuæ§ä»¶å·®ä¸å¤šã€‚ ä¸€ã€ContextMenuçš„å®šä¹‰ 12345678910111213141516171819202122232425262728293031323334353637383940public class ContextMenu : MenuBase&#123; public static readonly DependencyProperty HorizontalOffsetProperty; public static readonly RoutedEvent OpenedEvent; public static readonly DependencyProperty StaysOpenProperty; public static readonly DependencyProperty CustomPopupPlacementCallbackProperty; public static readonly DependencyProperty HasDropShadowProperty; public static readonly RoutedEvent ClosedEvent; public static readonly DependencyProperty PlacementRectangleProperty; public static readonly DependencyProperty PlacementTargetProperty; public static readonly DependencyProperty IsOpenProperty; public static readonly DependencyProperty VerticalOffsetProperty; public static readonly DependencyProperty PlacementProperty; public ContextMenu(); public double HorizontalOffset &#123; get; set; &#125; public bool StaysOpen &#123; get; set; &#125; public CustomPopupPlacementCallback CustomPopupPlacementCallback &#123; get; set; &#125; public bool HasDropShadow &#123; get; set; &#125; public PlacementMode Placement &#123; get; set; &#125; public Rect PlacementRectangle &#123; get; set; &#125; public UIElement PlacementTarget &#123; get; set; &#125; public bool IsOpen &#123; get; set; &#125; public double VerticalOffset &#123; get; set; &#125; protected internal override bool HandlesScrolling &#123; get; &#125; public event RoutedEventHandler Closed; public event RoutedEventHandler Opened; protected virtual void OnClosed(RoutedEventArgs e); protected override AutomationPeer OnCreateAutomationPeer(); protected override void OnIsKeyboardFocusWithinChanged(DependencyPropertyChangedEventArgs e); protected override void OnKeyDown(KeyEventArgs e); protected override void OnKeyUp(KeyEventArgs e); protected virtual void OnOpened(RoutedEventArgs e); protected override void PrepareContainerForItemOverride(DependencyObject element, object item); protected internal override void OnVisualParentChanged(DependencyObject oldParent); &#125; äºŒã€å±æ€§æˆå‘˜ å±æ€§åç§° è¯´æ˜ HorizontalOffset è·å–æˆ–è®¾ç½®ç›®æ ‡åŸç‚¹å’Œå¼¹å‡ºé¡¹å¯¹é½ä¹‹é—´çš„æ°´å¹³è·ç¦»ç‚¹ã€‚ StaysOpen æ˜¯å¦ä¿æŒæ‰“å¼€çŠ¶æ€ CustomPopupPlacementCallback è·å–æˆ–è®¾ç½®ContextMenuæŒ‡ç¤ºåœ¨å±å¹•ä½ç½®çš„å›è°ƒ HasDropShadow æ˜¯å¦æœ‰æŠ•å½±å‡ºç°çš„ä¸Šä¸‹æ–‡èœå•ã€‚ Placement è·å–æˆ–è®¾ç½®ContextMenuæ˜¾ç¤ºçš„ç›¸å¯¹ä½ç½® PlacementRectangle è·å–æˆ–è®¾ç½®ç›¸å¯¹äºå…¶ä¸Šä¸‹æ–‡èœå•ä½äºåœ¨æ‰“å¼€æ—¶çš„åŒºåŸŸã€‚ PlacementTarget è·å–æˆ–è®¾ç½®ContextMenuæ‰“å¼€æ—¶çš„ç›¸å¯¹æ§ä»¶ IsOpen æ˜¯å¦æ‰“å¼€ VerticalOffset è·å–æˆ–è®¾ç½®ç›®æ ‡åŸç‚¹å’Œå¼¹å‡ºé¡¹å¯¹é½ä¹‹é—´çš„å‚ç›´è·ç¦»ç‚¹ã€‚ ä¸‰ã€ContextMenuç¤ºä¾‹ 123456789101112&lt;Grid&gt; &lt;Border Background=&quot;LightBlue&quot; Width=&quot;200&quot; Height=&quot;100&quot; CornerRadius=&quot;15&quot;&gt; &lt;Border.ContextMenu&gt; &lt;ContextMenu&gt; &lt;MenuItem Header=&quot;å¤åˆ¶&quot;/&gt; &lt;MenuItem Header=&quot;ç²˜è´´&quot;/&gt; &lt;MenuItem Header=&quot;åˆ é™¤&quot;/&gt; &lt;MenuItem Header=&quot;å…³äº&quot;/&gt; &lt;/ContextMenu&gt; &lt;/Border.ContextMenu&gt; &lt;/Border&gt; &lt;/Grid&gt; StatusBarçŠ¶æ€æ StatusBaræ˜¯ä¸€ä¸ªâ€œåŒ…å®¹æ€§â€æå¼ºçš„æ§ä»¶ï¼Œé€šå¸¸çš„ä½œç”¨æ˜¯ä½œä¸ºç¨‹åºçš„çŠ¶æ€å†…å®¹æ˜¾ç¤ºã€‚å®ƒåŒæ ·ç»§æ‰¿äºItemsControlåŸºç±»ï¼Œæ‰€ä»¥ï¼Œå®ƒä¹Ÿæ˜¯ä¸€ä¸ªé›†åˆæ§ä»¶ã€‚ å®ƒçš„å…ƒç´ æ˜¯StatusBarItemç±»å‹ï¼Œè€ŒStatusBarItemç»§æ‰¿äºContentControlå†…å®¹æ§ä»¶ï¼Œæ‰€ä»¥ï¼Œæœ¬è´¨ä¸Šè®²ï¼ŒStatusBarçš„å…ƒç´ å¯ä»¥æ˜¯ä»»æ„ç±»å‹çš„æ§ä»¶ã€‚å› ä¸ºStatusBarItemå…ƒç´ æœ‰ä¸€ä¸ªå«Contentçš„å±æ€§ã€‚ è¿™ä¸ªæ§ä»¶å…¶å®å¹¶ä¸å¸¸ç”¨ï¼Œé€šå¸¸æƒ…å†µä¸‹è¢«å½“æˆä¸€ä¸ªå¸ƒå±€æ§ä»¶æ¥ä½¿ç”¨ã€‚å¦‚ä¸‹æ‰€ç¤º 12345678910111213141516171819&lt;Grid&gt; &lt;Grid.RowDefinitions&gt; &lt;RowDefinition/&gt; &lt;RowDefinition Height=&quot;auto&quot;/&gt; &lt;/Grid.RowDefinitions&gt; &lt;StatusBar Grid.Row=&quot;1&quot;&gt; &lt;StatusBarItem Content=&quot;ç‰ˆæƒæ‰€æœ‰ @WPFä¸­æ–‡ç½‘&quot;/&gt; &lt;StatusBarItem&gt; &lt;CheckBox Content=&quot;CheckBox&quot;/&gt; &lt;/StatusBarItem&gt; &lt;StatusBarItem&gt; &lt;RadioButton Content=&quot;RadioButton&quot;/&gt; &lt;/StatusBarItem&gt; &lt;StatusBarItem&gt; &lt;Button Content=&quot;Button&quot;/&gt; &lt;/StatusBarItem&gt; &lt;TextBlock Text=&quot;æ–‡å­—å—&quot;/&gt; &lt;/StatusBar&gt;&lt;/Grid&gt; å¦‚ä¸Šæ‰€ç¤ºï¼ŒStatusBarçš„å…ƒç´ é™¤äº†StatusBarItemï¼Œç”šè‡³å¯ä»¥ç›´æ¥å®ä¾‹åŒ–å…¶å®ƒæ§ä»¶ï¼Œæ¯”å¦‚æœ€åä¸€ä¸ªTextBlockå°±æ˜¯è¿™æ ·çš„ç”¨æ³•ã€‚ å›¾å½¢æ§ä»¶Shapeæ¦‚è¿°å½¢çŠ¶æ˜¯WPFå¦ä¸€å¤§ç³»åˆ—æ§ä»¶ã€‚WPFæ‰€æœ‰çš„å½¢çŠ¶éƒ½ç»§æ‰¿äºShapeåŸºç±»ã€‚é‚£ä¹ˆï¼ŒWPFæä¾›äº†å“ªäº›å¯ç”¨çš„å½¢çŠ¶å‘¢ï¼Ÿæˆ‘ä»¬ç”¨ä¸€å¼ å›¾æ¥è¯´æ˜å®ƒçš„å­ç±»ã€‚ å½¢çŠ¶åç§° è¯´æ˜ Ellipse æ¤­åœ†å½¢ Line åœ¨ä¸¤ä¸ªç‚¹ä¹‹é—´ç»˜åˆ¶ç›´çº¿ã€‚ Rectangle ç»˜åˆ¶çŸ©å½¢ã€‚ Polyline ç»˜åˆ¶ä¸€ç³»åˆ—ç›¸äº’è¿æ¥çš„ç›´çº¿ã€‚ Polygon ç»˜åˆ¶å¤šè¾¹å½¢ï¼Œå®ƒæ˜¯ç”±ä¸€ç³»åˆ—ç›¸äº’è¿æ¥çš„çº¿æ¡æ„æˆçš„é—­åˆå½¢çŠ¶ã€‚ Path ç»˜åˆ¶ä¸€ç³»åˆ—ç›¸äº’è¿æ¥çš„ç›´çº¿å’Œæ›²çº¿ã€‚ Shapeæ˜¯ä¸€ä¸ªæŠ½è±¡åŸºç±»ï¼Œå®ƒä¸èƒ½è¢«å®ä¾‹åŒ–ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨ä½¿ç”¨æ—¶åªèƒ½å®ä¾‹åŒ–å®ƒçš„å­ç±»ã€‚è€ŒShapeçš„çˆ¶ç±»æ˜¯FrameworkElementï¼Œæ‰€ä»¥ï¼Œæ‰€æœ‰çš„Shapeå­ç±»éƒ½æ˜¯ä¸€ä¸ªUIElement ç±»ï¼Œå› æ­¤å½¢çŠ¶å¯¹è±¡å¯ä»¥ç”¨åœ¨é¢æ¿å’Œå¤§å¤šæ•°æ§ä»¶ä¸­ã€‚ ç”±äº Canvas é¢æ¿æ”¯æŒå…¶å­å¯¹è±¡çš„ç»å¯¹ä½ç½®ï¼Œå› æ­¤ç‰¹åˆ«é€‚åˆåˆ›å»ºå¤æ‚çš„å›¾å½¢ã€‚ æˆ‘ä»¬æ¥çœ‹çœ‹Shapeçš„å®šä¹‰ ä¸€ã€Shapeçš„å®šä¹‰ 123456789101112131415161718192021222324252627282930313233343536public abstract class Shape : FrameworkElement&#123; public static readonly DependencyProperty StretchProperty; public static readonly DependencyProperty StrokeDashArrayProperty; public static readonly DependencyProperty StrokeDashOffsetProperty; public static readonly DependencyProperty StrokeLineJoinProperty; public static readonly DependencyProperty StrokeDashCapProperty; public static readonly DependencyProperty StrokeMiterLimitProperty; public static readonly DependencyProperty StrokeStartLineCapProperty; public static readonly DependencyProperty StrokeThicknessProperty; public static readonly DependencyProperty StrokeProperty; public static readonly DependencyProperty FillProperty; public static readonly DependencyProperty StrokeEndLineCapProperty; protected Shape(); public Brush Stroke &#123; get; set; &#125; public PenLineCap StrokeEndLineCap &#123; get; set; &#125; public PenLineCap StrokeStartLineCap &#123; get; set; &#125; public double StrokeThickness &#123; get; set; &#125; public Brush Fill &#123; get; set; &#125; public double StrokeDashOffset &#123; get; set; &#125; public virtual Geometry RenderedGeometry &#123; get; &#125; public Stretch Stretch &#123; get; set; &#125; public DoubleCollection StrokeDashArray &#123; get; set; &#125; public double StrokeMiterLimit &#123; get; set; &#125; public PenLineCap StrokeDashCap &#123; get; set; &#125; public virtual Transform GeometryTransform &#123; get; &#125; public PenLineJoin StrokeLineJoin &#123; get; set; &#125; protected abstract Geometry DefiningGeometry &#123; get; &#125; protected override Size ArrangeOverride(Size finalSize); protected override Size MeasureOverride(Size constraint); protected override void OnRender(DrawingContext drawingContext); &#125; ShapeåŸºç±»æä¾›äº†è®¸å¤šå…¬å…±å±æ€§ï¼Œå¦‚ä¸‹è¡¨æ‰€ç¤ºã€‚ äºŒã€å±æ€§æˆå‘˜ å±æ€§åç§° è¯´æ˜ Stroke è·å–æˆ–è®¾ç½®Shapeçš„è¾¹æ¡†é¢œè‰²ç”»åˆ· StrokeEndLineCap è·å–æˆ–è®¾ç½®Shapeæè¿°çº¿çš„æœ«ç«¯çš„æ ·å¼ StrokeStartLineCap è·å–æˆ–è®¾ç½®Shapeæè¿°çº¿çš„å¼€å¤´çš„æ ·å¼ StrokeThickness è·å–æˆ–è®¾ç½®Shapeè¾¹æ¡†çš„åšåº¦ Fill è·å–æˆ–è®¾ç½®Shapeçš„å†…éƒ¨å¡«å……é¢œè‰² StrokeDashOffset è·å–æˆ–è®¾ç½®çŸ­åˆ’çº¿æ¨¡å¼å†…çŸ­åˆ’çº¿å¼€å§‹å¤„çš„è·ç¦» RenderedGeometry è·å–æˆ–è®¾ç½®Shapeçš„å‡ ä½• Stretch è·å–æˆ–è®¾ç½®Shapeçš„å¡«å……æ¨¡å¼ StrokeDashArray è·å–æˆ–è®¾ç½®å‹¾å‹’å½¢çŠ¶è½®å»“çš„çŸ­åˆ’çº¿å’Œé—´éš™çš„æ¨¡å¼çš„å€¼ StrokeMiterLimit è·å–æˆ–è®¾ç½®ä¸€ä¸ªé™åˆ¶åˆ°ä¸€åŠçš„æ–œæ¥é•¿åº¦æ¯” StrokeDashCap è·å–æˆ–è®¾ç½® System.Windows.Media.PenLineCap æšä¸¾å€¼ï¼Œè¯¥å€¼æŒ‡å®šå¦‚ä½•ç»˜åˆ¶è™šçº¿çš„æœ«ç«¯ã€‚ GeometryTransform è·å–æˆ–è®¾ç½®Shapeçš„è½¬æ¢ StrokeLineJoin è·å–æˆ–è®¾ç½®Shapeçš„é¡¶ç‚¹å¤„ä½¿ç”¨çš„è”æ¥ç±»å‹ã€‚ DefiningGeometry è·å–Shapeçš„Geometry Ellipseæ¤­åœ†Ellipseç»§æ‰¿äºShapeï¼ŒShapeç»§æ‰¿äºFrameworkElementï¼Œæ‰€ä»¥ï¼Œå®ƒå¯ä»¥è®¾ç½®å…¶ Width å’Œ Heightã€‚ ä½¿ç”¨å…¶ Fill å±æ€§æŒ‡å®šç”¨äºç»˜åˆ¶æ¤­åœ†å½¢å†…éƒ¨çš„ Brushã€‚ ä½¿ç”¨å…¶ Stroke å±æ€§æŒ‡å®šç”¨äºç»˜åˆ¶æ¤­åœ†å½¢è½®å»“çš„ Brushã€‚ StrokeThickness å±æ€§æŒ‡å®šæ¤­åœ†å½¢è½®å»“çš„ç²—ç»†ã€‚ ä¸‹é¢çš„ç¤ºä¾‹æ¼”ç¤ºäº†æ¤­åœ†å’Œæ­£åœ†ã€‚ å‰ç«¯ä»£ç  123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051&lt;Window x:Class=&quot;HelloWorld.MainWindow&quot; xmlns=&quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot; xmlns:x=&quot;http://schemas.microsoft.com/winfx/2006/xaml&quot; xmlns:d=&quot;http://schemas.microsoft.com/expression/blend/2008&quot; xmlns:mc=&quot;http://schemas.openxmlformats.org/markup-compatibility/2006&quot; xmlns:local=&quot;clr-namespace:HelloWorld&quot; mc:Ignorable=&quot;d&quot; Title=&quot;WPFä¸­æ–‡ç½‘ - wpfsoft.com - æ¤­åœ†è¯¾ç¨‹&quot; Height=&quot;350&quot; Width=&quot;500&quot;&gt; &lt;Grid&gt; &lt;Grid.ColumnDefinitions&gt; &lt;ColumnDefinition/&gt; &lt;ColumnDefinition/&gt; &lt;/Grid.ColumnDefinitions&gt; &lt;Ellipse Width=&quot;100&quot; Height=&quot;50&quot; Stroke=&quot;Black&quot; StrokeThickness=&quot;2&quot; Fill=&quot;Red&quot;&gt; &lt;Ellipse.Triggers&gt; &lt;EventTrigger RoutedEvent=&quot;Loaded&quot;&gt; &lt;BeginStoryboard&gt; &lt;Storyboard&gt; &lt;DoubleAnimation From=&quot;100&quot; To=&quot;200&quot; Duration=&quot;0:0:2&quot; AutoReverse=&quot;True&quot; RepeatBehavior=&quot;Forever&quot; Storyboard.TargetProperty=&quot;(Ellipse.Width)&quot; /&gt; &lt;DoubleAnimation From=&quot;50&quot; To=&quot;100&quot; Duration=&quot;0:0:2&quot; AutoReverse=&quot;True&quot; RepeatBehavior=&quot;Forever&quot; Storyboard.TargetProperty=&quot;(Ellipse.Height)&quot; /&gt; &lt;/Storyboard&gt; &lt;/BeginStoryboard&gt; &lt;/EventTrigger&gt; &lt;/Ellipse.Triggers&gt; &lt;/Ellipse&gt; &lt;Grid Grid.Column=&quot;1&quot;&gt; &lt;Grid.RowDefinitions&gt; &lt;RowDefinition/&gt; &lt;RowDefinition Height=&quot;auto&quot;/&gt; &lt;/Grid.RowDefinitions&gt; &lt;Ellipse Width=&quot;&#123;Binding ElementName=slider,Path=Value&#125;&quot; Height=&quot;&#123;Binding ElementName=slider,Path=Value&#125;&quot; Fill=&quot;Green&quot;/&gt; &lt;Slider x:Name=&quot;slider&quot; Grid.Row=&quot;1&quot; Value=&quot;50&quot; Maximum=&quot;200&quot;/&gt; &lt;/Grid&gt; &lt;/Grid&gt;&lt;/Window&gt; åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å®ä¾‹åŒ–äº†ä¸¤ä¸ªæ¤­åœ†ï¼Œç¬¬ä¸€ä¸ªæ¤­åœ†ç”¨äº†ä¸€ä¸ªäº‹ä»¶Triggerså’ŒStoryboardæ•…äº‹æ¿ï¼Œæ¼”ç¤ºäº†æ¤­åœ†å¤§å°çš„åŠ¨ç”»æ”¹å˜ï¼Œåœ¨ç¬¬äºŒä¸ªæ¤­åœ†ä¸­ï¼Œå®½åº¦å’Œé«˜åº¦ç›¸ç­‰ï¼Œä¾¿å‡ºç°äº†ä¸€ä¸ªæ­£åœ†ï¼Œåˆ©ç”¨Bindingå¯¹è±¡å°†Sliderçš„Valueå’Œæ¤­åœ†çš„å°ºå¯¸ç»‘å®šèµ·æ¥ï¼Œä»¥æ­¤æ»‘åŠ¨æ”¹å˜æ¤­åœ†å¤§å°ã€‚ æ³¨ï¼šå…³äºåŠ¨ç”»éƒ¨åˆ†ï¼Œæˆ‘ä»¬å°†åœ¨åé¢ä¸“é—¨è®²è§£ã€‚ Lineçº¿æ®µLine(çº¿æ®µ)ç»§æ‰¿äºShapeï¼Œå®ƒè‡ªèº«åªæœ‰4ä¸ªå±æ€§ï¼Œåˆ†åˆ«ç”¨äºå®šä¹‰çº¿æ®µä¸¤ç«¯çš„ç«¯ç‚¹åæ ‡ã€‚ 123456789101112131415public sealed class Line : Shape&#123; public static readonly DependencyProperty X1Property; public static readonly DependencyProperty Y1Property; public static readonly DependencyProperty X2Property; public static readonly DependencyProperty Y2Property; public Line(); public double X1 &#123; get; set; &#125; public double Y1 &#123; get; set; &#125; public double X2 &#123; get; set; &#125; public double Y2 &#123; get; set; &#125; protected override Geometry DefiningGeometry &#123; get; &#125;&#125; å…¶ä¸­X1,Y1è¡¨ç¤ºç¬¬ä¸€ä¸ªç‚¹åæ ‡ï¼ŒX2,Y2è¡¨ç¤ºç¬¬äºŒä¸ªç‚¹åæ ‡ã€‚ ä¸‹é¢çš„å±æ€§ä½äºShapeåŸºç±»ï¼Œåœ¨Lineçº¿æ®µä¸­è®¾ç½®åï¼Œä¼šæœ‰æ„æƒ³ä¸åˆ°çš„æ•ˆæœã€‚ StrokeStartLineCapå±æ€§ï¼šè¡¨ç¤ºçº¿æ®µå‰å¤´çš„å¼€å…³ã€‚ Strokeï¼šçº¿æ¡é¢œè‰²ã€‚ StrokeThicknessï¼šçº¿æ¡å®½åº¦ã€‚ StrokeDashArrayï¼šè®¾ç½®è™šçº¿ã€‚ StrokeDashOffsetï¼šè™šçº¿ä½ç½®åç§»é‡ã€‚ æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä»¥ä¸€ä¸ªç¤ºä¾‹æ¥è¯´æ˜Lineçš„ç”¨æ³•ã€‚ å‰ç«¯ä»£ç  1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950&lt;Window x:Class=&quot;HelloWorld.MainWindow&quot; xmlns=&quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot; xmlns:x=&quot;http://schemas.microsoft.com/winfx/2006/xaml&quot; xmlns:d=&quot;http://schemas.microsoft.com/expression/blend/2008&quot; xmlns:mc=&quot;http://schemas.openxmlformats.org/markup-compatibility/2006&quot; xmlns:local=&quot;clr-namespace:HelloWorld&quot; mc:Ignorable=&quot;d&quot; Title=&quot;WPFä¸­æ–‡ç½‘ - wpfsoft.com - Lineè¯¾ç¨‹&quot; Height=&quot;350&quot; Width=&quot;500&quot;&gt; &lt;Canvas x:Name=&quot;canvas&quot;&gt; &lt;Line x:Name=&quot;flowLine&quot; X1=&quot;20&quot; Y1=&quot;40&quot; X2=&quot;400&quot; Y2=&quot;100&quot; StrokeDashArray=&quot;2,1&quot; Stroke=&quot;Green&quot; StrokeThickness=&quot;8&quot;/&gt; &lt;Line X1=&quot;&#123;Binding ElementName=x1,Path=Value&#125;&quot; Y1=&quot;&#123;Binding ElementName=y1,Path=Value&#125;&quot; X2=&quot;&#123;Binding ElementName=x2,Path=Value&#125;&quot; Y2=&quot;&#123;Binding ElementName=y2,Path=Value&#125;&quot; StrokeStartLineCap=&quot;Round&quot; Stroke=&quot;Red&quot; StrokeThickness=&quot;5&quot;/&gt; &lt;Slider x:Name=&quot;x1&quot; Value=&quot;10&quot; Maximum=&quot;450&quot; Width=&quot;450&quot; Canvas.Left=&quot;10&quot; Canvas.Top=&quot;237&quot;/&gt; &lt;Slider x:Name=&quot;y1&quot; Value=&quot;10&quot; Maximum=&quot;450&quot; Width=&quot;450&quot; Canvas.Left=&quot;10&quot; Canvas.Top=&quot;256&quot;/&gt; &lt;Slider x:Name=&quot;x2&quot; Value=&quot;300&quot; Maximum=&quot;450&quot; Width=&quot;450&quot; Canvas.Left=&quot;10&quot; Canvas.Top=&quot;276&quot;/&gt; &lt;Slider x:Name=&quot;y2&quot; Value=&quot;300&quot; Maximum=&quot;450&quot; Width=&quot;450&quot; Canvas.Left=&quot;10&quot; Canvas.Top=&quot;295&quot;/&gt; &lt;/Canvas&gt;&lt;/Window&gt; åç«¯ä»£ç  1234567891011121314151617181920212223242526public partial class MainWindow : Window&#123; public MainWindow() &#123; InitializeComponent(); Loaded += (s, e) =&gt; &#123; int number = 10; Task.Run(() =&gt; &#123; while (true) &#123; if (number == 1) number = 10; Application.Current.Dispatcher.BeginInvoke(new Action(() =&gt; &#123; flowLine.StrokeDashOffset = number; &#125;)); number--; Thread.Sleep(250); &#125; &#125;); &#125;; &#125;&#125; åœ¨XAMLä»£ç ä¸­ï¼Œæˆ‘ä»¬å®ä¾‹åŒ–äº†ä¸¤ä¸ªLineï¼Œå…¶ä¸­ä¸€ä¸ªLineçš„ç«¯ç‚¹åæ ‡ç»‘å®šäº†4ä¸ªSliderçš„Valueå±æ€§ï¼Œå¯ä»¥é€šè¿‡æ»‘åŠ¨æ”¹å˜çº¿æ¡çš„ä½ç½®ï¼Œç¬¬äºŒLineè®¾ç½®ä¸ºè™šçº¿ï¼Œå¹¶é€šè¿‡C#ä»£ç å¼€è¾Ÿå­çº¿ç¨‹ï¼Œåœ¨å­çº¿ç¨‹ä¸­é€šè¿‡åŠ¨æ€è®¾ç½®StrokeDashOffsetå±æ€§ï¼Œæ¥æ¨¡æ‹ŸæµåŠ¨çš„çº¿æ®µæ•ˆæœã€‚ RectangleçŸ©å½¢Rectangleæ˜¯ä¸€ä¸ªæ¯”è¾ƒç®€å•è€Œå®ç”¨çš„å›¾å½¢æ§ä»¶ï¼Œç»§æ‰¿äºShapeï¼Œæœ‰ä¸¤ä¸ªå±æ€§æ¯”è¾ƒå¸¸ç”¨ï¼Œå³RadiusXå’ŒRadiusYï¼Œè¡¨ç¤ºè®¾ç½®çŸ©å½¢çš„åœ†è§’ã€‚æ‰€ä»¥ï¼Œé€šè¿‡è¿™ä¸¤ä¸ªå±æ€§çš„è®¾ç½®ï¼ŒçŸ©å½¢ä¹Ÿå¯ä»¥ç”»å‡ºä¸€ä¸ªåœ†ã€‚ è§‚å¯Ÿä¸‹é¢çš„ä¾‹å­ã€‚ 12345678910111213141516171819202122232425262728293031&lt;Window x:Class=&quot;HelloWorld.MainWindow&quot; xmlns=&quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot; xmlns:x=&quot;http://schemas.microsoft.com/winfx/2006/xaml&quot; xmlns:d=&quot;http://schemas.microsoft.com/expression/blend/2008&quot; xmlns:mc=&quot;http://schemas.openxmlformats.org/markup-compatibility/2006&quot; xmlns:local=&quot;clr-namespace:HelloWorld&quot; mc:Ignorable=&quot;d&quot; Title=&quot;WPFä¸­æ–‡ç½‘ - wpfsoft.com -è¯¾ç¨‹&quot; Height=&quot;350&quot; Width=&quot;500&quot;&gt; &lt;Canvas x:Name=&quot;canvas&quot;&gt; &lt;Rectangle RadiusX=&quot;&#123;Binding ElementName=slider,Path=Value&#125;&quot; RadiusY=&quot;&#123;Binding ElementName=slider,Path=Value&#125;&quot; Width=&quot;&#123;Binding ElementName=slider,Path=Value&#125;&quot; Height=&quot;&#123;Binding ElementName=slider,Path=Value&#125;&quot; Fill=&quot;Red&quot; Canvas.Left=&quot;50&quot; Canvas.Top=&quot;36&quot;/&gt; &lt;Rectangle Width=&quot;100&quot; Height=&quot;100&quot; Fill=&quot;Green&quot; Canvas.Left=&quot;313&quot; Canvas.Top=&quot;36&quot;/&gt; &lt;Slider x:Name=&quot;slider&quot; Width=&quot;450&quot; Value=&quot;100&quot; Maximum=&quot;450&quot; Canvas.Left=&quot;32&quot; Canvas.Top=&quot;291&quot;/&gt; &lt;/Canvas&gt;&lt;/Window&gt; åœ¨æœ¬ä¾‹ä¸­ï¼Œæˆ‘ä»¬å®ä¾‹åŒ–äº†ä¸¤ä¸ªRectangleå¯¹è±¡ï¼Œå¦‚æœRadiusXå’ŒRadiusYä¸Widthã€Heightç›¸ç­‰ï¼Œåˆ™ä¼šæ˜¾ç¤ºä¸€ä¸ªæ­£åœ†ã€‚ PolylineæŠ˜çº¿Polylineè¡¨ç¤ºç”±ä¸€ç³»åˆ—çº¿æ®µç»„åˆç»˜åˆ¶è€Œæˆçš„æŠ˜çº¿ï¼Œå› ä¸ºå®ƒæœ‰ä¸€ä¸ªPointså±æ€§ï¼Œç”¨æ¥ä¿å­˜è¿™äº›ç‚¹çš„åæ ‡ã€‚è¿™äº›åæ ‡ç‚¹ç”¨äºç»˜åˆ¶Polylineå›¾å½¢ä¸­å„çº¿æ®µç›¸æ¥å¤„çš„é¡¶ç‚¹ã€‚é›†åˆä¸­ç¬¬ä¸€ä¸ªå…ƒç´ è¡¨ç¤ºèµ·ç‚¹ï¼Œæœ€åä¸€å…ƒç´ è¡¨ç¤ºç»ˆç‚¹ã€‚ åœ¨XAMLå‰ç«¯ä»£ç ä¸­å®šä¹‰Pointsçš„å†…å®¹ä¹¦å†™æ ¼å¼å¦‚ä¸‹ï¼šå‡å¦‚æˆ‘ä»¬æœ‰4ä¸ªç‚¹ï¼Œåˆ†åˆ«æ˜¯èµ·ç‚¹(30,30)ï¼Œä¸­ç»§ç‚¹(200,30)ï¼Œä¸­ç»§ç‚¹(50,250)ï¼Œç»ˆç‚¹(220,250)ï¼Œé‚£ä¹ˆï¼ŒPointsçš„å†…å®¹ä¹¦å†™ä¸ºï¼šPoints&#x3D;â€30,30 200,30 50,250 220,250â€ å®Œæ•´ä»£ç å¦‚ä¸‹æ‰€ç¤º 12345678910111213&lt;Canvas x:Name=&quot;canvas&quot;&gt; &lt;Polyline StrokeThickness=&quot;20&quot; Points=&quot;30,30 200,30 50,250 220,250&quot;&gt; &lt;Polyline.Stroke&gt; &lt;LinearGradientBrush StartPoint=&quot;30,30&quot; EndPoint=&quot;220,250&quot; MappingMode=&quot;Absolute&quot;&gt; &lt;GradientStop Color=&quot;Red&quot; Offset=&quot;1&quot; /&gt; &lt;GradientStop Color=&quot;Yellow&quot; Offset=&quot;0.66&quot; /&gt; &lt;GradientStop Color=&quot;Green&quot; Offset=&quot;0&quot; /&gt; &lt;/LinearGradientBrush&gt; &lt;/Polyline.Stroke&gt; &lt;/Polyline&gt;&lt;/Canvas&gt; Polygonå¤šè¾¹å½¢Polygonå«å¤šè¾¹å½¢ï¼Œä¸Polylineç±»ä¼¼ï¼Œéƒ½æœ‰ä¸€ä¸ªPointså±æ€§ï¼Œåªä¸è¿‡ï¼ŒPolygonä¼šæŠŠèµ·ç‚¹å’Œç»ˆç‚¹è¿æ¥èµ·æ¥ã€‚å°±æ‹¿ä¸Šä¸€èŠ‚çš„ä¾‹å­ï¼Œæˆ‘ä»¬åªæ˜¯ç®€å•åœ°æŠŠPolylineæ¢æˆPolygonï¼Œå…¶å®ƒè®¾ç½®ä¿æŒä¸å˜ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š 12345678910111213&lt;Canvas x:Name=&quot;canvas&quot;&gt; &lt;Polygon StrokeThickness=&quot;20&quot; Points=&quot;30,30 200,30 50,250 220,250&quot;&gt; &lt;Polygon.Stroke&gt; &lt;LinearGradientBrush StartPoint=&quot;30,30&quot; EndPoint=&quot;220,250&quot; MappingMode=&quot;Absolute&quot;&gt; &lt;GradientStop Color=&quot;Red&quot; Offset=&quot;1&quot; /&gt; &lt;GradientStop Color=&quot;Yellow&quot; Offset=&quot;0.66&quot; /&gt; &lt;GradientStop Color=&quot;Green&quot; Offset=&quot;0&quot; /&gt; &lt;/LinearGradientBrush&gt; &lt;/Polygon.Stroke&gt; &lt;/Polygon&gt;&lt;/Canvas&gt; ç»“æœï¼Œåœ¨Polylineä¸‹é¢åŸæœ¬å‘ˆç°çš„Zå­—å½¢ï¼Œåœ¨Polygonä¸‹é¢å°±å˜æˆäº†ä¸€ä¸ª8å­—å½¢ï¼Œå¯ä»¥å¾ˆæ˜æ˜¾çš„çœ‹åˆ°å®ƒçš„èµ·ç‚¹å’Œç»ˆç‚¹ç›¸è¿èµ·æ¥äº†ã€‚ åŒç†ï¼Œæˆ‘ä»¬åœ¨C#åç«¯ï¼Œä¹Ÿç›¸åº”çš„ä¿®æ”¹æˆPolygonå¯¹è±¡ã€‚ 123456789101112131415161718192021222324252627282930public partial class MainWindow : Window&#123; public MainWindow() &#123; InitializeComponent(); &#125; private int count = 0; private Polygon polygon = null; private void Window_PreviewMouseLeftButtonUp(object sender, MouseButtonEventArgs e) &#123; if (count++ == 0) &#123; polygon = new Polygon(); polygon.StrokeThickness = 5; polygon.Stroke = Brushes.Red; canvas.Children.Add(polygon); &#125; var point = e.GetPosition(canvas); polygon.Points.Add(point); &#125; private void Window_PreviewMouseRightButtonUp(object sender, MouseButtonEventArgs e) &#123; count = 0; &#125;&#125; æœ€åï¼Œæ•ˆæœå¦‚ä¸Šï¼Œç”¨é¼ æ ‡ç»˜åˆ¶å‡ºæ¥çš„å°±æ˜¯å°é—­çš„å¤šè¾¹å½¢ã€‚ Pathè·¯å¾„12345678910public sealed class Path : Shape&#123; public static readonly DependencyProperty DataProperty; public Path(); public Geometry Data &#123; get; set; &#125; protected override Geometry DefiningGeometry &#123; get; &#125;&#125; ä»å®šä¹‰ä¸Šçœ‹ï¼ŒPathåªæœ‰ä¸€ä¸ªDataå±æ€§ï¼Œè¿™ä¸ªå±æ€§çš„ç±»å‹ä¸ºGeometryã€‚è€ŒGeometryåˆæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸èƒ½ç›´æ¥ä½¿ç”¨å®ƒï¼Œé‚£å®ƒè‚¯å®šä¼šæœ‰ä¸€ç³»åˆ—å¯ä»¥å®ä¾‹åŒ–çš„å­ç±»ã€‚æ²¡é”™ï¼ŒGeometryè¡¨ç¤ºä¸€ä¸ªå‡ ä½•ï¼Œè€Œå‡ ä½•çš„å›¾å½¢å¯ä»¥åˆ†ä¸ºå¥½å‡ ç§ã€‚ å‡ ä½•åç§° è¯´æ˜ LineGeometry ç›´çº¿å‡ ä½• RectangleGeometry çŸ©å½¢å‡ ä½• EllipseGeometry æ¤­åœ†å‡ ä½• PathGeometry è·¯å¾„å‡ ä½• StreamGeometry PathGeometryçš„è½»é‡çº§æ›¿ä»£å“ï¼Œä¸æ”¯æŒ Bidningã€åŠ¨ç”»ç­‰åŠŸèƒ½ CombinedGeometry å¤šå›¾å½¢ç»„åˆï¼Œå½¢æˆå•ä¸€å‡ ä½•å‡ ä½•å›¾å½¢ GeometryGroup å¤šå›¾å½¢ç»„åˆï¼Œå½¢æˆå‡ ä½•å›¾å½¢ç»„ æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åˆ†åˆ«è®²ä¸€ä¸‹è¿™å‡ ç§å‡ ä½•çš„ç”¨æ³•ã€‚ ä¸€ã€LineGeometryç›´çº¿å‡ ä½• 12345&lt;Path Stroke=&quot;Blue&quot; Fill=&quot;Red&quot;&gt; &lt;Path.Data&gt; &lt;LineGeometry StartPoint=&quot;10,20&quot; EndPoint=&quot;100,200&quot;/&gt; &lt;/Path.Data&gt;&lt;/Path&gt; äºŒã€RectangleGeometryçŸ©å½¢å‡ ä½• 12345&lt;Path Stroke=&quot;Blue&quot; Fill=&quot;Red&quot;&gt; &lt;Path.Data&gt; &lt;RectangleGeometry Rect=&quot;50,20,30,40&quot; /&gt; &lt;/Path.Data&gt;&lt;/Path&gt; ä¸‰ã€EllipseGeometryæ¤­åœ†å‡ ä½• 12345&lt;Path Stroke=&quot;Yellow&quot; Fill=&quot;LightGreen&quot;&gt; &lt;Path.Data&gt; &lt;EllipseGeometry Center=&quot;150,80&quot; RadiusX=&quot;60&quot; RadiusY=&quot;50&quot;/&gt; &lt;/Path.Data&gt;&lt;/Path&gt; ä»ä¸Šé¢çš„3ä¸ªä¾‹å­æ¥çœ‹ï¼ŒLineã€Rectangleã€Ellipseæ§ä»¶èƒ½å¤Ÿç”»å‡ºæ¥çš„æ•ˆæœï¼ŒPathéƒ½å¯ä»¥ç”»å‡ºæ¥ã€‚è€Œæ¥ä¸‹æ¥æˆ‘ä»¬è¦åˆ†äº«çš„æ˜¯ï¼ŒLineã€Rectangleã€Ellipseæ§ä»¶ç”»ä¸å‡ºæ¥çš„æ•ˆæœï¼ŒPathä¹Ÿèƒ½ç”»å‡ºæ¥ã€‚é‚£å°±æ˜¯PathGeometryè·¯å¾„å‡ ä½•ã€‚ å››ã€PathGeometryè·¯å¾„å‡ ä½• PathGeometryå¾®å¾®æœ‰ç‚¹å¤æ‚ã€‚å®ƒæœ‰ä¸€ä¸ªFigureså±æ€§ï¼Œå¯ä»¥å®¹çº³å¾ˆå¤šè¾ƒå¤æ‚çš„å›¾å½¢ã€‚Figuresæ˜¯ä¸€ä¸ªé›†åˆï¼Œå…¶ä¸­çš„å…ƒç´ æ˜¯PathFigureç±»å‹ï¼Œè€ŒPathFigureä¸­çš„Segmentså±æ€§åˆæ˜¯ä¸€ä¸ªé›†åˆï¼Œå…¶ä¸­çš„å…ƒç´ ç±»å‹ä¸ºPathSegmentã€‚ PathSegmentæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œæˆ‘ä»¬å¯ä»¥å®ä¾‹åŒ–PathSegmentçš„å­ç±»æ”¾åˆ°PathFigureä¸­ï¼Œç„¶åæŠŠPathFigureæ”¾åˆ°PathGeometryä¸­ï¼Œè¿™æ ·å°±å¯ä»¥ç»˜åˆ¶ä¸åŒçš„è·¯å¾„å›¾å½¢äº†ã€‚é‚£ä¹ˆPathSegmentæœ‰å“ªäº›å­ç±»å‘¢ï¼Ÿ LineSegment ç›´çº¿æ®µ ArcSegment åœ†å¼§çº¿æ®µ BezierSegment ä¸‰æ¬¡æ–¹è´å¡å°”æ›²çº¿æ®µ QuadraticBezierSegmnt äºŒæ¬¡æ–¹è´å¡å°”æ›²çº¿æ®µ PolyLineSegment æŠ˜çº¿æ®µ PolyBezierSegment å¤šä¸‰æ¬¡æ–¹è´å¡å°”æ›²çº¿æ®µ PolyQuadraticBezierSegment å¤šäºŒæ¬¡æ–¹è´å¡å°”æ›² PathFigureæœ‰ä¸€ä¸ªStartPointå±æ€§è¡¨ç¤ºèµ·ç‚¹åæ ‡ï¼Œè€ŒSegmentsé›†åˆä¸­çš„å…ƒç´ å°±æ˜¯ä¸Šé¢é‚£å¼ è¡¨ä¸­çš„å„ç§çº¿æ®µå®ä¾‹ï¼Œå®ƒä»¬å°†ä¾æ¬¡é¦–å°¾ç›¸æ¥ï¼Œæœ€ç»ˆç»˜åˆ¶æˆå½¢ã€‚ æˆ‘ä»¬ä»¥LineSegmentå’ŒArcSegmentä¸ºä¾‹ã€‚ 12345678910111213141516171819&lt;Path Stroke=&quot;Black&quot; Fill=&quot;LightPink&quot; StrokeThickness=&quot;5&quot;&gt; &lt;Path.Data&gt; &lt;PathGeometry&gt; &lt;PathGeometry.Figures&gt; &lt;PathFigure StartPoint=&quot;150,200&quot;&gt; &lt;LineSegment Point=&quot;300,200&quot;/&gt; &lt;ArcSegment Point=&quot;300 50&quot; Size=&quot;100 100&quot; SweepDirection=&quot;Clockwise&quot; IsLargeArc=&quot;False&quot;/&gt; &lt;ArcSegment Point=&quot;300 200&quot; Size=&quot;100 100&quot; SweepDirection=&quot;Clockwise&quot; IsLargeArc=&quot;False&quot;/&gt; &lt;/PathFigure&gt; &lt;/PathGeometry.Figures&gt; &lt;/PathGeometry&gt; &lt;/Path.Data&gt;&lt;/Path&gt; é¦–å…ˆï¼ŒPathFigure å›¾å½¢çš„èµ·ç‚¹åæ ‡ä¸ºï¼ˆ150,200ï¼‰ï¼Œç„¶åç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯çº¿æ®µï¼Œç»ˆç‚¹åæ ‡ä¸ºï¼ˆ300,200ï¼‰ï¼Œå›¾å½¢çš„åæ ‡åŸç‚¹æ˜¯å·¦ä¸Šè§’ï¼ˆ0ï¼Œ0ï¼‰ï¼Œæ‰€ä»¥ï¼Œå¾€ä¸‹å°±æ˜¯Yè½´æ­£åŠè½´æ–¹å‘ï¼Œå¾€å³å°±æ˜¯Xè½´æ­£åŠè½´æ–¹å‘ã€‚ ç„¶åï¼Œç”»äº†ä¸¤æ¡åœ†å¼§ï¼Œç¬¬ä¸€æ¡åœ†å¼§çš„èµ·ç‚¹åæ ‡å°±æ˜¯çº¿æ®µçš„ç»ˆç‚¹åæ ‡ï¼Œå³ï¼ˆ300,200ï¼‰ï¼Œåœ†å¼§çš„ç»ˆç‚¹åæ ‡ä¸ºï¼ˆ300 50ï¼‰ï¼Œå¤§å°ä¸ºï¼ˆ100 100ï¼‰ï¼Œç¬¬äºŒæ¡åœ†å¼§çš„ç»ˆç‚¹åæ ‡åˆå›åˆ°äº†çº¿æ®µçš„ç»ˆç‚¹åæ ‡ï¼ˆ300 200ï¼‰ï¼Œäºæ˜¯å°±å‡ºç°äº†å›¾ä¸­çš„æ ·å­ã€‚ ArcSegmentçš„å¸¸ç”¨å±æ€§å¦‚ä¸‹ï¼šPointï¼šæŒ‡æ˜åœ†å¼§è¿æ¥çš„ç»ˆç‚¹ï¼›Sizeï¼šæŒ‡æ˜å®Œæ•´æ¤­åœ†çš„æ¨ªè½´åŠå¾„å’Œçºµè½´åŠå¾„ï¼›IsLargeArcï¼šæŒ‡æ˜æ˜¯å¦ä½¿ç”¨å¤§å¼§å»è¿æ¥ ï¼›SweepDirection ï¼šæŒ‡æ˜åœ†å¼§æ˜¯é¡ºæ—¶é’ˆæ–¹å‘è¿˜æ˜¯é€†æ—¶é’ˆæ–¹å‘ï¼›RotationAngleï¼šæŒ‡æ˜åœ†å¼§æ¤­åœ†çš„æ—‹è½¬è§’åº¦ï¼› æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å†è®²ä¸€ä¸‹BezierSegmentè´å¡å°”æ›²çº¿ã€‚ BezierSegmentéœ€è¦4ä¸ªåæ ‡ç‚¹æ¥å®Œæˆå›¾å½¢çš„ç»˜åˆ¶ï¼Œåˆ†åˆ«æ˜¯èµ·ç‚¹ï¼Œæ§åˆ¶ç‚¹1ï¼Œæ§åˆ¶ç‚¹2å’Œç»ˆç‚¹ã€‚ 123&lt;PathFigure IsFilled=&quot;False&quot; StartPoint=&quot;5,5&quot;&gt; &lt;BezierSegment Point1=&quot;200,50&quot; Point2=&quot;50,200&quot; Point3=&quot;350,250&quot;/&gt;&lt;/PathFigure&gt; å¦‚ä¸Šæ‰€ç¤ºï¼Œï¼ˆ5ï¼Œ5ï¼‰è¡¨ç¤ºèµ·ç‚¹ï¼ˆStartPointå±æ€§ï¼‰ï¼ŒPoint1å±æ€§ï¼ˆ200,50ï¼‰å’ŒPoint2å±æ€§ï¼ˆ50,200ï¼‰è¡¨ç¤ºä¸¤ä¸ªæ§åˆ¶ç‚¹ï¼ŒPoint3å±æ€§ï¼ˆ350,250ï¼‰è¡¨ç¤ºç»ˆç‚¹ã€‚ äº”ã€Pathçš„æ ‡è®°è¯­æ³• é€šè¿‡ä¸Šé¢çš„ç¤ºä¾‹æˆ‘ä»¬ä¼šå‘ç°è¦ç»˜åˆ¶å¤æ‚çš„å›¾å½¢ï¼Œéœ€è¦å®ä¾‹åŒ–å„ç§å­ç±»ï¼Œä»£ç ç¹çï¼Œè¿™æ—¶å°±éœ€è¦äº†è§£Pathçš„è·¯å¾„æ ‡è®°è¯­æ³•ï¼Œå®ƒå¤§å¤§å‡å°‘äº†ä»£ç é‡ã€‚æ‚¨å¯ä»¥ä»ä»¥ä¸‹çš„è¡¨æ ¼æˆ–å¾®è½¯å®˜ç½‘ä¸­è·å¾—ç›¸å…³çŸ¥è¯†ã€‚ å‘½ä»¤ ç”¨é€” è¯­æ³• ç¤ºä¾‹ å¯¹åº”æ ‡ç­¾è¯­æ³• M ç§»åŠ¨åˆ°èµ·ç‚¹åæ ‡ M èµ·ç‚¹ M 150,200 L ç»˜åˆ¶ç›´çº¿ L ç»ˆç‚¹ L 300,200 H æ°´å¹³ç›´çº¿ H ç»ˆç‚¹æ¨ªåæ ‡ V å‚ç›´ç›´çº¿ V ç»ˆç‚¹æ¨ªåæ ‡ A ç»˜åˆ¶åœ†å¼§ A æ¯æ¤­åœ†å°ºå¯¸ æ—‹è½¬è§’åº¦ æ˜¯å¦å¤§å¼§ é¡ºæ—¶é’ˆ&#x2F;é€†æ—¶é’ˆ ç»ˆç‚¹ A 180ï¼Œ80 45 1 1 150ï¼Œ150 C ä¸‰æ¬¡æ–¹è´å¡å°”æ›²çº¿ C æ§åˆ¶ç‚¹1 æ§åˆ¶ç‚¹2 ç»ˆç‚¹ C 200,50 50,200 350,250 Q äºŒæ¬¡æ–¹è´å¡å°”æ›²çº¿ Q æ§åˆ¶ç‚¹1 ç»ˆç‚¹ Q 200,50 350,250 S å¹³æ»‘ä¸‰æ¬¡æ–¹è´å¡å°”æ›²çº¿ S æ§åˆ¶ç‚¹2 ç»ˆç‚¹ S 200,50 350,250 T å¹³æ»‘äºŒæ¬¡æ–¹è´å¡å°”æ›²çº¿ T ç»ˆç‚¹ T 350,250 Z é—­åˆå›¾å½¢ Z M 10,150 L40,150 L40,250 L10,250 Z 1&lt;Path Fill=&quot;HotPink&quot; Data=&quot;M 10,150 L40,150 L40,250 L10,250 Z&quot;/&gt; æœ€åï¼Œæˆ‘ä»¬é€šè¿‡Pathçš„è·¯å¾„æ ‡è®°è¯­æ³•ç”»äº†ä¸€ä¸ªå°é—­çš„çŸ©å½¢å›¾å½¢ï¼Œå¯ä»¥çœ‹åˆ°ä»£ç é‡çš„ä¹¦å†™å¤§å¤§å‡å°‘äº†ã€‚","categories":[{"name":"C#","slug":"C","permalink":"http://example.com/categories/C/"}],"tags":[{"name":"C#","slug":"C","permalink":"http://example.com/tags/C/"},{"name":"WPF - ç¼–ç¨‹","slug":"WPF-ç¼–ç¨‹","permalink":"http://example.com/tags/WPF-%E7%BC%96%E7%A8%8B/"}],"author":"fly"},{"title":"WPFç¼–ç¨‹åŸºç¡€ä¸Šï¼ˆä¸€ï¼‰","slug":"WPFåŸºç¡€å­¦ä¹ ä¸Š","date":"2025-05-11T10:00:24.000Z","updated":"2025-05-13T14:34:26.244Z","comments":true,"path":"2025/05/11/WPFåŸºç¡€å­¦ä¹ ä¸Š/","permalink":"http://example.com/2025/05/11/WPF%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0%E4%B8%8A/","excerpt":"","text":"BindingPath12341. this.DataContext = new MainViewModel();2. &lt;Window.DataContext&gt; &lt;local:MainViewModel /&gt; &lt;/Window.DataContext&gt; 12345//xaml&lt;TextBlock Name=&quot;tbl&quot; Text=&quot;&#123;Binding Path=Message&#125;&quot;/&gt;&lt;TextBlock Name=&quot;tbl&quot; Text=&quot;&#123;Binding Message&#125;&quot;/&gt;&lt;TextBlock Name=&quot;tbl&quot; Text=&quot;&#123;Binding Path=.&#125;&quot;/&gt;&lt;TextBlock Name=&quot;tbl&quot; Text=&quot;&#123;Binding .&#125;&quot;/&gt; 1234567//ç”¨ç¨‹åºæ¥å†™var binding = new Bingding&#123; Path = new PropertyPath(&quot;Message&quot;), Mode BindingMode.TwoWay&#125;;BindingOperations.SetBinding(tbl,TextBlock.TextProperty,bingding); 123456789101112131415&lt;TextBlock&gt; &lt;TextBlock.Text&gt; &lt;MultiBinding&gt; &lt;Binding/&gt; &lt;/MultiBinding&gt; &lt;/TextBlock.Text&gt;&lt;/TextBlock&gt; &lt;TextBlock&gt; &lt;TextBlock.Text&gt; &lt;PriorityBinding&gt; &lt;Binding/&gt; &lt;/PriorityBinding&gt; &lt;/TextBlock.Text&gt;&lt;/TextBlock&gt; Source12345678910&lt;Windows.DataContext&gt; &lt;sys:String x:Key=&quot;str&quot;&gt;Hello,world&lt;/sys:String&gt;&lt;/Windows.DataContext&gt;&lt;TextBlock Name=&quot;tbl&quot; Text=&quot;&#123;Binding Source=&#123;StaticResource str&#125;&#125;&quot;/&gt;&lt;TextBlock Name=&quot;tbl&quot; Text=&quot;&#123;DynamicResource str&#125;&quot;/&gt; private void Window_Loaded(object sender,RoutedEventArgs e) &#123; this.Resources[&quot;str&quot;] = &quot;Goodbye&quot;; &#125; 123456class MyResource&#123; public string Message&#123;get;&#125; = &quot;public Property&quot;; public static string StaticString = &quot;Static string&quot;; public const string ConstString = &quot;Const String&quot;;&#125; 12345678&lt;Windows.DataContext&gt; &lt;local:MyResource x:key=&quot;myres&quot; /&gt;&lt;/Windows.DataContext&gt;&lt;TextBlock Text=&quot;&#123;Binding Source=&#123;StaticResource myres,Path=Message&#125;&#125;&quot;/&gt;&lt;TextBlock Text=&quot;&#123;Binding Source=&#123;x:Static local:MyResource.StaticString&#125;&#125;&quot;/&gt;&lt;TextBlock Text=&quot;&#123;Binding Source=&#123;x:Static local:MyResource.ConstString&#125;&#125;&quot;/&gt;//enum&lt;TextBlock Text=&quot;&#123;Binding Source=&#123;x:Static HorizontalAlignment.Stretch&#125;&#125;&quot;/&gt; 12&lt;CollectionViewSource/&gt;&lt;ObjectDataProvider/&gt; ElementName12&lt;TextBox Name=&quot;txt&quot;/&gt;&lt;TextBlock Text=&quot;&#123;Binding ElementName=txt,Path=text&#125;&quot; /&gt; ç»‘å®šå¤±è´¥çš„ä¾‹å­ï¼š 123456&lt;TextBox Name=&quot;txt&quot;/&gt;&lt;TextBlock Text=&quot;&#123;Binding ElementName=txt,Path=text&#125;&quot; &gt; &lt;TextBlock.ToolTip&gt; &lt;TextBlock Text=&quot;&#123;Binding ElementName=txt,Path=text&#125;&quot;&gt; &lt;/TextBlock.ToolTip&gt;&lt;/TextBlock&gt; åŸå› scope 123456&lt;TextBox Name=&quot;txt&quot;/&gt;&lt;TextBlock Text=&quot;&#123;Binding ElementName=txt,Path=text&#125;&quot; &gt; &lt;TextBlock.ToolTip&gt; &lt;TextBlock Text=&quot;&#123;Binding Source=&#123;x:Reference txt&#125;,Path=text&#125;&quot;&gt; &lt;/TextBlock.ToolTip&gt;&lt;/TextBlock&gt; ModeRelativeSourceç›¸å¯¹æº FindAncestor å¯»æ‰¾çˆ¶çº§ AncestorType çˆ¶çº§ç±»å‹ AncestorLevel çˆ¶çº§çº§åˆ« PreviousData Self è‡ªå·± TemplateParent 12//å½“å‰çª—å£å±å¹•ä¸Šæ–¹è·ç¦»&lt;TextBlock Text=&quot;&#123;Binding RelativeSource=&#123;RelativeSource Mode=FindAncestor , Path= Top&#125;&#125;&quot;/&gt; 12345//ç»‘å®šåŒçº§&lt;StackPanel Name=&quot;panel&quot; Margin=&quot;10&quot;&gt; &lt;TextBox /&gt; &lt;TextBlock Text=&quot;&#123;Binding RelativeSource=&#123;RelativeSource AncestorType=StackPanel ,Path=Chilren[0].Text&#125;&#125;&quot;/&gt;&lt;/StackPanel&gt; 123456789101112131415//ç»‘å®šè‡ªå·±&lt;StackPanel Name=&quot;panel&quot; Margin=&quot;10&quot;&gt; &lt;TextBox /&gt; &lt;TextBlock Text=&quot;&#123;Binding RelativeSource=&#123;RelativeSource Self,Path=ActualWidth&#125;&#125;&quot;/&gt;&lt;/StackPanel&gt;//æ–¹æ³•2&lt;StackPanel Name=&quot;panel&quot; Margin=&quot;10&quot;&gt; &lt;TextBox /&gt; &lt;TextBlock Text=&quot;&#123;Binding RelativeSource=&#123;x:Static RealativeSource.Self,Path=ActualWidth&#125;&#125;&quot;/&gt;&lt;/StackPanel&gt;//æ–¹æ³•3&lt;StackPanel Name=&quot;panel&quot; Margin=&quot;10&quot;&gt; &lt;TextBox /&gt; &lt;TextBlock Text=&quot;&#123;Binding RelativeSource 2,Path=ActualWidth&#125;&#125;&quot;/&gt;&lt;/StackPanel&gt; 123456789101112//æƒ…å†µå°‘ç”¨&lt;StackPanel Name=&quot;panel&quot; Margin=&quot;10&quot;&gt; &lt;Label Padding=&quot;10&quot; Content=&quot;Hello&quot;&gt; &lt;Label.Template&gt; &lt;ControlTemplate TargetType=&quot;Label&quot;&gt; &lt;Border&gt; &lt;ContentPresenter Margin=&quot;&#123;Binding RelativeSource=&#123;RelativeSource Mode=TemplateParent&#125;,Path=Padding,Mode=OneWay&#125;&quot;/&gt; &lt;/Border&gt; &lt;/ControlTemplate&gt; &lt;/Label.Template&gt; &lt;/Label&gt;&lt;/StackPanel&gt; Misc.(å…¶ä»–)123//æµ®ç‚¹æ•°ï¼Œä¿ç•™3ä½å°æ•°&lt;TextBlock Text=&quot;&#123;Binding ElementName=window,Path=Top,StringFormat=&#x27;Top:&#123;0:F3&#125;&#x27;&#125;&quot;/&gt;&lt;Label Content=&quot;&#123;Binding ElementName=window,Path=Left,ContentStringFormat=&#x27;Left:&#123;0:F3&#125;&#x27;&#125;&quot;/&gt; 12//TextBoxå®æ—¶æ›´æ–°&lt;TextBox Text=&quot;&#123;Binding ElementName=tb1,Path=Text,UpdateSourceTrigger=PropertyChanged&#125;&quot;/&gt; TargetNullValue å½“è·å–æˆ–è®¾ç½®æºçš„å€¼ä¸º null æ—¶å°†ä½¿ç”¨TargetNullValueçš„å€¼ã€‚ FallbackValue å½“å¢åŠ äº†ç»‘å®šè¯­æ³•æ—¶ï¼Œæœ‰æ—¶ç»‘å®šå¤±è´¥äº†å•¥éƒ½ä¸æ˜¾ç¤ºï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦ä¸€äº›æç¤ºè¯­å¥æ¥æç¤ºæˆ‘ä»¬ç»‘å®šå¤±è´¥ï¼Œæ­¤æ—¶å°±ç”¨åˆ°äº† FallbackValueã€‚ ä¾èµ–å±æ€§ï¼ˆDPï¼‰ æ˜¯ç±»çš„é™æ€å­—æ®µ åªèƒ½å­˜åœ¨äºDependencyObjectä¸Š WPFæ§ä»¶éƒ½ç»§æ‰¿äº†DependencyObject,ä¸”æ‹¥æœ‰å¤§é‡DependencyProperty æœ€ç»ˆä¼šå­˜æ”¾åœ¨DPç±»ä¸­çš„é™æ€HashTableä¸­ å®ç° å±æ€§å å±æ€§ç±»å‹ å¯¹åº”çš„ç±»å‹ åˆå§‹å€¼ å€¼å‘ç”Ÿå˜åŒ–æ—¶çš„å›è°ƒæ–¹æ³• é™„åŠ å±æ€§å†™åœ¨å•ç‹¬çš„ç±»ä¸­ï¼ˆç±»å¯ä»¥ä¸æ˜¯DependencyObjectï¼‰ åªæœ‰åœ¨è¿™ä¸ªå›è°ƒæ–¹æ³•ä¸­å¯ä»¥çŸ¥é“å½“å‰çš„å±æ€§è¢«é™„åŠ åœ¨äº†ä»€ä¹ˆä¸Š è¯­æ³• å¸¸è§„ 123456789101112class CustomTextBox : TextBox&#123; public bool IsHighlighted &#123; get &#123; return (bool)GetValue(IsHighlightedProperty); &#125; set &#123; SetValue(IsHighlightedProperty, value); &#125; &#125; public static readonly DependencyProperty IsHighlightedProperty = DependencyProperty.Register(&quot;IsHighlighted&quot;, typeof(bool), typeof(CustomTextBox), new PropertyMetadata(false)); &#125; å±æ€§ä¿®æ”¹æ—¶çš„å›è°ƒ 1234567public static readonly DependencyProperty IsHighlightedProperty = DependencyProperty.Register(&quot;IsHighlighted&quot;, typeof(bool), typeof(CustomTextBox), new PropertyMetadata(false,callback));private static void callback(DependencyObject d, DependencyPropertyChangedEventArgs e)&#123; ...&#125; åªè¯»å±æ€§ 12345678910111213141516/// &lt;summary&gt;/// åªè¯»/// &lt;/summary&gt; public bool HasText =&gt; (bool)GetValue(HasTextProperty);public static readonly DependencyProperty HasTextProperty;public static readonly DependencyPropertyKey HasTextPropertyKey;static CustomTextBox()&#123; HasTextPropertyKey = DependencyProperty.RegisterReadOnly(&quot;HasText&quot;, typeof(bool), typeof(CustomTextBox), new PropertyMetadata(false )); HasTextProperty = HasTextPropertyKey.DependencyProperty;&#125; é™„åŠ å±æ€§ï¼ˆAPï¼‰ä¸ºä»€ä¹ˆä¸é€‰æ‹©DP å·²æœ‰æ§ä»¶çš„ç±»éƒ½æ˜¯å†™å¥½çš„ï¼Œæ²¡æœ‰å…¶ä»–åŠæ³•ä¸ºä»–æ·»åŠ DP æœ‰äº›å±æ€§å¹¶ä¸ä¸“å±äºæŸç§æ§ä»¶ï¼Œè€Œæ˜¯å…·æœ‰é€šç”¨æ€§ Grid.ROw DockPanel.Dock Canvas.Left APä¸å¿…å†™åœ¨DependencyObjectä¸Š è¯­æ³• 123&lt;TextBox Grid.Row=&quot;0&quot;&gt; &lt;Grid.Column&gt;1&lt;/Grid.Column&gt;&lt;/TextBox&gt; 123&lt;TextBox ap:TextBoxHelper.Title=&quot;Hello&quot;&gt; &lt;ap:TextBoxHelper.Content&gt;World&lt;/ap:TextBoxHelper.Content&gt;&lt;/TextBox&gt; æ§ä»¶çˆ¶ç±»æ§ä»¶çš„çˆ¶ç±»ä»¬ æˆ‘ä»¬ä»¥æœ€å¸¸ç”¨çš„Buttonæ§ä»¶ä¸ºä¾‹ã€‚é¦–å…ˆçœ‹çœ‹å®ƒçš„çˆ¶ç±»ä»¬ï¼šButton-&gt;ButtonBase-&gt;ContentControl-&gt;Control-&gt;FrameworkElement-&gt;UIElement-&gt;Visual-&gt;DependencyObject-&gt;DispatcherObjectã€‚ ç„¶åå†çœ‹ä¸€ä¸ªæœ€å¸¸ç”¨çš„StackPanelæ§ä»¶çš„ç»§æ‰¿è·¯çº¿ï¼šStackPanel-&gt;Panel-&gt;FrameworkElement-&gt;UIElement-&gt;Visual-&gt;DependencyObject-&gt;DispatcherObjectã€‚ æœ€åå†çœ‹ä¸€ä¸ªRectangleçŸ©å½¢å›¾å½¢çš„ç»§æ‰¿è·¯çº¿ï¼šRectangle-&gt;Shape-&gt;FrameworkElement-&gt;UIElement-&gt;Visual-&gt;DependencyObject-&gt;DispatcherObjectã€‚ æˆ‘ä»¬ä¼šå‘ç°å®ƒä»¬çš„ç»§æ‰¿è·¯çº¿æœ€ç»ˆéƒ½åœ¨FrameworkElementè¿™ä¸€å±‚æ±‡åˆï¼Œæ¢å¥è¯è¯´ï¼Œè¿™ä¸‰ç§æ§ä»¶çš„èº«ä¸Šéƒ½æµç€FrameworkElementçš„è¡€ï¼Œé‚£è‡ªç„¶ä¹Ÿæµæ·Œç€UIElement-&gt;Visual-&gt;DependencyObject-&gt;DispatcherObjectè¿™å››ä¸ªçˆ¶ç±»çš„è¡€äº†ã€‚ DispatcherObject DependencyObject Visual UIElement FrameworkElement DispatcherObjectç±»å½“ä½ ä»¬åœ¨åå°çº¿ç¨‹ä¸­è¦è®¿é—®æ§ä»¶æ—¶ï¼Œå°±å¯ä»¥ä»æ§ä»¶ä¸­æ‰¾åˆ°é‚£ä½ä¸­é—´å•†Dispatcherï¼Œç”±ä¸­é—´å•†æ¥å®Œæˆä½ è¦å¯¹æ§ä»¶çš„æ“ä½œè®¿é—®ã€‚ï¼ˆè°ƒåº¦å‘˜ï¼‰ åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œéš¾å…éœ€è¦åœ¨åå°çº¿ç¨‹ä¸­å»æ“ä½œæ§ä»¶ï¼Œäºæ˜¯Dispatcherè°ƒåº¦å‘˜æä¾›äº†Invokeå’ŒBeginInvokeä¸¤ä¸ªæ–¹æ³•ï¼Œä¾›æˆ‘ä»¬å¯ä»¥å®‰å…¨çš„è®¿é—®UIçº¿ç¨‹ä¸­çš„æ§ä»¶ã€‚ å®˜æ–¹è§£é‡Šåœ¨ WPF ä¸­ï¼Œ DispatcherObject åªèƒ½ç”± Dispatcher å®ƒä¸ä¹‹å…³è”çš„è®¿é—®ã€‚ ä¾‹å¦‚ï¼Œåå°çº¿ç¨‹æ— æ³•æ›´æ–°ä¸ Dispatcher UI çº¿ç¨‹ä¸Šå…³è”çš„å†…å®¹Buttonã€‚ ä¸ºäº†ä½¿åå°çº¿ç¨‹è®¿é—®è¯¥ Content å±æ€§ Buttonï¼Œåå°çº¿ç¨‹å¿…é¡»å°†å·¥ä½œå§”æ‰˜ç»™ Dispatcher ä¸ UI çº¿ç¨‹å…³è”çš„å·¥ä½œã€‚ è¿™æ˜¯é€šè¿‡ä½¿ç”¨ Invoke æˆ–BeginInvokeã€‚ Invoke æ˜¯åŒæ­¥çš„ï¼Œ BeginInvoke æ˜¯å¼‚æ­¥çš„ã€‚ æ“ä½œå°†æ·»åŠ åˆ°æŒ‡å®šDispatcherPriorityä½ç½®çš„é˜Ÿåˆ—Dispatcherä¸­ã€‚ 1234567891011121314151617181920212223namespace HelloWorld&#123; /// &lt;summary&gt; /// MainWindow.xaml çš„äº¤äº’é€»è¾‘ /// &lt;/summary&gt; public partial class MainWindow : Window &#123; public MainWindow() &#123; InitializeComponent(); Task.Run(() =&gt; &#123; Task.Delay(3000).Wait(); button.Dispatcher.Invoke(() =&gt; &#123; button.Content = &quot;www.wpfsoft.com&quot;; &#125;); &#125;); &#125; &#125;&#125; DependencyObjectç±»åœ¨éœ€è¦çš„æ—¶å€™ä¸»åŠ¨å»æ”¹å˜æ§ä»¶çš„å€¼çš„å¼€å‘æ¨¡å¼ï¼Œæˆ‘ä»¬ç§°ä¸ºäº‹ä»¶é©±åŠ¨æ¨¡å¼ã€‚ äºæ˜¯å¾®è½¯åœ¨WPFæ¡†æ¶ä¸­æ¨å‡ºäº†æ›´çœäº‹çš„å¤„ç†æ–¹å¼â€”â€”æ•°æ®é©±åŠ¨æ¨¡å¼ã€‚ä»€ä¹ˆæ˜¯æ•°æ®é©±åŠ¨æ¨¡å¼ï¼Ÿ**æ§ä»¶çš„å±æ€§ä¸å†è¢«ç›´æ¥èµ‹å€¼ï¼Œè€Œæ˜¯ç»‘å®šäº†å¦ä¸€ä¸ªâ€å˜é‡â€œï¼Œå½“è¿™ä¸ªâ€å˜é‡â€œå‘ç”Ÿæ”¹å˜æ—¶ï¼Œæ§ä»¶çš„å±æ€§ä¹Ÿä¼šè·Ÿç€æ”¹å˜ï¼Œè¿™æ ·çš„å±æ€§ä¹Ÿè¢«ç§°ä¸ºä¾èµ–å±æ€§ã€‚**è¿™æœ‰ç‚¹åƒåˆä¸­æ•°å­¦ä¸­çš„y&#x3D;xè¿™æ ·çš„å‡½æ•°ï¼Œyæ˜¯å› å˜é‡ï¼Œxæ˜¯è‡ªå˜é‡ï¼Œyéšç€xçš„å˜åŒ–è€Œå˜åŒ–ã€‚ æå‰é˜…è¯» DependencyObject ç±»è¡¨ç¤ºå‚ä¸ä¾èµ–å±æ€§ç³»ç»Ÿçš„å¯¹è±¡ã€‚å±æ€§ç³»ç»Ÿçš„ä¸»è¦åŠŸèƒ½æ˜¯è®¡ç®—å±æ€§çš„å€¼ï¼Œå¹¶æä¾›æœ‰å…³å·²æ›´æ”¹çš„å€¼çš„ç³»ç»Ÿé€šçŸ¥ã€‚ å‚ä¸å±æ€§ç³»ç»Ÿçš„å¦ä¸€ä¸ªç±» DependencyPropertyã€‚ DependencyProperty å…è®¸å°†ä¾èµ–å±æ€§æ³¨å†Œåˆ°å±æ€§ç³»ç»Ÿï¼Œå¹¶æä¾›æœ‰å…³æ¯ä¸ªä¾èµ–å±æ€§çš„æ ‡è¯†å’Œä¿¡æ¯ï¼Œè€Œ DependencyObject ä¸ºåŸºç±»ï¼Œä½¿å¯¹è±¡èƒ½å¤Ÿä½¿ç”¨æ­¤ä¾èµ–å±æ€§ã€‚INotifyPropertyChanged ç±»ç”¨äºé€šçŸ¥UIåˆ·æ–°ï¼Œæ³¨é‡çš„ä»…ä»…æ˜¯æ•°æ®æ›´æ–°åçš„é€šçŸ¥ã€‚DependencyObject ç±»ç”¨äºç»™UIæ·»åŠ ä¾èµ–å’Œé™„åŠ å±æ€§ï¼Œæ³¨é‡æ•°æ®ä¸UIçš„å…³è”ã€‚å¦‚æœç®€å•çš„æ•°æ®é€šçŸ¥ï¼Œä¸¤è€…éƒ½å¯ä»¥å®ç°çš„ã€‚ æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹DependencyObjectç±»çš„å®šä¹‰ï¼Œæ¯”è¾ƒå¸¸ç”¨çš„æ˜¯GetValueå’ŒSetValueã€‚GetValueè¡¨ç¤ºè·å–æŸä¸€ä¸ªä¾èµ–å±æ€§çš„å€¼ï¼Œç”±äºä¸ç¡®å®šè¿™ä¸ªå€¼æ˜¯ä»€ä¹ˆç±»å‹ï¼Œæ‰€ä»¥å¾®è½¯æŠŠè¿™ä¸ªå‡½æ•°çš„è¿”å›å€¼è®¾è®¡æˆobjectã€‚SetValueè¡¨ç¤ºè®¾ç½®æŸä¸€ä¸ªä¾èµ–å±ç«¹çš„å€¼ï¼Œæ‰€æœ‰å®ƒæœ‰ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°dpè¡¨ç¤ºè¦è®¾ç½®çš„ä¾èµ–å±æ€§ï¼Œç¬¬äºŒä¸ªå‚æ•°valueè¡¨ç¤ºæ–°å€¼ã€‚ 1234567891011121314151617181920212223public class DependencyObject : DispatcherObject&#123; public DependencyObject(); public DependencyObjectType DependencyObjectType &#123; get; &#125; public bool IsSealed &#123; get; &#125; public void ClearValue(DependencyProperty dp); public void ClearValue(DependencyPropertyKey key); public void CoerceValue(DependencyProperty dp); public sealed override bool Equals(object obj); public sealed override int GetHashCode(); public LocalValueEnumerator GetLocalValueEnumerator(); public object GetValue(DependencyProperty dp); public void InvalidateProperty(DependencyProperty dp); public object ReadLocalValue(DependencyProperty dp); public void SetCurrentValue(DependencyProperty dp, object value); public void SetValue(DependencyProperty dp, object value); public void SetValue(DependencyPropertyKey key, object value); protected virtual void OnPropertyChanged(DependencyPropertyChangedEventArgs e); protected internal virtual bool ShouldSerializeProperty(DependencyProperty dp); &#125; Visualç±»Visualç±»æ˜¯WPFæ¡†æ¶ä¸­ç¬¬ä¸‰ä¸ªçˆ¶ç±»ï¼Œä¸»è¦æ˜¯ä¸º WPF ä¸­çš„å‘ˆç°æä¾›æ”¯æŒï¼Œå…¶ä¸­åŒ…æ‹¬å‘½ä¸­æµ‹è¯•ã€åæ ‡è½¬æ¢å’Œè¾¹ç•Œæ¡†è®¡ç®—ã€‚å®ƒä½äºç¨‹åºé›†:PresentationCore.dllåº“æ–‡ä»¶ä¸­ï¼Œå®ƒçš„å‘½åç©ºé—´:System.Windows.Mediaã€‚ å®˜æ–¹å¼•ç”¨ Visual ç±»æ˜¯æ´¾ç”Ÿæ¯ä¸ª FrameworkElement å¯¹è±¡çš„åŸºæœ¬æŠ½è±¡ã€‚ è¯¥ç±»è¿˜ç”¨ä½œåœ¨ WPF ä¸­ç¼–å†™æ–°æ§ä»¶çš„å…¥å£ç‚¹ï¼Œåœ¨ Win32 åº”ç”¨ç¨‹åºæ¨¡å‹ä¸­ï¼Œè¯¥ç±»åœ¨è®¸å¤šæ–¹é¢å¯è§†ä¸ºçª—å£å¥æŸ„ (HWND)ã€‚Visual å¯¹è±¡æ˜¯ä¸€ä¸ªæ ¸å¿ƒ WPF å¯¹è±¡ï¼Œå®ƒçš„ä¸»è¦ä½œç”¨æ˜¯æä¾›å‘ˆç°æ”¯æŒã€‚ ç”¨æˆ·ç•Œé¢æ§ä»¶å¦‚ Button å’Œ TextBoxï¼‰æ´¾ç”Ÿè‡ª Visual ç±»ï¼Œå¹¶ä½¿ç”¨è¯¥ç±»æ¥ä¿å­˜å®ƒä»¬çš„å‘ˆç°æ•°æ®ã€‚ Visual å¯¹è±¡ä¸ºä»¥ä¸‹é¡¹æä¾›æ”¯æŒï¼šè¾“å‡ºæ˜¾ç¤ºï¼šå‘ˆç°è§†è§‰å¯¹è±¡çš„æŒä¹…ã€åºåˆ—åŒ–çš„ç»˜å›¾å†…å®¹ã€‚è½¬æ¢ï¼šé’ˆå¯¹è§†è§‰å¯¹è±¡æ‰§è¡Œè½¬æ¢ã€‚å‰ªè£ï¼šä¸ºè§†è§‰å¯¹è±¡æä¾›å‰ªè£åŒºåŸŸæ”¯æŒã€‚å‘½ä¸­æµ‹è¯•ï¼šç¡®å®šåæ ‡æˆ–å‡ ä½•å½¢çŠ¶æ˜¯å¦åŒ…å«åœ¨è§†è§‰å¯¹è±¡çš„è¾¹ç•Œå†…ã€‚è¾¹æ¡†è®¡ç®—ï¼šç¡®å®šè§†è§‰å¯¹è±¡çš„è¾¹æ¡†ã€‚ æ¢å¥è¯è¯´ï¼Œå°†æ¥æˆ‘ä»¬è¦å­¦ä¹ çš„Buttonã€TextBoxã€CheckBoxã€Girdã€ListBoxç­‰æ‰€æœ‰æ§ä»¶éƒ½ç»§æ‰¿äº†Visualç±»ï¼Œæ§ä»¶åœ¨ç»˜åˆ¶åˆ°ç•Œé¢çš„è¿‡ç¨‹ä¸­ï¼Œæ¶‰åŠåˆ°è½¬æ¢ã€è£å‰ªã€è¾¹æ¡†è®¡ç®—ç­‰åŠŸèƒ½ï¼Œéƒ½æ˜¯ä½¿ç”¨äº†Visualçˆ¶ç±»çš„åŠŸèƒ½ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142public abstract class Visual : DependencyObject, IResource&#123; protected Visual(); protected DependencyObject VisualParent &#123; get; &#125; protected virtual int VisualChildrenCount &#123; get; &#125; protected internal DoubleCollection VisualYSnappingGuidelines &#123; get; protected set; &#125; protected internal Vector VisualOffset &#123; get; protected set; &#125; protected internal Geometry VisualClip &#123; get; protected set; &#125; protected internal Rect? VisualScrollableAreaClip &#123; get; protected set; &#125; protected internal CacheMode VisualCacheMode &#123; get; protected set; &#125; protected internal BitmapEffectInput VisualBitmapEffectInput &#123; get; protected set; &#125; protected internal BitmapEffect VisualBitmapEffect &#123; get; protected set; &#125; protected internal Effect VisualEffect &#123; get; protected set; &#125; protected internal Transform VisualTransform &#123; get; protected set; &#125; protected internal BitmapScalingMode VisualBitmapScalingMode &#123; get; protected set; &#125; protected internal DoubleCollection VisualXSnappingGuidelines &#123; get; protected set; &#125; protected internal double VisualOpacity &#123; get; protected set; &#125; protected internal EdgeMode VisualEdgeMode &#123; get; protected set; &#125; protected internal ClearTypeHint VisualClearTypeHint &#123; get; set; &#125; protected internal TextRenderingMode VisualTextRenderingMode &#123; get; set; &#125; protected internal TextHintingMode VisualTextHintingMode &#123; get; set; &#125; protected internal Brush VisualOpacityMask &#123; get; protected set; &#125; public DependencyObject FindCommonVisualAncestor(DependencyObject otherVisual); public bool IsAncestorOf(DependencyObject descendant); public bool IsDescendantOf(DependencyObject ancestor); public Point PointFromScreen(Point point); public Point PointToScreen(Point point); public GeneralTransform2DTo3D TransformToAncestor(Visual3D ancestor); public GeneralTransform TransformToAncestor(Visual ancestor); public GeneralTransform TransformToDescendant(Visual descendant); public GeneralTransform TransformToVisual(Visual visual); protected void AddVisualChild(Visual child); protected virtual Visual GetVisualChild(int index); protected virtual GeometryHitTestResult HitTestCore(GeometryHitTestParameters hitTestParameters); protected virtual HitTestResult HitTestCore(PointHitTestParameters hitTestParameters); protected virtual void OnDpiChanged(DpiScale oldDpi, DpiScale newDpi); protected void RemoveVisualChild(Visual child); protected internal virtual void OnVisualChildrenChanged(DependencyObject visualAdded, DependencyObject visualRemoved); protected internal virtual void OnVisualParentChanged(DependencyObject oldParent);&#125; ä»£ç åˆ†æ é¦–å…ˆï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼ŒVisualç±»ç»§æ‰¿äº†DependencyObjectç±»ã€‚å¦å¤–Visualç±»æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œä¸å¯ä»¥è¢«å®ä¾‹ã€‚Visualç±»æä¾›äº†ä¸€ç³»åˆ—çš„å±æ€§å’Œæ–¹æ³•ã€‚æˆ‘ä»¬åœ¨è¿™é‡Œæ¡ä¸€äº›æ¯”è¾ƒé‡è¦çš„åˆ†æä¸€ä¸‹ã€‚ VisualParentå±æ€§ï¼šè¿™ä¸ªå±æ€§è¡¨ç¤ºè·å–ä¸€ä¸ªå¯è§†åŒ–çˆ¶å¯¹è±¡ã€‚å› ä¸ºXAMLçš„ä»£ç ç»“æ„å°±æ˜¯ä¸€æ£µxmlæ ‘ï¼Œæ¯ä¸ªæ§ä»¶éƒ½å¯¹è±¡å‡ ä¹éƒ½æœ‰ä¸€ä¸ªå¯è§†åŒ–çˆ¶å¯¹è±¡ã€‚ VisualChildrenCountå±æ€§ï¼šè·å–å½“å‰å¯¹è±¡çš„å­å…ƒç´ æ•°é‡ã€‚ VisualOffsetå±æ€§ï¼šæŒ‡å½“å‰å¯è§†å¯¹è±¡çš„åç§»é‡å€¼ã€‚éœ€è¦æ³¨æ„çš„æ˜¯è¿™ä¸ªå±æ€§è¢«å£°æ˜æˆprotected internalã€‚å•¥æ„æ€å‘¢ï¼ŸVisualOffsetå±æ€§åªèƒ½ç”±åŒä¸€ä¸ªç¨‹åºé›†çš„å…¶å®ƒç±»è®¿é—®ï¼Œæˆ–Visualçš„å­ç±»è®¿é—®ã€‚ protected internal protected internal å…³é”®å­—ç»„åˆæ˜¯ä¸€ç§æˆå‘˜è®¿é—®ä¿®é¥°ç¬¦ï¼Œ è¡¨ç¤ºå—ä¿æŠ¤çš„å†…éƒ¨æˆå‘˜ã€‚ VisualOpacityå±æ€§ï¼šè·å–æˆ–è®¾ç½® Visual çš„ä¸é€æ˜åº¦ã€‚ VisualEffectå±æ€§ï¼šè·å–æˆ–è®¾ç½®è¦åº”ç”¨äº Visual çš„ä½å›¾æ•ˆæœã€‚ VisualTransformå±æ€§ï¼šè·å–æˆ–è®¾ç½® Transform çš„ Visual å€¼ã€‚ è¿™äº›å±æ€§éƒ½åªè¯»ä¸ºäº†è§£Visualç±»çš„åŸºç¡€ï¼Œå› ä¸ºè¿™äº›å±æ€§éƒ½è¢«è®¾è®¡æˆprotected internalï¼Œæˆ‘ä»¬çš„æ§ä»¶è™½ç„¶ç»§æ‰¿äº†è¿™ä¸ªVisualç±»ï¼Œä½†åœ¨å®é™…çš„ä½¿ç”¨è¿‡ç¨‹ä¸­æ˜¯æ„ŸçŸ¥ä¸åˆ°è¿™äº›å±æ€§çš„ï¼Œè‡ªç„¶ä¹Ÿä¸èƒ½å®æ“å®ƒä»¬ã€‚ æˆ‘ä»¬çœŸæ­£èƒ½åœ¨ç»§æ‰¿çš„æ§ä»¶ä¸­ç›´æ¥ä½¿ç”¨çš„æ˜¯Visualç±»ä¸­è¢«å£°æ˜ä¸ºpublicçš„æ–¹æ³•æˆå‘˜ã€‚å®ƒä»¬æœ‰ä»¥ä¸‹å‡ ä¸ªï¼š DependencyObject FindCommonVisualAncestor(DependencyObject otherVisual); &#x2F;&#x2F;è¿”å›ä¸¤ä¸ªå¯è§†å¯¹è±¡çš„å…¬å…±ä¸Šçº§ã€‚ bool IsAncestorOf(DependencyObject descendant); &#x2F;&#x2F;ç¡®å®šå¯è§†å¯¹è±¡æ˜¯å¦ä¸ºåä»£å¯è§†å¯¹è±¡çš„ä¸Šçº§ã€‚ bool IsDescendantOf(DependencyObject ancestor); &#x2F;&#x2F;ç¡®å®šå¯è§†å¯¹è±¡æ˜¯å¦ä¸ºä¸Šçº§å¯è§†å¯¹è±¡çš„åä»£ã€‚ Point PointFromScreen(Point point); &#x2F;&#x2F;å°†å±å¹•åæ ‡ä¸­çš„ Point è½¬æ¢ä¸ºè¡¨ç¤º Point çš„å½“å‰åæ ‡ç³»çš„ Visualã€‚ Point PointToScreen(Point point); &#x2F;&#x2F;å°†è¡¨ç¤º Point çš„å½“å‰åæ ‡ç³»çš„ Visual è½¬æ¢ä¸ºå±å¹•åæ ‡ä¸­çš„ Pointã€‚ GeneralTransform2DTo3D TransformToAncestor(Visual3D ancestor); &#x2F;&#x2F;è¿”å›ä¸€ä¸ªè½¬æ¢ï¼Œè¯¥è½¬æ¢å¯ç”¨äºå°† Visual ä¸­çš„åæ ‡è½¬æ¢ä¸ºå¯è§†å¯¹è±¡çš„æŒ‡å®š Visual3D ä¸Šçº§ã€‚ GeneralTransform TransformToAncestor(Visual ancestor); &#x2F;&#x2F;è¿”å›ä¸€ä¸ªè½¬æ¢ï¼Œè¯¥è½¬æ¢å¯ç”¨äºå°† Visual ä¸­çš„åæ ‡è½¬æ¢ä¸ºå¯è§†å¯¹è±¡çš„æŒ‡å®š Visual ä¸Šçº§ã€‚ GeneralTransform TransformToDescendant(Visual descendant); &#x2F;&#x2F;è¿”å›ä¸€ä¸ªè½¬æ¢ï¼Œè¯¥è½¬æ¢å¯ç”¨äºå°† Visual ä¸­çš„åæ ‡è½¬æ¢ä¸ºæŒ‡å®šçš„å¯è§†å¯¹è±¡åä»£ã€‚ GeneralTransform TransformToVisual(Visual visual); &#x2F;&#x2F;è¿”å›ä¸€ä¸ªè½¬æ¢ï¼Œè¯¥è½¬æ¢å¯ç”¨äºå°† Visual ä¸­çš„åæ ‡è½¬æ¢ä¸ºæŒ‡å®šçš„å¯è§†å¯¹è±¡ã€‚ ç”±æ­¤å¯è§ï¼ŒVisualç±»æ‰€åšçš„äº‹æƒ…åªä¸ºæ§ä»¶å‘ˆç°ç›¸å…³ï¼Œä½†è¿˜ä¸æ˜¯å»å‘ˆç°æ§ä»¶ï¼Œåªæ˜¯æä¾›å‘ˆç°çš„åŸºç¡€ã€‚é‚£ä¹ˆï¼Œè°åˆå»ç»§æ‰¿äº†Visualç±»ï¼Œæˆä¸ºç»§Visualç±»ä¹‹ååˆä¸€ä¸ªæ§ä»¶çš„åŸºç±»å‘¢ï¼Ÿç­”æ¡ˆæ˜¯UIElementç±»ã€‚ UIElementç±»UIElementç±»ç»§æ‰¿äº†Visualç±»ï¼Œåœ¨WPFæ¡†æ¶ä¸­æ’è¡Œè€å››ï¼ˆç¬¬4ä¸ªåŸºç±»ï¼‰ã€‚å®ƒä½äºç¨‹åºé›†:PresentationCore.dllä¹‹ä¸­ï¼Œå‘½åç©ºé—´:System.Windowsã€‚ è¿™ä¸ªåŸºç±»éå¸¸éå¸¸é‡è¦ï¼Œç†è§£äº†è¿™ä¸ªç±»ï¼Œå°±ç†è§£äº†WPFæ‰€æœ‰æ§ä»¶1&#x2F;3çš„çŸ¥è¯†ä¸ç”¨æ³•ã€‚æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹å®ƒçš„å…¨è²Œã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356357358359360361362363364365366367368369370371372373374375376377378379380381382383384385386387388389390391392393394395396397398399400401402403404public class UIElement : Visual, IAnimatable, IInputElement&#123;public static readonly RoutedEvent PreviewMouseDownEvent;public static readonly DependencyProperty AreAnyTouchesOverProperty;public static readonly DependencyProperty AreAnyTouchesDirectlyOverProperty;public static readonly DependencyProperty IsKeyboardFocusedProperty;public static readonly DependencyProperty IsStylusCaptureWithinProperty;public static readonly DependencyProperty IsStylusCapturedProperty;public static readonly DependencyProperty IsMouseCaptureWithinProperty;public static readonly DependencyProperty IsMouseCapturedProperty;public static readonly DependencyProperty IsKeyboardFocusWithinProperty;public static readonly DependencyProperty IsStylusOverProperty;public static readonly DependencyProperty IsMouseOverProperty;public static readonly DependencyProperty IsMouseDirectlyOverProperty;public static readonly RoutedEvent TouchLeaveEvent;public static readonly RoutedEvent TouchEnterEvent;public static readonly RoutedEvent LostTouchCaptureEvent;public static readonly RoutedEvent GotTouchCaptureEvent;public static readonly RoutedEvent TouchUpEvent;public static readonly RoutedEvent PreviewTouchUpEvent;public static readonly RoutedEvent TouchMoveEvent;public static readonly RoutedEvent PreviewTouchMoveEvent;public static readonly RoutedEvent TouchDownEvent;public static readonly RoutedEvent PreviewTouchDownEvent;public static readonly RoutedEvent DropEvent;public static readonly RoutedEvent PreviewDropEvent;public static readonly RoutedEvent DragLeaveEvent;public static readonly RoutedEvent PreviewDragLeaveEvent;public static readonly DependencyProperty AreAnyTouchesCapturedProperty;public static readonly DependencyProperty AreAnyTouchesCapturedWithinProperty;public static readonly DependencyProperty AllowDropProperty;public static readonly DependencyProperty RenderTransformProperty;public static readonly RoutedEvent ManipulationCompletedEvent;public static readonly RoutedEvent ManipulationBoundaryFeedbackEvent;public static readonly RoutedEvent ManipulationInertiaStartingEvent;public static readonly RoutedEvent ManipulationDeltaEvent;public static readonly RoutedEvent ManipulationStartedEvent;public static readonly RoutedEvent ManipulationStartingEvent;public static readonly DependencyProperty IsManipulationEnabledProperty;public static readonly DependencyProperty FocusableProperty;public static readonly DependencyProperty IsVisibleProperty;public static readonly DependencyProperty IsHitTestVisibleProperty;public static readonly DependencyProperty IsEnabledProperty;public static readonly DependencyProperty IsFocusedProperty;public static readonly RoutedEvent DragOverEvent;public static readonly RoutedEvent LostFocusEvent;public static readonly DependencyProperty SnapsToDevicePixelsProperty;public static readonly DependencyProperty ClipProperty;public static readonly DependencyProperty ClipToBoundsProperty;public static readonly DependencyProperty VisibilityProperty;public static readonly DependencyProperty UidProperty;public static readonly DependencyProperty CacheModeProperty;public static readonly DependencyProperty BitmapEffectInputProperty;public static readonly DependencyProperty EffectProperty;public static readonly DependencyProperty BitmapEffectProperty;public static readonly DependencyProperty OpacityMaskProperty;public static readonly DependencyProperty OpacityProperty;public static readonly DependencyProperty RenderTransformOriginProperty;public static readonly RoutedEvent GotFocusEvent;public static readonly RoutedEvent PreviewDragOverEvent;public static readonly DependencyProperty IsStylusDirectlyOverProperty;public static readonly RoutedEvent PreviewDragEnterEvent;public static readonly RoutedEvent StylusMoveEvent;public static readonly RoutedEvent PreviewStylusMoveEvent;public static readonly RoutedEvent StylusUpEvent;public static readonly RoutedEvent PreviewStylusUpEvent;public static readonly RoutedEvent StylusDownEvent;public static readonly RoutedEvent PreviewStylusDownEvent;public static readonly RoutedEvent QueryCursorEvent;public static readonly RoutedEvent LostMouseCaptureEvent;public static readonly RoutedEvent GotMouseCaptureEvent;public static readonly RoutedEvent MouseLeaveEvent;public static readonly RoutedEvent MouseEnterEvent;public static readonly RoutedEvent MouseWheelEvent;public static readonly RoutedEvent PreviewStylusInAirMoveEvent;public static readonly RoutedEvent PreviewMouseWheelEvent;public static readonly RoutedEvent PreviewMouseMoveEvent;public static readonly RoutedEvent MouseRightButtonUpEvent;public static readonly RoutedEvent PreviewMouseRightButtonUpEvent;public static readonly RoutedEvent MouseRightButtonDownEvent;public static readonly RoutedEvent PreviewMouseRightButtonDownEvent;public static readonly RoutedEvent DragEnterEvent;public static readonly RoutedEvent PreviewMouseLeftButtonUpEvent;public static readonly RoutedEvent MouseLeftButtonDownEvent;public static readonly RoutedEvent PreviewMouseLeftButtonDownEvent;public static readonly RoutedEvent MouseUpEvent;public static readonly RoutedEvent PreviewMouseUpEvent;public static readonly RoutedEvent MouseDownEvent;public static readonly RoutedEvent MouseMoveEvent;public static readonly RoutedEvent StylusInAirMoveEvent;public static readonly RoutedEvent MouseLeftButtonUpEvent;public static readonly RoutedEvent StylusLeaveEvent;public static readonly RoutedEvent StylusEnterEvent;public static readonly RoutedEvent GiveFeedbackEvent;public static readonly RoutedEvent PreviewGiveFeedbackEvent;public static readonly RoutedEvent QueryContinueDragEvent;public static readonly RoutedEvent TextInputEvent;public static readonly RoutedEvent PreviewTextInputEvent;public static readonly RoutedEvent LostKeyboardFocusEvent;public static readonly RoutedEvent PreviewLostKeyboardFocusEvent;public static readonly RoutedEvent GotKeyboardFocusEvent;public static readonly RoutedEvent PreviewGotKeyboardFocusEvent;public static readonly RoutedEvent KeyUpEvent;public static readonly RoutedEvent PreviewKeyUpEvent;public static readonly RoutedEvent KeyDownEvent;public static readonly RoutedEvent PreviewQueryContinueDragEvent;public static readonly RoutedEvent PreviewStylusButtonUpEvent;public static readonly RoutedEvent PreviewKeyDownEvent;public static readonly RoutedEvent StylusInRangeEvent;public static readonly RoutedEvent PreviewStylusInRangeEvent;public static readonly RoutedEvent StylusOutOfRangeEvent;public static readonly RoutedEvent PreviewStylusSystemGestureEvent;public static readonly RoutedEvent PreviewStylusOutOfRangeEvent;public static readonly RoutedEvent GotStylusCaptureEvent;public static readonly RoutedEvent LostStylusCaptureEvent;public static readonly RoutedEvent StylusButtonDownEvent;public static readonly RoutedEvent StylusButtonUpEvent;public static readonly RoutedEvent PreviewStylusButtonDownEvent;public static readonly RoutedEvent StylusSystemGestureEvent; public UIElement(); public string Uid &#123; get; set; &#125;public Visibility Visibility &#123; get; set; &#125;public bool ClipToBounds &#123; get; set; &#125;public Geometry Clip &#123; get; set; &#125;public bool SnapsToDevicePixels &#123; get; set; &#125;public bool IsFocused &#123; get; &#125;public bool IsEnabled &#123; get; set; &#125;public bool IsHitTestVisible &#123; get; set; &#125;public bool IsVisible &#123; get; &#125;public bool AreAnyTouchesCapturedWithin &#123; get; &#125;public int PersistId &#123; get; &#125;public bool IsManipulationEnabled &#123; get; set; &#125;public bool AreAnyTouchesOver &#123; get; &#125;public bool AreAnyTouchesDirectlyOver &#123; get; &#125;public bool AreAnyTouchesCaptured &#123; get; &#125;public IEnumerable&lt;TouchDevice&gt; TouchesCaptured &#123; get; &#125;public IEnumerable&lt;TouchDevice&gt; TouchesCapturedWithin &#123; get; &#125;public IEnumerable&lt;TouchDevice&gt; TouchesOver &#123; get; &#125;public CacheMode CacheMode &#123; get; set; &#125;public bool Focusable &#123; get; set; &#125;public BitmapEffectInput BitmapEffectInput &#123; get; set; &#125;public bool IsMouseDirectlyOver &#123; get; &#125;public BitmapEffect BitmapEffect &#123; get; set; &#125;public Size RenderSize &#123; get; set; &#125;public bool IsArrangeValid &#123; get; &#125;public bool IsMeasureValid &#123; get; &#125;public Size DesiredSize &#123; get; &#125;public bool AllowDrop &#123; get; set; &#125;public CommandBindingCollection CommandBindings &#123; get; &#125;public InputBindingCollection InputBindings &#123; get; &#125;public bool HasAnimatedProperties &#123; get; &#125;public bool IsMouseOver &#123; get; &#125;public Effect Effect &#123; get; set; &#125;public bool IsStylusOver &#123; get; &#125;public bool IsMouseCaptured &#123; get; &#125;public bool IsMouseCaptureWithin &#123; get; &#125;public bool IsStylusDirectlyOver &#123; get; &#125;public bool IsStylusCaptured &#123; get; &#125;public bool IsStylusCaptureWithin &#123; get; &#125;public bool IsKeyboardFocused &#123; get; &#125;public bool IsInputMethodEnabled &#123; get; &#125;public double Opacity &#123; get; set; &#125;public Brush OpacityMask &#123; get; set; &#125;public bool IsKeyboardFocusWithin &#123; get; &#125;public IEnumerable&lt;TouchDevice&gt; TouchesDirectlyOver &#123; get; &#125;public Point RenderTransformOrigin &#123; get; set; &#125;public Transform RenderTransform &#123; get; set; &#125;protected StylusPlugInCollection StylusPlugIns &#123; get; &#125;protected virtual bool IsEnabledCore &#123; get; &#125;protected internal virtual bool HasEffectiveKeyboardFocus &#123; get; &#125; public event KeyEventHandler KeyUp;public event EventHandler&lt;TouchEventArgs&gt; TouchMove;public event EventHandler&lt;TouchEventArgs&gt; PreviewTouchMove;public event EventHandler&lt;TouchEventArgs&gt; TouchDown;public event EventHandler&lt;TouchEventArgs&gt; PreviewTouchDown;public event DragEventHandler Drop;public event DragEventHandler PreviewDrop;public event DragEventHandler DragLeave;public event DragEventHandler PreviewDragLeave;public event DragEventHandler DragOver;public event DragEventHandler PreviewDragOver;public event DragEventHandler DragEnter;public event DragEventHandler PreviewDragEnter;public event GiveFeedbackEventHandler GiveFeedback;public event GiveFeedbackEventHandler PreviewGiveFeedback;public event QueryContinueDragEventHandler QueryContinueDrag;public event QueryContinueDragEventHandler PreviewQueryContinueDrag;public event TextCompositionEventHandler TextInput;public event EventHandler&lt;TouchEventArgs&gt; PreviewTouchUp;public event EventHandler&lt;TouchEventArgs&gt; TouchUp;public event EventHandler&lt;TouchEventArgs&gt; LostTouchCapture;public event TextCompositionEventHandler PreviewTextInput;public event EventHandler&lt;ManipulationInertiaStartingEventArgs&gt; ManipulationInertiaStarting;public event EventHandler&lt;ManipulationDeltaEventArgs&gt; ManipulationDelta;public event EventHandler&lt;ManipulationStartedEventArgs&gt; ManipulationStarted;public event EventHandler&lt;ManipulationStartingEventArgs&gt; ManipulationStarting;public event DependencyPropertyChangedEventHandler FocusableChanged;public event DependencyPropertyChangedEventHandler IsVisibleChanged;public event DependencyPropertyChangedEventHandler IsHitTestVisibleChanged;public event DependencyPropertyChangedEventHandler IsEnabledChanged;public event RoutedEventHandler LostFocus;public event EventHandler&lt;TouchEventArgs&gt; GotTouchCapture;public event RoutedEventHandler GotFocus;public event DependencyPropertyChangedEventHandler IsKeyboardFocusedChanged;public event DependencyPropertyChangedEventHandler IsStylusCaptureWithinChanged;public event DependencyPropertyChangedEventHandler IsStylusDirectlyOverChanged;public event DependencyPropertyChangedEventHandler IsMouseCaptureWithinChanged;public event DependencyPropertyChangedEventHandler IsMouseCapturedChanged;public event DependencyPropertyChangedEventHandler IsKeyboardFocusWithinChanged;public event DependencyPropertyChangedEventHandler IsMouseDirectlyOverChanged;public event EventHandler&lt;TouchEventArgs&gt; TouchLeave;public event EventHandler&lt;TouchEventArgs&gt; TouchEnter;public event EventHandler LayoutUpdated;public event KeyboardFocusChangedEventHandler LostKeyboardFocus;public event KeyboardFocusChangedEventHandler PreviewLostKeyboardFocus;public event KeyboardFocusChangedEventHandler GotKeyboardFocus;public event StylusEventHandler PreviewStylusMove;public event StylusEventHandler StylusMove;public event StylusEventHandler PreviewStylusInAirMove;public event StylusEventHandler StylusInAirMove;public event StylusEventHandler StylusEnter;public event StylusEventHandler StylusLeave;public event StylusEventHandler PreviewStylusInRange;public event StylusEventHandler StylusInRange;public event StylusEventHandler PreviewStylusOutOfRange;public event StylusEventHandler StylusOutOfRange;public event StylusSystemGestureEventHandler PreviewStylusSystemGesture;public event StylusSystemGestureEventHandler StylusSystemGesture;public event StylusEventHandler GotStylusCapture;public event StylusEventHandler LostStylusCapture;public event StylusButtonEventHandler StylusButtonDown;public event StylusButtonEventHandler StylusButtonUp;public event StylusButtonEventHandler PreviewStylusButtonDown;public event StylusButtonEventHandler PreviewStylusButtonUp;public event KeyEventHandler PreviewKeyDown;public event KeyEventHandler KeyDown;public event KeyEventHandler PreviewKeyUp;public event StylusEventHandler StylusUp;public event KeyboardFocusChangedEventHandler PreviewGotKeyboardFocus;public event StylusEventHandler PreviewStylusUp;public event StylusDownEventHandler PreviewStylusDown;public event MouseButtonEventHandler PreviewMouseDown;public event MouseButtonEventHandler MouseDown;public event MouseButtonEventHandler PreviewMouseUp;public event MouseButtonEventHandler MouseUp;public event MouseButtonEventHandler PreviewMouseLeftButtonDown;public event MouseButtonEventHandler MouseLeftButtonDown;public event MouseButtonEventHandler PreviewMouseLeftButtonUp;public event MouseButtonEventHandler MouseLeftButtonUp;public event MouseButtonEventHandler PreviewMouseRightButtonDown;public event MouseButtonEventHandler MouseRightButtonDown;public event MouseButtonEventHandler PreviewMouseRightButtonUp;public event MouseButtonEventHandler MouseRightButtonUp;public event MouseEventHandler PreviewMouseMove;public event MouseEventHandler MouseMove;public event MouseWheelEventHandler PreviewMouseWheel;public event MouseWheelEventHandler MouseWheel;public event MouseEventHandler MouseEnter;public event MouseEventHandler MouseLeave;public event MouseEventHandler GotMouseCapture;public event MouseEventHandler LostMouseCapture;public event QueryCursorEventHandler QueryCursor;public event StylusDownEventHandler StylusDown;public event DependencyPropertyChangedEventHandler IsStylusCapturedChanged;public event EventHandler&lt;ManipulationCompletedEventArgs&gt; ManipulationCompleted;public event EventHandler&lt;ManipulationBoundaryFeedbackEventArgs&gt; ManipulationBoundaryFeedback; public void AddHandler(RoutedEvent routedEvent, Delegate handler);public void AddHandler(RoutedEvent routedEvent, Delegate handler, bool handledEventsToo);public void AddToEventRoute(EventRoute route, RoutedEventArgs e);public void ApplyAnimationClock(DependencyProperty dp, AnimationClock clock, HandoffBehavior handoffBehavior);public void ApplyAnimationClock(DependencyProperty dp, AnimationClock clock);public void Arrange(Rect finalRect);public void BeginAnimation(DependencyProperty dp, AnimationTimeline animation, HandoffBehavior handoffBehavior);public void BeginAnimation(DependencyProperty dp, AnimationTimeline animation);public bool CaptureMouse();public bool CaptureStylus();public bool CaptureTouch(TouchDevice touchDevice);public bool Focus();public object GetAnimationBaseValue(DependencyProperty dp);public IInputElement InputHitTest(Point point);public void InvalidateArrange();public void InvalidateMeasure();public void InvalidateVisual();public void Measure(Size availableSize);public virtual bool MoveFocus(TraversalRequest request);public virtual DependencyObject PredictFocus(FocusNavigationDirection direction);public void RaiseEvent(RoutedEventArgs e);public void ReleaseAllTouchCaptures();public void ReleaseMouseCapture();public void ReleaseStylusCapture();public bool ReleaseTouchCapture(TouchDevice touchDevice);public void RemoveHandler(RoutedEvent routedEvent, Delegate handler);public bool ShouldSerializeCommandBindings();public bool ShouldSerializeInputBindings();public Point TranslatePoint(Point point, UIElement relativeTo);public void UpdateLayout();protected virtual void ArrangeCore(Rect finalRect);protected virtual Geometry GetLayoutClip(Size layoutSlotSize);protected override HitTestResult HitTestCore(PointHitTestParameters hitTestParameters);protected override GeometryHitTestResult HitTestCore(GeometryHitTestParameters hitTestParameters);protected virtual Size MeasureCore(Size availableSize);protected virtual void OnAccessKey(AccessKeyEventArgs e);protected virtual void OnChildDesiredSizeChanged(UIElement child);protected virtual AutomationPeer OnCreateAutomationPeer();protected virtual void OnDragEnter(DragEventArgs e);protected virtual void OnDragLeave(DragEventArgs e);protected virtual void OnDragOver(DragEventArgs e);protected virtual void OnDrop(DragEventArgs e);protected virtual void OnGiveFeedback(GiveFeedbackEventArgs e);protected virtual void OnGotFocus(RoutedEventArgs e);protected virtual void OnGotKeyboardFocus(KeyboardFocusChangedEventArgs e);protected virtual void OnGotMouseCapture(MouseEventArgs e);protected virtual void OnGotStylusCapture(StylusEventArgs e);protected virtual void OnGotTouchCapture(TouchEventArgs e);protected virtual void OnIsKeyboardFocusedChanged(DependencyPropertyChangedEventArgs e);protected virtual void OnIsKeyboardFocusWithinChanged(DependencyPropertyChangedEventArgs e);protected virtual void OnIsMouseCapturedChanged(DependencyPropertyChangedEventArgs e);protected virtual void OnIsMouseCaptureWithinChanged(DependencyPropertyChangedEventArgs e);protected virtual void OnIsMouseDirectlyOverChanged(DependencyPropertyChangedEventArgs e);protected virtual void OnIsStylusCapturedChanged(DependencyPropertyChangedEventArgs e);protected virtual void OnIsStylusCaptureWithinChanged(DependencyPropertyChangedEventArgs e);protected virtual void OnIsStylusDirectlyOverChanged(DependencyPropertyChangedEventArgs e);protected virtual void OnKeyDown(KeyEventArgs e);protected virtual void OnKeyUp(KeyEventArgs e);protected virtual void OnLostFocus(RoutedEventArgs e);protected virtual void OnLostKeyboardFocus(KeyboardFocusChangedEventArgs e);protected virtual void OnLostMouseCapture(MouseEventArgs e);protected virtual void OnLostStylusCapture(StylusEventArgs e);protected virtual void OnLostTouchCapture(TouchEventArgs e);protected virtual void OnManipulationBoundaryFeedback(ManipulationBoundaryFeedbackEventArgs e);protected virtual void OnManipulationCompleted(ManipulationCompletedEventArgs e);protected virtual void OnManipulationDelta(ManipulationDeltaEventArgs e);protected virtual void OnManipulationInertiaStarting(ManipulationInertiaStartingEventArgs e);protected virtual void OnManipulationStarted(ManipulationStartedEventArgs e);protected virtual void OnManipulationStarting(ManipulationStartingEventArgs e);protected virtual void OnMouseDown(MouseButtonEventArgs e);protected virtual void OnMouseEnter(MouseEventArgs e);protected virtual void OnMouseLeave(MouseEventArgs e);protected virtual void OnMouseLeftButtonDown(MouseButtonEventArgs e);protected virtual void OnMouseLeftButtonUp(MouseButtonEventArgs e);protected virtual void OnMouseMove(MouseEventArgs e);protected virtual void OnMouseRightButtonDown(MouseButtonEventArgs e);protected virtual void OnMouseRightButtonUp(MouseButtonEventArgs e);protected virtual void OnMouseUp(MouseButtonEventArgs e);protected virtual void OnMouseWheel(MouseWheelEventArgs e);protected virtual void OnPreviewDragEnter(DragEventArgs e);protected virtual void OnPreviewDragLeave(DragEventArgs e);protected virtual void OnPreviewDragOver(DragEventArgs e);protected virtual void OnPreviewDrop(DragEventArgs e);protected virtual void OnPreviewGiveFeedback(GiveFeedbackEventArgs e);protected virtual void OnPreviewGotKeyboardFocus(KeyboardFocusChangedEventArgs e);protected virtual void OnPreviewKeyDown(KeyEventArgs e);protected virtual void OnPreviewKeyUp(KeyEventArgs e);protected virtual void OnPreviewLostKeyboardFocus(KeyboardFocusChangedEventArgs e);protected virtual void OnPreviewMouseDown(MouseButtonEventArgs e);protected virtual void OnPreviewMouseLeftButtonDown(MouseButtonEventArgs e);protected virtual void OnPreviewMouseLeftButtonUp(MouseButtonEventArgs e);protected virtual void OnPreviewMouseMove(MouseEventArgs e);protected virtual void OnPreviewMouseRightButtonDown(MouseButtonEventArgs e);protected virtual void OnPreviewMouseRightButtonUp(MouseButtonEventArgs e);protected virtual void OnPreviewMouseUp(MouseButtonEventArgs e);protected virtual void OnPreviewMouseWheel(MouseWheelEventArgs e);protected virtual void OnPreviewQueryContinueDrag(QueryContinueDragEventArgs e);protected virtual void OnPreviewStylusButtonDown(StylusButtonEventArgs e);protected virtual void OnPreviewStylusButtonUp(StylusButtonEventArgs e);protected virtual void OnPreviewStylusDown(StylusDownEventArgs e);protected virtual void OnPreviewStylusInAirMove(StylusEventArgs e);protected virtual void OnPreviewStylusInRange(StylusEventArgs e);protected virtual void OnPreviewStylusMove(StylusEventArgs e);protected virtual void OnPreviewStylusOutOfRange(StylusEventArgs e);protected virtual void OnPreviewStylusSystemGesture(StylusSystemGestureEventArgs e);protected virtual void OnPreviewStylusUp(StylusEventArgs e);protected virtual void OnPreviewTextInput(TextCompositionEventArgs e);protected virtual void OnPreviewTouchDown(TouchEventArgs e);protected virtual void OnPreviewTouchMove(TouchEventArgs e);protected virtual void OnPreviewTouchUp(TouchEventArgs e);protected virtual void OnQueryContinueDrag(QueryContinueDragEventArgs e);protected virtual void OnQueryCursor(QueryCursorEventArgs e);protected virtual void OnRender(DrawingContext drawingContext);protected virtual void OnStylusButtonDown(StylusButtonEventArgs e);protected virtual void OnStylusButtonUp(StylusButtonEventArgs e);protected virtual void OnStylusDown(StylusDownEventArgs e);protected virtual void OnStylusEnter(StylusEventArgs e);protected virtual void OnStylusInAirMove(StylusEventArgs e);protected virtual void OnStylusInRange(StylusEventArgs e);protected virtual void OnStylusLeave(StylusEventArgs e);protected virtual void OnStylusMove(StylusEventArgs e);protected virtual void OnStylusOutOfRange(StylusEventArgs e);protected virtual void OnStylusSystemGesture(StylusSystemGestureEventArgs e);protected virtual void OnStylusUp(StylusEventArgs e);protected virtual void OnTextInput(TextCompositionEventArgs e);protected virtual void OnTouchDown(TouchEventArgs e);protected virtual void OnTouchEnter(TouchEventArgs e);protected virtual void OnTouchLeave(TouchEventArgs e);protected virtual void OnTouchMove(TouchEventArgs e);protected virtual void OnTouchUp(TouchEventArgs e);protected internal virtual DependencyObject GetUIParentCore();protected internal virtual void OnRenderSizeChanged(SizeChangedInfo info);protected internal override void OnVisualParentChanged(DependencyObject oldParent);&#125; UIElementç±»ä»£ç åˆ†æ ç¬¬ä¸€éƒ¨åˆ† è·¯ç”±äº‹ä»¶ UIElementåŸºç±»å®šä¹‰äº†å¤§é‡çš„è·¯ç”±äº‹ä»¶ã€‚ä»€ä¹ˆæ˜¯è·¯ç”±äº‹ä»¶ï¼Ÿè·¯ç”±äº‹ä»¶å’Œxamlçš„å¯è§†åŒ–æ ‘æ¦‚å¿µç›¸å…³ï¼Œæ§ä»¶çš„äº‹ä»¶è¢«è§¦å‘åï¼Œä¼šæ²¿ç€è¿™æ£µæ ‘å¹¿æ’­ï¼Œæœ‰ä¸¤ä¸ªæ–¹å‘ï¼Œè¦ä¹ˆå¾€æ ‘çš„æ ¹éƒ¨å¹¿æ’­ï¼Œè¦ä¹ˆå¾€æ ‘çš„æå¶å¹¿æ’­ï¼Œå¦‚æœä¸å¹¿æ’­å°±æ˜¯ç›´æ¥äº‹ä»¶ã€‚ æ‰€ä»¥ï¼Œè·¯ç”±äº‹ä»¶åˆ†ä¸ºå†’æ³¡äº‹ä»¶å’Œéš§é“äº‹ä»¶ï¼Œå†’æ³¡ï¼Œæ˜¯ä»è§¦å‘æºä¸ºå‡ºå‘ç‚¹ï¼Œä¾æ¬¡ä¼ é€’åˆ°çˆ¶èŠ‚ç‚¹ï¼Œç›´åˆ°æœ€åçš„æ ¹èŠ‚ç‚¹ã€‚éš§é“äº‹ä»¶æ˜¯ä¸ç®¡è°æ˜¯è§¦å‘æºï¼Œéƒ½æ˜¯ä»æ ¹èŠ‚ç‚¹è§¦å‘ï¼Œåˆ°å­èŠ‚ç‚¹ï¼Œç›´åˆ°è§¦å‘èŠ‚ç‚¹ã€‚ ä»ç©ºé—´ä¸Šæ¥è¯´ï¼Œå†’æ³¡äº‹ä»¶å’Œéš§é“äº‹ä»¶æ˜¯æˆå¯¹å‡ºç°çš„ã€‚ä»æ—¶é—´æ¥è¯´ï¼Œéƒ½æ˜¯å…ˆè§¦å‘éš§é“äº‹ä»¶ï¼Œç„¶åæ˜¯å†’æ³¡äº‹ä»¶ã€‚ä»å‘½åæ¥è¯´ï¼Œéš§é“äº‹ä»¶éƒ½æ˜¯ä»¥Previewå¼€å¤´çš„äº‹ä»¶ã€‚ æ ¹æ®å‘½åè§„åˆ™ï¼Œæˆ‘ä»¬å¯ä»¥å¤§è‡´çŒœæµ‹å‡ºä¸€ä¸ªç»“æœï¼Œå¸¦Keyçš„åŸºæœ¬éƒ½æ˜¯ä¸é”®ç›˜ç›¸å…³çš„äº‹ä»¶ï¼ˆå¦‚æŒ‰ä¸‹é”®ä½ã€æŠ¬èµ·é”®ä½ï¼‰ï¼Œå¸¦Mouseçš„åŸºæœ¬éƒ½æ˜¯ä¸é¼ æ ‡ç›¸å…³çš„äº‹ä»¶ï¼ˆå¦‚å·¦é”®å•å‡»ã€åŒå‡»ï¼‰ï¼Œå¸¦Stylusçš„åŸºæœ¬éƒ½æ˜¯ä¸è§¦æ‘¸ç›¸å…³çš„äº‹ä»¶ï¼Œå…·ä½“ç”¨åˆ°å“ªä¸€ç±»å‹çš„äº‹ä»¶ï¼Œå†è¯¦ç»†æŸ¥é˜…ä¸€ä¸‹ç›¸å…³è¯´æ˜æ–‡æ¡£å³å¯ã€‚ é‡ç‚¹ï¼šå…³äºè¿™äº›äº‹ä»¶çš„å›è°ƒå‡½æ•°ï¼Œå³ä»¥Onå¼€å¤´çš„æ–¹æ³•æˆå‘˜ï¼Œéƒ½è¢«å£°æ˜æˆäº†protected virtualï¼Œæ„æ€æ˜¯ä»–ä»¬éƒ½å¯ä»¥è¢«é‡è½½ï¼Œè¿™ä½¿å¾—æˆ‘ä»¬åœ¨å¼€å‘ä¸šåŠ¡æ—¶æ›´åŠ æ–¹ä¾¿ã€‚ ç¬¬äºŒéƒ¨åˆ† ä¾èµ–å±æ€§ UIElementåŸºç±»è¿˜å®šä¹‰äº†å¤§é‡çš„ä¾èµ–å±æ€§ã€‚å‰é¢çš„ç« èŠ‚ä¸­ï¼Œåœ¨DependencyObjectç±»ä¸­æˆ‘ä»¬ç®€å•æåˆ°è¿‡ä¾èµ–å±æ€§ã€‚åœ¨è¿™é‡Œæˆ‘ä»¬ä»¥UIElementåŸºç±»çš„Visibilityå±æ€§ä¸ºä¾‹ã€‚ 123public Visibility Visibility &#123; get; set; &#125; public static readonly DependencyProperty VisibilityProperty; ä¸Šé¢æœ‰ä¸¤ä¸ªæˆå‘˜ï¼ŒVisibilityæ˜¯æ™®é€šçš„å±æ€§æˆå‘˜ï¼ŒVisibilityPropertyæ˜¯WPFçš„ä¾èµ–å±æ€§æˆå‘˜ï¼Œä»¥Propertyç»“å°¾çš„å­—æ ·ä½œä¸ºWPFçš„ä¾èµ–å±æ€§å‘½åè§„åˆ™ã€‚è€Œè¿™ä¸¤ä¸ªæˆå‘˜åˆèµ·æ¥ï¼Œæ‰èƒ½è¢«ç§°ä¸ºä¸€ä¸ªå®Œæ•´çš„ä¾èµ–å±æ€§ã€‚è¿™ä¸ªVisibility å±æ€§è¡¨ç¤ºè®¾ç½®æˆ–è·å–æ§ä»¶çš„å¯è§æ€§ã€‚å½“æˆ‘ä»¬è¦è®¾ç½®æ§ä»¶çš„å¯è§æ€§æ—¶ï¼Œåªéœ€è¦å¦‚ä¸‹è®¾ç½®å³å¯ã€‚ 12345&lt;TextBlock Text=&quot;WPFä¸­æ–‡ç½‘&quot; Visibility=&quot;Visible&quot; FontSize=&quot;48&quot; HorizontalAlignment=&quot;Center&quot; VerticalAlignment=&quot;Center&quot;/&gt; Visibilityå®é™…ä¸Šæ˜¯ä¸€ä¸ªæšä¸¾ï¼Œå®ƒåŒ…å«3ä¸ªå€¼ï¼Œåˆ†åˆ«æ˜¯Visibleã€Hiddenã€Collapsedã€‚å…¶å«ä¹‰åˆ†åˆ«æ˜¯æ˜¾ç¤ºã€éšè—ã€å½»åº•éšè—ï¼ˆä¸å å¸ƒå±€ä½ç½®ï¼‰ã€‚ Visibility çŠ¶æ€ä¼šå½±å“è¯¥å…ƒç´ çš„æ‰€æœ‰è¾“å…¥å¤„ç†ã€‚ ä¸å¯è§çš„å…ƒç´ ä¸ä¼šå‚ä¸å‘½ä¸­æµ‹è¯•ï¼Œä¹Ÿä¸ä¼šæ¥æ”¶è¾“å…¥äº‹ä»¶ï¼Œå³ä½¿é¼ æ ‡ä½äºå…ƒç´ å¯è§æ—¶æ‰€åœ¨çš„è¾¹ç•Œä¸Šä¹Ÿæ˜¯å¦‚æ­¤ã€‚ ä½†æ˜¯åœ¨è¿™ä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬åªæ˜¯æ¢è®¨UIElementåŸºç±»æä¾›äº†å“ªäº›æ–¹é¢çš„å±æ€§ï¼Œå¹¶ä¸è¯¦ç»†æ¢è®¨ä¾èµ–å±æ€§ï¼Œæ‰€ä»¥ä¸‹é¢æˆ‘ä»¬æŠŠç›®å…‰èšç„¦åˆ°UIElementåŸºç±»çš„å¸¸ç”¨å±æ€§ä¸Šã€‚å¦å¤–ç”±äºWPFä¸­å‡ ä¹æ‰€æœ‰æ§ä»¶éƒ½ç»§æ‰¿äº†è¿™ä¸ªåŸºç±»ï¼Œæ„æ€å°±æ˜¯è¯´æ‰€æœ‰çš„æ§ä»¶éƒ½æœ‰è¿™äº›å±æ€§å¯ä»¥ä½¿ç”¨ã€‚ä¸‹é¢æˆ‘åœ¨æè¿°çš„æ—¶å€™å°†é‡‡ç”¨â€œæ§ä»¶â€ä¸¤å­—æ¥è§£é‡Šä¸€äº›æŠ€æœ¯ç»†èŠ‚ã€‚ Uidå±æ€§:è·å–æˆ–è®¾ç½®æ§ä»¶çš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œåƒäººä»¬çš„èº«ä»½è¯ä¸€æ ·ã€‚è¿™ä¸ªå€¼é»˜è®¤æ˜¯string.Emptyã€‚ Visibilityå±æ€§ï¼šè·å–æˆ–è®¾ç½®æ§ä»¶çš„å¯è§æ€§ã€‚é»˜è®¤æ˜¯Visibleã€‚ ClipToBoundså±æ€§ï¼šå¦‚æœè¯¥å€¼ä¸ºtrueï¼Œè¡¨ç¤ºè¿›è¡Œè£å‰ªï¼Œä»¥é€‚é…å®ƒçš„çˆ¶æ§ä»¶ã€‚æ¯”å¦‚æœ‰æ—¶å€™æˆ‘ä»¬å¤–é¢æœ‰ä¸€ä¸ªPanelï¼Œé‡Œé¢çš„æ§ä»¶å°ºå¯¸å¤ªå¤§ï¼ŒåŠ¿å¿…ä¼šâ€œæ’‘ç ´â€å¤–é¢çš„çˆ¶æ§ä»¶ï¼Œä¸ºäº†å¸ƒå±€ç¾è§‚ï¼Œåªå¥½å‰Šè¶³é€‚å±¥ã€‚ Clipå±æ€§ï¼šç”¨äºå‰ªè£åŒºåŸŸå¤§å°çš„å‡ ä½•å›¾å½¢ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸ªå±æ€§å’Œä¸Šé¢çš„ClipToBoundså±æ€§æ˜¯æœ‰åŒºåˆ«çš„ã€‚ClipToBoundsæ˜¯è£å‰ªæ§ä»¶è‡ªèº«ï¼ŒClipæ˜¯è£å‰ªæ§ä»¶é‡Œé¢çš„å†…å®¹ã€‚æ¯”å¦‚Imageå›¾åƒæ§ä»¶ï¼Œæˆ‘ä»¬åœ¨æ˜¾ç¤ºä¸€å¼ å›¾æ—¶ï¼Œå°±å¯ä»¥è¿ç”¨Clipè¿›è¡Œè£å‰ªåæ˜¾ç¤ºï¼Œé€šå¸¸åœ¨æ˜¾ç¤ºç”¨æˆ·å¤´åƒæ—¶è£å‰ªæˆåœ†å½¢æ—¶ä½¿ç”¨ã€‚å¦‚ä¸‹æ‰€ç¤º 12345678910&lt;Image Source=&quot;sampleImages\\Waterlilies.jpg&quot; Width=&quot;200&quot; Height=&quot;150&quot; HorizontalAlignment=&quot;Left&quot;&gt; &lt;Image.Clip&gt; &lt;EllipseGeometry RadiusX=&quot;100&quot; RadiusY=&quot;75&quot; Center=&quot;100,75&quot;/&gt; &lt;/Image.Clip&gt;&lt;/Image&gt; SnapsToDevicePixelså±æ€§ï¼šå¦‚æœè¯¥å€¼ä¸ºtrueï¼Œè¡¨ç¤ºæ§ä»¶çš„å‘ˆç°æ˜¯å¦åº”ä½¿ç”¨ç‰¹å®šäºè®¾å¤‡çš„åƒç´ è®¾ç½®ã€‚æ„æ€æ˜¯å¼€å¯åå¯ä»¥æœ€å¤§é™åº¦çš„é˜²é”¯é½¿æ•ˆæœï¼Œé»˜è®¤ä¸ºfalseã€‚ IsFocusedå±æ€§ï¼šè¿™æ˜¯ä¸€ä¸ªåªè¯»å±æ€§ï¼Œè¡¨ç¤ºå½“å‰æ§ä»¶æ˜¯å¦æœ‰ç„¦ç‚¹ã€‚ IsEnabledå±æ€§ï¼šå¦‚æœè¯¥å€¼ä¸ºtrueï¼Œè¡¨ç¤ºç¦ç”¨æ§ä»¶ï¼Œåä¹‹å¯ç”¨æ§ä»¶ã€‚ IsHitTestVisibleå±æ€§ï¼šè·å–æˆ–è®¾ç½®ä¸€ä¸ªå€¼ï¼Œè¯¥å€¼å£°æ˜æ˜¯å¦å¯ä»¥è¿”å›æ­¤å…ƒç´ ä½œä¸ºå…¶å‘ˆç°å†…å®¹çš„æŸäº›éƒ¨åˆ†çš„ç‚¹å‡»æµ‹è¯•ç»“æœã€‚ IsVisibleå±æ€§ï¼šè¿™æ˜¯ä¸€ä¸ªåªè¯»å±æ€§ï¼Œè¡¨ç¤ºå½“å‰æ§ä»¶æ˜¯å¦æ˜¾ç¤ºã€‚ Focusableå±æ€§ï¼šå¦‚æœè¯¥å€¼ä¸ºtrueï¼Œè¡¨ç¤ºæ§ä»¶å¯ä»¥å¾—åˆ°ç„¦ç‚¹ï¼Œå¤§éƒ¨ä»½å†…å®¹æ§ä»¶éƒ½é»˜è®¤å¯ä»¥è·å¾—ç„¦ç‚¹ã€‚ IsKeyboardFocusedå±æ€§ï¼šè¡¨ç¤ºè¯¥æ§ä»¶æ˜¯å¦å…·æœ‰é”®ç›˜ç„¦ç‚¹ã€‚ IsMouseOverå±æ€§ï¼šè¡¨ç¤ºé¼ æ ‡æ˜¯å¦åœ¨æ§ä»¶ä¸Šé¢ã€‚é€šå¸¸åœ¨è®¾è®¡æ§ä»¶çš„æ ·å¼ï¼ˆStyleï¼‰æ—¶ä¼šç”¨åˆ°ã€‚ IsStylusOverå±æ€§ï¼šè¡¨ç¤ºè§¦ç¬”æŒ‡é’ˆæ˜¯å¦åœ¨æ§ä»¶çš„ä¸Šæ–¹ã€‚ IsSealedå±æ€§ï¼šè¡¨ç¤ºå½“å‰ç±»å‹æ˜¯å¦ä¸ºåªè¯»ç±»ã€‚ Opacityå±æ€§ï¼šè®¾ç½®æ§ä»¶çš„é€æ˜åº¦ï¼Œå–å€¼èŒƒå›´æ˜¯0-1ä¹‹é—´çš„doubleå€¼ã€‚ OpacityMaskå±æ€§ï¼šè®¾ç½®ä¸€ä¸ªç”»ç¬”ï¼Œä½œä¸ºæ§ä»¶çš„è’™æ¿ã€‚æ¯”å¦‚æˆ‘ä»¬ç»™ä¸€å¼ å›¾ç‰‡è®¾ç½®ä¸€ä¸ªæ©ç ï¼Œå°±å¯ä»¥ä½¿ç”¨ImageBrushè¿™ç§å›¾ç‰‡ç”»ç¬”æ¥å®ç°ã€‚ 12345&lt;Image Height=&quot;150&quot; Width=&quot;200&quot; Source=&quot;sampleImages/Waterlilies.jpg&quot; &gt; &lt;Image.OpacityMask&gt; &lt;ImageBrush ImageSource=&quot;sampleImages/tornedges.png&quot;/&gt; &lt;/Image.OpacityMask&gt;&lt;/Image&gt; AllowDropå±æ€§ï¼šè¡¨ç¤ºæ§ä»¶æ˜¯å¦å…è®¸æ‹–æ‹½æ“ä½œã€‚ RenderTransformå±æ€§ï¼šï¼ˆéå¸¸é‡è¦ï¼‰å¦‚æœè¦è®¾ç½®æ§ä»¶çš„ç§»åŠ¨ã€ç¼©æ”¾ã€æ—‹è½¬ï¼Œéœ€è¦è¿™æ­¤å±æ€§è¿›è¡Œè®¾ç½®ã€‚ UIElementç±»æ€»ç»“ é€šè¿‡ä¸Šè¿°çš„ä»£ç åˆ†æï¼Œæˆ‘ä»¬å¤§è‡´å¯ä»¥å¾—å‡ºä»¥ä¸‹ç»“è®ºï¼ŒUIElementåŸºç±»ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ç³»åˆ—çš„é¼ æ ‡ã€é”®ç›˜å’Œè§¦æ‘¸äº‹ä»¶ï¼Œå¹¶æä¾›äº†ä¸€äº›å¸¸ç”¨çš„ä¾èµ–å±æ€§ã€‚å®ƒå¯ä»¥å‘ˆç°ç»§æ‰¿å®ƒçš„æ‰€æœ‰æ§ä»¶ï¼Œä¸ºæ§ä»¶å¸ƒå±€æ—¶è°ƒæ•´ä½ç½®å’Œå¤§å°ï¼Œå“åº”ç”¨æˆ·çš„è¾“å…¥ï¼Œå¼•å‘ä¸€ç³»åˆ—çš„è·¯ç”±äº‹ä»¶ï¼Œå¹¶ç»§æ‰¿äº†IAnimatableåŠ¨ç”»æ¥å£ï¼Œç”¨äºæ”¯æŒåŠ¨ç”»çš„æŸäº›æ–¹é¢ã€‚ æˆ‘ä»¬ç†Ÿæ‚‰äº†UIElementçš„è¿™äº›å±æ€§å’Œäº‹ä»¶ä¹‹åï¼Œå®é™…ä¸Šæ„å‘³ç€æˆ‘ä»¬ä¹Ÿç†Ÿæ‚‰äº†WPFæ‰€æœ‰æ§ä»¶çš„è¿™äº›å±æ€§ã€‚ä¸‹ä¸€èŠ‚ï¼Œæˆ‘ä»¬å°†æ¢è®¨UIElementçš„å­ç±»FrameworkElementã€‚ FrameworkElementåŸºç±»è®ºé‡è¦æ€§ï¼Œå®Œå…¨ä¸äºšäºUIElementåŸºç±»ã€‚ç”šè‡³è®ºèµ·ä¸å¼€å‘è€…çš„â€œäº²å¯†åº¦â€ï¼ŒFrameworkElementæ›´åƒæ˜¯è¿‘æ°´çš„æ¥¼å°ã€‚ FrameworkElementç±»FrameworkElementç±»ç»§æ‰¿äºUIElementç±»ï¼Œç»§æ‰¿å…³ç³»æ˜¯ï¼šObject-&gt;DispatcherObject-&gt;DependencyObject-&gt;Visual-&gt;UIElement-&gt;FrameworkElementï¼Œå®ƒä¹Ÿæ˜¯WPFæ§ä»¶çš„ä¼—å¤šçˆ¶ç±»ä¸­æœ€æ ¸å¿ƒçš„åŸºç±»ï¼Œä»è¿™é‡Œå¼€å§‹ï¼Œç»§æ‰¿æ ‘å¼€å§‹åˆ†æ”¯ï¼Œåˆ†åˆ«æ˜¯Shapeå›¾å½¢ç±»ã€Controlæ§ä»¶ç±»å’ŒPanelå¸ƒå±€ç±»ä¸‰ä¸ªæ–¹å‘ã€‚ FrameworkElementç±»æœ¬è´¨ä¸Šä¹Ÿæ˜¯æä¾›äº†ä¸€ç³»åˆ—å±æ€§ã€æ–¹æ³•å’Œäº‹ä»¶ã€‚åŒæ—¶åˆæ‰©å±• UIElement å¹¶æ·»åŠ äº†ä»¥ä¸‹åŠŸèƒ½ï¼š å®˜æ–¹æ–‡æ¡£ 1.å¸ƒå±€ç³»ç»Ÿå®šä¹‰ï¼š FrameworkElement ä¸ºä¸­ UIElementå®šä¹‰ä¸ºè™šæ‹Ÿæˆå‘˜çš„æŸäº›æ–¹æ³•æä¾›ç‰¹å®šçš„ WPF æ¡†æ¶çº§å®ç°ã€‚ æœ€å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œ FrameworkElement ä¼šå¯†å°æŸäº› WPF æ ¸å¿ƒçº§å¸ƒå±€æ›¿ä»£ï¼Œå¹¶æ”¹ä¸ºæä¾›æ´¾ç”Ÿç±»åº”æ›¿ä»£çš„ WPF æ¡†æ¶çº§åˆ«çš„ç­‰æ•ˆé¡¹ã€‚ ä¾‹å¦‚ï¼Œå¯†å°ä½† FrameworkElementArrangeCore æä¾› ArrangeOverrideã€‚ è¿™äº›æ›´æ”¹åæ˜ äº†è¿™æ ·ä¸€ä¸ªäº‹å®ï¼Œå³åœ¨ WPF æ¡†æ¶çº§åˆ«ï¼Œæœ‰ä¸€ä¸ªå¯ä»¥å‘ˆç°ä»»ä½• FrameworkElement æ´¾ç”Ÿç±»çš„å®Œæ•´å¸ƒå±€ç³»ç»Ÿã€‚ åœ¨ WPF æ ¸å¿ƒçº§åˆ«ï¼Œå°†æ„å»ºåŸºäº WPF çš„å¸¸è§„å¸ƒå±€è§£å†³æ–¹æ¡ˆçš„æŸäº›æˆå‘˜å·²å°±ä½ï¼Œä½†æœªå®šä¹‰å¸ƒå±€ç³»ç»Ÿçš„å®é™…å¼•æ“ã€‚2.é€»è¾‘æ ‘ï¼š å¸¸è§„ WPF ç¼–ç¨‹æ¨¡å‹é€šå¸¸ä»¥å…ƒç´ æ ‘çš„æ–¹å¼è¡¨ç¤ºã€‚ æ”¯æŒå°†å…ƒç´ æ ‘è¡¨ç¤ºä¸ºé€»è¾‘æ ‘ï¼Œä»¥åŠæ”¯æŒåœ¨æ ‡è®°ä¸­å®šä¹‰è¯¥æ ‘çš„æ”¯æŒæ˜¯åœ¨ çº§åˆ«å®ç°çš„ FrameworkElement ã€‚ ä½†è¯·æ³¨æ„ï¼Œ FrameworkElement æ•…æ„ä¸å®šä¹‰å†…å®¹æ¨¡å‹ï¼Œå¹¶å°†è¯¥è´£ä»»ç•™ç»™æ´¾ç”Ÿç±»ã€‚3.å¯¹è±¡ç”Ÿå­˜æœŸäº‹ä»¶ï¼š äº†è§£ä½•æ—¶åˆå§‹åŒ–å…ƒç´  (è°ƒç”¨æ„é€ å‡½æ•°) æˆ–é¦–æ¬¡å°†å…ƒç´ åŠ è½½åˆ°é€»è¾‘æ ‘ä¸­æ—¶ï¼Œè¿™é€šå¸¸å¾ˆæœ‰ç”¨ã€‚ FrameworkElement å®šä¹‰å¤šä¸ªä¸å¯¹è±¡ç”Ÿå­˜æœŸç›¸å…³çš„äº‹ä»¶ï¼Œè¿™äº›äº‹ä»¶ä¸ºæ¶‰åŠå…ƒç´ çš„ä»£ç éšè—æ“ä½œï¼ˆä¾‹å¦‚æ·»åŠ æ›´å¤šå­å…ƒç´ ï¼‰æä¾›æœ‰ç”¨çš„æŒ‚é’©ã€‚4.æ”¯æŒæ•°æ®ç»‘å®šå’ŒåŠ¨æ€èµ„æºå¼•ç”¨ï¼š å¯¹æ•°æ®ç»‘å®šå’Œèµ„æºçš„å±æ€§çº§æ”¯æŒç”± DependencyProperty ç±»å®ç°ï¼Œå¹¶ä½“ç°åœ¨å±æ€§ç³»ç»Ÿä¸­ï¼Œä½†è§£æå­˜å‚¨ä¸º Expression (æ•°æ®ç»‘å®šå’ŒåŠ¨æ€èµ„æºçš„ç¼–ç¨‹æ„é€ ) ä¸­å­˜å‚¨çš„æˆå‘˜å€¼çš„èƒ½åŠ›ç”± FrameworkElementå®ç°ã€‚5.é£æ ¼ï¼šFrameworkElement å®šä¹‰ Style å±æ€§ã€‚ ä½†æ˜¯ï¼Œ FrameworkElement å°šæœªå®šä¹‰å¯¹æ¨¡æ¿çš„æ”¯æŒæˆ–æ”¯æŒä¿®é¥°å™¨ã€‚ è¿™äº›åŠŸèƒ½ç”±æ§ä»¶ç±»ï¼ˆå¦‚ å’Œ ContentControlï¼‰Controlå¼•å…¥ã€‚6.æ›´å¤šåŠ¨ç”»æ”¯æŒï¼š æŸäº›åŠ¨ç”»æ”¯æŒå·²åœ¨ WPF æ ¸å¿ƒçº§åˆ«å®šä¹‰ï¼Œä½† FrameworkElement é€šè¿‡å®ç° BeginStoryboard å’Œç›¸å…³æˆå‘˜æ‰©å±•äº†æ­¤æ”¯æŒã€‚ æˆ‘ä»¬æ¥çœ‹çœ‹è¿™ä¸ªåŸºç±»çš„ç»“æ„å®šä¹‰ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141public class FrameworkElement : UIElement, IFrameworkInputElement, IInputElement, ISupportInitialize, IHaveResources, IQueryAmbient&#123; public static readonly DependencyProperty StyleProperty; public static readonly DependencyProperty MaxHeightProperty; public static readonly DependencyProperty FlowDirectionProperty; public static readonly DependencyProperty MarginProperty; public static readonly DependencyProperty HorizontalAlignmentProperty; public static readonly DependencyProperty VerticalAlignmentProperty; public static readonly DependencyProperty FocusVisualStyleProperty; public static readonly DependencyProperty CursorProperty; public static readonly DependencyProperty ForceCursorProperty; public static readonly RoutedEvent UnloadedEvent; public static readonly DependencyProperty ToolTipProperty; public static readonly DependencyProperty ContextMenuProperty; public static readonly RoutedEvent ToolTipOpeningEvent; public static readonly RoutedEvent ToolTipClosingEvent; public static readonly RoutedEvent ContextMenuOpeningEvent; public static readonly RoutedEvent ContextMenuClosingEvent; public static readonly DependencyProperty MinHeightProperty; public static readonly DependencyProperty HeightProperty; public static readonly RoutedEvent LoadedEvent; public static readonly DependencyProperty MinWidthProperty; public static readonly DependencyProperty MaxWidthProperty; public static readonly DependencyProperty OverridesDefaultStyleProperty; public static readonly DependencyProperty UseLayoutRoundingProperty; public static readonly DependencyProperty BindingGroupProperty; public static readonly DependencyProperty LanguageProperty; public static readonly DependencyProperty NameProperty; public static readonly DependencyProperty TagProperty; public static readonly DependencyProperty DataContextProperty; public static readonly RoutedEvent RequestBringIntoViewEvent; public static readonly RoutedEvent SizeChangedEvent; public static readonly DependencyProperty ActualWidthProperty; public static readonly DependencyProperty ActualHeightProperty; public static readonly DependencyProperty LayoutTransformProperty; public static readonly DependencyProperty InputScopeProperty; public static readonly DependencyProperty WidthProperty; protected internal static readonly DependencyProperty DefaultStyleKeyProperty; public FrameworkElement(); public Transform LayoutTransform &#123; get; set; &#125; public double Width &#123; get; set; &#125; public double MinWidth &#123; get; set; &#125; public double MaxHeight &#123; get; set; &#125; public double Height &#123; get; set; &#125; public double MinHeight &#123; get; set; &#125; public double ActualHeight &#123; get; &#125; public double MaxWidth &#123; get; set; &#125; public double ActualWidth &#123; get; &#125; public TriggerCollection Triggers &#123; get; &#125; public object Tag &#123; get; set; &#125; public string Name &#123; get; set; &#125; public XmlLanguage Language &#123; get; set; &#125; public BindingGroup BindingGroup &#123; get; set; &#125; public object DataContext &#123; get; set; &#125; public ResourceDictionary Resources &#123; get; set; &#125; public DependencyObject TemplatedParent &#123; get; &#125; public bool UseLayoutRounding &#123; get; set; &#125; public FlowDirection FlowDirection &#123; get; set; &#125; public InputScope InputScope &#123; get; set; &#125; public Thickness Margin &#123; get; set; &#125; public Style Style &#123; get; set; &#125; public VerticalAlignment VerticalAlignment &#123; get; set; &#125; public bool OverridesDefaultStyle &#123; get; set; &#125; public HorizontalAlignment HorizontalAlignment &#123; get; set; &#125; public ContextMenu ContextMenu &#123; get; set; &#125; public object ToolTip &#123; get; set; &#125; public DependencyObject Parent &#123; get; &#125; public bool IsInitialized &#123; get; &#125; public bool ForceCursor &#123; get; set; &#125; public Cursor Cursor &#123; get; set; &#125; public Style FocusVisualStyle &#123; get; set; &#125; public bool IsLoaded &#123; get; &#125; protected override int VisualChildrenCount &#123; get; &#125; protected internal InheritanceBehavior InheritanceBehavior &#123; get; set; &#125; protected internal virtual IEnumerator LogicalChildren &#123; get; &#125; protected internal object DefaultStyleKey &#123; get; set; &#125; public event ToolTipEventHandler ToolTipClosing; public event ToolTipEventHandler ToolTipOpening; public event RoutedEventHandler Unloaded; public event DependencyPropertyChangedEventHandler DataContextChanged; public event SizeChangedEventHandler SizeChanged; public event RequestBringIntoViewEventHandler RequestBringIntoView; public event EventHandler&lt;DataTransferEventArgs&gt; SourceUpdated; public event EventHandler&lt;DataTransferEventArgs&gt; TargetUpdated; public event RoutedEventHandler Loaded; public event EventHandler Initialized; public event ContextMenuEventHandler ContextMenuClosing; public event ContextMenuEventHandler ContextMenuOpening; public static FlowDirection GetFlowDirection(DependencyObject element); public static void SetFlowDirection(DependencyObject element, FlowDirection value); public bool ApplyTemplate(); public virtual void BeginInit(); public void BeginStoryboard(Storyboard storyboard, HandoffBehavior handoffBehavior, bool isControllable); public void BeginStoryboard(Storyboard storyboard); public void BeginStoryboard(Storyboard storyboard, HandoffBehavior handoffBehavior); public void BringIntoView(); public void BringIntoView(Rect targetRectangle); public virtual void EndInit(); public object FindName(string name); public object FindResource(object resourceKey); public BindingExpression GetBindingExpression(DependencyProperty dp); public sealed override bool MoveFocus(TraversalRequest request); public virtual void OnApplyTemplate(); public sealed override DependencyObject PredictFocus(FocusNavigationDirection direction); public void RegisterName(string name, object scopedElement); public BindingExpressionBase SetBinding(DependencyProperty dp, BindingBase binding); public BindingExpression SetBinding(DependencyProperty dp, string path); public void SetResourceReference(DependencyProperty dp, object name); public bool ShouldSerializeResources(); public bool ShouldSerializeStyle(); public bool ShouldSerializeTriggers(); public object TryFindResource(object resourceKey); public void UnregisterName(string name); public void UpdateDefaultStyle(); protected sealed override void ArrangeCore(Rect finalRect); protected virtual Size ArrangeOverride(Size finalSize); protected override Geometry GetLayoutClip(Size layoutSlotSize); protected override Visual GetVisualChild(int index); protected sealed override Size MeasureCore(Size availableSize); protected virtual Size MeasureOverride(Size availableSize); protected virtual void OnContextMenuClosing(ContextMenuEventArgs e); protected virtual void OnContextMenuOpening(ContextMenuEventArgs e); protected override void OnGotFocus(RoutedEventArgs e); protected virtual void OnInitialized(EventArgs e); protected override void OnPropertyChanged(DependencyPropertyChangedEventArgs e); protected virtual void OnToolTipClosing(ToolTipEventArgs e); protected virtual void OnToolTipOpening(ToolTipEventArgs e); protected internal void AddLogicalChild(object child); protected internal DependencyObject GetTemplateChild(string childName); protected internal override DependencyObject GetUIParentCore(); protected internal override void OnRenderSizeChanged(SizeChangedInfo sizeInfo); protected internal virtual void OnStyleChanged(Style oldStyle, Style newStyle); protected internal override void OnVisualParentChanged(DependencyObject oldParent); protected internal virtual void ParentLayoutInvalidated(UIElement child); protected internal void RemoveLogicalChild(object child); &#125; å±æ€§åˆ†æ 1.LayoutTransform å±æ€§ï¼šè·å–æˆ–è®¾ç½®åœ¨æ‰§è¡Œå¸ƒå±€æ—¶åº”åº”ç”¨äºæ­¤å…ƒç´ çš„å›¾å½¢è½¬æ¢ã€‚è¿™ä¸ªå±æ€§ä¸UIElementç±»ä¸­çš„RenderTransformå±æ€§æœ‰ç›¸ä¼¼ä¹‹å¤„ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨æ­¤å°†ä¸¤è€…è¿›è¡Œå¯¹æ¯”è¯´æ˜ä¸€ä¸‹ã€‚ä¸¤ä¸ªå±æ€§éƒ½æ˜¯Transformç±»å‹ï¼Œè€ŒTransformæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œè¿™ä¸ªç±»å¯ä»¥å®ç°æ§ä»¶åœ¨å¹³é¢ä¸­çš„å„ç§è½¬æ¢ï¼ŒåŒ…æ‹¬ æ—‹è½¬ (System.Windows.Media.RotateTransform) ç¼©æ”¾ (System.Windows.Media.ScaleTransform)ã€ å€¾æ–œ (System.Windows.Media.SkewTransform) ã€ å¹³ç§» (System.Windows.Media.TranslateTransform)ã€‚ è™½ç„¶ä¸¤ä¸ªå±æ€§éƒ½å¯ä»¥è¾¾åˆ°æ§ä»¶çš„å˜æ¢æ•ˆæœï¼Œä½†æ˜¯ä¸¤è€…è¿˜æ˜¯æœ‰åŒºåˆ«çš„ã€‚LayoutTransformå±æ€§æ˜¯åœ¨æ§ä»¶å¸ƒå±€ä¹‹å‰å¯¹æ§ä»¶è¿›è¡Œå˜æ¢ï¼Œè€ŒRenderTransformå±æ€§æ˜¯åœ¨å¸ƒå±€ç»“æŸåæ‰§è¡Œæ§ä»¶çš„å˜æ¢ï¼ŒLayoutTransformå¼€é”€æ¯”RenderTransformè¦å¤§ï¼Œæ‰€ä»¥ï¼Œå°½é‡ä½¿ç”¨RenderTransformå±æ€§å»å®ç°æ§ä»¶çš„å˜æ¢ã€‚ï¼ˆæˆ‘ä»¬ä¼šåœ¨åé¢ä¸“é—¨æ¢è®¨æ§ä»¶çš„å˜æ¢ï¼‰ 2.Widthå±æ€§ï¼šè¿™æ˜¯è¡¨ç¤ºæ§ä»¶çš„å®½åº¦ã€‚ä¸ä¹‹ç›¸å…³çš„è¿˜æœ‰ä»¥ä¸‹å‡ ä¸ªå±æ€§ã€‚ ActualWidthï¼šè·å–æ­¤å…ƒç´ çš„å‘ˆç°å®½åº¦ã€‚åªè¯»å±æ€§ã€‚ MaxWidthï¼šè·å–æˆ–è®¾ç½®ä¸€ä¸ªæ§ä»¶çš„æœ€å¤§å®½åº¦ã€‚ MinWidthï¼šè·å–æˆ–è®¾ç½®ä¸€ä¸ªæ§ä»¶çš„æœ€å°å®½åº¦ã€‚ 3.Heightå±æ€§ï¼šè¿™æ˜¯è¡¨ç¤ºæ§ä»¶çš„é«˜åº¦ï¼Œä¸ä¹‹ç›¸å…³çš„è¿˜æœ‰ä»¥ä¸‹å‡ ä¸ªå±æ€§ã€‚ ActualHeightï¼šè·å–æ­¤å…ƒç´ çš„å‘ˆç°é«˜åº¦ã€‚åªè¯»å±æ€§ã€‚ MaxHeightï¼šè·å–æˆ–è®¾ç½®ä¸€ä¸ªæ§ä»¶çš„æœ€å¤§é«˜åº¦ã€‚ MinHeightï¼šè·å–æˆ–è®¾ç½®ä¸€ä¸ªæ§ä»¶çš„æœ€å°é«˜åº¦ã€‚ 4.Tagå±æ€§ï¼šè¿™ä¸ªå±æ€§éå¸¸é‡è¦ï¼Œå®ƒæ˜¯objectç±»å‹ï¼Œæ„å‘³ç€å¯ä»¥ä¿å­˜ä»»æ„ç±»å‹çš„å¯¹è±¡å€¼ã€‚å®ƒå°±åƒFrameworkElementç±»èº«ä¸Šçš„ä¸€ä¸ªå°å£è¢‹ï¼Œä½†ç¡®èƒ½å®¹çº³ä¸‡ç‰©ã€‚æˆ‘ä»¬é€šå¸¸ä¼šå°†ä¸€äº›ä¸æ§ä»¶ç›¸å…³çš„æ•°æ®ä¸´æ—¶å­˜æ”¾åœ¨Tagå±æ€§ä¸­ï¼Œå½“æŠŠæ§ä»¶ä½œä¸ºå‚æ•°ä¼ é€’æ—¶ï¼Œå°å£è¢‹é‡Œé¢çš„å¯¹è±¡ä¹Ÿéšä¹‹ä¼ é€’è¿‡å»äº†ã€‚ 5.Nameå±æ€§ï¼šè·å–æˆ–è®¾ç½®æ§ä»¶çš„æ ‡è¯†åç§°ã€‚åœ¨åŒä¸€ä¸ªçª—ä½“ã€é¡µã€ç”¨æˆ·æ§ä»¶ä¸­ï¼ŒNameæ ‡è¯†æ˜¯å”¯ä¸€çš„ã€‚è®¾ç½®äº†æ§ä»¶çš„åç§°åï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨åç«¯ä»£ç ç›´æ¥ä»¥è¿™ä¸ªæ ‡è¯†å»å¼•ç”¨æ§ä»¶ã€‚ 6.Marginå±æ€§ï¼šè·å–æˆ–è®¾ç½®æ§ä»¶çš„å¤–è¾¹è·ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªbuttonçš„marginï¼Œè·ç¦»å·¦è¾¹ã€ä¸Šè¾¹ã€å³è¾¹å’Œä¸‹è¾¹çš„åƒç´ åˆ†åˆ«æ˜¯20ã€40ã€60ã€80ã€‚ 123 &lt;Grid&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘&quot; Margin=&quot;20 40 60 80&quot; /&gt;&lt;/Grid&gt; Paddingå±æ€§è¯´æ˜ ä¸Marginç›¸å¯¹åº”çš„æ˜¯Paddingï¼Œè¡¨ç¤ºè®¾ç½®æ§ä»¶çš„å†…è¾¹è·ã€‚ä½†æ˜¯è¿™ä¸ªå±æ€§å¹¶ä¸åœ¨FrameworkElementä¸­ï¼Œè€Œåœ¨Controlç±»ä¸­ï¼Œä»æœ¬èŠ‚ç¬¬ä¸€å¼ å›¾æ‰€ç¤ºï¼Œè¯´æ˜åªæœ‰å†…å®¹æ§ä»¶æ‰å…·æœ‰Paddingï¼Œè€ŒShapeå’ŒPanelæ˜¯æ²¡æœ‰Paddingå±æ€§çš„ã€‚ 7.HorizontalAlignmentå±æ€§ï¼šè®¾ç½®æ§ä»¶çš„æ°´å¹³å¯¹é½æ–¹å¼ã€‚è¿™ä¸ªå¯¹é½æ–¹å¼æ˜¯ç›¸å¯¹äºçˆ¶å…ƒç´ è€Œè¨€çš„ï¼Œæ¯”å¦‚æˆ‘ä»¬æœ‰ä¸€ä¸ªButtonæ§ä»¶ï¼Œåœ¨å¤–é¢è¿˜åŒ…è£¹äº†ä¸€å±‚Gridæ§ä»¶ï¼Œé‚£ä¹ˆï¼Œè®¾ç½®Buttonæ§ä»¶çš„HorizontalAlignmentå±æ€§ï¼Œå¯ä»¥å°†Buttonæ§ä»¶åˆ†åˆ«æ˜¾ç¤ºåœ¨Gridæ§ä»¶çš„å·¦è¾¹ã€ä¸­é—´ã€å³è¾¹ä¸‰ä¸ªä½ç½®ã€‚ 8.VerticalAlignmentå±æ€§ï¼šè®¾ç½®æ§ä»¶çš„å‚ç›´å¯¹é½æ–¹å¼ã€‚ä¸HorizontalAlignmentå±æ€§ç±»ä¼¼ï¼Œåªæ˜¯å¯¹æ–¹çš„æ–¹å‘ä¸åŒï¼Œå¯ä»¥è®¾ç½®æ§ä»¶åœ¨å‚ç›´æ–¹å‘ä¸Šæ˜¯å±…äºé¡¶éƒ¨ã€ä¸­é—´ã€è¿˜æ˜¯åº•éƒ¨ä¸‰ä¸ªä½ç½®ã€‚ æ€»ç»“ï¼šä¸Šè¿°ä¸¤ä¸ªå±æ€§çš„å€¼éƒ½æ˜¯æšä¸¾å‹ï¼Œå®ƒä»¬éƒ½æœ‰ä¸€ä¸ªå…±åŒçš„å€¼ï¼Œé‚£å°±æ˜¯stretchï¼Œè¡¨ç¤ºæ˜¯æ‹‰ä¼¸çš„æ–¹å¼å¡«å……çˆ¶å…ƒç´ çš„å¸ƒå±€ã€‚ 9.ToolTipå±æ€§ï¼šè·å–æˆ–è®¾ç½®ç”¨æˆ·ç•Œé¢ (UI) ä¸­ä¸ºæ­¤å…ƒç´ æ˜¾ç¤ºçš„å·¥å…·æç¤ºå¯¹è±¡ã€‚æŒ‡é¼ æ ‡ç§»åˆ°æ§ä»¶ä¸Šæ–¹æ—¶æ˜¾ç¤ºçš„æç¤ºå†…å®¹ï¼Œå®ƒæ˜¯ä¸€ä¸ªobjectç±»å‹ï¼Œæ„å‘³ç€å¯ä»¥æ˜¾ç¤ºä»»æ„å¸ƒå±€å¤–è§‚ã€‚ 10.Parentå±æ€§ï¼šè·å–æ­¤å…ƒç´ çš„é€»è¾‘çˆ¶å…ƒç´ ã€‚å®ƒæ˜¯ä¸€ä¸ªåªè¯»å±æ€§ã€‚ æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†ä»‹ç»å‡ ä¸ªæ¯”è¾ƒé‡è¦çš„å±æ€§ï¼Œè¿™äº›å±æ€§æ˜¯WPFæ¡†æ¶ä¸­éå¸¸æ ¸å¿ƒçš„çŸ¥è¯†æ¦‚å¿µï¼Œéœ€è¦å•ç‹¬å½¢æˆç« èŠ‚æ¥å­¦ä¹ ï¼Œåœ¨è¿™é‡Œï¼Œæˆ‘ä»¬åªæ˜¯é€šè¿‡è¿™äº›å±æ€§æ¥å¼•å‡ºå…¶æ¦‚å¿µã€‚ WPFæ ·å¼ï¼ˆStyleï¼‰ ä»€ä¹ˆæ˜¯æ ·å¼ï¼Ÿç®€å•æ¥è¯´ï¼Œæ˜¯æŒ‡æ§ä»¶å‘ˆç°æ—¶çš„æ ·å­ã€‚æ¯”å¦‚æˆ‘ä»¬ä¸Šç­æ—¶ä¼šç©¿ä¸Šå·¥ä½œæœï¼Œä¼‘å‡æ—¶ä¼šç©¿ä¸Šæ›´ä¸ªæ€§åŒ–çš„è¡£æœï¼Œæˆ‘è¿˜æ˜¯é‚£ä¸ªæˆ‘ï¼Œä½†æ˜¯èº«ä¸Šçš„è¡£æœå´ä¸åŒï¼Œä¸ç®¡æ˜¯é¢œè‰²ã€æ¬¾å¼ï¼Œç”šè‡³åŒ…æ‹¬æˆ‘ä»¬çš„å¤´é¥°ã€å¦†å®¹ï¼Œéƒ½ä¼šæœ‰æ‰€ä¸åŒã€‚ å¯¹äºæ§ä»¶è€Œè¨€ï¼ŒåŒæ ·éƒ½æ˜¯buttonæŒ‰é’®ï¼Œæœ‰çš„æŒ‰é’®æ˜¯æ–¹çš„ï¼Œæœ‰çš„æ˜¯åœ†çš„ï¼Œæœ‰çš„æ˜¯è“è‰²ï¼Œæœ‰çš„æ˜¯çº¢è‰²ï¼Œæœ‰çš„æœ‰æ–‡å­—ï¼Œæœ‰çš„æœ‰å›¾æ ‡ï¼Œå¦‚æœåšåˆ°è¿™äº›ä¸åŒçš„æ ·å¼å‘¢ï¼Ÿç­”æ¡ˆæ˜¯Styleå±æ€§ã€‚ 11.Styleå±æ€§ï¼šè·å–æˆ–è®¾ç½®æ­¤å…ƒç´ å‘ˆç°æ—¶æ‰€ä½¿ç”¨çš„æ ·å¼ã€‚ï¼ˆå…³äºStyleæ ·å¼æˆ‘ä»¬ä¼šä¸“é—¨æ‹¿ä¸€ç« èŠ‚æ¥æ¢è®¨ï¼‰ ä¸Styleç›¸å…³çš„è¿˜æœ‰ä¸€ä¸ªå±æ€§ï¼Œå«FocusVisualStyleï¼Œé¡¾åæ€ä¹‰ï¼Œæ§ä»¶åœ¨è·å¾—ç„¦ç‚¹æ—¶çš„æ ·å¼ã€‚ WPFèµ„æºï¼ˆResourceDictionaryï¼‰ ä»€ä¹ˆæ˜¯èµ„æºï¼Ÿèµ„æºï¼Œä¹Ÿå°±æ˜¯èµ„æºå­—å…¸ï¼Œä¹Ÿå°±æ˜¯ResourceDictionaryç±»ï¼Œå®ƒæä¾›ä¸€ä¸ªå“ˆå¸Œè¡¨&#x2F;å­—å…¸å®ç°ï¼Œå…¶ä¸­åŒ…å«ç»„ä»¶æ‰€ä½¿ç”¨çš„ WPF èµ„æºä»¥åŠ WPF åº”ç”¨ç¨‹åºçš„å…¶ä»–å…ƒç´ ã€‚æˆ‘ä»¬å¯ä»¥æŠŠWPFçš„æ§ä»¶ã€çª—ä½“ã€Applicationåº”ç”¨æ‰€ç”¨åˆ°çš„ä¸€åˆ‡èµ„æºéƒ½æ”¾åœ¨å…¶ä¸­ï¼Œå°†å¤šä¸ªResourceDictionaryå…ƒç´ åˆå¹¶èµ·æ¥å½¢æˆä¸€ä¸ªResourceDictionaryå…ƒç´ ï¼ˆResourceDictionaryä¹Ÿæ˜¯ä¸€ä¸ªéšå¼é›†åˆï¼‰ã€‚æ‰€ä»¥FrameworkElementç±»è®¾è®¡ä¸€ä¸ªèµ„æºå±æ€§ã€‚ 12.Resources å±æ€§ï¼šè·å–æˆ–è®¾ç½®æœ¬åœ°å®šä¹‰çš„èµ„æºå­—å…¸ã€‚å…³äºResourcesèµ„æºæˆ‘ä»¬ä¼šä¸“é—¨æ‹¿ä¸€ç« èŠ‚æ¥æ¢è®¨ï¼‰ WPFçš„æ•°æ®ä¸Šä¸‹æ–‡ï¼ˆDataContextï¼‰ æˆ‘ä»¬æ›¾ç»åœ¨å‰é¢çš„ã€ŠDependencyObjectç±»ã€‹ä¸€æ–‡ä¸­æåˆ°è¿‡æ•°æ®é©±åŠ¨æ¨¡å¼ï¼Œæ§ä»¶çš„å€¼ç»‘å®šæŸä¸ªâ€œå˜é‡â€ï¼Œå½“â€œå˜é‡â€çš„å€¼å‘ç”Ÿæ”¹å˜ï¼Œæ§ä»¶çš„å€¼ä¹Ÿè·Ÿç€æ”¹å˜ï¼Œåè¿‡æ¥è¯´ï¼Œå½“æ§ä»¶çš„å€¼å‘ç”Ÿæ”¹å˜ï¼Œâ€œå˜é‡â€çš„å€¼ä¹Ÿè·Ÿç€æ”¹å˜ã€‚é‚£ä¹ˆè¿™ä¸ªç‰¹æŒ‡çš„â€œå˜é‡â€æ˜¯ä»€ä¹ˆï¼Ÿå®ƒå’Œæˆ‘ä»¬ä»Šå¤©è¦ä»‹ç»çš„æ•°æ®ä¸Šä¸‹æ–‡æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿ ç­”æ¡ˆæ˜¯ï¼Œè¿™ä¸ªâ€œå˜é‡â€å…¶å®ä¹Ÿæ˜¯ä¸€ä¸ªå±æ€§ï¼Œä¸”å¿…é¡»æ˜¯ä¸€ä¸ªå±æ€§ï¼ˆé‡ç‚¹ï¼‰ï¼Œå®ƒæ˜¯è°çš„å±æ€§ï¼ŸWPFè¯´ï¼Œå®ƒæ˜¯æŸä¸ªViewModelç±»çš„å±æ€§ã€‚ å‡å®šæˆ‘ä»¬æœ‰ä¸€ä¸ªViewçª—ä½“ï¼Œçª—ä½“æœ‰ä¸€ä¸ªTextBoxæ§ä»¶ï¼›åˆå‡å¦‚æˆ‘ä»¬è¿˜æœ‰ä¸€ä¸ªViewModelå®ä½“ï¼Œè¿™ä¸ªå®ä½“ä¸­æœ‰ä¸€ä¸ªå«Nameçš„å±æ€§ã€‚å¦‚æœæˆ‘ä»¬è¦å°†TextBoxæ§ä»¶çš„Textå±æ€§å’ŒViewModelå®ä½“çš„Nameå±æ€§æˆåŠŸçš„å»ºç«‹ç»‘å®šå…³ç³»ï¼Œå¿…å¤‡çš„æ¡ä»¶æ˜¯ä»€ä¹ˆï¼Ÿ é¦–å…ˆï¼Œç”±äºViewçª—ä½“ç»§æ‰¿äºFrameworkElementç±»ï¼Œæ‰€ä»¥æ¯ä¸ªçª—ä½“ï¼ˆæˆ–æ§ä»¶ï¼‰éƒ½æœ‰ä¸€ä¸ªå«DataContextçš„æ•°æ®ä¸Šä¸‹æ–‡å±æ€§ã€‚æ‰€ä»¥å¿…å¤‡çš„æ¡ä»¶æ˜¯ï¼š**ViewModelå®ä½“å¿…é¡»å…ˆèµ‹å€¼ç»™Viewçª—ä½“çš„DataContextï¼ŒViewModelçš„Nameå±æ€§æ‰èƒ½ç»‘å®šåˆ°TextBoxæ§ä»¶çš„Textå±æ€§ã€‚**æ¢è¨€ä¹‹ï¼Œé¢†å¯¼ä¹‹é—´è¦å…ˆæ­å¥½æ¡¥ï¼Œä¸‹å±å’Œä¸‹å±æ‰å¥½é…åˆå·¥ä½œã€‚è¿™å°±æ˜¯DataContextçš„æ¦‚å¿µå’Œç”¨é€”ã€‚ï¼ˆå…³äºDataContextæ•°æ®ä¸Šä¸‹æ–‡æˆ‘ä»¬ä¼šä¸“é—¨æ‹¿ä¸€ç« èŠ‚æ¥æ¢è®¨ï¼‰ 13.DataContextå±æ€§ï¼šè·å–æˆ–è®¾ç½®å…ƒç´ å‚ä¸æ•°æ®ç»‘å®šæ—¶çš„æ•°æ®ä¸Šä¸‹æ–‡ã€‚ 14.ContextMenuå±æ€§ï¼šè®¾ç½®ä¸è·å–æ§ä»¶çš„ä¸Šä¸‹æ–‡èœå• ï¼Œå°±æ˜¯é¼ æ ‡åœ¨æ§ä»¶ä¸Šå³é”®æ—¶å¼¹å‡ºæ¥çš„èœå•ã€‚ 15.Cursorå±æ€§ï¼šè·å–æˆ–è®¾ç½®åœ¨é¼ æ ‡æŒ‡é’ˆä½äºæ­¤å…ƒç´ ä¸Šæ—¶æ˜¾ç¤ºçš„å…‰æ ‡ã€‚ å‹æƒ…æç¤º ä¸Šè¿°æ‰€ä»‹ç»çš„å±æ€§ï¼Œæ˜¯WPFä¸­æ‰€æœ‰æ§ä»¶éƒ½æœ‰çš„å±æ€§å“¦ï¼Œæ‰€ä»¥ï¼Œå­¦ä¸€ä¸ªFrameworkElementç±»ï¼Œå°±æŠŠæ‰€æœ‰æ§ä»¶éƒ½å­¦äº†30%å‘¢ã€‚â€”â€”é‡åº†æ•™ä¸» äº‹ä»¶åˆ†æ FrameworkElementç±»æä¾›äº†12ä¸ªäº‹ä»¶ï¼Œä¸€èˆ¬æ¯”è¾ƒå¸¸ç”¨çš„æ˜¯ï¼šInitializedã€Loadedã€Unloadedã€SizeChangedç­‰äº‹ä»¶ã€‚ æ–¹æ³•æˆå‘˜ FrameworkElementç±»è¿˜æä¾›äº†ä¸€äº›æ–¹æ³•æˆå‘˜ã€‚ 1.FindName(String)ï¼šè¡¨ç¤ºæŸ¥æ‰¾æŸä¸ªå…ƒç´ ã€‚æ¯”å¦‚æˆ‘ä»¬åœ¨çª—ä½“ä¸­è¦æŸ¥æ‰¾æŸä¸ªæ§ä»¶ã€‚ 2.FindResource(Object)ï¼šæŸ¥æ‰¾æŸä¸ªèµ„æºã€‚å¦‚æœåœ¨è°ƒç”¨å¯¹è±¡ä¸Šæ‰¾ä¸åˆ°è¯¥èµ„æºï¼Œåˆ™æ¥ä¸‹æ¥æœç´¢é€»è¾‘æ ‘ä¸­çš„çˆ¶å…ƒç´ ï¼Œç„¶åæœç´¢åº”ç”¨ç¨‹åºã€ä¸»é¢˜ï¼Œæœ€åæœç´¢ç³»ç»Ÿèµ„æºã€‚å®åœ¨æ‰¾ä¸åˆ°å°±æŠ›å‡ºå¼‚å¸¸ã€‚ 3.TryFindResource(Object)ï¼šå°è¯•å»æ‰¾æŸä¸ªèµ„æºã€‚å»ºè®®ä½¿ç”¨è¿™ä¸ªæ–¹æ³•ã€‚ 4.RegisterName (string , object );æ³¨å†Œæ§ä»¶çš„åç§°åˆ°çˆ¶æ§ä»¶ä¸Šã€‚ 12345678button2 = new Button();button2.Name = &quot;Button2&quot;; // æ³¨å†Œbutton2çš„åç§°åˆ°myMainPanelæ§ä»¶ä¸ŠmyMainPanel.RegisterName(button2.Name, button2);button2.Content = &quot;Button 2&quot;;button2.Click += new RoutedEventHandler(button2Clicked);myMainPanel.Children.Add(button2); 5.SetBinding(DependencyProperty, BindingBase)å’ŒSetBinding(DependencyProperty, String)ï¼Œè¿™ä¸¤ä¸ªæˆå‘˜éƒ½å’Œç»‘å®šç›¸å…³ï¼Œæˆ‘ä»¬å°†åœ¨åé¢åšä¸“é¢˜ä»‹ç»ã€‚ æœ€åï¼Œæˆ‘ä»¬æ¥çœ‹å“ªäº›ç±»ä¼šç»§æ‰¿è¿™ä¸ªFrameworkElementåŸºç±»ï¼Œä»¥ä¾¿äºäº†è§£æˆ‘ä»¬æ¥ä¸‹æ¥è¦å­¦å“ªäº›å†…å®¹ã€‚ Microsoft.Windows.Themes.BulletChromeMicrosoft.Windows.Themes.ScrollChromeSystem.Windows.Controls.AccessTextSystem.Windows.Controls.AdornedElementPlaceholderSystem.Windows.Controls.ContentPresenterSystem.Windows.Controls.ControlSystem.Windows.Controls.DecoratorSystem.Windows.Controls.ImageSystem.Windows.Controls.InkCanvasSystem.Windows.Controls.ItemsPresenterSystem.Windows.Controls.MediaElementSystem.Windows.Controls.PageSystem.Windows.Controls.PanelSystem.Windows.Controls.Primitives.DocumentPageViewSystem.Windows.Controls.Primitives.GridViewRowPresenterBaseSystem.Windows.Controls.Primitives.PopupSystem.Windows.Controls.Primitives.TickBarSystem.Windows.Controls.Primitives.TrackSystem.Windows.Controls.TextBlockSystem.Windows.Controls.ToolBarTraySystem.Windows.Controls.Viewport3DSystem.Windows.Documents.AdornerSystem.Windows.Documents.AdornerLayerSystem.Windows.Documents.DocumentReferenceSystem.Windows.Documents.FixedPageSystem.Windows.Documents.GlyphsSystem.Windows.Documents.PageContentSystem.Windows.Interop.HwndHostSystem.Windows.Shapes.Shape å¥½ï¼Œå…³äºFrameworkElementç±»çš„æˆå‘˜ï¼Œæˆ‘ä»¬å°±å…ˆè®²è¿™ä¹ˆå¤šï¼Œåœ¨ä»‹ç»å®ŒWPFçš„çˆ¶ç±»ä¹‹åï¼Œä¸‹ä¸€ç« ï¼Œæˆ‘ä»¬æ­£å¼å¼€å§‹å­¦ä¹ WPFæ§ä»¶ã€‚ å¸ƒå±€æ§ä»¶å¸ƒå±€æ§ä»¶æ¦‚è¿°åœ¨WPFä¸­ï¼Œå¸ƒå±€çš„æ–¹å¼ååˆ†ä¸°å¯Œï¼Œæœ‰æŒ‰è¡¨æ ¼å¸ƒå±€çš„Gridå’ŒUniformGridæ …æ ¼æ§ä»¶ï¼Œæœ‰ç±»ä¼¼Winformæ‹–æ”¾çš„Canvasæ§ä»¶ï¼Œæœ‰æŒ‰ç…§å‚ç›´æˆ–æ°´å¹³æ’åˆ—çš„StackPanelæ§ä»¶ï¼Œä¹Ÿæœ‰æŒ‰ç…§ä¸œè¥¿å—åŒ—ä¸­æ–¹ä½æ’åˆ—çš„DockPanelæ§ä»¶ï¼Œè¿˜æœ‰ä»¥ç€‘å¸ƒæµæ–¹å¼WrapPanelæ§ä»¶ï¼Œä»¥åŠæŒ‰Tabé¡µåˆ‡æ¢æ˜¾ç¤ºçš„TabControlæ§ä»¶ã€‚å¾®è½¯å°†å®ƒä»¬æŠ½è±¡æˆPanelåŸºç±»ï¼Œå¹¶è®©è¿™ä¸ªåŸºç±»ç»§æ‰¿äºFrameworkElementç±»ã€‚ æ§ä»¶åç§° å¸ƒå±€æ–¹å¼ Grid ç½‘æ ¼ï¼Œæ ¹æ®è‡ªå®šä¹‰è¡Œå’Œåˆ—æ¥è®¾ç½®æ§ä»¶çš„å¸ƒå±€ StackPanel æ ˆå¼é¢æ¿ï¼ŒåŒ…å«çš„å…ƒç´ åœ¨ç«–ç›´æˆ–æ°´å¹³æ–¹å‘æ’æˆä¸€æ¡ç›´çº¿ WrapPanel è‡ªåŠ¨æŠ˜è¡Œé¢æ¿ï¼ŒåŒ…å«çš„å…ƒç´ åœ¨æ’æ»¡ä¸€è¡Œåï¼Œè‡ªåŠ¨æ¢è¡Œ DockPanel æ³Šé å¼é¢æ¿ï¼Œå†…éƒ¨çš„å…ƒç´ å¯ä»¥é€‰æ‹©æ³Šé æ–¹å‘ UniformGrid ç½‘æ ¼,UniformGridå°±æ˜¯Gridçš„ç®€åŒ–ç‰ˆï¼Œæ¯ä¸ªå•å…ƒæ ¼çš„å¤§å°ç›¸åŒã€‚ Canvas ç”»å¸ƒï¼Œå†…éƒ¨å…ƒç´ æ ¹æ®åƒç´ ä¸ºå•ä½ç»å¯¹åæ ‡è¿›è¡Œå®šä½ Border è£…é¥°çš„æ§ä»¶ï¼Œæ­¤æ§ä»¶ç”¨äºç»˜åˆ¶è¾¹æ¡†åŠèƒŒæ™¯ï¼Œåœ¨Borderä¸­åªèƒ½æœ‰ä¸€ä¸ªå­æ§ä»¶ PanelåŸºç±»Panelå…¶å®æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œä¸å¯ä»¥å®ä¾‹åŒ–ï¼ŒWPFæ‰€æœ‰çš„å¸ƒå±€æ§ä»¶éƒ½ä»Panelç»§æ‰¿è€Œæ¥ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨å­¦ä¹ å¸ƒå±€æ§ä»¶ä¹‹å‰ï¼Œè¦å…ˆäº†è§£ä¸€ä¸‹è¿™ä¸ªç±»ã€‚é¦–å…ˆçœ‹ä¸€ä¸‹å®ƒçš„å®šä¹‰ï¼š 1234567891011121314151617181920212223242526272829public abstract class Panel : FrameworkElement, IAddChild&#123; public static readonly DependencyProperty BackgroundProperty; public static readonly DependencyProperty IsItemsHostProperty; public static readonly DependencyProperty ZIndexProperty; protected Panel(); public bool HasLogicalOrientationPublic &#123; get; &#125; public Orientation LogicalOrientationPublic &#123; get; &#125; public bool IsItemsHost &#123; get; set; &#125; public UIElementCollection Children &#123; get; &#125; public Brush Background &#123; get; set; &#125; protected override int VisualChildrenCount &#123; get; &#125; protected internal UIElementCollection InternalChildren &#123; get; &#125; protected internal override IEnumerator LogicalChildren &#123; get; &#125; protected internal virtual Orientation LogicalOrientation &#123; get; &#125; protected internal virtual bool HasLogicalOrientation &#123; get; &#125; public static int GetZIndex(UIElement element); public static void SetZIndex(UIElement element, int value); public bool ShouldSerializeChildren(); protected virtual UIElementCollection CreateUIElementCollection(FrameworkElement logicalParent); protected override Visual GetVisualChild(int index); protected virtual void OnIsItemsHostChanged(bool oldIsItemsHost, bool newIsItemsHost); protected override void OnRender(DrawingContext dc); protected internal override void OnVisualChildrenChanged(DependencyObject visualAdded, DependencyObject visualRemoved); &#125; ä»å®ƒçš„ä»£ç å®šä¹‰æ¥çœ‹ï¼Œå®ƒç»§æ‰¿äºFrameworkElementåŸºç±»å’ŒIAddChildæ¥å£ã€‚æ‰€ä»¥ï¼Œæ‰€æœ‰ Panel å…ƒç´ éƒ½æ”¯æŒ FrameworkElement å®šä¹‰çš„åŸºæœ¬å¤§å°è°ƒæ•´å’Œå®šä½å±æ€§ï¼ŒåŒ…æ‹¬ Heightã€Widthã€HorizontalAlignmentã€VerticalAlignmentã€Margin å’Œ LayoutTransformã€‚ å®ƒæœ‰ä¸€ä¸ªBackgroundå±æ€§ï¼Œæ„å‘³ç€æ‰€æœ‰çš„å¸ƒå±€æ§ä»¶éƒ½å¯ä»¥è®¾ç½®èƒŒæ™¯é¢œè‰²ã€‚å¦å¤–ï¼Œå®ƒè¿˜æœ‰ä¸€ä¸ªChildrenå±æ€§ï¼Œè¿™æ˜¯ä¸€ä¸ªé›†åˆå±æ€§ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ‰€æœ‰çš„å¸ƒå±€æ§ä»¶éƒ½å¯ä»¥æ·»åŠ å¤šä¸ªå­å…ƒç´ ã€‚è¿™ä¸€ç‚¹ä»å®ƒç»§æ‰¿çš„IAddChildæ¥å£ä¹Ÿèƒ½å¾—åˆ°å°è¯ã€‚ 12345678910namespace System.Windows.Markup&#123; //æä¾›äº†ä¸€ç§åˆ†æå…è®¸æ··åˆçš„å­å…ƒç´ æˆ–æ–‡æœ¬çš„å…ƒç´ çš„æ–¹æ³•ã€‚ public interface IAddChild &#123; //æ·»åŠ å­å¯¹è±¡ã€‚ void AddChild(object value); //å°†èŠ‚ç‚¹çš„æ–‡æœ¬å†…å®¹æ·»åŠ åˆ°å¯¹è±¡ã€‚ void AddText(string text); &#125; Panelæä¾›äº†GetZIndexå’ŒSetZIndexæ–¹æ³•æˆå‘˜ï¼Œåˆ†åˆ«è¡¨ç¤ºè·å–æŸä¸ªå…ƒç´ çš„ZIndexé¡ºåºå’Œè®¾ç½®æŸä¸ªå…ƒç´ çš„ZIndexé¡ºåºã€‚ ä»€ä¹ˆæ˜¯ZIndexï¼Ÿè¿™æ˜¯Panelæä¾›çš„ä¸€ä¸ªé™„åŠ å±æ€§ã€‚å‡å¦‚ä¸€ä¸ªå•è¡Œå•åˆ—çš„Gridå¸ƒå±€æ§ä»¶ä¸­æœ‰ä¸¤ä¸ªButton,æ­£å¸¸æƒ…å†µä¸‹ï¼Œè¿™ä¸¤ä¸ªButtonéƒ½ä¼šä»¥æ’‘æ»¡Gridçš„æ–¹å¼å‘ˆç°åœ¨Gridä¸­ï¼Œé‚£ä¹ˆï¼Œåˆ°åº•å“ªä¸€ä¸ªButtonåœ¨ä¸Šé¢ï¼Œå“ªä¸€ä¸ªButtonåœ¨ä¸‹é¢å‘¢ï¼Ÿå°±çœ‹è¿™ä¸¤ä¸ªButtonçš„Panel.ZIndexé™„åŠ å±æ€§çš„å€¼ï¼Œå€¼è¶Šå¤§è¶Šåœ¨ä¸Šé¢ï¼Œè€Œå€¼è¾ƒå°çš„é‚£ä¸ªButtonå°†è¢«ä¸Šé¢çš„Buttoné®ç›–ï¼Œä»è€Œåœ¨è§†è§‰ä¸Šï¼Œç”¨æˆ·åªèƒ½çœ‹åˆ°ä¸€ä¸ªButtonã€‚ é™„åŠ å±æ€§ é™„åŠ å±æ€§çš„ä¸€ä¸ªç”¨é€”æ˜¯å…è®¸å­å…ƒç´ å­˜å‚¨å®é™…ä¸Šç”±çˆ¶å…ƒç´ å®šä¹‰çš„å±æ€§çš„å”¯ä¸€å€¼ã€‚ æ­¤åŠŸèƒ½çš„ä¸€é¡¹åº”ç”¨æ˜¯è®©å­å…ƒç´ é€šçŸ¥çˆ¶çº§å®ƒä»¬å¸Œæœ›å¦‚ä½•åœ¨ç”¨æˆ·ç•Œé¢ (UI) ä¸­å‘ˆç°ï¼Œè¿™å¯¹åº”ç”¨ç¨‹åºå¸ƒå±€éå¸¸æœ‰ç”¨ã€‚ 1234&lt;Grid &gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘1&quot; Panel.ZIndex=&quot;1&quot; Margin=&quot;20 40 60 80&quot; Padding=&quot;50&quot; /&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘2&quot; Panel.ZIndex=&quot;0&quot; Margin=&quot;20 40 60 80&quot; Padding=&quot;50&quot; /&gt;&lt;/Grid&gt; åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œæ­£å¸¸æƒ…å†µä¸‹ï¼Œä¼šæ˜¾ç¤ºâ€œWPFä¸­æ–‡ç½‘2â€æŒ‰é’®ï¼Œä½†æ˜¯æˆ‘ä»¬æ•…æ„å«å…¶Panel.ZIndex&#x3D;0ï¼Œä»è€Œå°äºä¸Šé¢é‚£ä¸ªæŒ‰é’®çš„å±æ€§å€¼ï¼Œæ‰€ä»¥æ˜¾ç¤ºäº†â€œWPFä¸­æ–‡ç½‘1â€æŒ‰é’®ã€‚ WPF æä¾›äº†ä¸€å¥—å…¨é¢çš„æ´¾ç”Ÿ Panel å®ç°ï¼Œå¯å®ç°è®¸å¤šå¤æ‚çš„å¸ƒå±€ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªéå¸¸éå¸¸éœ€è¦æ³¨æ„çš„äº‹é¡¹ï¼Œé‚£å°±æ˜¯Panelçš„Backgroundå±æ€§ã€‚æœ‰æ—¶å€™æˆ‘ä»¬å¸Œæœ›åœ¨å¸ƒå±€æ§ä»¶ä¸Šå®ç°é¼ æ ‡ç‚¹å‡»äº‹ä»¶çš„è·å–ï¼Œè¯·è®°å¾—ä¸€å®šè¦ç»™Backgroundå±æ€§è®¾ç½®ä¸€ä¸ªé¢œè‰²å€¼ï¼Œå¦‚æœä¸å¸Œæœ›æœ‰å…·ä½“çš„é¢œè‰²ï¼Œé‚£å°±è®¾ç½®æˆTransparent ã€‚ä¸ç„¶ï¼Œæ‚¨ä¼šè¸©å‘çš„ï¼å› ä¸ºå¸ƒå±€æ§ä»¶çš„Backgroundå±æ€§æ²¡æœ‰å€¼æ—¶ï¼Œæ˜¯ä¸èƒ½å¼•å‘é¼ æ ‡ç›¸å…³äº‹ä»¶çš„ã€‚ æ·±å…¥æ¢ç©¶Panelç±» Panelä½œä¸ºå¸ƒå±€æ§ä»¶çš„åŸºç±»ï¼Œæ‹¥æœ‰ä¸€ä¸ªå«Childrençš„å±æ€§ï¼Œè¿™ä¸ªå±æ€§çš„ç±»å‹æ˜¯UIElementCollectionã€‚æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å®ƒçš„ç»“æ„ï¼š 1234567891011121314151617181920212223242526public class UIElementCollection : IList, ICollection, IEnumerable&#123; public UIElementCollection(UIElement visualParent, FrameworkElement logicalParent); public virtual UIElement this[int index] &#123; get; set; &#125; public virtual int Capacity &#123; get; set; &#125; public virtual object SyncRoot &#123; get; &#125; public virtual bool IsSynchronized &#123; get; &#125; public virtual int Count &#123; get; &#125; public virtual int Add(UIElement element); public virtual void Clear(); public virtual bool Contains(UIElement element); public virtual void CopyTo(UIElement[] array, int index); public virtual void CopyTo(Array array, int index); public virtual IEnumerator GetEnumerator(); public virtual int IndexOf(UIElement element); public virtual void Insert(int index, UIElement element); public virtual void Remove(UIElement element); public virtual void RemoveAt(int index); public virtual void RemoveRange(int index, int count); protected void ClearLogicalParent(UIElement element); protected void SetLogicalParent(UIElement element); &#125; ä»å®ƒæ‰€å®šä¹‰çš„æ–¹æ³•æ¥çœ‹ï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°ä¸€äº›æ·»åŠ æˆ–ç§»é™¤æŸä¸ªå…ƒç´ çš„æ–¹æ³•æˆå‘˜ï¼Œä¾‹å¦‚Addï¼ŒInsertï¼ŒRemoveï¼ŒContainsç­‰ç­‰ï¼Œè€Œè¿™äº›æ–¹æ³•çš„å‚æ•°éƒ½æœ‰ä¸€ä¸ªå«UIElementçš„å½¢å‚ï¼Œè¯´æ˜ä»€ä¹ˆé—®é¢˜ï¼Ÿåªè¦ç»§æ‰¿äºUIElementçš„ç±»ï¼ˆæˆ–æ§ä»¶ï¼‰ï¼Œéƒ½å¯ä»¥æ·»åŠ åˆ°Panelæˆ–Panelå­ç±»çš„Childrenä¸­ï¼Œä»è€Œåœ¨å‰ç«¯å‘ˆç°å‡ºæ¥ã€‚ WPFæä¾›äº†å…­ä¸ªç”¨äºUIå¸ƒå±€çš„Panelå­ç±»ï¼Œåˆ†åˆ«æ˜¯ï¼šGridã€StackPanelã€WrapPanelã€DockPanelã€ VirtualizingStackPanelå’Œ Canvasã€‚ è¿™äº›é¢æ¿å…ƒç´ æ˜“äºä½¿ç”¨ã€åŠŸèƒ½é½å…¨å¹¶ä¸”å¯æ‰©å±•ï¼Œè¶³ä»¥é€‚ç”¨äºå¤§å¤šæ•°åº”ç”¨ç¨‹åºã€‚ ä¸€ä¸ªPanel çš„å‘ˆç°å°±æ˜¯æµ‹é‡å’Œæ’åˆ—å­æ§ä»¶ï¼Œç„¶ååœ¨å±å¹•ä¸Šç»˜åˆ¶å®ƒä»¬ã€‚æ‰€ä»¥åœ¨å¸ƒå±€çš„è¿‡ç¨‹ä¸­ä¼šç»è¿‡ä¸€ç³»åˆ—çš„è®¡ç®—ï¼Œé‚£ä¹ˆå­æ§ä»¶è¶Šå¤šï¼Œæ‰§è¡Œçš„è®¡ç®—æ¬¡æ•°å°±è¶Šå¤šï¼Œåˆ™æ€§èƒ½å°±ä¼šå˜å·®ã€‚å¦‚æœä¸éœ€è¦è¿›è¡Œå¤æ‚çš„å¸ƒå±€ï¼Œåˆ™å°½é‡å°‘ç”¨å¤æ‚å¸ƒå±€æ§ä»¶ï¼ˆå¦‚ Gridå’Œè‡ªå®šä¹‰å¤æ‚çš„Panelï¼‰ï¼›å¦‚æœèƒ½ç®€å•å¸ƒå±€å®ç°å°±å°½é‡ä½¿ç”¨æ„é€ ç›¸å¯¹ç®€å•çš„å¸ƒå±€ï¼ˆå¦‚ Canvasã€UniformGridç­‰ï¼‰ï¼Œè¿™ç§å¸ƒå±€å¯å¸¦æ¥æ›´å¥½çš„æ€§èƒ½ã€‚ å¦‚æœæœ‰å¯èƒ½ï¼Œæˆ‘ä»¬åº”å°½é‡é¿å…è°ƒç”¨ UpdateLayoutæ–¹æ³•ã€‚ å¸ƒå±€ç³»ç»Ÿä¸ºPanelä¸­çš„æ¯ä¸ªå­æ§ä»¶å®Œæˆä¸¤ä¸ªå¤„ç†è¿‡ç¨‹ï¼šæµ‹é‡å¤„ç†è¿‡ç¨‹ï¼ˆMeasureï¼‰å’Œæ’åˆ—å¤„ç†è¿‡ç¨‹ï¼ˆArrangeï¼‰ã€‚æ¯ä¸ªå­ Panel å‡æä¾›è‡ªå·±çš„ MeasureOverride å’Œ ArrangeOverride æ–¹æ³•ï¼Œä»¥å®ç°è‡ªå·±ç‰¹å®šçš„å¸ƒå±€è¡Œä¸ºã€‚ æ¯ä¸ªæ´¾ç”Ÿ Panel å…ƒç´ éƒ½ä»¥ä¸åŒæ–¹å¼å¤„ç†å¤§å°è°ƒæ•´çº¦æŸã€‚ äº†è§£ Panel å¦‚ä½•å¤„ç†æ°´å¹³æˆ–å‚ç›´æ–¹å‘ä¸Šçš„çº¦æŸå¯ä»¥ä½¿å¸ƒå±€æ›´å®¹æ˜“é¢„æµ‹ã€‚ æ§ä»¶åç§° xç»´åº¦ yç»´åº¦ Grid çº¦æŸ çº¦æŸï¼ŒAuto åº”ç”¨äºè¡Œå’Œåˆ—çš„æƒ…å½¢é™¤å¤– StackPanelï¼ˆå‚ç›´ï¼‰ çº¦æŸ æŒ‰å†…å®¹çº¦æŸ StackPanelï¼ˆæ°´å¹³ï¼‰ æŒ‰å†…å®¹çº¦æŸ çº¦æŸ DockPanel çº¦æŸ çº¦æŸ WrapPanel æŒ‰å†…å®¹çº¦æŸ æŒ‰å†…å®¹çº¦æŸ Canvas æŒ‰å†…å®¹çº¦æŸ æŒ‰å†…å®¹çº¦æŸ Gridæ§ä»¶ï¼ˆç½‘æ ¼å¸ƒå±€ï¼‰Gridæ§ä»¶å…¶å®æ˜¯ä¸€ä¸ªçª—ä½“çš„é»˜è®¤æ§ä»¶ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªWPFåº”ç”¨ç¨‹åºåï¼Œå…¶ä¸»çª—ä½“é‡Œé¢ä¼šæœ‰ä¸€ä¸ªGridæ§ä»¶ã€‚æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹æ­¤ç±»çš„ç»“æ„å®šä¹‰ï¼š 1234567891011121314151617181920212223242526272829303132333435public class Grid : Panel, IAddChild&#123; public static readonly DependencyProperty ShowGridLinesProperty; public static readonly DependencyProperty ColumnProperty; public static readonly DependencyProperty RowProperty; public static readonly DependencyProperty ColumnSpanProperty; public static readonly DependencyProperty RowSpanProperty; public static readonly DependencyProperty IsSharedSizeScopeProperty; public Grid(); public ColumnDefinitionCollection ColumnDefinitions &#123; get; &#125; public bool ShowGridLines &#123; get; set; &#125; public RowDefinitionCollection RowDefinitions &#123; get; &#125; protected override int VisualChildrenCount &#123; get; &#125; protected internal override IEnumerator LogicalChildren &#123; get; &#125; public static int GetColumn(UIElement element); public static int GetColumnSpan(UIElement element); public static bool GetIsSharedSizeScope(UIElement element); public static int GetRow(UIElement element); public static int GetRowSpan(UIElement element); public static void SetColumn(UIElement element, int value); public static void SetColumnSpan(UIElement element, int value); public static void SetIsSharedSizeScope(UIElement element, bool value); public static void SetRow(UIElement element, int value); public static void SetRowSpan(UIElement element, int value); public bool ShouldSerializeColumnDefinitions(); public bool ShouldSerializeRowDefinitions(); protected override Size ArrangeOverride(Size arrangeSize); protected override Visual GetVisualChild(int index); protected override Size MeasureOverride(Size constraint); protected internal override void OnVisualChildrenChanged(DependencyObject visualAdded, DependencyObject visualRemoved); &#125; Gridæœ‰ä¸¤ä¸ªéå¸¸å…³é”®çš„å±æ€§ColumnDefinitionså’ŒRowDefinitionsï¼Œåˆ†åˆ«è¡¨ç¤ºåˆ—çš„æ•°é‡é›†åˆå’Œè¡Œçš„æ•°é‡é›†åˆã€‚ColumnDefinitionsé›†åˆä¸­çš„å…ƒç´ ç±»å‹æ˜¯ColumnDefinitionç±»ï¼ŒRowDefinitionsé›†åˆä¸­å…ƒç´ ç±»å‹æ˜¯RowDefinitionç±»ã€‚é»˜è®¤çš„Gridræ§ä»¶æ²¡æœ‰å®šä¹‰è¡Œæ•°å’Œåˆ—æ•°ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒGridé»˜è®¤æƒ…å†µä¸‹ï¼Œè¡Œæ•°å’Œåˆ—æ•°éƒ½ç­‰äº1ï¼Œé‚£ä¹ˆå®ƒå°±åªæœ‰ä¸€ä¸ªå•å…ƒæ ¼ã€‚ 1234&lt;Grid &gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘1&quot; Panel.ZIndex=&quot;1&quot; Margin=&quot;20 40 60 80&quot; Padding=&quot;50&quot; /&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘2&quot; Panel.ZIndex=&quot;0&quot; Margin=&quot;20 40 60 80&quot; Padding=&quot;50&quot; /&gt;&lt;/Grid&gt; å¦‚ä¸Šè¿°ä»£ç æ‰€ç¤ºï¼Œæ­¤æ—¶çš„Gridå› ä¸ºåªæœ‰ä¸€ä¸ªå•å…ƒæ ¼ï¼Œè€ŒGridçš„Childrenå±æ€§é‡Œé¢æœ‰ä¸¤ä¸ªButtonï¼ŒåŠ¿å¿…æœ‰ä¸€ä¸ªButtonä¼šè¢«é®ç›–ã€‚å‡å¦‚æˆ‘ä»¬å¸Œæœ›ä¸¤ä¸ªæŒ‰é’®åŒæ—¶æ˜¾ç¤ºï¼Œåº”è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿè¿™æ—¶å°±æœ‰äº†ä¸¤ä¸ªé€‰æ ¼ï¼Œç¬¬ä¸€ï¼Œä¸¤ä¸ªButtonå·¦å³æ’åˆ—æ˜¾ç¤ºï¼Œç¬¬äºŒï¼Œä¸¤ä¸ªButtonä¸Šä¸‹æ’åˆ—æ˜¾ç¤ºã€‚ ä¸€ã€å·¦å³æ’åˆ— 12345678&lt;Grid &gt; &lt;Grid.ColumnDefinitions&gt; &lt;ColumnDefinition/&gt; &lt;ColumnDefinition/&gt; &lt;/Grid.ColumnDefinitions&gt; &lt;Button Grid.Column=&quot;0&quot; Content=&quot;WPFä¸­æ–‡ç½‘1&quot; Panel.ZIndex=&quot;1&quot; Margin=&quot;20&quot; Padding=&quot;50&quot; /&gt; &lt;Button Grid.Column=&quot;1&quot; Content=&quot;WPFä¸­æ–‡ç½‘2&quot; Panel.ZIndex=&quot;0&quot; Margin=&quot;20&quot; Padding=&quot;50&quot; /&gt;&lt;/Grid&gt; ä»£ç åˆ†æ æˆ‘ä»¬åœ¨Gridæ§ä»¶çš„ColumnDefinitionså±æ€§å¢åŠ äº†ä¸¤ä¸ªColumnDefinitionå¯¹è±¡ï¼Œå¦‚æœåˆ†åˆ«è®¾ç½®äº†ä¸¤ä¸ªæŒ‰é’®çš„Grid.Columné™„åŠ å±æ€§ï¼ŒæŒ‡ç¤ºä¸¤ä¸ªButtonåˆ†åˆ«æ˜¾ç¤ºåœ¨ç¬¬ä¸€åˆ—å’Œç¬¬äºŒåˆ—ï¼Œä»è€Œå®ç°äº†å·¦å³æ’åˆ—ï¼Œå…·ä¸¤ä¸ªæŒ‰é’®åˆ†åˆ«å æ®äº†50%çš„åŒºåŸŸã€‚è¿™æ˜¯å› ä¸ºæˆ‘ä»¬å¹¶æ²¡æœ‰æŒ‡å®šä¸¤ä¸ªColumnDefinitionå¯¹è±¡çš„å®½åº¦ã€‚ äºŒã€ä¸Šä¸‹æ’åˆ— 12345678&lt;Grid&gt; &lt;Grid.RowDefinitions&gt; &lt;RowDefinition/&gt; &lt;RowDefinition/&gt; &lt;/Grid.RowDefinitions&gt; &lt;Button Grid.Row=&quot;0&quot; Content=&quot;WPFä¸­æ–‡ç½‘1&quot; Panel.ZIndex=&quot;1&quot; Margin=&quot;20&quot; Padding=&quot;50&quot; /&gt; &lt;Button Grid.Row=&quot;1&quot; Content=&quot;WPFä¸­æ–‡ç½‘2&quot; Panel.ZIndex=&quot;0&quot; Margin=&quot;20&quot; Padding=&quot;50&quot; /&gt; &lt;/Grid&gt; è¦å®ç°ä¸Šä¸‹æ’åˆ—ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨Gridæ§ä»¶çš„RowDefinitionsä¸­å¢åŠ ä¸¤è¡Œå…ƒç´ å³å¯ï¼Œå³RowDefinitionå¯¹è±¡ã€‚åŒæ—¶ï¼ŒæŒ‡å®šæ¯ä¸ªButtonæ˜¾ç¤ºåœ¨å“ªä¸€è¡Œï¼Œä¾‹å¦‚Grid.Row&#x3D;â€0â€ï¼Œè¡¨ç¤ºæ˜¾ç¤ºåœ¨ç¬¬ä¸€è¡Œã€‚ ä¸‰ã€ä¸Šä¸‹å·¦å³æ’åˆ— ç°åœ¨æˆ‘ä»¬å°†å·¦å³æ’åˆ—å’Œä¸Šä¸‹æ’åˆ—ä¸¤ç§æ¨¡å¼åˆå¹¶èµ·æ¥ï¼Œçœ‹çœ‹ä¼šå‘ç”Ÿä»€ä¹ˆçŠ¶å†µã€‚ 1234567891011121314&lt;Grid&gt; &lt;Grid.RowDefinitions&gt; &lt;RowDefinition/&gt; &lt;RowDefinition/&gt; &lt;/Grid.RowDefinitions&gt; &lt;Grid.ColumnDefinitions&gt; &lt;ColumnDefinition/&gt; &lt;ColumnDefinition/&gt; &lt;/Grid.ColumnDefinitions&gt; &lt;Button Grid.Row=&quot;0&quot; Grid.Column=&quot;0&quot; Content=&quot;WPFä¸­æ–‡ç½‘1&quot; Panel.ZIndex=&quot;1&quot; Margin=&quot;20&quot; /&gt; &lt;Button Grid.Row=&quot;0&quot; Grid.Column=&quot;1&quot; Content=&quot;WPFä¸­æ–‡ç½‘2&quot; Panel.ZIndex=&quot;0&quot; Margin=&quot;20&quot; /&gt; &lt;Button Grid.Row=&quot;1&quot; Grid.Column=&quot;0&quot; Content=&quot;WPFä¸­æ–‡ç½‘3&quot; Panel.ZIndex=&quot;1&quot; Margin=&quot;20&quot; /&gt; &lt;Button Grid.Row=&quot;1&quot; Grid.Column=&quot;1&quot; Content=&quot;WPFä¸­æ–‡ç½‘4&quot; Panel.ZIndex=&quot;0&quot; Margin=&quot;20&quot; /&gt;&lt;/Grid&gt; æˆ‘ä»¬åˆ›å»ºäº†4ä¸ªButtonï¼Œå¹¶åˆ†åˆ«è®¾ç½®äº†å®ƒä»¬æ‰€åœ¨çš„è¡Œå’Œåˆ—ï¼Œè‡³æ­¤ï¼Œç½‘æ ¼çš„å¸ƒå±€æ•ˆæœè·ƒç„¶çº¸ä¸Šã€‚ä»¥ä¸Šå°±æ˜¯Gridæ§ä»¶çš„åŸºæœ¬ç”¨æ³•ã€‚ æ·±å…¥æ¢ç©¶Gridæ§ä»¶ åœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šé‡åˆ°æ›´å¤æ‚çš„ç”¨æ³•ï¼Œæ¯”å¦‚ç¬¬ä¸€è¡Œåªæ˜¾ç¤ºä¸€ä¸ªbuttonï¼Œéœ€è¦è·¨åˆ—æ˜¾ç¤ºï¼Œæˆ–è€…ç¬¬ä¸€åˆ—åªå æ•´ä¸ªGridçš„20%çš„å®½åº¦ç­‰ç­‰ï¼Œè¿™å°±éœ€è¦äº†è§£ColumnDefinitionå’ŒRowDefinitionã€‚å¦å¤–ï¼Œæˆ‘ä»¬éœ€è¦æ˜¾ç¤ºGridçš„ç½‘æ ¼çº¿ï¼Œåˆè¯¥å¦‚ä½•å®ç°å‘¢ï¼Ÿæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä¸€ä¸€å»æ¢å¯»ã€‚ å››ã€è·¨åˆ—æ’åˆ— 12345678910111213&lt;Grid&gt; &lt;Grid.RowDefinitions&gt; &lt;RowDefinition/&gt; &lt;RowDefinition/&gt; &lt;/Grid.RowDefinitions&gt; &lt;Grid.ColumnDefinitions&gt; &lt;ColumnDefinition/&gt; &lt;ColumnDefinition/&gt; &lt;/Grid.ColumnDefinitions&gt; &lt;Button Grid.Row=&quot;0&quot; Grid.Column=&quot;0&quot; Content=&quot;WPFä¸­æ–‡ç½‘1&quot; Panel.ZIndex=&quot;1&quot; Margin=&quot;20&quot; Grid.ColumnSpan=&quot;2&quot;/&gt; &lt;Button Grid.Row=&quot;1&quot; Grid.Column=&quot;0&quot; Content=&quot;WPFä¸­æ–‡ç½‘3&quot; Panel.ZIndex=&quot;1&quot; Margin=&quot;20&quot; /&gt; &lt;Button Grid.Row=&quot;1&quot; Grid.Column=&quot;1&quot; Content=&quot;WPFä¸­æ–‡ç½‘4&quot; Panel.ZIndex=&quot;0&quot; Margin=&quot;20&quot; /&gt;&lt;/Grid&gt; æˆ‘ä»¬åœ¨åŸæœ‰åŸºç¡€ä¸Šåˆ æ‰äº†ä¸€ä¸ªæŒ‰é’®ï¼Œå¹¶å°†ç¬¬ä¸€ä¸ªæŒ‰é’®çš„Grid.ColumnSpané™„åŠ å±æ€§è®¾ç½®ä¸º2ï¼Œè¡¨ç¤ºä»ç¬¬0åˆ—å¾€å³è·¨ä¸¤åˆ—ï¼Œæ­£å¥½å°±å‘ˆç°å‡ºå›¾ä¸­çš„æ•ˆæœã€‚æ‚¨ä¹Ÿå¯ä»¥å°è¯•è·¨è¡Œæ˜¾ç¤ºï¼Œåªéœ€è¦è®¾ç½®æŒ‰é’®çš„Grid.RowSpanå±æ€§ã€‚ äº”ã€å›ºå®šåˆ—å®½ 1234567891011121314&lt;Grid&gt; &lt;Grid.RowDefinitions&gt; &lt;RowDefinition/&gt; &lt;RowDefinition/&gt; &lt;/Grid.RowDefinitions&gt; &lt;Grid.ColumnDefinitions&gt; &lt;ColumnDefinition Width=&quot;120&quot;/&gt; &lt;ColumnDefinition/&gt; &lt;/Grid.ColumnDefinitions&gt; &lt;Button Grid.Row=&quot;0&quot; Grid.Column=&quot;0&quot; Content=&quot;WPFä¸­æ–‡ç½‘1&quot; Panel.ZIndex=&quot;1&quot; Margin=&quot;20&quot; /&gt; &lt;Button Grid.Row=&quot;0&quot; Grid.Column=&quot;1&quot; Content=&quot;WPFä¸­æ–‡ç½‘2&quot; Panel.ZIndex=&quot;0&quot; Margin=&quot;20&quot; /&gt; &lt;Button Grid.Row=&quot;1&quot; Grid.Column=&quot;0&quot; Content=&quot;WPFä¸­æ–‡ç½‘3&quot; Panel.ZIndex=&quot;1&quot; Margin=&quot;20&quot; /&gt; &lt;Button Grid.Row=&quot;1&quot; Grid.Column=&quot;1&quot; Content=&quot;WPFä¸­æ–‡ç½‘4&quot; Panel.ZIndex=&quot;0&quot; Margin=&quot;20&quot; /&gt;&lt;/Grid&gt; å¦‚å›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬åªéœ€è¦è®¾ç½®ç¬¬ä¸€è¡ŒColumnDefinitionçš„Widthå±æ€§ï¼Œè®©å…¶å®½åº¦å›ºå®šä¸º120åƒç´ ï¼Œé‚£ä¹ˆç¬¬äºŒåˆ—çš„å®½åº¦ç­‰äºGridçš„å®½åº¦å‡å»120åƒç´ ï¼Œå…¶å†…éƒ¨çš„Buttonå®½åº¦ä¹Ÿéšä¹‹è‡ªé€‚åº”ã€‚è¿™å°±æ˜¯WPFå¸ƒå±€è‡ªé€‚åº”çš„å¥½å¤„ã€‚ å…­ã€è°ƒæ•´è¡Œé«˜å’Œåˆ—å®½ Gridæ§ä»¶çš„è¡Œé«˜å’Œåˆ—å®½çš„è®¾ç½®ååˆ†ä¸°å¯Œï¼Œäº†è§£å®ƒä»¬çš„ç”¨æ³•ï¼Œæœ‰åŠ©äºè®¾è®¡å‡ºæ›´å‡ºè‰²çš„å¸ƒå±€ã€‚ åç§° è¯´æ˜ ç»å¯¹è®¾ç½®å°ºå¯¸ ä½¿ç”¨è®¾å¤‡æ— å…³å•ä½å‡†ç¡®åœ°è®¾ç½®å°ºå¯¸ï¼Œå°±æ˜¯ç»™ä¸€ä¸ªå®é™…çš„æ•°å­—ï¼Œä½†é€šå¸¸å°†æ­¤å€¼æŒ‡å®šä¸ºæ•´æ•°ï¼ˆåƒç´ ï¼‰ã€‚å¦‚ï¼š è‡ªåŠ¨è®¾ç½®å°ºå¯¸ å€¼ä¸ºAutoï¼Œå®é™…ä½œç”¨å°±æ˜¯å–å®é™…æ§ä»¶æ‰€éœ€çš„æœ€å°å€¼ï¼Œæ¯è¡Œå’Œæ¯åˆ—çš„å°ºå¯¸åˆšå¥½æ»¡è¶³éœ€è¦ï¼Œè¿™æ˜¯æœ€æœ‰ç”¨çš„å°ºå¯¸è®¾ç½®æ–¹å¼ã€‚å¦‚ï¼š æŒ‰æ¯”ä¾‹è®¾ç½®è®¾ç½®å°ºå¯¸ æŒ‰æ¯”ä¾‹å°†ç©ºé—´åˆ†å‰²åˆ°ä¸€ç»„è¡Œå’Œåˆ—ä¸­ã€‚è¿™æ˜¯å¯¹æ‰€æœ‰è¡Œå’Œåˆ—çš„æ ‡å‡†è®¾ç½®ã€‚é€šå¸¸å€¼ä¸ºæˆ–Nï¼Œå®é™…ä½œç”¨å°±æ˜¯å–å°½å¯èƒ½å¤§çš„å€¼ï¼Œå½“æŸä¸€åˆ—æˆ–è¡Œè¢«å®šä¹‰ä¸ºåˆ™æ˜¯å°½å¯èƒ½å¤§ï¼Œå½“å‡ºç°å¤šåˆ—æˆ–è¡Œè¢«å®šä¹‰ä¸ºåˆ™æ˜¯ä»£è¡¨å‡ è€…ä¹‹é—´æŒ‰æ¯”ä¾‹æ–¹è®¾ç½®å°ºå¯¸ã€‚å¦‚ï¼š æŒ‡å®šæƒé‡ï¼Œå³ç¬¬2åˆ—çš„å®½åº¦æ˜¯ç¬¬1åˆ—çš„ä¸¤å€ ä¸ƒã€Gridæ˜¾ç¤ºç½‘æ ¼çº¿ 1234567891011121314&lt;Grid ShowGridLines=&quot;True&quot; Margin=&quot;5&quot;&gt; &lt;Grid.RowDefinitions&gt; &lt;RowDefinition/&gt; &lt;RowDefinition/&gt; &lt;/Grid.RowDefinitions&gt; &lt;Grid.ColumnDefinitions&gt; &lt;ColumnDefinition Width=&quot;120&quot;/&gt; &lt;ColumnDefinition/&gt; &lt;/Grid.ColumnDefinitions&gt; &lt;Button Grid.Row=&quot;0&quot; Grid.Column=&quot;0&quot; Content=&quot;WPFä¸­æ–‡ç½‘1&quot; Panel.ZIndex=&quot;1&quot; Margin=&quot;20&quot; /&gt; &lt;Button Grid.Row=&quot;0&quot; Grid.Column=&quot;1&quot; Content=&quot;WPFä¸­æ–‡ç½‘2&quot; Panel.ZIndex=&quot;0&quot; Margin=&quot;20&quot; /&gt; &lt;Button Grid.Row=&quot;1&quot; Grid.Column=&quot;0&quot; Content=&quot;WPFä¸­æ–‡ç½‘3&quot; Panel.ZIndex=&quot;1&quot; Margin=&quot;20&quot; /&gt; &lt;Button Grid.Row=&quot;1&quot; Grid.Column=&quot;1&quot; Content=&quot;WPFä¸­æ–‡ç½‘4&quot; Panel.ZIndex=&quot;0&quot; Margin=&quot;20&quot; /&gt;&lt;/Grid&gt; åªéœ€è¦è®¾ç½®Gridçš„ShowGridLines&#x3D;Trueï¼Œå°±å¯ä»¥æ˜¾ç¤ºGridçš„ç½‘æ ¼çº¿ï¼Œä½†æ˜¯è¿™ç§è™šçº¿æ•ˆæœå¹¶ä¸å‹å¥½ï¼Œæˆ‘ä»¬è¿˜æœ‰æ›²çº¿æ•‘å›½çš„æ–¹æ¡ˆã€‚ 1234567891011121314151617&lt;Grid Margin=&quot;5&quot;&gt; &lt;Grid.RowDefinitions&gt; &lt;RowDefinition/&gt; &lt;RowDefinition/&gt; &lt;/Grid.RowDefinitions&gt; &lt;Grid.ColumnDefinitions&gt; &lt;ColumnDefinition Width=&quot;120&quot;/&gt; &lt;ColumnDefinition/&gt; &lt;/Grid.ColumnDefinitions&gt; &lt;Border Grid.Row=&quot;0&quot; Grid.RowSpan=&quot;2&quot; Grid.Column=&quot;0&quot; Grid.ColumnSpan=&quot;2&quot; BorderBrush=&quot;Gray&quot; BorderThickness=&quot;1&quot;/&gt; &lt;Border Grid.Row=&quot;0&quot; Grid.Column=&quot;0&quot; Grid.ColumnSpan=&quot;2&quot; BorderBrush=&quot;Gray&quot; BorderThickness=&quot;0 0 0 1&quot;/&gt; &lt;Border Grid.Row=&quot;0&quot; Grid.RowSpan=&quot;2&quot; Grid.Column=&quot;0&quot; BorderBrush=&quot;Gray&quot; BorderThickness=&quot;0 0 1 0&quot;/&gt; &lt;Button Grid.Row=&quot;0&quot; Grid.Column=&quot;0&quot; Content=&quot;WPFä¸­æ–‡ç½‘1&quot; Panel.ZIndex=&quot;1&quot; Margin=&quot;20&quot; /&gt; &lt;Button Grid.Row=&quot;0&quot; Grid.Column=&quot;1&quot; Content=&quot;WPFä¸­æ–‡ç½‘2&quot; Panel.ZIndex=&quot;0&quot; Margin=&quot;20&quot; /&gt; &lt;Button Grid.Row=&quot;1&quot; Grid.Column=&quot;0&quot; Content=&quot;WPFä¸­æ–‡ç½‘3&quot; Panel.ZIndex=&quot;1&quot; Margin=&quot;20&quot; /&gt; &lt;Button Grid.Row=&quot;1&quot; Grid.Column=&quot;1&quot; Content=&quot;WPFä¸­æ–‡ç½‘4&quot; Panel.ZIndex=&quot;0&quot; Margin=&quot;20&quot; /&gt;&lt;/Grid&gt; æˆ‘ä»¬åœ¨Gridå†…éƒ¨å¢åŠ äº†3ä¸ªBorderï¼Œç¬¬ä¸€ä¸ªBorderç”¨æ¥æ˜¾ç¤ºå¤–è¾¹æ¡†ï¼Œç¬¬äºŒä¸ªBorderæ˜¾ç¤ºä¸­é—´çš„æ¨ªçº¿ï¼Œç¬¬ä¸‰ä¸ªBorderæ˜¾ç¤ºä¸­é—´çš„ç«–çº¿ï¼Œè¿™æ—¶æ‰€ç”¨çš„çŸ¥è¯†ç‚¹å‡ ä¹éƒ½æ˜¯Gridçš„è·¨è¡Œå’Œè·¨åˆ—å±æ€§ï¼Œå¦å¤–è¿˜æœ‰è¾¹æ¡†é¢œè‰²åˆ·å­BorderBrushå’Œè¾¹æ¡†åšåº¦BorderThicknessã€‚ æ€»ç»“ Gridæ§ä»¶ç»å¯¹æ˜¯WPFä¸­æ‰€æœ‰å¸ƒå±€æ§ä»¶ä¸­æœ€å¥½ç”¨çš„ä¸€ä¸ªï¼Œå› ä¸ºå®ƒè‡ªé€‚åº”å±å¹•çš„å®½åº¦ï¼Œæœ€å…³é”®çš„ä¸€ç‚¹æ˜¯ï¼Œå®ƒåœ¨å‘ˆç°æ—¶ï¼Œå…¶ActualWidthå®é™…å®½åº¦å’ŒActualHeightå®é™…é«˜åº¦ä¼šæœ‰ä¸€ä¸ªè®¡ç®—å€¼ï¼Œæˆ‘ä»¬åœ¨ä¸šåŠ¡å¼€å‘ä¸­ï¼Œæœ‰æ—¶å€™è¦æ ¹æ®çˆ¶æ§ä»¶çš„å®é™…å®½åº¦å’Œé«˜åº¦æ¥è®¡ç®—å­æ§ä»¶çš„å‘ˆç°ä½ç½®å’Œå¤§å°ã€‚ é™¤äº†Gridè¿™ç§ç½‘æ ¼åŒ–çš„å¸ƒå±€ï¼Œä¸‹é¢æˆ‘ä»¬å°†ä»‹ç»å¦ä¸€ç§å¸ƒå±€æ–¹å¼â€”â€”å‡åˆ†å¸ƒå±€ UniformGridæ§ä»¶ï¼ˆå‡åˆ†å¸ƒå±€ï¼‰UniformGridå’ŒGridæœ‰äº›ç›¸ä¼¼ï¼Œåªä¸è¿‡UniformGridçš„æ¯ä¸ªå•å…ƒæ ¼é¢ç§¯éƒ½æ˜¯ç›¸ç­‰çš„ï¼Œä¸ç®¡æ˜¯æ¨ªå‘çš„å•å…ƒæ ¼ï¼Œæˆ–æ˜¯çºµå‘çš„å•å…ƒæ ¼ï¼Œå®ƒä»¬ä¼šå¹³åˆ†æ•´ä¸ªUniformGridã€‚æˆ‘ä»¬å…ˆçœ‹çœ‹å®ƒçš„ç»“æ„å®šä¹‰ï¼š 12345678910111213141516public class UniformGrid : Panel&#123; public static readonly DependencyProperty FirstColumnProperty; public static readonly DependencyProperty ColumnsProperty; public static readonly DependencyProperty RowsProperty; public UniformGrid(); public int FirstColumn &#123; get; set; &#125; public int Columns &#123; get; set; &#125; public int Rows &#123; get; set; &#125; protected override Size ArrangeOverride(Size arrangeSize); protected override Size MeasureOverride(Size constraint); &#125; UniformGridæ§ä»¶æä¾›äº†3ä¸ªå±æ€§ï¼Œåˆ†åˆ«æ˜¯FirstColumnã€Columns ã€Rows ã€‚FirstColumnè¡¨ç¤ºç¬¬ä¸€è¡Œè¦ç©ºå‡ ä¸ªå•å…ƒæ ¼ï¼Œåé¢ä¸¤ä¸ªå±æ€§åˆ†åˆ«ç”¨äºè®¾ç½®è¡Œæ•°å’Œåˆ—æ•°ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬ä»¥å®é™…çš„ä¾‹å­æ¥åˆ†æè¿™3ä¸ªå±æ€§çš„ç”¨æ³•ã€‚ 123456&lt;UniformGrid&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘1&quot; Margin=&quot;2&quot;/&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘2&quot; Margin=&quot;2&quot;/&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘3&quot; Margin=&quot;2&quot;/&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘4&quot; Margin=&quot;2&quot;/&gt;&lt;/UniformGrid&gt; è¿™æ˜¯æˆ‘ä»¬æ²¡æœ‰UniformGridçš„å±æ€§çš„æ•ˆæœï¼Œå®ƒä¼šæ ¹æ®å­å…ƒç´ çš„æ•°é‡å’ŒUniformGridè‡ªèº«çš„å°ºå¯¸æ¥å†³å®šè¡Œæ•°å’Œåˆ—æ•°ã€‚ 123456&lt;UniformGrid FirstColumn=&quot;1&quot; Rows=&quot;3&quot; Columns=&quot;3&quot;&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘1&quot; Margin=&quot;2&quot;/&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘2&quot; Margin=&quot;2&quot;/&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘3&quot; Margin=&quot;2&quot;/&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘4&quot; Margin=&quot;2&quot;/&gt;&lt;/UniformGrid&gt; æˆ‘ä»¬æ•…æ„è®¾è®¡äº†å½“å‰UniformGridä¸º3è¡Œ3åˆ—ï¼ŒåŒæ—¶è®¾ç½®ç¬¬ä¸€è¡Œç¬¬ä¸€ä¸ªå•å…ƒæ ¼ä¿æŒç©ºç™½ï¼Œäºæ˜¯æˆ‘ä»¬å°±çœ‹åˆ°äº†ä¸Šå›¾ä¸­çš„æ•ˆæœã€‚ UniformGridæ§ä»¶ä½¿ç”¨éå¸¸ç®€å•æ–¹ä¾¿ï¼Œé€šå¸¸ç”¨äºå±€éƒ¨çš„å¸ƒå±€ã€‚ StackPanelæ§ä»¶ï¼ˆæ ˆå¼å¸ƒå±€ï¼‰StackPanelç”¨äºæ°´å¹³æˆ–å‚ç›´å †å å­å…ƒç´ ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒStackPanelåŒæ ·ä¹Ÿæœ‰ä¸€ä¸ªChildrenå±æ€§ï¼Œè€ŒChildrené›†åˆä¸­çš„å…ƒç´ å‘ˆç°åœ¨ç•Œé¢ä¸Šæ—¶ï¼Œåªèƒ½æ˜¯æŒ‰æ°´å¹³æˆ–å‚ç›´æ–¹å¼å¸ƒå±€ã€‚æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹å®ƒçš„ç»“æ„å®šä¹‰ï¼š 1234567891011121314151617181920212223242526272829303132333435363738public class StackPanel : Panel, IScrollInfo, IStackMeasure&#123; public static readonly DependencyProperty OrientationProperty; public StackPanel(); public double HorizontalOffset &#123; get; &#125; public double ViewportHeight &#123; get; &#125; public double ViewportWidth &#123; get; &#125; public double ExtentHeight &#123; get; &#125; public double ExtentWidth &#123; get; &#125; public bool CanVerticallyScroll &#123; get; set; &#125; public bool CanHorizontallyScroll &#123; get; set; &#125; public Orientation Orientation &#123; get; set; &#125; public double VerticalOffset &#123; get; &#125; public ScrollViewer ScrollOwner &#123; get; set; &#125; protected internal override Orientation LogicalOrientation &#123; get; &#125; protected internal override bool HasLogicalOrientation &#123; get; &#125; public void LineDown(); public void LineLeft(); public void LineRight(); public void LineUp(); public Rect MakeVisible(Visual visual, Rect rectangle); public void MouseWheelDown(); public void MouseWheelLeft(); public void MouseWheelRight(); public void MouseWheelUp(); public void PageDown(); public void PageLeft(); public void PageRight(); public void PageUp(); public void SetHorizontalOffset(double offset); public void SetVerticalOffset(double offset); protected override Size ArrangeOverride(Size arrangeSize); protected override Size MeasureOverride(Size constraint); &#125; StackPanelæä¾›äº†ä¸€äº›å±æ€§å’Œæ–¹æ³•ï¼Œæœ€å¸¸ç”¨çš„æ˜¯Orientationæšä¸¾å±æ€§ï¼Œç”¨äºè®¾ç½®å­æ§ä»¶åœ¨StackPanelå†…éƒ¨çš„æ’åˆ—æ–¹å¼ï¼Œåˆ†åˆ«æ˜¯æ°´å¹³æ’åˆ—ï¼ˆHorizontalï¼‰å’Œå‚ç›´æ’åˆ—ï¼ˆVerticalï¼‰ã€‚é»˜è®¤å€¼æ˜¯å‚ç›´æ’åˆ—ï¼ˆVerticalï¼‰ã€‚ ä¸€ã€æ°´å¹³æ’åˆ— 123456&lt;StackPanel Orientation=&quot;Vertical&quot;&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘1&quot; Margin=&quot;20&quot; /&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘2&quot; Margin=&quot;20&quot; /&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘3&quot; Margin=&quot;20&quot; /&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘4&quot; Margin=&quot;20&quot; /&gt;&lt;/StackPanel&gt; è¯·æ³¨æ„ï¼Œå½“StackPanelå­å…ƒç´ å¤„äºå‚ç›´æ’åˆ—æ—¶ï¼Œæ­¤æ—¶å­å…ƒç´ çš„å®½åº¦é»˜è®¤ä¸StakcPanelçš„å®½åº¦ä¿æŒä¸€è‡´ï¼Œä½†æ˜¯å­å…ƒç´ çš„é«˜åº¦æ˜¯ä¸å…¶è‡ªèº«çš„é«˜åº¦è‡ªé€‚åº”æ˜¾ç¤ºã€‚ äºŒã€å‚ç›´æ’åˆ— 123456&lt;StackPanel Orientation=&quot;Horizontal&quot;&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘1&quot; Margin=&quot;20&quot; /&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘2&quot; Margin=&quot;20&quot; /&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘3&quot; Margin=&quot;20&quot; /&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘4&quot; Margin=&quot;20&quot; /&gt;&lt;/StackPanel&gt; è¯·æ³¨æ„ï¼Œå½“StackPanelå­å…ƒç´ å¤„äºæ°´å¹³æ’åˆ—æ—¶ï¼Œæ­¤æ—¶å­å…ƒç´ çš„é«˜åº¦é»˜è®¤ä¸StakcPanelçš„é«˜åº¦ä¿æŒä¸€è‡´ï¼Œä½†æ˜¯å­å…ƒç´ çš„å®½åº¦æ˜¯ä¸å…¶è‡ªèº«çš„å®½åº¦è‡ªé€‚åº”æ˜¾ç¤ºã€‚ æ·±å…¥æ¢ç©¶StackPanelæ§ä»¶ å¯ä»¥åˆ©ç”¨å­æ§ä»¶çš„HorizontalAlignmentå±æ€§æˆ–VerticalAlignmentæ¥è®¾ç½®å­æ§ä»¶åœ¨StackPanelå†…éƒ¨çš„æ˜¾ç¤ºä½ç½®ï¼Œæ¯”å¦‚åœ¨å‚ç›´æ’åˆ—å¸ƒå±€æ¨¡å¼ä¸‹ï¼Œå¯ä»¥è®¾ç½®HorizontalAlignmentå±æ€§å€¼ï¼ŒLeftè¡¨ç¤ºæ˜¾ç¤ºåœ¨å·¦åˆ™ï¼ŒRightæ˜¾ç¤ºåœ¨å³åˆ™ï¼ŒCenteråˆ™å±…ä¸­æ˜¾ç¤ºï¼ŒStretchè¡¨ç¤ºæ‹‰ä¼¸å¡«å……æ˜¾ç¤ºã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç”±äºWPFçš„æ§ä»¶å¸ƒå±€éƒ½æ˜¯é‡‡ç”¨è‡ªé€‚åº”è®¡ç®—æ¯ä¸ªæ§ä»¶çš„ä½ç½®ï¼Œæ‰€ä»¥åœ¨è®¾ç½®äº†HorizontalAlignmentæˆ–VerticalAlignmentåï¼Œå­æ§ä»¶çš„å®½åº¦å’Œé«˜åº¦éƒ½ä¼šé‡æ–°è®¡ç®—ï¼Œä¸»è¦æ˜¯æ ¹æ®è‡ªèº«å†…å®¹çš„å°ºå¯¸è®¡ç®—ã€‚ 12345678910111213&lt;ScrollViewer&gt; &lt;StackPanel Orientation=&quot;Vertical&quot;&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘1&quot; Margin=&quot;20&quot; HorizontalAlignment=&quot;Left&quot;/&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘2&quot; Margin=&quot;20&quot; HorizontalAlignment=&quot;Right&quot;/&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘3&quot; Margin=&quot;20&quot; HorizontalAlignment=&quot;Center&quot;/&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘4&quot; Margin=&quot;20&quot; HorizontalAlignment=&quot;Stretch&quot;/&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘5&quot; Margin=&quot;20&quot; /&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘6&quot; Margin=&quot;20&quot; /&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘7&quot; Margin=&quot;20&quot; /&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘8&quot; Margin=&quot;20&quot; /&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘9&quot; Margin=&quot;20&quot; /&gt; &lt;/StackPanel&gt;&lt;/ScrollViewer&gt; äºæ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸Šå›¾ä¸­å‰ä¸‰è¡Œçš„æŒ‰é’®éƒ½æ˜¯æ ¹æ®è‡ªèº«å†…å®¹çš„å®½é«˜è‡ªé€‚åº”ç»˜åˆ¶çš„ã€‚å¦å¤–ï¼Œå¦‚æœStackPanelå†…éƒ¨çš„å­æ§ä»¶å¤ªå¤šï¼Œåˆ™éœ€è¦é…åˆæ»šåŠ¨æ¡å®¹å™¨ScrollVieweræ§ä»¶ã€‚ å’ŒStackPanelç±»ä¼¼çš„æ§ä»¶ï¼Œè¿˜æœ‰ä¸¤ä¸ªï¼Œåˆ†åˆ«æ˜¯WrapPanelå’ŒDockPanelã€‚ä¸‹ä¸€èŠ‚ï¼Œæˆ‘ä»¬å°†æ¢è®¨WrapPanelæ§ä»¶ã€‚ WrapPanelæ§ä»¶ï¼ˆç€‘å¸ƒæµå¸ƒå±€ï¼‰WrapPanelæ§ä»¶è¡¨ç¤ºå°†å…¶å­æ§ä»¶ä»å·¦åˆ°å³çš„é¡ºåºæ’åˆ—ï¼Œå¦‚æœç¬¬ä¸€è¡Œæ˜¾ç¤ºä¸äº†ï¼Œåˆ™è‡ªåŠ¨æ¢è‡³ç¬¬äºŒè¡Œï¼Œç»§ç»­æ˜¾ç¤ºå‰©ä½™çš„å­æ§ä»¶ã€‚æˆ‘ä»¬æ¥çœ‹çœ‹å®ƒçš„ç»“æ„å®šä¹‰ï¼š 12345678910111213141516public class WrapPanel : Panel&#123; public static readonly DependencyProperty ItemWidthProperty; public static readonly DependencyProperty ItemHeightProperty; public static readonly DependencyProperty OrientationProperty; public WrapPanel(); public double ItemWidth &#123; get; set; &#125; public double ItemHeight &#123; get; set; &#125; public Orientation Orientation &#123; get; set; &#125; protected override Size ArrangeOverride(Size finalSize); protected override Size MeasureOverride(Size constraint); &#125; è¿™ä¸ªæ§ä»¶æ¯”è¾ƒç®€å•ï¼Œåªæä¾›äº†3ä¸ªå±æ€§ï¼Œåˆ†åˆ«æ˜¯Orientationä»£è¡¨å­æ§ä»¶çš„æ’åˆ—æ–¹å‘ï¼ŒItemWidthä»£è¡¨å­æ§ä»¶çš„ï¼ˆæœ€å¤§ï¼‰å®½åº¦ï¼ŒItemHeightä»£è¡¨å­æ§ä»¶çš„ï¼ˆæœ€å¤§ï¼‰é«˜åº¦ã€‚é»˜è®¤çš„æ’åˆ—æ–¹å‘æ˜¯æ°´å¹³æ–¹å‘ã€‚ ä¸€ã€æ°´å¹³æ’åˆ— 123456789101112&lt;WrapPanel Orientation=&quot;Horizontal&quot;&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘1&quot; Margin=&quot;5&quot; HorizontalAlignment=&quot;Left&quot;/&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘2&quot; Margin=&quot;5&quot; HorizontalAlignment=&quot;Right&quot;/&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘3&quot; Margin=&quot;5&quot; HorizontalAlignment=&quot;Center&quot;/&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘4&quot; Margin=&quot;5&quot; HorizontalAlignment=&quot;Stretch&quot;/&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘5&quot; Margin=&quot;5&quot; /&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘6&quot; Margin=&quot;5&quot; /&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘7&quot; Margin=&quot;5&quot; /&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘8&quot; Margin=&quot;5&quot; /&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘9&quot; Margin=&quot;5&quot; /&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘10&quot; Margin=&quot;5&quot; /&gt;&lt;/WrapPanel&gt; ç”±ä¸Šå›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬åœ¨WrapPanelçš„Childrenå±æ€§ä¸­æ”¾äº†10ä¸ªButtonï¼Œåˆ†æˆäº†ä¸¤è¡Œæ˜¾ç¤ºï¼Œè¯·æ³¨æ„ä¸€ä¸ªç»†èŠ‚ï¼ŒWrapPanelçš„å­å…ƒç´ çš„é«˜åº¦å’Œå®½åº¦éƒ½æ˜¯æ ¹æ®å­å…ƒç´ è‡ªèº«å†…å®¹çš„å°ºå¯¸å‘ˆç°ã€‚å¦å¤–ï¼Œå½“WrapPanelå¤„äºæ°´å¹³æ’åˆ—æ—¶ï¼Œå­å…ƒç´ çš„HorizontalAlignmentæ˜¯ä¸èµ·ä½œç”¨çš„ã€‚ äºŒã€å‚ç›´æ’åˆ— 12345678910111213141516171819202122&lt;WrapPanel Orientation=&quot;Vertical&quot;&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘1&quot; Margin=&quot;5&quot; HorizontalAlignment=&quot;Left&quot;/&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘2&quot; Margin=&quot;5&quot; HorizontalAlignment=&quot;Right&quot;/&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘3&quot; Margin=&quot;5&quot; HorizontalAlignment=&quot;Center&quot;/&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘4&quot; Margin=&quot;5&quot; HorizontalAlignment=&quot;Stretch&quot;/&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘5&quot; Margin=&quot;5&quot; /&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘6&quot; Margin=&quot;5&quot; /&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘7&quot; Margin=&quot;5&quot; /&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘8&quot; Margin=&quot;5&quot; /&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘9&quot; Margin=&quot;5&quot; /&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘10&quot; Margin=&quot;5&quot; /&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘12&quot; Margin=&quot;5&quot; /&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘13&quot; Margin=&quot;5&quot; /&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘14&quot; Margin=&quot;5&quot; /&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘15&quot; Margin=&quot;5&quot; /&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘16&quot; Margin=&quot;5&quot; /&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘17&quot; Margin=&quot;5&quot; /&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘18&quot; Margin=&quot;5&quot; /&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘19&quot; Margin=&quot;5&quot; /&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘20&quot; Margin=&quot;5&quot; /&gt; &lt;/WrapPanel&gt; è¿™é‡Œæˆ‘ä»¬æ”¾äº†20ä¸ªbuttonåœ¨WrapPanelæ§ä»¶ä¸­ï¼Œå¹¶è®¾ç½®Orientationå±æ€§ä¸ºVerticalï¼ˆå‚ç›´æ’åˆ—ï¼‰ï¼Œæ­¤æ—¶ï¼Œè¯·è§‚å¯Ÿå‰é¢3ä¸ªæŒ‰é’®çš„HorizontalAlignmentçŠ¶æ€ï¼Œå¯ä»¥å¾ˆæ¸…æ™°çš„çœ‹åˆ°ï¼Œç¬¬ä¸€ä¸ªæŒ‰é’®å±…å·¦æ˜¾ç¤ºï¼Œç¬¬äºŒä¸ªæŒ‰é’®å±…å³æ˜¾ç¤ºï¼Œç¬¬ä¸‰ä¸ªæŒ‰é’®å±…ä¸­æ˜¾ç¤ºï¼Œè¯´æ˜åœ¨Verticalå‚ç›´æ’åˆ—ä¸‹ï¼Œå­å…ƒç´ çš„æ°´å¹³çŠ¶æ€æ‰ä¼šç”Ÿæ•ˆï¼Œåä¹‹äº¦ç„¶ã€‚ ä¸‰ã€æŒ‡å®šå­å…ƒç´ å®½é«˜ 123456789101112&lt;WrapPanel Orientation=&quot;Horizontal&quot; ItemWidth=&quot;80&quot; ItemHeight=&quot;80&quot;&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘1&quot; Margin=&quot;5&quot; HorizontalAlignment=&quot;Left&quot;/&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘2&quot; Margin=&quot;5&quot; HorizontalAlignment=&quot;Right&quot;/&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘3&quot; Margin=&quot;5&quot; HorizontalAlignment=&quot;Center&quot;/&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘4&quot; Margin=&quot;5&quot; HorizontalAlignment=&quot;Stretch&quot;/&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘5&quot; Margin=&quot;5&quot; /&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘6&quot; Margin=&quot;5&quot; /&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘7&quot; Margin=&quot;5&quot; /&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘8&quot; Margin=&quot;5&quot; /&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘9&quot; Margin=&quot;5&quot; /&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘10&quot; Margin=&quot;5&quot; /&gt;&lt;/WrapPanel&gt; ç”±æ­¤å¯ä»¥ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æŒ‡å®šå­å…ƒç´ çš„å®½åº¦å’Œé«˜åº¦ï¼Œä»¥ä¾¿ç»Ÿä¸€è§‚å¯Ÿã€‚ä¸‹ä¸€èŠ‚ï¼Œæˆ‘ä»¬å°†æ¢è®¨ä¸WrapPaneléå¸¸ç›¸ä¼¼çš„å¸ƒå±€æ§ä»¶DockPanelã€‚ DockPanelæ§ä»¶ï¼ˆåœé å¸ƒå±€ï¼‰å®˜æ–¹è§£é‡Šï¼Œå®šä¹‰ä¸€ä¸ªåŒºåŸŸï¼Œä»ä¸­å¯ä»¥æŒ‰ç›¸å¯¹ä½ç½®æ°´å¹³æˆ–å‚ç›´æ’åˆ—å„ä¸ªå­å…ƒç´ ã€‚æˆ‘ä»¬è¿˜æ˜¯å…ˆæ¥çœ‹ä¸€ä¸‹å®ƒçš„ç»“æ„å®šä¹‰ï¼š 123456789101112131415public class DockPanel : Panel&#123; public static readonly DependencyProperty LastChildFillProperty; public static readonly DependencyProperty DockProperty; public DockPanel(); public bool LastChildFill &#123; get; set; &#125; public static Dock GetDock(UIElement element); public static void SetDock(UIElement element, Dock dock); protected override Size ArrangeOverride(Size arrangeSize); protected override Size MeasureOverride(Size constraint); &#125; DockPanelæä¾›äº†ä¸€ä¸ªLastChildFill å±æ€§ï¼Œç”¨æ¥æŒ‡ç¤ºæœ€åä¸€ä¸ªå­å…ƒç´ æ˜¯å¦å¡«æ»¡å‰©ä½™çš„ç©ºé—´ã€‚å…¶æ¬¡ï¼Œå®ƒè¿˜æä¾›äº†ä¸€ä¸ªæšä¸¾ä¾èµ–å±æ€§ï¼Œå«Dockã€‚è¿™ä¸ªå±æ€§æ˜¯é™„åŠ åˆ°å­å…ƒç´ èº«ä¸Šçš„ï¼Œç”¨æ¥æŒ‡ç¤ºå­å…ƒç´ åœ¨DockPanelæ˜¾ç¤ºåœé æ–¹ä½ï¼Œå…¶å€¼åˆ†ä¸ºLeftï¼ŒRightï¼ŒTopï¼ŒBottomã€‚ DockPanelå› ä¸ºç»§æ‰¿äº†FrameworkElementåŸºç±»ï¼Œæ‰€ä»¥æ‚¨è¿˜å¯ä»¥ä½¿ç”¨FrameworkElementåŸºç±»çš„HorizontalAlignmentï¼ˆæ°´å¹³å¯¹é½ï¼‰å’ŒVerticalAlignmentï¼ˆå‚ç›´å¯¹é½ï¼‰ä¸¤ä¸ªå±æ€§ï¼Œç”¨æ¥è®¾ç½®å­å…ƒç´ çš„æ’åˆ—æ–¹å¼ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å°†æ¼”ç¤ºå®ƒæœ€åŸºæœ¬çš„ç”¨æ³•ã€‚ ä¸€ã€ç»å…¸å¸ƒå±€ 1234567&lt;DockPanel&gt; &lt;Button DockPanel.Dock=&quot;Left&quot; Content=&quot;WPFä¸­æ–‡ç½‘1&quot; Margin=&quot;5&quot; /&gt; &lt;Button DockPanel.Dock=&quot;Top&quot; Content=&quot;WPFä¸­æ–‡ç½‘2&quot; Margin=&quot;5&quot; /&gt; &lt;Button DockPanel.Dock=&quot;Right&quot; Content=&quot;WPFä¸­æ–‡ç½‘3&quot; Margin=&quot;5&quot; /&gt; &lt;Button DockPanel.Dock=&quot;Bottom&quot; Content=&quot;WPFä¸­æ–‡ç½‘4&quot; Margin=&quot;5&quot; /&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘5&quot; Margin=&quot;5&quot; /&gt;&lt;/DockPanel&gt; è¿™æ˜¯DockPanelæœ€ç»å…¸çš„å¸ƒå±€æ–¹å¼ï¼Œä¸Šä¸‹å·¦å³éƒ½åœé ä¸€ä¸ªæ§ä»¶ï¼Œä¸­é—´å‰©ä½™çš„ç©ºé—´ï¼Œå…¨éƒ¨ç”±æœ€åä¸€ä¸ªæ§ä»¶å¡«æ»¡ã€‚ äºŒã€æ°´å¹³å¸ƒå±€ 1234567&lt;DockPanel LastChildFill=&quot;False&quot; HorizontalAlignment=&quot;Center&quot;&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘1&quot; Margin=&quot;5&quot; /&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘2&quot; Margin=&quot;5&quot; /&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘3&quot; Margin=&quot;5&quot; /&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘4&quot; Margin=&quot;5&quot; /&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘5&quot; Margin=&quot;5&quot; /&gt;&lt;/DockPanel&gt; æˆ‘ä»¬åªéœ€è¦è®¾ç½®LastChildFillä¸ºFalseï¼Œå¹¶è®¾ç½®HorizontalAlignmentå±æ€§ï¼Œå¹¶å†æŒ‡å®šå­æ§ä»¶çš„åœé æ–¹å‘ï¼Œå°±å¯ä»¥è¾¾åˆ°ä¸Šå›¾çš„æ•ˆæœã€‚ 1234567&lt;DockPanel LastChildFill=&quot;False&quot; VerticalAlignment=&quot;Top&quot;&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘1&quot; Margin=&quot;5&quot;/&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘2&quot; Margin=&quot;5&quot;/&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘3&quot; Margin=&quot;5&quot;/&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘4&quot; Margin=&quot;5&quot;/&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘5&quot; Margin=&quot;5&quot;/&gt;&lt;/DockPanel&gt; ä½ å¯ä»¥é€šè¿‡æ‘¸ç´¢HorizontalAlignmentï¼ˆæ°´å¹³å¯¹é½ï¼‰å’ŒVerticalAlignmentï¼ˆå‚ç›´å¯¹é½ï¼‰ä¸¤ä¸ªå±æ€§ï¼Œè¿˜å¯ä»¥è¾¾åˆ°æ›´å¤šæ„æƒ³ä¸åˆ°çš„æ•ˆæœå“¦ã€‚ VirtualizingStackPanel ç±»VirtualizingStackPanel ç±»ï¼ˆè™šæ‹ŸåŒ–å…ƒç´ ï¼‰å’ŒStackPanel ç±»åœ¨ç”¨æ³•ä¸Šå‡ ä¹å·®ä¸å¤šã€‚å…¶ä½œç”¨æ˜¯åœ¨æ°´å¹³æˆ–å‚ç›´çš„ä¸€è¡Œä¸­æ’åˆ—å¹¶æ˜¾ç¤ºå†…å®¹ã€‚å®ƒç»§æ‰¿äºä¸€ä¸ªå«VirtualizingPanelçš„æŠ½è±¡ç±»ï¼Œè€Œè¿™ä¸ªVirtualizingPanelæŠ½è±¡ç±»ç»§æ‰¿äºPanelå¸ƒå±€åŸºç±»ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152public class VirtualizingStackPanel : VirtualizingPanel, IScrollInfo, IStackMeasure&#123; public static readonly DependencyProperty IsVirtualizingProperty; public static readonly DependencyProperty VirtualizationModeProperty; public static readonly DependencyProperty OrientationProperty; public static readonly RoutedEvent CleanUpVirtualizedItemEvent; public VirtualizingStackPanel(); public double VerticalOffset &#123; get; &#125; public double HorizontalOffset &#123; get; &#125; public double ViewportHeight &#123; get; &#125; public double ViewportWidth &#123; get; &#125; public double ExtentHeight &#123; get; &#125; public double ExtentWidth &#123; get; &#125; public bool CanVerticallyScroll &#123; get; set; &#125; public bool CanHorizontallyScroll &#123; get; set; &#125; public Orientation Orientation &#123; get; set; &#125; public ScrollViewer ScrollOwner &#123; get; set; &#125; protected override bool CanHierarchicallyScrollAndVirtualizeCore &#123; get; &#125; protected internal override Orientation LogicalOrientation &#123; get; &#125; protected internal override bool HasLogicalOrientation &#123; get; &#125; public static void AddCleanUpVirtualizedItemHandler(DependencyObject element, CleanUpVirtualizedItemEventHandler handler); public static void RemoveCleanUpVirtualizedItemHandler(DependencyObject element, CleanUpVirtualizedItemEventHandler handler); public virtual void LineDown(); public virtual void LineLeft(); public virtual void LineRight(); public virtual void LineUp(); public Rect MakeVisible(Visual visual, Rect rectangle); public virtual void MouseWheelDown(); public virtual void MouseWheelLeft(); public virtual void MouseWheelRight(); public virtual void MouseWheelUp(); public virtual void PageDown(); public virtual void PageLeft(); public virtual void PageRight(); public virtual void PageUp(); public void SetHorizontalOffset(double offset); public void SetVerticalOffset(double offset); protected override Size ArrangeOverride(Size arrangeSize); protected override double GetItemOffsetCore(UIElement child); protected override Size MeasureOverride(Size constraint); protected virtual void OnCleanUpVirtualizedItem(CleanUpVirtualizedItemEventArgs e); protected override void OnClearChildren(); protected override void OnItemsChanged(object sender, ItemsChangedEventArgs args); protected virtual void OnViewportOffsetChanged(Vector oldViewportOffset, Vector newViewportOffset); protected virtual void OnViewportSizeChanged(Size oldViewportSize, Size newViewportSize); protected override bool ShouldItemsChangeAffectLayoutCore(bool areItemChangesLocal, ItemsChangedEventArgs args); protected internal override void BringIndexIntoView(int index); &#125; VirtualizingStackPanel ç±»æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ æ¯”å¦‚åœ¨ListBoxé›†åˆæ§ä»¶ä¸­éœ€è¦æ˜¾ç¤º500æ¡æ•°æ®ï¼Œé‚£æ•´ä¸ªå±å¹•åªèƒ½æ˜¾ç¤º20æ¡ï¼Œå‰©ä½™çš„480æ¡æ•°æ®åœ¨ListBoxæ§ä»¶è¦ä¸è¦ä¸€æ¬¡æ€§ç»˜åˆ¶å‡ºæ¥ï¼Ÿå…¶å®å°±ç®—ç»˜åˆ¶å‡ºæ¥ï¼Œç”¨æˆ·çš„å±å¹•ä¹Ÿçœ‹ä¸è§ï¼Œåªèƒ½æ˜¯æ‹–åŠ¨æ»šåŠ¨æ¡æ‰èƒ½çœ‹è§åé¢çš„æ•°æ®ã€‚æ—¢ç„¶å±å¹•åªèƒ½æ˜¾ç¤º20æ¡æ•°æ®ï¼Œä½•ä¸åªç»˜åˆ¶20æ¡æ•°æ®çš„UIå­å…ƒç´ ï¼Œå‰©ä¸‹çš„480æ¡æ•°æ®çš„å­å…ƒç´ åœ¨æ‹–åŠ¨æ»šåŠ¨æ¡æ—¶æ‰ç»˜åˆ¶ï¼Œè¿™å°†å¤§å¤§å‡å°‘è®¡ç®—æœºçš„æ€§èƒ½æ¶ˆè€—ï¼Œæé«˜UIç•Œé¢çš„å‘ˆç°é€Ÿåº¦ï¼Œæé«˜è½¯ä»¶çš„æµç•…æ€§ã€‚ æ‰€ä»¥ï¼ŒVirtualizingStackPanel ç±»çš„ä½œç”¨æ˜¯å¼€å¯è™šæ‹ŸåŒ–æŠ€æœ¯ï¼Œå»¶è¿Ÿé‚£äº›çœ‹ä¸è§çš„å­å…ƒç´ çš„ç»˜åˆ¶ä¸æ¸²æŸ“ã€‚ è¦å¼€å¯è¿™é¡¹æŠ€æœ¯ï¼Œåªéœ€è¦è®¾ç½®Listboxé›†åˆæ§ä»¶çš„é™„åŠ å±æ€§VirtualizingStackPanel.IsVirtualizing&#x3D;â€Trueâ€å³å¯ã€‚å› ä¸ºListBoxçš„ItemsPanelï¼ˆå…ƒç´ å¸ƒå±€æ¨¡æ¿ï¼‰é»˜è®¤é‡‡ç”¨äº†VirtualizingStackPanelæ§ä»¶å¸ƒå±€ã€‚ Canvasæ§ä»¶ï¼ˆç»å¯¹å¸ƒå±€ï¼‰Canvasæ§ä»¶å…è®¸æˆ‘ä»¬åƒWinformä¸€æ ·æ‹–æ‹½å­æ§ä»¶è¿›è¡Œå¸ƒå±€ï¼Œè€Œå­æ§ä»¶çš„ä½ç½®ç›¸å¯¹äºCanvasæ¥è¯´æ˜¯ç»å¯¹çš„ï¼Œæ‰€ä»¥æˆ‘å°†å®ƒç§°ä¸ºç»å¯¹å¸ƒå±€ã€‚æˆ‘ä»¬æ¥çœ‹çœ‹å®ƒçš„ç»“æ„å®šä¹‰ï¼š 12345678910111213141516171819202122public class Canvas : Panel&#123; public static readonly DependencyProperty LeftProperty; public static readonly DependencyProperty TopProperty; public static readonly DependencyProperty RightProperty; public static readonly DependencyProperty BottomProperty; public Canvas(); public static double GetBottom(UIElement element); public static double GetLeft(UIElement element); public static double GetRight(UIElement element); public static double GetTop(UIElement element); public static void SetBottom(UIElement element, double length); public static void SetLeft(UIElement element, double length); public static void SetRight(UIElement element, double length); public static void SetTop(UIElement element, double length); protected override Size ArrangeOverride(Size arrangeSize); protected override Geometry GetLayoutClip(Size layoutSlotSize); protected override Size MeasureOverride(Size constraint); &#125; è§‚å¯Ÿå®ƒçš„ç»“æ„ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å®ƒæä¾›äº†4ä¸ªä¾èµ–å±æ€§ï¼Œåˆ†åˆ«æ˜¯LeftPropertyï¼ŒRightPropertyï¼ŒTopPropertyå’ŒBottomPropertyã€‚å…¶å®æ˜¯å°†è¿™4ä¸ªå±æ€§é™„åŠ åˆ°å­å…ƒç´ èº«ä¸Šï¼Œä»¥æ­¤æ¥è®¾ç½®å­å…ƒç´ è·ç¦»Canvasä¸Šä¸‹å·¦å³çš„åƒç´ ä½ç½®ã€‚ 1234567&lt;Canvas&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘1&quot; Margin=&quot;5&quot; /&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘2&quot; Margin=&quot;5&quot; /&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘3&quot; Margin=&quot;5&quot; /&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘4&quot; Margin=&quot;5&quot; /&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘5&quot; Margin=&quot;5&quot; /&gt;&lt;/Canvas&gt; ä¸Šé¢çš„ç¤ºä¾‹å¹¶æ²¡æœ‰æŒ‡å®šbuttonæ§ä»¶åœ¨Canvasæ§ä»¶ä¸­çš„ä¸Šä¸‹å·¦å³åœé ä½ç½®ï¼Œæ‰€ä»¥è¿™5ä¸ªbuttoné»˜è®¤ä¼šæ˜¾ç¤ºåœ¨Canvasçš„å·¦ä¸Šè§’ï¼Œä¸”åªèƒ½æ˜¾ç¤ºæœ€åä¸€ä¸ªï¼Œå‰é¢4ä¸ªä¼šè¢«é®ç›–ã€‚æˆ‘ä»¬æ¥çœ‹çœ‹ä¸‹é¢çš„ä¾‹å­ã€‚ 1234567&lt;Canvas&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘1&quot; Margin=&quot;5&quot; Canvas.Left=&quot;50&quot;/&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘2&quot; Margin=&quot;5&quot; Canvas.Top=&quot;50&quot;/&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘3&quot; Margin=&quot;5&quot; Canvas.Right=&quot;50&quot;/&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘4&quot; Margin=&quot;5&quot; Canvas.Bottom=&quot;50&quot;/&gt; &lt;Button Content=&quot;WPFä¸­æ–‡ç½‘5&quot; Canvas.Left=&quot;200&quot; Canvas.Top=&quot;150&quot; /&gt;&lt;/Canvas&gt; ä¸Šé¢çš„æºä»£ç ä¸­ï¼Œæˆ‘ä»¬ä»ä¸Šåˆ°ä¸‹ï¼Œåˆ†åˆ«æ¥åˆ†æä¸€ä¸‹5ä¸ªbuttonã€‚ ç¬¬ä¸€ä¸ªbuttonï¼Œè®¾ç½®äº†Canvas.Left&#x3D;â€50â€ï¼Œå®ƒå°†ä¿æŒè·ç¦»Canvaså·¦è¾¹50åƒç´ ã€‚ ç¬¬äºŒä¸ªbuttonï¼Œè®¾ç½®äº†Canvas.Top&#x3D;â€50â€ï¼Œå®ƒå°†ä¿æŒè·ç¦»Canvasé¡¶éƒ¨50åƒç´ ã€‚ ç¬¬ä¸‰ä¸ªbuttonï¼Œè®¾ç½®äº†Canvas.Right&#x3D;â€50â€ï¼Œå®ƒå°†ä¿æŒè·ç¦»Canvaså³ä¾§50åƒç´ ã€‚ ç¬¬å››ä¸ªbuttonï¼Œè®¾ç½®äº†Canvas.Bottom&#x3D;â€50â€ï¼Œå®ƒå°†ä¿æŒè·ç¦»Canvasåº•éƒ¨50åƒç´ ã€‚ ç¬¬äº”ä¸ªbuttonï¼Œè®¾ç½®äº†Canvas.Left&#x3D;â€200â€ Canvas.Top&#x3D;â€150â€ï¼Œä¹Ÿå°±æ˜¯åŒæ—¶è·ç¦»Canvaså·¦è¾¹200åƒç´ ï¼Œé¡¶éƒ¨150åƒç´ ã€‚ Borderæ§ä»¶ï¼ˆè¾¹æ¡†å¸ƒå±€ï¼‰ä¸¥æ ¼æ¥è¯´ï¼ŒBorderå¹¶ä¸æ˜¯ä¸€ä¸ªå¸ƒå±€æ§ä»¶ï¼Œå› ä¸ºå®ƒå¹¶ä¸æ˜¯Panelçš„å­ç±»ï¼Œè€Œæ˜¯Decoratorè£…é¥°å™¨çš„å­ç±»ï¼Œè€ŒDecoratorç»§æ‰¿äºFrameworkElementã€‚è¦äº†è§£Borderçš„ç”¨æ³•ï¼Œæˆ‘ä»¬è¦å…ˆçœ‹çœ‹å®ƒçš„çˆ¶ç±»Decoratorã€‚ 12345678910111213public class Decorator : FrameworkElement, IAddChild&#123; public Decorator(); public virtual UIElement Child &#123; get; set; &#125; protected override int VisualChildrenCount &#123; get; &#125; protected internal override IEnumerator LogicalChildren &#123; get; &#125; protected override Size ArrangeOverride(Size arrangeSize); protected override Visual GetVisualChild(int index); protected override Size MeasureOverride(Size constraint); &#125; Decorator è£…é¥°å™¨åªæœ‰ä¸€ä¸ªChild å±æ€§ï¼Œè¯´æ˜Decoratoråªèƒ½å®¹çº³ä¸€ä¸ªå­å…ƒç´ ï¼ˆUIElementï¼‰ï¼Œä¹Ÿå°±æ˜¯Borderåªèƒ½å®¹çº³ä¸€ä¸ªå­å…ƒç´ ã€‚é‚£æˆ‘ä»¬å†çœ‹çœ‹Borderçš„ç»“æ„å®šä¹‰ï¼š 123456789101112131415161718192021public class Border : Decorator&#123; public static readonly DependencyProperty BorderThicknessProperty; public static readonly DependencyProperty PaddingProperty; public static readonly DependencyProperty CornerRadiusProperty; public static readonly DependencyProperty BorderBrushProperty; public static readonly DependencyProperty BackgroundProperty; public Border(); public Thickness BorderThickness &#123; get; set; &#125; public Thickness Padding &#123; get; set; &#125; public CornerRadius CornerRadius &#123; get; set; &#125; public Brush BorderBrush &#123; get; set; &#125; public Brush Background &#123; get; set; &#125; protected override Size ArrangeOverride(Size finalSize); protected override Size MeasureOverride(Size constraint); protected override void OnRender(DrawingContext dc); &#125; æˆ‘ä»¬ç›´æ¥ä»¥è¡¨æ ¼çš„å½¢å¼ç»™å‡ºBorderçš„ç›¸å…³å±æ€§ã€‚ å±æ€§ è¯´æ˜ BorderThickness è®¾ç½®Borderè¾¹æ¡†çš„åšåº¦ï¼ˆåƒç´ å®½åº¦ï¼‰ Padding è®¾ç½®å­å…ƒç´ ç›¸å¯¹äºBorderè¾¹æ¡†çš„è·ç¦» CornerRadius è®¾ç½®Borderçš„åœ†è§’ BorderBrush è®¾ç½®Borderè¾¹æ¡†çš„é¢œè‰²ç”»åˆ· Background è®¾ç½®Borderçš„èƒŒæ™¯é¢œè‰²ç”»åˆ· æ­£æ˜¯å› ä¸ºBorderæœ‰è¿™ä¹ˆå¤šå®ç”¨çš„å±æ€§ï¼Œ æ‰€ä»¥ï¼Œ æˆ‘ä»¬é€šå¸¸åœ¨å¸ƒå±€ç•Œé¢æ—¶ï¼ŒBorderï¼ˆè£…é¥°å™¨ï¼‰æ§ä»¶æ˜¯é¦–é€‰ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä»¥ä¸€ä¸ªä¾‹å­æ¥è¯´æ˜Borderæœ‰å¤šä¹ˆå¥½ç”¨ã€‚ 12345678910111213&lt;WrapPanel Margin=&quot;10&quot;&gt; &lt;Border Height=&quot;35&quot; Margin=&quot;10&quot; Padding=&quot;5&quot; BorderThickness=&quot;1&quot; BorderBrush=&quot;Gray&quot;&gt; &lt;TextBlock Text=&quot;çŸ©å½¢ - Borderæ§ä»¶&quot; Margin=&quot;5&quot; /&gt; &lt;/Border&gt; &lt;Border Height=&quot;35&quot; Margin=&quot;10&quot; Padding=&quot;5&quot; BorderThickness=&quot;1&quot; BorderBrush=&quot;Gray&quot; CornerRadius=&quot;20&quot;&gt; &lt;TextBlock Text=&quot;æ¤­åœ† - Borderæ§ä»¶&quot; Margin=&quot;5&quot; /&gt; &lt;/Border&gt; &lt;Border Width=&quot;150&quot; Height=&quot;150&quot; Margin=&quot;10&quot; Padding=&quot;5&quot; BorderThickness=&quot;1&quot; Background=&quot;Red&quot; BorderBrush=&quot;Gray&quot; CornerRadius=&quot;75&quot;&gt; &lt;TextBlock Text=&quot;åœ†å½¢Borderæ§ä»¶&quot; Margin=&quot;5&quot; HorizontalAlignment=&quot;Center&quot; FontSize=&quot;16&quot; FontWeight=&quot;Bold&quot; VerticalAlignment=&quot;Center&quot; Foreground=&quot;White&quot;/&gt; &lt;/Border&gt;&lt;/WrapPanel&gt; æˆ‘ä»¬åˆ†åˆ«å†™äº†3ä¸ªBorderï¼Œç¬¬ä¸€ä¸ªBorderè¢«è®¾è®¡æˆçŸ©å½¢ï¼Œç¬¬äºŒä¸ªBorderå¢åŠ äº†åœ†è§’å±æ€§ï¼Œç¬¬ä¸‰ä¸ªBorderé€šè¿‡CornerRadiuså±æ€§ï¼Œå°†å€¼è®¾ç½®ä¸ºå®½åº¦æˆ–é«˜åº¦çš„ä¸€åŠï¼Œå°±å½¢æˆäº†ä¸€ä¸ªæ­£åœ†ã€‚ å°†æ¥ï¼Œæˆ‘ä»¬å†é…åˆWPFçš„æ¨¡æ¿ã€æ ·å¼ã€è§¦å‘å™¨ä¼šè®©Borderçš„ç”¨æ³•æ›´ä¸Šä¸€å±‚æ¥¼ã€‚ WPFå¸ƒå±€Demoç¤ºä¾‹é€šè¿‡å‰é¢çš„ç« èŠ‚å­¦ä¹ ï¼Œæˆ‘ä»¬æ¥å°è¯•åˆ©ç”¨å­¦è¿‡çš„å¸ƒå±€æ§ä»¶ï¼Œè®¾è®¡ä¸€æ¬¾ç®€å•çš„UIç•Œé¢ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445&lt;Grid&gt; &lt;Grid.RowDefinitions&gt; &lt;RowDefinition Height=&quot;auto&quot;/&gt; &lt;RowDefinition Height=&quot;*&quot;/&gt; &lt;RowDefinition Height=&quot;auto&quot;/&gt; &lt;/Grid.RowDefinitions&gt; &lt;Grid.ColumnDefinitions&gt; &lt;ColumnDefinition Width=&quot;auto&quot;/&gt; &lt;ColumnDefinition/&gt; &lt;/Grid.ColumnDefinitions&gt; &lt;!--Top--&gt; &lt;DockPanel Grid.Row=&quot;0&quot; Grid.Column=&quot;0&quot; Grid.ColumnSpan=&quot;2&quot; Background=&quot;#126A74&quot; Height=&quot;60&quot;&gt; &lt;TextBlock Text=&quot;WPFä¸­æ–‡ç½‘åº”ç”¨ç¨‹åº&quot; Foreground=&quot;White&quot; FontSize=&quot;20&quot; Margin=&quot;15,15&quot;/&gt; &lt;StackPanel Orientation=&quot;Horizontal&quot; HorizontalAlignment=&quot;Right&quot;&gt; &lt;Border Height=&quot;35&quot; Margin=&quot;10&quot; BorderThickness=&quot;1&quot; BorderBrush=&quot;#CA5100&quot; Background=&quot;#CA5100&quot; CornerRadius=&quot;10&quot;&gt; &lt;TextBlock Text=&quot;é€€å‡ºç³»ç»Ÿ&quot; Foreground=&quot;White&quot; HorizontalAlignment=&quot;Center&quot; VerticalAlignment=&quot;Center&quot; Margin=&quot;10 0 10 0&quot;/&gt; &lt;/Border&gt; &lt;/StackPanel&gt; &lt;/DockPanel&gt; &lt;!--left--&gt; &lt;StackPanel Grid.Row=&quot;1&quot; Grid.Column=&quot;0&quot; Width=&quot;350&quot;&gt; &lt;Border Height=&quot;250&quot; Margin=&quot;10&quot; Padding=&quot;5&quot; Background=&quot;#439D84&quot;&gt; &lt;TextBlock Text=&quot;å‚æ•°åŒºåŸŸ&quot; Margin=&quot;5&quot; HorizontalAlignment=&quot;Center&quot; VerticalAlignment=&quot;Center&quot; Foreground=&quot;White&quot; FontSize=&quot;16&quot;/&gt; &lt;/Border&gt; &lt;Border Height=&quot;250&quot; Margin=&quot;10&quot; Padding=&quot;5&quot; Background=&quot;#9CDC7B&quot;&gt; &lt;TextBlock Text=&quot;å‚æ•°åŒºåŸŸ&quot; Margin=&quot;5&quot; HorizontalAlignment=&quot;Center&quot; VerticalAlignment=&quot;Center&quot; Foreground=&quot;White&quot; FontSize=&quot;16&quot;/&gt; &lt;/Border&gt; &lt;Border Height=&quot;110&quot; Margin=&quot;10&quot; Padding=&quot;5&quot; Background=&quot;#E97752&quot;&gt; &lt;TextBlock Text=&quot;å‚æ•°åŒºåŸŸ&quot; Margin=&quot;5&quot; HorizontalAlignment=&quot;Center&quot; VerticalAlignment=&quot;Center&quot; Foreground=&quot;White&quot; FontSize=&quot;16&quot;/&gt; &lt;/Border&gt; &lt;/StackPanel&gt; &lt;!--right--&gt; &lt;Grid Grid.Row=&quot;1&quot; Grid.Column=&quot;1&quot;&gt; &lt;Border Margin=&quot;10&quot; Padding=&quot;5&quot; BorderThickness=&quot;1&quot; BorderBrush=&quot;#F7BD93&quot; CornerRadius=&quot;5&quot; Background=&quot;#FDD2B2&quot;&gt; &lt;TextBlock Text=&quot;ä¸»ä½“åŒºåŸŸ&quot; Margin=&quot;5&quot; /&gt; &lt;/Border&gt; &lt;Border Width=&quot;150&quot; Height=&quot;150&quot; Margin=&quot;10&quot; Padding=&quot;5&quot; BorderThickness=&quot;1&quot; Background=&quot;Red&quot; BorderBrush=&quot;Gray&quot; CornerRadius=&quot;75&quot;&gt; &lt;TextBlock Text=&quot;å¼€å§‹è¿è¡Œ&quot; Margin=&quot;5&quot; HorizontalAlignment=&quot;Center&quot; FontSize=&quot;16&quot; FontWeight=&quot;Bold&quot; VerticalAlignment=&quot;Center&quot; Foreground=&quot;White&quot;/&gt; &lt;/Border&gt; &lt;/Grid&gt; &lt;!--bottom--&gt; &lt;Grid Grid.Row=&quot;2&quot; Grid.Column=&quot;0&quot; Grid.ColumnSpan=&quot;2&quot; Background=&quot;#CA5100&quot;&gt; &lt;TextBlock Text=&quot;ç‰ˆæœ¬ï¼š1.0.2.5 | ç‰ˆæƒæ‰€æœ‰ï¼šä¸­å›½WPFä¸­æ–‡ç½‘ç§‘æŠ€æœ‰é™å…¬å¸ www.wpfsoft.com&quot; Margin=&quot;10 5 10 5&quot; Foreground=&quot;White&quot;/&gt; &lt;/Grid&gt;&lt;/Grid&gt; æˆ‘ä»¬é€šè¿‡Gridæ …æ ¼å¸ƒå±€å‡ºç•Œé¢çš„ä¸»è¦åŒºåŸŸï¼Œç„¶åç»™æ¯ä¸ªåŒºåŸŸè¿›è¡ŒäºŒæ¬¡å¸ƒå±€ï¼Œæ¯”å¦‚TopåŒºåŸŸï¼Œæˆ‘ä»¬DockPanelå’ŒStackPanelçš„ç»„åˆï¼Œè®¾è®¡æˆå·¦å³ä¸¤ä¸ªå­åŒºåŸŸï¼Œå·¦è¾¹æ˜¯åº”ç”¨ç¨‹åºçš„åç§°ï¼Œå³è¾¹æ˜¯é€€å‡ºæŒ‰é’®ã€‚ ä¸­é—´åŒºåŸŸï¼Œåˆ†ä¸ºä¸¤éƒ¨åˆ†ç»„æˆï¼Œå·¦è¾¹æ˜¯ä¸€ä¸ªStackPanelï¼Œé‡Œé¢æœ‰ä¸€ä¸ªBorderï¼Œå³è¾¹æ˜¯ä¸€ä¸ªGridã€‚(æ³¨ï¼šå·¦ä¾§çš„StackPanelæ”¹æˆGridçš„æ•ˆæœä¼šæ›´å¥½å“¦) åº•éƒ¨åŒºåŸŸæ˜¯ä¸€ä¸ªGrid,å’Œä¸€ä¸ªTextBlockå†…å®¹æ§ä»¶ã€‚å¥½ï¼Œæˆ‘ä»¬å¸ƒå±€æ§ä»¶çš„å†…å®¹å°±å…ˆä»‹ç»åˆ°è¿™é‡Œï¼Œåœ¨åç»­çš„ç« èŠ‚ä¸­ï¼Œ æˆ‘ä»¬è¿˜ä¼šç»™å‡ºæ›´å¤šçš„ä¾‹å­æ¥è¯ é‡ŠWPFçš„å…¶å®ƒçŸ¥è¯†ç‚¹ï¼Œè€Œè¿™äº›çŸ¥è¯†éƒ½æœ‰å¯èƒ½ç”¨ä»¥å¸ƒå±€æ§ä»¶ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬è¿˜ä¼šè¿›ä¸€æ­¥å­¦ä¹ å¸ƒå±€æ§ä»¶çš„å®æˆ˜ã€‚ GridSplitteråˆ†å‰²çª—å£ridSplitteræ§ä»¶ç”¨æ¥åˆ†å‰²çª—ä½“çš„å¸ƒå±€ï¼Œå¿…é¡»æ”¾åœ¨Gridæ …æ ¼æ§ä»¶ä¸­é…åˆä½¿ç”¨ï¼Œé€šè¿‡é¼ æ ‡æŒ‰ä½GridSplitterè¿›è¡Œå·¦å³æˆ–ä¸Šä¸‹æ‹–åŠ¨ï¼Œå³å¯è°ƒæ•´è¡Œåˆ—å°ºå¯¸ã€‚ æ³¨æ„äº‹é¡¹ï¼š 1ã€å¦‚æœæ‚¨å¸Œæœ›GridSplitteræ§ä»¶å¯ä»¥æ°´å¹³è°ƒæ•´å·¦å³çš„Gridåˆ—å®½æ—¶ï¼Œé‚£ä¹ˆHorizontalAlignmentå±æ€§å¿…é¡»è®¾ç½®ä¸ºStretchæˆ–è€…Centerã€‚ 2ã€å¦‚æœæ‚¨å¸Œæœ›GridSplitteræ§ä»¶å¯ä»¥å‚ç›´è°ƒæ•´è¡Œé«˜ï¼Œé‚£ä¹ˆVerticalAlignmentå±æ€§å¿…é¡»è®¾ç½®ä¸ºStretchæˆ–è€…Centerã€‚ 3ã€ShowsPreviewå±æ€§è¡¨ç¤ºæ‹–åŠ¨æ—¶æ˜¯å¦åŠæ—¶ç»˜åˆ¶è°ƒæ•´å°ºå¯¸ã€‚ æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥è¯´æ˜å®ƒçš„ç”¨æ³• å‰ç«¯ä»£ç  12345678910111213141516171819202122232425262728&lt;Window x:Class=&quot;HelloWorld.MainWindow&quot; xmlns=&quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot; xmlns:x=&quot;http://schemas.microsoft.com/winfx/2006/xaml&quot; xmlns:d=&quot;http://schemas.microsoft.com/expression/blend/2008&quot; xmlns:mc=&quot;http://schemas.openxmlformats.org/markup-compatibility/2006&quot; xmlns:local=&quot;clr-namespace:HelloWorld&quot; mc:Ignorable=&quot;d&quot; FontSize=&quot;14&quot; Title=&quot;WPFä¸­æ–‡ç½‘ä¹‹æ§ä»¶è¯¾ç¨‹ - www.wpfsoft.com&quot; Height=&quot;350&quot; Width=&quot;500&quot;&gt; &lt;Grid&gt; &lt;Grid.ColumnDefinitions&gt; &lt;ColumnDefinition/&gt; &lt;ColumnDefinition Width=&quot;auto&quot;/&gt; &lt;ColumnDefinition/&gt; &lt;/Grid.ColumnDefinitions&gt; &lt;Border Grid.Column=&quot;0&quot; Background=&quot;LightBlue&quot;&gt; &lt;TextBlock TextWrapping=&quot;Wrap&quot; Padding=&quot;10&quot; LineHeight=&quot;20&quot;&gt; æ‚¨å¥½ï¼Œæˆ‘æ˜¯ç«™é•¿é‡åº†æ•™ä¸»ï¼Œæ¬¢è¿æ¥åˆ° WPFä¸­æ–‡ç½‘ï¼Œæˆ‘ä»¬çš„ç½‘å€æ˜¯ï¼šhttp://www.wpfsoft.comã€‚æ‚¨è¿˜å¯ä»¥åœ¨ç™¾åº¦ã€Bç«™ã€51CTOã€csdnæœç´¢æˆ‘çš„åå­—ï¼Œä»¥ä¾¿æ‰¾åˆ°æˆ‘å…¶å®ƒçš„æŠ€æœ¯æ–‡ç« æˆ–è§†é¢‘è¯¾ç¨‹ã€‚æœ¬ç«™ä¸Šçº¿äº2023å¹´8æœˆ3æ—¥ï¼Œåœ¨ä¸€ä¸ªç¨€æ¾å¹³å¸¸çš„åˆåï¼Œæˆ‘çªç„¶æƒ³æ­å»ºä¸€ä¸ªå…³äºå­¦ä¹ å’Œåˆ†äº«WPFæ¡†æ¶çš„åšå®¢ç½‘ç«™ï¼Œäºæ˜¯å¼€å§‹æ³¨å†ŒåŸŸåã€è´­ä¹°ç©ºé—´ã€å®‰è£…ç½‘ç«™ã€è®¾ç½®æ ç›®ï¼Œä¸åˆ°3ä¸ªå°æ—¶ï¼ŒWPFä¸­æ–‡ç½‘å°±è¯ç”Ÿäº†ã€‚ &lt;/TextBlock&gt; &lt;/Border&gt; &lt;GridSplitter Grid.Column=&quot;1&quot; Width=&quot;5&quot; HorizontalAlignment=&quot;Center&quot; ShowsPreview=&quot;False&quot;/&gt; &lt;Border Grid.Column=&quot;2&quot; Background=&quot;LightCoral&quot;&gt; &lt;TextBlock TextWrapping=&quot;Wrap&quot; Padding=&quot;10&quot; LineHeight=&quot;20&quot;&gt;æ¥ä¸‹æ¥çš„æ—¥å­é‡Œï¼Œæˆ‘å°†ä»WPFçš„èµ·æºã€æ¦‚è¿°ã€å­¦ä¹ è·¯å¾„ç­‰ï¼Œä¸€è·¯å†™ä¸‹å»ï¼Œä¸€ç›´æŠŠWPFæœ€åä¸€æ»´çŸ¥è¯†è¯¦å°½æ‰ä¼šå°ç¬”ï¼Œæˆ‘æ˜ç™½è¿™æ˜¯ä¸€åœºè€—è´¹ä¸ªäººå·¨å¤§ç²¾åŠ›çš„æˆ˜äº‰ã€‚ä½†æ˜¯ï¼Œé‚£äº›æˆ‘æ›¾è¸©è¿‡çš„å‘ä¸èµ°è¿‡çš„å¼¯è·¯ï¼Œéƒ½æ— æ—¶æ— åˆ»ä¸æé†’ç€æˆ‘ï¼Œå°½é‡åƒè®²æ•…äº‹ä¸€æ ·ï¼ŒæŠŠè¿™ä¸€åˆ‡éƒ½å†™ä¸‹æ¥å§ï¼Œæ€»ç»“è‡ªå·±ï¼Œç…§äº®æ¥è€…ã€‚ &lt;/TextBlock&gt; &lt;/Border&gt; &lt;/Grid&gt;&lt;/Window&gt; æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹çœ‹F5è¿è¡Œåï¼Œå¯ä»¥ç”¨é¼ æ ‡å·¦å³æ‹–åŠ¨çš„çª—ä½“æ•ˆæœã€‚æœ€å¥½æ˜¯ä¸ºGridSplitterå•ç‹¬åˆ†é…ä¸€è¡Œæˆ–è€…ä¸€åˆ—ï¼ŒåŒæ—¶ï¼ŒGridSplitteréœ€è¦è·¨è¶Šæ•´è¡Œæˆ–æ•´åˆ—ï¼Œè¿™æ ·çš„æ•ˆæœä¼šæ›´å¥½ã€‚å¦‚ä¸Šé¢çš„ä»£ç æ‰€ç¤ºï¼Œæˆ‘ä»¬åœ¨Gridä¸­åˆ†å‰²äº†3ä¸ªå•å…ƒæ ¼ï¼ˆ3åˆ—ï¼‰ï¼Œå°†GridSplitterå±…åœ¨æ”¾ç½®ï¼Œç®€å•è®¾ç½®ä¸€ä¸‹GridSplitterçš„å±æ€§ï¼Œå°±å¯ä»¥è¾¾åˆ°æˆ‘ä»¬çš„ç›®çš„äº†ã€‚","categories":[{"name":"C#","slug":"C","permalink":"http://example.com/categories/C/"}],"tags":[{"name":"C#","slug":"C","permalink":"http://example.com/tags/C/"},{"name":"WPF - ç¼–ç¨‹","slug":"WPF-ç¼–ç¨‹","permalink":"http://example.com/tags/WPF-%E7%BC%96%E7%A8%8B/"}],"author":"fly"},{"title":"WPFç¼–ç¨‹é«˜çº§","slug":"WPFé«˜çº§å­¦ä¹ ","date":"2025-05-10T11:00:24.000Z","updated":"2025-05-13T15:40:12.938Z","comments":true,"path":"2025/05/10/WPFé«˜çº§å­¦ä¹ /","permalink":"http://example.com/2025/05/10/WPF%E9%AB%98%E7%BA%A7%E5%AD%A6%E4%B9%A0/","excerpt":"","text":"æ•°æ®ç»‘å®šä»€ä¹ˆæ˜¯æ•°æ®ç»‘å®šDataContextæ•°æ®ä¸Šä¸‹æ–‡Bindingï¼ˆç»‘å®šï¼‰INotifyPropertyChangedæ¥å£ObservableCollectionæ³›å‹é›†åˆIValueConverterè½¬æ¢å™¨IMultiValueConverterå¤šå€¼è½¬æ¢å™¨ValidationRuleéªŒè¯è§„åˆ™æ ·å¼WPFæ ·å¼æ¦‚è¿°Resourceèµ„æºResourceDictionaryèµ„æºå­—å…¸Triggerè§¦å‘å™¨MultiTriggerå¤šæ¡ä»¶è§¦å‘å™¨DataTriggeræ•°æ®è§¦å‘å™¨MultiDataTrigger æ•°æ®è§¦å‘å™¨EventTriggeräº‹ä»¶è§¦å‘å™¨æ¨¡æ¿LogicalTreeé€»è¾‘æ ‘VisualTreeå¯è§†åŒ–æ ‘ControlTemplateæ§ä»¶æ¨¡æ¿ControlTemplateçš„è§¦å‘å™¨TemplateBindingæ¨¡æ¿ç»‘å®šDataTemplateæ•°æ®æ¨¡æ¿ItemsPanelTemplateå…ƒç´ æ¨¡æ¿ListBoxçš„ItemContainerStyleListBoxæ¨¡æ¿æ ·å¼å®æˆ˜Buttonçš„æ¨¡æ¿æ ·å¼å®æˆ˜å‘½ä»¤ä»€ä¹ˆæ˜¯å‘½ä»¤ICommandSourceå‘½ä»¤æºICommandæ¥å£RoutedUICommandé¢„å®šä¹‰å‘½ä»¤CommandBindingå‘½ä»¤ç»‘å®šApplicationCommandså‘½ä»¤å®æˆ˜WPFäº‹ä»¶è½¬Commandå‘½ä»¤Mvvmlightä¹‹RelayCommandPrismä¹‹DelegateCommandReactiveUIä¹‹ReactiveCommandä¾èµ–å±æ€§ä»€ä¹ˆæ˜¯ä¾èµ–å±æ€§DependencyPropertyå®šä¹‰ä½¿ç”¨ä¾èµ–å±æ€§çš„å›è°ƒå‡½æ•°ä»€ä¹ˆæ˜¯é™„åŠ å±æ€§PasswordBoxä¸é™„åŠ å±æ€§å®æˆ˜è·¯ç”±äº‹ä»¶ä»€ä¹ˆæ˜¯è·¯ç”±äº‹ä»¶è·¯ç”±äº‹ä»¶å®æˆ˜ä»€ä¹ˆæ˜¯é™„åŠ äº‹ä»¶é™„åŠ äº‹ä»¶å®æˆ˜è½¬æ¢ä»€ä¹ˆæ˜¯Transformè½¬æ¢RotateTransformæ—‹è½¬ScaleTransformç¼©æ”¾SkewTransformå€¾æ–œTranslateTransformå¹³ç§»TransformGroupä¸å›¾ç‰‡æŸ¥çœ‹å™¨ç”»åˆ·ä»€ä¹ˆæ˜¯ç”»åˆ·SolidColorBrushçº¯è‰²ç”»åˆ·LinearGradientBrushæ¸å˜ç”»åˆ·RadialGradientBrushå¾„å‘æ¸å˜ImageBrushå›¾åƒç”»åˆ·VisualBrushæ”¾å¤§é•œ+æ°´å°æ–‡å­—ç‰¹æ•ˆDropShadowEffecté˜´å½±ç‰¹æ•ˆBlurEffectæ¨¡ç³Šç‰¹æ•ˆåŠ¨ç”»ä»€ä¹ˆæ˜¯åŠ¨ç”»DoubleAnimationåŠ¨ç”»åœ¨C#ä»£ç ä¸­ä½¿ç”¨åŠ¨ç”»","categories":[{"name":"C#","slug":"C","permalink":"http://example.com/categories/C/"}],"tags":[{"name":"C#","slug":"C","permalink":"http://example.com/tags/C/"},{"name":"WPF - ç¼–ç¨‹","slug":"WPF-ç¼–ç¨‹","permalink":"http://example.com/tags/WPF-%E7%BC%96%E7%A8%8B/"}],"author":"fly"},{"title":"å¸¸è§é¢è¯•é¢˜","slug":"Face","date":"2025-05-10T10:00:24.000Z","updated":"2025-05-13T15:39:43.747Z","comments":true,"path":"2025/05/10/Face/","permalink":"http://example.com/2025/05/10/Face/","excerpt":"","text":"æ¥å£å’ŒæŠ½è±¡ç±»åŒºåˆ«ç›¸åŒ éƒ½å¯ä»¥è¢«ç»§æ‰¿ éƒ½ä¸èƒ½è¢«ç›´æ¥å®ä¾‹åŒ– éƒ½å¯ä»¥åŒ…å«æ–¹æ³•çš„å£°æ˜ ä¸åŒ æ¥å£ æŠ½è±¡ç±» ä¸èƒ½åŒ…å«æˆå‘˜å˜é‡ å¯ä»¥åŒ…å«æˆå‘˜å˜é‡ ä¸èƒ½åŒ…å«æ„é€ å‡½æ•° å¯ä»¥åŒ…å«æ„é€ å‡½æ•° å¯ä»¥å¤šç»§æ‰¿ åªèƒ½å•ç»§æ‰¿ å­ç±»å¿…é¡»å®ç°æ‰€æœ‰å£°æ˜çš„æ–¹æ³• å­ç±»å¿…é¡»å®ç°æ‰€æœ‰çš„æŠ½è±¡æ–¹æ³•(å¿…é¡»æ˜¯å…¬æœ‰çš„)ï¼Œæ™®é€šæ–¹æ³•å¯ä¸å®ç° æ–¹æ³•å£°æ˜é»˜è®¤public æ™®é€šæ–¹æ³•å¯ä»¥ç”±å…¶ä»–è®¿é—®ä¿®é¥°ç¬¦ä¿®é¥°ï¼ŒæŠ½è±¡æ–¹æ³•å¿…é¡»æ˜¯publicï¼Œprotected ç†è§£æ¥å£ï¼šåŠŸèƒ½çš„å®šä¹‰ æŠ½è±¡ç±»ï¼šäº‹ç‰©çš„å…±æ€§ empï¼šè€é¹°ç±»ï¼ŒæŠ½è±¡ç±»ï¼šé¸Ÿç±»ï¼Œæ¥å£ï¼šé£ã€åƒï¼›æ­¼äºŒåï¼ŒæŠ½è±¡ç±»ï¼šé£æœºï¼Œæ¥å£ï¼šé£ï¼Œæ”»å‡»ï¼› è¿›ç¨‹å’Œçº¿ç¨‹è¿›ç¨‹æ˜¯èµ„æºåˆ†é…çš„æœ€å°å•ä½ï¼Œçº¿ç¨‹æ˜¯CPUè°ƒåº¦çš„æœ€å°å•ä½ è¿›ç¨‹å¥½æ¯”ç«è½¦ï¼Œçº¿ç¨‹å¥½æ¯”ç«è½¦çš„è½¦å¢ åŒºåˆ«: çº¿ç¨‹åœ¨è¿›ç¨‹ä¸‹è¿›è¡Œï¼Œå•çº¯çš„è½¦å¢æ— æ³•è¿è¡Œ ä¸€ä¸ªè¿›ç¨‹åŒ…å«å¤šä¸ªçº¿ç¨‹ï¼Œä¸€è¾†ç«è½¦æœ‰å¤šä¸ªè½¦å¢ ä¸åŒè¿›ç¨‹æ•°æ®éš¾å…±äº«ï¼Œä¸€è¾†ç«è½¦ä¹˜å®¢éš¾ä»¥æ¢åˆ°å¦ä¸€è¾†ç«è½¦ åŒè¿›ç¨‹ä¸­ä¸åŒçº¿ç¨‹æ•°æ®æ˜“å…±äº«ï¼Œaè½¦å¢ä¹˜å®¢å®¹æ˜“åˆ°bè½¦å¢ è¿›ç¨‹æ›´æ¶ˆè€—èµ„æº è¿›ç¨‹ä¹‹é—´ä¸ä¼šç›¸äº’å½±å“ å†…å­˜ç®¡ç†1. å†…å­˜ç®¡ç†åŸºç¡€ æ‰˜ç®¡å † vs æ ˆ æ ˆï¼šå­˜å‚¨å€¼ç±»å‹ï¼ˆå¦‚int, structï¼‰å’Œæ–¹æ³•è°ƒç”¨ä¸Šä¸‹æ–‡ï¼ˆå‚æ•°ã€å±€éƒ¨å˜é‡ï¼‰ï¼Œç”±ç¼–è¯‘å™¨è‡ªåŠ¨åˆ†é…&#x2F;é‡Šæ”¾ã€‚ æ‰˜ç®¡å †ï¼šå­˜å‚¨å¼•ç”¨ç±»å‹ï¼ˆå¦‚classå®ä¾‹ï¼‰ï¼Œç”±åƒåœ¾å›æ”¶å™¨ï¼ˆGCï¼‰ç®¡ç†ã€‚ ä¾‹å¤–ï¼šå€¼ç±»å‹å¯èƒ½åœ¨å †ä¸Šåˆ†é…ï¼ˆå¦‚ä½œä¸ºç±»çš„æˆå‘˜ã€è£…ç®±æ“ä½œã€é™æ€å˜é‡ï¼‰ã€‚ å¼•ç”¨ç±»å‹ç”Ÿå‘½å‘¨æœŸ å¯¹è±¡é€šè¿‡newåœ¨å †ä¸Šåˆ†é…ã€‚ å½“å¯¹è±¡ä¸å†è¢«æ ¹å¯¹è±¡ï¼ˆé™æ€å˜é‡ã€å±€éƒ¨å˜é‡ã€CPUå¯„å­˜å™¨ç­‰ï¼‰å¼•ç”¨æ—¶ï¼Œæˆä¸ºåƒåœ¾ã€‚ 2. åƒåœ¾å›æ”¶ï¼ˆGCï¼‰åŸç† åˆ†ä»£å›æ”¶ï¼ˆGenerational GCï¼‰ åˆ†ä»£ç­–ç•¥ï¼š ç¬¬0ä»£ï¼šæ–°å¯¹è±¡ï¼ŒGCæœ€é¢‘ç¹ï¼ˆçº¦æ¯1ç§’ï¼‰ã€‚ ç¬¬1ä»£ï¼šç¬¬0ä»£å­˜æ´»çš„å¯¹è±¡ï¼ŒGCé¢‘ç‡è¾ƒä½ã€‚ ç¬¬2ä»£ï¼šé•¿æœŸå­˜æ´»å¯¹è±¡å’Œå¤§å¯¹è±¡ï¼ˆLOHï¼‰ï¼ŒGCé¢‘ç‡æœ€ä½ã€‚ æ™‹å‡æœºåˆ¶ï¼šå¯¹è±¡åœ¨GCåæœªè¢«å›æ”¶ï¼Œåˆ™æ™‹å‡åˆ°ä¸‹ä¸€ä»£ã€‚ GCè§¦å‘æ¡ä»¶ ç¬¬0ä»£ç©ºé—´ä¸è¶³ã€‚ è°ƒç”¨GC.Collect()ï¼ˆé€šå¸¸ä¸æ¨èæ‰‹åŠ¨è§¦å‘ï¼‰ã€‚ ç³»ç»Ÿå†…å­˜ä¸è¶³ã€‚ GCå·¥ä½œæµç¨‹ æ ‡è®°é˜¶æ®µï¼šä»æ ¹å¯¹è±¡å‡ºå‘ï¼Œæ ‡è®°æ‰€æœ‰å¯è¾¾å¯¹è±¡ã€‚ æ¸…ç†é˜¶æ®µï¼šé‡Šæ”¾æœªè¢«æ ‡è®°çš„å¯¹è±¡å†…å­˜ã€‚ å‹ç¼©é˜¶æ®µï¼ˆå¯é€‰ï¼‰ï¼šç§»åŠ¨å­˜æ´»å¯¹è±¡ä»¥å‡å°‘å†…å­˜ç¢ç‰‡ï¼ˆä»…é™å°å¯¹è±¡å †ï¼‰ã€‚ å¤§å¯¹è±¡å †ï¼ˆLOHï¼‰ å­˜å‚¨å¤§å¯¹è±¡ï¼ˆå¦‚è¶…è¿‡85KBçš„æ•°ç»„ï¼‰ã€‚ ä¸ä¼šè¢«å‹ç¼©ï¼Œå¯èƒ½äº§ç”Ÿå†…å­˜ç¢ç‰‡ã€‚ å•ç‹¬å›æ”¶ï¼Œé€šå¸¸ä¸ç¬¬2ä»£GCåŒæ—¶è¿›è¡Œã€‚ 3. èµ„æºé‡Šæ”¾ä¸Disposeæ¨¡å¼ Finalizerï¼ˆç»ˆç»“å™¨ï¼‰ ç”¨~ClassNameå®šä¹‰ï¼Œç”±GCè°ƒç”¨ï¼ˆæ—¶æœºä¸ç¡®å®šï¼‰ã€‚ æ½œåœ¨é—®é¢˜ï¼šå»¶è¿Ÿèµ„æºé‡Šæ”¾ï¼Œå½±å“æ€§èƒ½ã€‚ IDisposableæ¥å£ æ ¸å¿ƒæ–¹æ³•ï¼šDispose()ï¼Œç”¨äºæ˜¾å¼é‡Šæ”¾éæ‰˜ç®¡èµ„æºï¼ˆå¦‚æ–‡ä»¶å¥æŸ„ã€æ•°æ®åº“è¿æ¥ï¼‰ã€‚ ä½¿ç”¨æ¨¡å¼ï¼š csharp å¤åˆ¶ 1234567891011121314151617181920public class Resource : IDisposable &#123; private bool _disposed = false; public void Dispose() &#123; Dispose(true); GC.SuppressFinalize(this); // é¿å…é‡å¤è°ƒç”¨Finalizer &#125; protected virtual void Dispose(bool disposing) &#123; if (!_disposed) &#123; if (disposing) &#123; // é‡Šæ”¾æ‰˜ç®¡èµ„æº &#125; // é‡Šæ”¾éæ‰˜ç®¡èµ„æº _disposed = true; &#125; &#125; ~Resource() =&gt; Dispose(false);&#125; usingè¯­å¥ è‡ªåŠ¨è°ƒç”¨Dispose()ï¼Œç¡®ä¿èµ„æºé‡Šæ”¾ï¼š csharp å¤åˆ¶ 123using (var resource = new Resource()) &#123; // ä½¿ç”¨resource&#125; 4. é«˜çº§ä¸»é¢˜ å¼±å¼•ç”¨ï¼ˆWeakReferenceï¼‰ å…è®¸å¼•ç”¨å¯¹è±¡çš„åŒæ—¶ï¼Œå…è®¸å…¶è¢«GCå›æ”¶ã€‚ ç”¨é€”ï¼šç¼“å­˜ã€é¿å…å†…å­˜æ³„æ¼ã€‚ ç¤ºä¾‹ï¼š csharp å¤åˆ¶ 1234var weakRef = new WeakReference(myObject);if (weakRef.IsAlive) &#123; var target = weakRef.Target;&#125; å†…å­˜å‹åŠ›ï¼ˆMemory Pressureï¼‰ é€šçŸ¥GCéæ‰˜ç®¡èµ„æºçš„å†…å­˜å ç”¨ï¼š GC.AddMemoryPressure()ï¼šæç¤ºGCé¢å¤–å†…å­˜å‹åŠ›ã€‚ GC.RemoveMemoryPressure()ï¼šé‡Šæ”¾åç§»é™¤å‹åŠ›ã€‚ æœåŠ¡å™¨GC vs å·¥ä½œç«™GC å·¥ä½œç«™GCï¼šä¼˜åŒ–UIå“åº”ï¼ˆé»˜è®¤å®¢æˆ·ç«¯åº”ç”¨ï¼‰ã€‚ æœåŠ¡å™¨GCï¼šå¤šçº¿ç¨‹GCï¼Œé€‚åˆé«˜ååé‡æœåŠ¡ç«¯åº”ç”¨ï¼ˆé€šè¿‡.csprojé…ç½®ï¼‰ã€‚ 5. å¸¸è§é—®é¢˜ä¸æœ€ä½³å®è·µ å†…å­˜æ³„æ¼åœºæ™¯ é™æ€å¼•ç”¨ï¼šé™æ€é›†åˆé•¿æœŸæŒæœ‰å¯¹è±¡ã€‚ äº‹ä»¶æœªæ³¨é”€ï¼šå‘å¸ƒè€…æŒæœ‰è®¢é˜…è€…çš„å¼ºå¼•ç”¨ã€‚ è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨å¼±äº‹ä»¶æ¨¡å¼ï¼ˆå¦‚WeakEventManagerï¼‰ã€‚ æœªé‡Šæ”¾éæ‰˜ç®¡èµ„æºï¼šå¿˜è®°è°ƒç”¨Dispose()ã€‚ æ€§èƒ½ä¼˜åŒ– é¿å…é¢‘ç¹åˆ†é…å¤§å¯¹è±¡ï¼ˆå°¤å…¶æ˜¯LOHï¼‰ã€‚ å‡å°‘è£…ç®±æ“ä½œï¼ˆå¦‚ç”¨æ³›å‹é›†åˆæ›¿ä»£ArrayListï¼‰ã€‚ è°¨æ…ä½¿ç”¨GC.Collect()ï¼Œå¯èƒ½ç ´ååˆ†ä»£ä¼˜åŒ–ã€‚ è¯Šæ–­å·¥å…· Visual Studioè¯Šæ–­å·¥å…·ï¼šå†…å­˜åˆ†æå™¨ã€CPUåˆ†æå™¨ã€‚ Windbg&#x2F;SOSï¼šåˆ†æå †è½¬å‚¨ã€‚ dotMemory&#x2F;ANTS Memory Profilerï¼šç¬¬ä¸‰æ–¹å†…å­˜åˆ†æå·¥å…·ã€‚ è£…ç®±å’Œæ‹†ç®±1. åŸºæœ¬æ¦‚å¿µ è£…ç®±ï¼ˆBoxingï¼‰ å°†å€¼ç±»å‹ï¼ˆå¦‚intã€structï¼‰è½¬æ¢ä¸ºå¼•ç”¨ç±»å‹ï¼ˆobjectæˆ–æ¥å£ç±»å‹ï¼‰çš„è¿‡ç¨‹ã€‚ å‘ç”Ÿåœºæ™¯ï¼š å€¼ç±»å‹èµ‹å€¼ç»™objectæˆ–æ¥å£å˜é‡ã€‚ å€¼ç±»å‹ä½œä¸ºå‚æ•°ä¼ é€’ç»™æ¥å—objectçš„æ–¹æ³•ã€‚ åº•å±‚è¡Œä¸ºï¼š åœ¨å †ï¼ˆæ‰˜ç®¡å †ï¼‰ä¸Šåˆ†é…å†…å­˜ï¼Œå¤åˆ¶å€¼ç±»å‹æ•°æ®åˆ°å †ä¸­ã€‚ è¿”å›å †ä¸Šå¯¹è±¡çš„å¼•ç”¨ã€‚ csharp å¤åˆ¶ 12int num = 42;object boxedNum = num; // è£…ç®± æ‹†ç®±ï¼ˆUnboxingï¼‰ å°†å¼•ç”¨ç±»å‹ï¼ˆè£…ç®±åçš„å¯¹è±¡ï¼‰è½¬æ¢å›åŸå§‹å€¼ç±»å‹çš„è¿‡ç¨‹ã€‚ åº•å±‚è¡Œä¸ºï¼š æ£€æŸ¥ç›®æ ‡ç±»å‹æ˜¯å¦ä¸è£…ç®±ç±»å‹ä¸€è‡´ã€‚ å°†å †ä¸­çš„å€¼å¤åˆ¶åˆ°æ ˆï¼ˆæˆ–æ–°çš„å€¼ç±»å‹å˜é‡ï¼‰ã€‚ csharp å¤åˆ¶ 1int unboxedNum = (int)boxedNum; // æ‹†ç®± 2. å…³é”®ç‰¹æ€§ æ€§èƒ½å¼€é”€ è£…ç®±ï¼šæ¶‰åŠå †å†…å­˜åˆ†é…å’Œæ•°æ®å¤åˆ¶ï¼Œå¯èƒ½è§¦å‘GCã€‚ æ‹†ç®±ï¼šéœ€è¦ç±»å‹æ£€æŸ¥å’Œæ•°æ®å¤åˆ¶ï¼Œä½†æ— å†…å­˜åˆ†é…ã€‚ é«˜é¢‘æ“ä½œéœ€è°¨æ…ï¼šä¾‹å¦‚åœ¨å¾ªç¯ä¸­å¯¹å€¼ç±»å‹é¢‘ç¹è£…ç®±ã€‚ ç±»å‹å®‰å…¨ æ‹†ç®±æ—¶å¿…é¡»æ˜¾å¼æŒ‡å®šç›®æ ‡ç±»å‹ï¼Œå¦åˆ™æŠ›å‡ºInvalidCastExceptionï¼š csharp å¤åˆ¶ 12object boxed = 42;double num = (double)boxed; // è¿è¡Œæ—¶é”™è¯¯ ä¸æ³›å‹çš„å…³ç³» æ³›å‹ï¼ˆå¦‚List&lt;T&gt;ï¼‰å¯é¿å…è£…ç®±æ‹†ç®±ï¼š csharp å¤åˆ¶ 12List&lt;int&gt; list = new List&lt;int&gt;(); // æ— è£…ç®±list.Add(42); // ç›´æ¥å­˜å‚¨å€¼ç±»å‹ 3. å¸¸è§åœºæ™¯ä¸ç¤ºä¾‹ ç¤ºä¾‹1ï¼šéæ³›å‹é›†åˆä¸­çš„è£…ç®± csharp å¤åˆ¶ 123ArrayList list = new ArrayList();list.Add(42); // intè£…ç®±ä¸ºobjectint num = (int)list[0]; // æ‹†ç®± ç¤ºä¾‹2ï¼šæ¥å£è½¬æ¢ csharp å¤åˆ¶ 1IFormattable formattable = 10; // intè£…ç®±ä¸ºIFormattable ç¤ºä¾‹3ï¼šé”™è¯¯æ‹†ç®± csharp å¤åˆ¶ 12object boxed = &quot;123&quot;;int num = (int)boxed; // InvalidCastException 4. å¦‚ä½•é¿å…è£…ç®±&#x2F;æ‹†ç®± ä½¿ç”¨æ³›å‹é›†åˆå¦‚List&lt;T&gt;ã€Dictionary&lt;TKey, TValue&gt;æ›¿ä»£ArrayListã€Hashtableã€‚ é¿å…ä¸å¿…è¦çš„objectå‚æ•°ä½¿ç”¨æ³›å‹æ–¹æ³•çº¦æŸï¼ˆwhere T : structï¼‰ï¼š csharp å¤åˆ¶ 1public void Process&lt;T&gt;(T value) where T : struct &#123; &#125; // æ— éœ€è£…ç®± ä½¿ç”¨Nullable&lt;T&gt;ä»£æ›¿objectå¤„ç†å¯èƒ½ä¸ºnullçš„å€¼ç±»å‹ï¼š csharp å¤åˆ¶ 1int? nullableInt = null; // å€¼ç±»å‹è¯­ä¹‰ï¼Œæ— éœ€è£…ç®± å­—ç¬¦ä¸²æ ¼å¼åŒ–ä¼˜åŒ–ä½¿ç”¨$&quot;&quot;æˆ–String.Formatæ—¶ï¼Œä¼˜å…ˆè°ƒç”¨å€¼ç±»å‹çš„ToString()æ–¹æ³•ï¼ˆä¸è§¦å‘è£…ç®±ï¼‰ï¼š csharp å¤åˆ¶ 12int num = 42;string s = $&quot;&#123;num&#125;&quot;; // num.ToString()è¢«è°ƒç”¨ï¼Œæ— è£…ç®± 5. å¸¸è§é—®é¢˜ GetType()æ˜¯å¦éœ€è¦è£…ç®±ï¼Ÿ csharp å¤åˆ¶ 12int num = 42;Type type = num.GetType(); // è£…ç®±ï¼å› ä¸ºGetType()æ˜¯objectçš„æ–¹æ³• iså’Œasæ“ä½œç¬¦çš„æ‹†ç®±è¡Œä¸º isæ£€æŸ¥ç±»å‹æ—¶ä¸æ‹†ç®±ï¼š csharp å¤åˆ¶ 12object obj = 42;if (obj is int) &#123; &#125; // æ£€æŸ¥ç±»å‹ï¼Œä¸æ‹†ç®± asæ“ä½œç¬¦ä¸å¯ç”¨äºå€¼ç±»å‹ï¼š csharp å¤åˆ¶ 12object obj = 42;int? num = obj as int?; // åˆæ³•ï¼ˆNullable&lt;T&gt;ï¼‰ æ¨¡å¼åŒ¹é…ä¸­çš„æ‹†ç®±ä¼˜åŒ– csharp å¤åˆ¶ 1if (obj is int num) &#123; &#125; // å®‰å…¨æ‹†ç®±ï¼Œé¿å…é‡å¤æ“ä½œ 6. æ€§èƒ½åˆ†æå·¥å…· ILä»£ç æŸ¥çœ‹ä½¿ç”¨ildasmæˆ–ILSpyæŸ¥çœ‹è£…ç®±æŒ‡ä»¤ï¼ˆboxå’Œunboxï¼‰ã€‚ æ€§èƒ½åˆ†æå™¨ Visual Studioæ€§èƒ½åˆ†æå™¨ï¼ˆæ£€æµ‹å †åˆ†é…ï¼‰ã€‚ BenchmarkDotNetï¼šæµ‹é‡é«˜é¢‘è£…ç®±çš„æ€§èƒ½æŸè€—ã€‚ æ€»ç»“ è£…ç®±&#x2F;æ‹†ç®±æœ¬è´¨ï¼šå€¼ç±»å‹ä¸å¼•ç”¨ç±»å‹é—´çš„è½¬æ¢ï¼Œä¼´éšå †å†…å­˜åˆ†é…å’Œæ€§èƒ½å¼€é”€ã€‚ ä¼˜åŒ–æ ¸å¿ƒï¼šé€šè¿‡æ³›å‹ã€é¿å…objectå‚æ•°ã€ä½¿ç”¨å€¼ç±»å‹æ–¹æ³•ï¼ˆå¦‚ToString()ï¼‰å‡å°‘æ“ä½œã€‚ é«˜é¢‘åœºæ™¯éœ€è­¦æƒ•ï¼šå¦‚å¾ªç¯ã€é›†åˆæ“ä½œå’Œéæ³›å‹APIè°ƒç”¨ã€‚ å›è°ƒå‡½æ•°å›è°ƒå‡½æ•°æœ¬è´¨å°±æ˜¯å‡½æ•°å‚æ•°ï¼Œä¹Ÿå°±æ˜¯æŠŠAå‡½æ•°ä½œä¸ºBå‡½æ•°çš„å‚æ•°ä¼ åˆ°Bå‡½æ•°é‡Œä½¿ç”¨ï¼Œé‚£ä¹ˆè¿™ä¸ªAå‡½æ•°å°±æ˜¯å›è°ƒå‡½æ•°ã€‚ åœ¨C#ä¸­ï¼Œå®ç°å›è°ƒçš„æ–¹å¼æ˜¯é€šè¿‡å§”æ‰˜æ¥å®ç°å›è°ƒå‡½æ•°ã€‚å³æŠŠAå‡½æ•°èµ‹å€¼ç»™å§”æ‰˜ï¼Œç„¶åæŠŠè¿™ä¸ªå§”æ‰˜ä½œä¸ºBå‡½æ•°çš„å‚æ•°ã€‚ å§”æ‰˜å’Œäº‹ä»¶åœ¨ C# ä¸­ï¼Œå§”æ‰˜ï¼ˆDelegateï¼‰ æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„æ¦‚å¿µï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ç”Ÿæ´»ä¸­çš„ä¾‹å­æ¥ç†è§£å®ƒï¼šå§”æ‰˜å°±åƒä¸€ä¸ªâ€æ–¹æ³•å®¹å™¨â€ï¼Œå…è®¸ä½ æŠŠæ–¹æ³•å½“ä½œå‚æ•°ä¼ é€’ã€‚ä¸‹é¢æˆ‘ä¼šç”¨é€šä¿—æ˜“æ‡‚çš„æ–¹å¼è§£é‡Šä½ çš„é—®é¢˜ï¼š ä¸€ã€ä»€ä¹ˆæ—¶å€™ç”¨å§”æ‰˜ï¼Ÿæ—¥å¸¸ä½¿ç”¨åœºæ™¯ï¼š äº‹ä»¶å¤„ç†ï¼ˆæ¯”å¦‚æŒ‰é’®ç‚¹å‡»ï¼‰ å›è°ƒæ–¹æ³•ï¼ˆæ¯”å¦‚å¼‚æ­¥æ“ä½œå®Œæˆåçš„é€šçŸ¥ï¼‰ LINQ æŸ¥è¯¢ï¼ˆæ¯”å¦‚ Where æ–¹æ³•ä¸­çš„è¿‡æ»¤æ¡ä»¶ï¼‰ ç­–ç•¥æ¨¡å¼ï¼ˆè¿è¡Œæ—¶åŠ¨æ€æ”¹å˜ç®—æ³•ï¼‰ å¤šçº¿ç¨‹ï¼ˆæ¯”å¦‚ Thread çš„å¯åŠ¨æ–¹æ³•ï¼‰ å…¸å‹éœ€æ±‚ï¼šå½“ä½ æƒ³æŠŠæ–¹æ³•å½“ä½œå‚æ•°ä¼ é€’ï¼Œæˆ–è€…éœ€è¦åŠ¨æ€å†³å®šè°ƒç”¨å“ªä¸ªæ–¹æ³•æ—¶ã€‚ äºŒã€å§”æ‰˜çš„å¥½å¤„ è§£è€¦ï¼šè°ƒç”¨æ–¹ä¸éœ€è¦çŸ¥é“å…·ä½“å®ç°ï¼Œåªéœ€å…³å¿ƒæ–¹æ³•ç­¾å çµæ´»æ€§ï¼šè¿è¡Œæ—¶åŠ¨æ€æ”¹å˜æ–¹æ³•é€»è¾‘ ä»£ç å¤ç”¨ï¼šé€šç”¨é€»è¾‘+å¯æ’æ‹”çš„å…·ä½“å®ç° å¤šæ’­ï¼šä¸€ä¸ªå§”æ‰˜å¯ä»¥ç»‘å®šå¤šä¸ªæ–¹æ³•ï¼ˆ+= æ“ä½œç¬¦ï¼‰ ä¸‰ã€å§”æ‰˜ vs äº‹ä»¶ äº‹ä»¶æœ¬è´¨æ˜¯å°è£…åçš„å§”æ‰˜ï¼Œäº‹ä»¶æ˜¯åŸºäº event å…³é”®å­—ä¿®é¥°çš„å§”æ‰˜å®ä¾‹ å®‰å…¨åŒºåˆ«ï¼š å§”æ‰˜å¯ä»¥ç›´æ¥è¢«è°ƒç”¨ï¼ˆæ¯”å¦‚ myDelegate()ï¼‰ äº‹ä»¶åªèƒ½é€šè¿‡ += å’Œ -= è®¢é˜…&#x2F;å–æ¶ˆï¼Œä¸”åªèƒ½åœ¨å£°æ˜å®ƒçš„ç±»ä¸­è§¦å‘ è®¾è®¡ç”¨é€”ï¼š å§”æ‰˜æ›´é€šç”¨ï¼Œç”¨äºä¼ é€’æ–¹æ³• äº‹ä»¶ä¸“é—¨ç”¨äºå®ç°å‘å¸ƒ-è®¢é˜…æ¨¡å¼ å››ã€ç®€å•æ˜“æ‡‚çš„ä¾‹å­ç¤ºä¾‹ 1ï¼šåŸºç¡€å§”æ‰˜ï¼ˆæ’åºç­–ç•¥ï¼‰1234567891011121314151617// 1. å®šä¹‰å§”æ‰˜public delegate int CompareDelegate(int a, int b);// 2. ä½¿ç”¨å§”æ‰˜çš„æ–¹æ³•public void Sort(int[] arr, CompareDelegate compare)&#123; // ä½¿ç”¨ compare æ–¹æ³•è¿›è¡Œæ’åº...&#125;// 3. å®šä¹‰å…·ä½“æ–¹æ³•int Ascending(int a, int b) =&gt; a.CompareTo(b);int Descending(int a, int b) =&gt; b.CompareTo(a);// 4. ä½¿ç”¨var arr = new int[] &#123; 3, 1, 4 &#125;;Sort(arr, Ascending); // å‡åºSort(arr, Descending); // é™åº ç¤ºä¾‹ 2ï¼šäº‹ä»¶ï¼ˆæŒ‰é’®ç‚¹å‡»ï¼‰123456789101112131415161718// 1. å®šä¹‰å§”æ‰˜ï¼ˆå®é™…å¼€å‘ä¸­å¸¸ç”¨ EventHandlerï¼‰public delegate void ClickEventHandler();// 2. æŒ‰é’®ç±»public class Button&#123; public event ClickEventHandler Clicked; // äº‹ä»¶ public void Press() &#123; Clicked?.Invoke(); // åªèƒ½åœ¨ Button ç±»å†…éƒ¨è§¦å‘ &#125;&#125;// 3. ä½¿ç”¨var button = new Button();button.Clicked += () =&gt; Console.WriteLine(&quot;æŒ‰é’®è¢«ç‚¹äº†ï¼&quot;);button.Press(); // è¾“å‡ºæç¤º äº”ã€å…³é”®æ€»ç»“ ç‰¹æ€§ å§”æ‰˜ äº‹ä»¶ ç›´æ¥è°ƒç”¨ âœ”ï¸ (myDelegate()) âŒ åªèƒ½åœ¨å£°æ˜ç±»ä¸­è§¦å‘ å¤–éƒ¨è®¢é˜… âœ”ï¸ âœ”ï¸ (+=&#x2F;-= æ“ä½œç¬¦) å¤šæ’­æ”¯æŒ âœ”ï¸ âœ”ï¸ å…¸å‹ç”¨é€” ä¼ é€’æ–¹æ³•ã€å›è°ƒ å®ç°å‘å¸ƒ-è®¢é˜…æ¨¡å¼ å®é™…å¼€å‘å»ºè®®ï¼šä¼˜å…ˆä½¿ç”¨äº‹ä»¶æ¥å®ç°é€šçŸ¥æœºåˆ¶ï¼Œç”¨å§”æ‰˜æ¥å®ç°éœ€è¦çµæ´»ä¼ é€’æ–¹æ³•çš„åœºæ™¯ã€‚åœ¨ GUI ç¼–ç¨‹ï¼ˆå¦‚ WPF&#x2F;WinFormsï¼‰å’Œå¼‚æ­¥ç¼–ç¨‹ï¼ˆå¦‚ Taskï¼‰ä¸­ï¼Œå§”æ‰˜å’Œäº‹ä»¶æ— å¤„ä¸åœ¨ã€‚ å¼‚æ­¥ç¼–ç¨‹","categories":[{"name":"é¢è¯•","slug":"é¢è¯•","permalink":"http://example.com/categories/%E9%9D%A2%E8%AF%95/"}],"tags":[{"name":"é¢è¯•","slug":"é¢è¯•","permalink":"http://example.com/tags/%E9%9D%A2%E8%AF%95/"},{"name":"ç¼–ç¨‹","slug":"ç¼–ç¨‹","permalink":"http://example.com/tags/%E7%BC%96%E7%A8%8B/"}],"author":"fly"},{"title":"CSharpå­¦ä¹ ","slug":"CSharpå­¦ä¹ ","date":"2025-05-10T10:00:24.000Z","updated":"2025-05-12T13:14:24.323Z","comments":true,"path":"2025/05/10/CSharpå­¦ä¹ /","permalink":"http://example.com/2025/05/10/CSharp%E5%AD%A6%E4%B9%A0/","excerpt":"","text":"åå°„åå°„æ˜¯æŒ‡åœ¨ç¨‹åºè¿è¡Œä¸­ï¼ŒæŸ¥çœ‹ã€æ“ä½œå…¶ä»–ç¨‹åºé›†æˆ–è€…è‡ªèº«çš„å…ƒæ•°æ®çš„å„ç§ä¿¡æ¯ï¼ˆç±»ã€å‡½æ•°ã€å˜é‡ã€å¯¹è±¡ç­‰ï¼‰çš„è¡Œä¸ºã€‚C#ä¸­çš„åå°„ï¼ˆReflectionï¼‰æ˜¯ä¸€ç§å¼ºå¤§çš„ç‰¹æ€§ï¼Œå…è®¸ä½ åœ¨è¿è¡Œæ—¶æ£€æŸ¥å’Œæ“ä½œç¨‹åºé›†ã€ç±»å‹å’Œå¯¹è±¡çš„ä¿¡æ¯ï¼ŒåŸºæœ¬ä¸Šï¼Œä½¿ç”¨åå°„å¯ä»¥åœ¨ä»£ç è¿è¡Œæ—¶æ£€æŸ¥å’Œæ“ä½œæŒ‡å®šçš„ç±»åŠå…¶æˆå‘˜ã€‚C#åå°„çš„åŸç†ä¸»è¦åŸºäºå…ƒæ•°æ®ï¼ˆä¸C#ç‰¹æ€§ç›¸ä¼¼ï¼‰ï¼Œå³ç¨‹åºé›†ä¸­å­˜å‚¨çš„æœ‰å…³ç±»å‹ã€æ–¹æ³•ç­‰çš„ä¿¡æ¯ã€‚ C#åå°„æŠ€æœ¯ä¸»è¦åŸºäºSystem.Typeç±»å’ŒSystem.Reflection.Assembleç±»ï¼Œé€šè¿‡Typeç±»å¯ä»¥è®¿é—®å…³äºä»»ä½•æ•°æ®ç±»å‹çš„ä¿¡æ¯ï¼ŒAssembleç±»ç”¨äºè®¿é—®ç»™å®šç¨‹åºé›†çš„ç›¸å…³ä¿¡æ¯ï¼Œæˆ–æŠŠè¿™ä¸ªç¨‹åºé›†åŠ è½½åˆ°ç¨‹åºä¸­ã€‚ åå°„çš„ä½¿ç”¨å› ä¸ºåå°„å¯ä»¥åœ¨ç¨‹åºç¼–è¯‘åè·å¾—ä¿¡æ¯ï¼Œæ‰€ä»¥å®ƒæé«˜äº†ç¨‹åºçš„æ‹“å±•æ€§å’Œçµæ´»æ€§ ä¸€.System.Typeç±»Typeç±»æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ã€‚åªè¦å®ä¾‹åŒ–äº†ä¸€ä¸ªTypeå¯¹è±¡ï¼Œå®é™…ä¸Šå°±å®ä¾‹åŒ–äº†Typeçš„ä¸€ä¸ªæ´¾ç”Ÿç±»ã€‚å°½ç®¡ä¸€èˆ¬æƒ…å†µä¸‹æ´¾ç”Ÿç±»åªæä¾›å„ç§Typeæ–¹æ³•å’Œå±æ€§çš„ä¸åŒé‡è½½ï¼Œä½†æ˜¯è¿™äº›æ–¹æ³•å’Œå±æ€§è¿”å›å¯¹åº”æ•°æ®ç±»å‹çš„æ­£ç¡®æ•°æ®ï¼ŒTypeæœ‰ä¸æ¯ç§æ•°æ®ç±»å‹å¯¹åº”çš„æ´¾ç”Ÿç±»ã€‚å®ƒä»¬ä¸€èˆ¬ä¸æ·»åŠ æ–°çš„æ–¹æ³•æˆ–å±æ€§é€šå¸¸ï¼Œè·å–æŒ‡å‘ä»»ä½•ç»™å®šçš„Typeå¼•ç”¨æœ‰ä¸‰ç§å¸¸ç”¨æ–¹å¼ï¼š ä½¿ç”¨typeofè¿ç®—ç¬¦ï¼Œè¿™ä¸ªè¿ç®—ç¬¦çš„å‚æ•°æ˜¯ç±»å‹çš„åç§°ï¼Œä½†ä¸æ”¾åœ¨å¼•å·ä¸­ï¼š 1Type t =typeof(double); ä½¿ç”¨GetType()æ–¹æ³•ï¼Œæ‰€ä»¥ç±»éƒ½ä¼šä»System.Objectç»§æ‰¿è¿™ä¸ªæ–¹æ³•ï¼š 12double d =10;Type t = d.GetType(); åœ¨ä¸€ä¸ªå˜é‡ä¸Šè°ƒç”¨GetType()æ–¹æ³•ï¼Œè¿”å›çš„Typeå¯¹è±¡åªä¸è¯¥æ•°æ®ç±»å‹ç›¸å…³ï¼Œä¸åŒ…å«è¯¥ç±»å‹å®ä¾‹çš„ä»»ä½•ä¿¡æ¯ã€‚ è°ƒç”¨Typeç±»çš„é™æ€æ–¹æ³•GetType()ï¼š 1Type t =Type.GetType(&quot;System.Double&quot;); Typeæ˜¯å¾ˆå¤šåå°„åŠŸèƒ½çš„å…¥å£ï¼Œå®ƒå®ç°å¾ˆå¤šæ–¹æ³•å’Œå±æ€§ï¼Œå¯ç”¨çš„å±æ€§éƒ½æ˜¯åªè¯»çš„ï¼šå¯ä»¥ä½¿ç”¨Typeç¡®å®šæ•°æ®çš„ç±»å‹ï¼Œä½†ä¸èƒ½ä½¿ç”¨å®ƒä¿®æ”¹è¯¥ç±»å‹ã€‚ Typeå±æ€§ç”±Typeå®ç°çš„å±æ€§åˆ†ä¸º3ç±»ã€‚ *åŒ…å«ä¸ç±»ç›¸å…³çš„å„ç§åç§°çš„å­—ç¬¦ä¸²ï¼š Nameï¼šæ•°æ®ç±»å‹å FullNameï¼šæ•°æ®ç±»å‹çš„å®Œå…¨é™å®šåï¼ˆåŒ…å«åç§°ç©ºé—´ï¼‰ Namespaceï¼šåœ¨å…¶ä¸­å®šä¹‰æ•°æ®ç±»å‹çš„åç§°ç©ºé—´å *è·å–Typeå¯¹è±¡çš„å¼•ç”¨çš„å±æ€§ï¼š BaseTypeï¼šè¯¥å¯¹è±¡çš„ç›´æ¥åŸºæœ¬ç±»å‹ UnderlyingSystemTypeï¼šè¯¥Typeåœ¨.NETè¿è¡Œåº“ä¸­æ˜ å°„åˆ°çš„ç±»å‹ *å¸ƒå°”å±æ€§ IsAbstractï¼ŒIsArray,IsClass,IsEnumç­‰åˆ¤æ–­Typeæ˜¯ä»€ä¹ˆç±»å‹çš„å±æ€§ã€‚ Typeæ–¹æ³•System.Typeçš„å¤§å¤šæ•°æ–¹æ³•éƒ½ç”¨äºè·å–å¯¹åº”æ•°æ®ç±»å‹çš„æˆå‘˜ä¿¡æ¯ï¼šæ„é€ å‡½æ•°ï¼Œå±æ€§ï¼Œæ–¹æ³•å’Œäº‹ä»¶ç­‰ã€‚å®ƒæœ‰è®¸å¤šæ–¹æ³•ï¼Œä½†å®ƒä»¬éƒ½æœ‰ç›¸åŒçš„æ¨¡å¼ã€‚ä¾‹å¦‚ï¼Œè·å–æ•°æ®ç±»å‹çš„æ–¹æ³•çš„ä¿¡æ¯ï¼šGetMethod()å’ŒGetMethods()ã€‚GetMethod()æ–¹æ³•è¿”å›MethodInfoå¯¹è±¡çš„ä¸€ä¸ªå¼•ç”¨ï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ªæŒ‡å®šæ–¹æ³•çš„ç»†èŠ‚ä¿¡æ¯ï¼›è€ŒGetMethods()è¿”å›è¿™ç§å¼•ç”¨çš„ä¸€ä¸ªæ•°ç»„ã€‚ äºŒ.ActivatorActivatorï¼ˆå¿«é€Ÿå®ä¾‹åŒ–å¯¹è±¡çš„ç±»ï¼‰ç”¨äºå°†Typeå¯¹è±¡å¿«æ·å®ä¾‹åŒ–ä¸ºå¯¹è±¡ 12345678static void Main(string[] args)&#123; Type t = typeof(Test); // æ— å‚æ„é€  Test test = Activator.CreateInstance(t) as Test; // æœ‰å‚æ„é€  test = Activator.CreateInstance(t, 99) as Test;&#125; ä¸‰.Assemblyç±»ç›¸å…³æ¦‚å¿µä¸»è¦ç”¨æ¥åŠ è½½å…¶ä»–ç¨‹åºé›†ï¼ŒåŠ è½½åæ‰èƒ½ç”¨Typeæ¥ä½¿ç”¨å…¶ä»–ç¨‹åºé›†ä¸­çš„ä¿¡æ¯ï¼Œå¦‚æœæƒ³è¦ä½¿ç”¨ä¸æ˜¯è‡ªå·±ç¨‹åºé›†ä¸­çš„å†…å®¹ï¼Œéœ€è¦å…ˆåŠ è½½ç¨‹åºé›†ã€‚ dllæ–‡ä»¶ï¼ˆåº“æ–‡ä»¶ï¼‰å¯ä»¥ç®€å•çš„æŠŠåº“æ–‡ä»¶çœ‹æˆä¸€ç§ä»£ç ä»“åº“ åœ¨C#ä¸­ï¼Œç¨‹åºé›†å¯ä»¥ä»¥DLLæˆ–EXEæ–‡ä»¶å½¢å¼å­˜å‚¨ï¼Œå¹¶å¯ä»¥é€šè¿‡åå°„APIåœ¨è¿è¡Œæ—¶åŠ è½½å’Œæ“ä½œï¼Œå…¶ä¸­åŒ…å«äº†ç¼–è¯‘åçš„ä»£ç å’Œå…ƒæ•°æ®ã€‚ç¨‹åºé›†é€šå¸¸éœ€è¦åœ¨è¿è¡Œæ—¶è¢«åŠ è½½ï¼Œä»¥ä¾¿åœ¨åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨å…¶ä¸­å®šä¹‰çš„ç±»å‹å’Œæˆå‘˜ã€‚ ç¨‹åºé›†åœ¨è¿è¡Œæ—¶çš„åŠ è½½å¯ä»¥å‘ç”Ÿåœ¨ä¸¤ç§ä¸åŒçš„ä¸Šä¸‹æ–‡ä¸­ï¼Œåˆ†åˆ«æ˜¯ï¼š ä¸Šä¸‹æ–‡ä¸­è§£æï¼ˆContextual Resolveï¼‰ï¼šè¿™æ˜¯ç¨‹åºé›†åŠ è½½çš„ä¸€ç§é»˜è®¤è¡Œä¸ºï¼Œå…¶ä¸­.NETè¿è¡Œæ—¶ä¼šå°è¯•æ ¹æ®ç¨‹åºé›†çš„å¼•ç”¨å’Œä¾èµ–å…³ç³»æ¥è‡ªåŠ¨è§£æå’ŒåŠ è½½ç¨‹åºé›†ã€‚å½“ä½ åœ¨ä»£ç ä¸­å¼•ç”¨ä¸€ä¸ªç¨‹åºé›†ï¼Œå¹¶ä¸”å®ƒæœ‰å…¶ä»–ä¾èµ–çš„ç¨‹åºé›†ï¼Œè¿è¡Œæ—¶ä¼šè‡ªåŠ¨æŸ¥æ‰¾å’ŒåŠ è½½è¿™äº›ä¾èµ–çš„ç¨‹åºé›†ï¼Œä»¥ä¾¿æ„å»ºå®Œæ•´çš„ç¨‹åºé›†æ ‘ã€‚ ç‰¹å®šè·¯å¾„åŠ è½½ï¼ˆLoadFromï¼‰ï¼šLoadFromæ–¹æ³•å…è®¸ä½ æ˜¾å¼æŒ‡å®šç¨‹åºé›†çš„è·¯å¾„ï¼Œè€Œä¸ä¾èµ–äºè¿è¡Œæ—¶ä¸Šä¸‹æ–‡è¿›è¡Œè§£æã€‚ä½ å¯ä»¥ä½¿ç”¨Assembly.LoadFromæ–¹æ³•æ¥åŠ è½½ç¨‹åºé›†ï¼Œæä¾›ç¨‹åºé›†çš„å®Œæ•´æ–‡ä»¶è·¯å¾„ä½œä¸ºå‚æ•°ã€‚è¿™ç§æ–¹å¼é€‚ç”¨äºéœ€è¦åŠ è½½ç‰¹å®šä½ç½®çš„ç¨‹åºé›†ï¼Œè€Œä¸éœ€è¦è€ƒè™‘è¿è¡Œæ—¶ä¸Šä¸‹æ–‡ä¸­çš„è§£æã€‚ åŠ è½½æ–¹æ³• 1.Assembly.Loadï¼š å½“ä½¿ç”¨Assembly.Loadæ—¶ï¼Œå‚æ•°æ˜¯ç¨‹åºé›†çš„æ˜¾ç¤ºåç§°ï¼ˆå¯ä»¥åŒ…å«é•¿åç§°ã€ç‰ˆæœ¬ã€æ–‡åŒ–å’Œå…¬å…±å¯†é’¥ä»¤ç‰Œä¿¡æ¯ï¼‰ã€‚æ­¤æ–¹æ³•å°†åœ¨åº”ç”¨ç¨‹åºåŸŸçš„ä¸Šä¸‹æ–‡ä¸­æŸ¥æ‰¾å’ŒåŠ è½½ç¨‹åºé›†ã€‚å¦‚æœç¨‹åºé›†å·²ç»è¢«åŠ è½½ï¼Œåˆ™å°†è¿”å›ç°æœ‰çš„ç¨‹åºé›†å¼•ç”¨ã€‚Loadæ–¹æ³•æœ€é€‚åˆåœ¨å·²çŸ¥éœ€è¦åŠ è½½ç¨‹åºé›†çš„å®Œæ•´åç§°çš„æƒ…å†µä¸‹ä½¿ç”¨ã€‚ 1Assembly assembly = Assembly.Load(&quot;System.Data, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&quot;); 2.Assembly.LoadFromï¼š ä½¿ç”¨ Assembly.LoadFrom æ—¶ï¼Œå‚æ•°æ˜¯åŒ…å«ç¨‹åºé›†æ–‡ä»¶çš„è·¯å¾„ã€‚æ­¤æ–¹æ³•å°†ä»æŒ‡å®šè·¯å¾„åŠ è½½ç¨‹åºé›†ï¼Œå¹¶åœ¨åŒ…å«ç›®å½•ä¸‹è§£æå…¶ä¾èµ–é¡¹ã€‚æ³¨æ„ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´åŒä¸€ä¸ªç¨‹åºé›†è¢«å¤šæ¬¡åŠ è½½ï¼Œä¾‹å¦‚ï¼Œå½“ç›¸åŒçš„ç¨‹åºé›†ä½äºä¸åŒçš„ç›®å½•æ—¶ã€‚LoadFromé€‚ç”¨äºéœ€è¦ä»ç‰¹å®šè·¯å¾„åŠ è½½ç¨‹åºé›†ï¼Œè€Œä¸å¿…åœ¨ä¸Šä¸‹æ–‡ä¸­è§£æçš„æƒ…å†µã€‚ 1Assembly assembly = Assembly.LoadFrom(@&quot;C:\\MyAssemblies\\MyAssembly.dll&quot;); 3.Assembly.LoadFileï¼š Assembly.LoadFile ä¸ Assembly.LoadFrom ç±»ä¼¼ï¼Œå› ä¸ºå®ƒéœ€è¦ä¸€ä¸ªåŒ…å«ç¨‹åºé›†æ–‡ä»¶çš„è·¯å¾„ä½œä¸ºå‚æ•°ã€‚ç„¶è€Œï¼ŒLoadFile åœ¨åŠ è½½ç¨‹åºé›†æ—¶ä¸ä¼šå°†å…¶æ·»åŠ åˆ°ä¸Šä¸‹æ–‡ä¸­ï¼Œä¹Ÿä¸ä¼šè§£æå…¶ä¾èµ–é¡¹ã€‚è¿™æ„å‘³ç€ï¼Œå¦‚æœç¨‹åºé›†å…·æœ‰æœªè§£æçš„ä¾èµ–é¡¹ï¼Œå¯èƒ½ä¼šåœ¨è¿è¡Œæ—¶å‡ºç°é—®é¢˜ã€‚LoadFile åœ¨åªéœ€è¦æ£€æŸ¥ç¨‹åºé›†ä¿¡æ¯è€Œæ— éœ€å®é™…æ‰§è¡Œä»£ç çš„åœºæ™¯ä¸‹éå¸¸æœ‰ç”¨ã€‚ 1Assembly assembly = Assembly.LoadFile(@&quot;C:\\MyAssemblies\\MyAssembly.dll&quot;); ç„¶åå°±å¯ä»¥é€šè¿‡assembly1.GetType();ä¼ å…¥å¸¦å‘½åç©ºé—´çš„ç±»åè·å–ç¨‹åºé›†ä¸‹çš„æŒ‡å®šç±»çš„ç±»ä¿¡æ¯ ç‰¹æ€§ä¸€ã€ç‰¹æ€§æ˜¯ä»€ä¹ˆ1ã€ç‰¹æ€§å®šä¹‰**ç‰¹æ€§ï¼ˆAttributeï¼‰**æ˜¯ç”¨äºåœ¨è¿è¡Œæ—¶ä¼ é€’ç¨‹åºä¸­å„ç§å…ƒç´ ï¼ˆæ¯”å¦‚ç±»ã€æ–¹æ³•ã€ç»“æ„ã€æšä¸¾ã€ç»„ä»¶ç­‰ï¼‰çš„è¡Œä¸ºä¿¡æ¯çš„å£°æ˜æ€§æ ‡ç­¾ã€‚æ‚¨å¯ä»¥é€šè¿‡ä½¿ç”¨ç‰¹æ€§å‘ç¨‹åºæ·»åŠ å£°æ˜æ€§ä¿¡æ¯ã€‚ä¸€ä¸ªå£°æ˜æ€§æ ‡ç­¾æ˜¯é€šè¿‡æ”¾ç½®åœ¨å®ƒæ‰€åº”ç”¨çš„å…ƒç´ å‰é¢çš„æ–¹æ‹¬å·ï¼ˆ[ ]ï¼‰æ¥æè¿°çš„ã€‚ ç‰¹æ€§ï¼ˆAttributeï¼‰ç”¨äºæ·»åŠ å…ƒæ•°æ®ï¼Œå¦‚ç¼–è¯‘å™¨æŒ‡ä»¤å’Œæ³¨é‡Šã€æè¿°ã€æ–¹æ³•ã€ç±»ç­‰å…¶ä»–ä¿¡æ¯ã€‚.Net æ¡†æ¶æä¾›äº†ä¸¤ç§ç±»å‹çš„ç‰¹æ€§ï¼šé¢„å®šä¹‰ç‰¹æ€§å’Œè‡ªå®šä¹‰ç‰¹æ€§ã€‚ 2ã€ç‰¹æ€§çš„è¯­æ³•ç‰¹æ€§ï¼ˆAttributeï¼‰çš„åç§°å’Œå€¼æ˜¯åœ¨æ–¹æ‹¬å·å†…è§„å®šçš„ï¼Œæ”¾ç½®åœ¨å®ƒæ‰€åº”ç”¨çš„å…ƒç´ ä¹‹å‰ã€‚positional_parameters è§„å®šå¿…éœ€çš„ä¿¡æ¯ï¼Œname_parameter è§„å®šå¯é€‰çš„ä¿¡æ¯ã€‚ 12[attribute(positional_parameters, name_parameter = value, ...)]element 3ã€ç‰¹æ€§å’Œæ³¨é‡Šæœ‰ä»€ä¹ˆåŒºåˆ«ç‰¹æ€§å¾ˆå‰å®³ï¼ŒåŠ äº†ç‰¹æ€§ä¹‹åï¼Œå°±æœ‰å¾ˆå‰å®³çš„åŠŸèƒ½[Obsolete]ç¼–è¯‘æ—¶å°±æœ‰æç¤ºï¼Œå½±å“äº†ç¼–è¯‘å™¨[Obsolete(â€œè¯·ä¸è¦ä½¿ç”¨è¿™ä¸ªäº†ï¼Œè¯·ä½¿ç”¨ä»€ä¹ˆæ¥ä»£æ›¿â€, true)]ç”šè‡³å¯¼è‡´ç¼–è¯‘æŠ¥é”™[Serializable]å¯¹è±¡å°±å¯ä»¥åºåˆ—åŒ–ï¼Œå½±å“äº†ç¨‹åºè¿è¡Œ 123456789101112131415161718192021222324252627using System;namespace MyAttribute&#123; /// &lt;summary&gt; /// è¿™é‡Œæ˜¯æ³¨é‡Šï¼Œé™¤äº†è®©äººçœ‹æ‡‚è¿™é‡Œå†™çš„æ˜¯ä»€ä¹ˆï¼Œå¯¹è¿è¡Œæ²¡æœ‰ä»»ä½•å½±å“ /// &lt;/summary&gt; ///[Obsolete(&quot;è¯·ä¸è¦ä½¿ç”¨è¿™ä¸ªäº†ï¼Œè¯·ä½¿ç”¨ä»€ä¹ˆæ¥ä»£æ›¿&quot;)]//å¯¹ç¼–è¯‘éƒ½äº§ç”Ÿäº†å½±å“ï¼Œç¼–è¯‘å‡ºç°è­¦å‘Š ///[Obsolete(&quot;è¯·ä¸è¦ä½¿ç”¨è¿™ä¸ªäº†ï¼Œè¯·ä½¿ç”¨ä»€ä¹ˆæ¥ä»£æ›¿&quot;, true)]//å¯¹ç¼–è¯‘éƒ½äº§ç”Ÿäº†å½±å“ï¼Œç¼–è¯‘æŠ¥é”™ä¸é€šè¿‡ [Serializable]//å¯ä»¥åºåˆ—åŒ–å’Œååºåˆ—åŒ– public class Student &#123; public int Id &#123; get; set; &#125; public string Name &#123; get; set; &#125; public void Study() &#123; Console.WriteLine($&quot;è¿™é‡Œæ˜¯&#123;this.Name&#125;åœ¨å­¦ä¹ &quot;); &#125; public string Answer([Custom]string name) &#123; return $&quot;This is &#123;name&#125;&quot;; &#125; &#125;&#125; ç‰¹æ€§æ— å¤„ä¸åœ¨ï¼šEFâ€“MVCâ€“WCFâ€“WebServiceâ€“UnitTestâ€“IOCâ€“AOPâ€“SuperSocket äºŒã€ç‰¹æ€§å£°æ˜å’Œä½¿ç”¨1ã€ä»€ä¹ˆæ˜¯ç‰¹æ€§ç‰¹æ€§å…¶å®å°±æ˜¯ä¸€ä¸ªç±»ï¼Œç›´æ¥æˆ–é—´æ¥ç»§æ‰¿è‡ªAttribute 123456789101112131415161718192021222324252627282930313233#region ç¨‹åºé›† mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089// C:\\Program Files (x86)\\Reference Assemblies\\Microsoft\\Framework\\.NETFramework\\v4.5\\mscorlib.dll// Decompiled with ICSharpCode.Decompiler 6.1.0.5902#endregionusing System.Reflection;using System.Runtime.InteropServices;namespace System&#123; [AttributeUsage(AttributeTargets.Class | AttributeTargets.Struct | AttributeTargets.Enum | AttributeTargets.Delegate, Inherited = false)] [ComVisible(true)] public sealed class SerializableAttribute : Attribute &#123; internal static Attribute GetCustomAttribute(RuntimeType type) &#123; if ((type.Attributes &amp; TypeAttributes.Serializable) != TypeAttributes.Serializable) &#123; return null; &#125; return new SerializableAttribute(); &#125; internal static bool IsDefined(RuntimeType type) &#123; return type.IsSerializable; &#125; &#125;&#125;#if false // åç¼–è¯‘æ—¥å¿—ç¼“å­˜ä¸­çš„ 9 é¡¹#endif å±æ€§æ›´æ”¹é€šçŸ¥123456789101112131415161718192021222324public class ViewModelBase : INotifyPropertyChanged&#123; public event EventHandler&lt;PropertyChangedExtendedEventArgs&gt; PropertyChangedExtended; public event PropertyChangedEventHandler PropertyChanged; protected virtual void OnPropertyChanged(object oldValue, object newValue,[CallerMemberName] string propertyName=&quot;&quot;) &#123; PropertyChanged?.Invoke(this, new PropertyChangedEventArgs(propertyName)); PropertyChangedExtended?.Invoke(this, new PropertyChangedExtendedEventArgs(propertyName, oldValue, newValue)); &#125;&#125;public class PropertyChangedExtendedEventArgs : PropertyChangedEventArgs&#123; public object OldValue &#123; get; &#125; public object NewValue &#123; get; &#125; public PropertyChangedExtendedEventArgs(string propertyName, object oldValue, object newValue) : base(propertyName) &#123; OldValue = oldValue; NewValue = newValue; &#125;&#125; 1234567891011121314151617181920212223public class Book : ViewModelBase&#123; private string name; public string Name &#123; get &#123; return name; &#125; set &#123; var oldValue = name; name = value; OnPropertyChanged(oldValue, value); &#125; &#125; private string author; public string Author &#123; get &#123; return author; &#125; set &#123; var oldValue = author; author = value; OnPropertyChanged(oldValue,value); &#125; &#125;&#125; å§”æ‰˜C# å§”æ‰˜ï¼ˆDelegateï¼‰æ˜¯ä¸€ç§ç±»å‹å®‰å…¨çš„å‡½æ•°æŒ‡é’ˆï¼Œå®ƒæ˜¯ .NET Framework ä¸­ä¸€ç§é‡è¦çš„ç¼–ç¨‹æ¦‚å¿µï¼Œç”¨äºå°è£…æ–¹æ³•çš„å¼•ç”¨ã€‚å§”æ‰˜å…è®¸ä½ å°†æ–¹æ³•ä½œä¸ºå‚æ•°ä¼ é€’ç»™å…¶ä»–æ–¹æ³•ï¼Œæ³¨å†Œäº‹ä»¶å¤„ç†å™¨ï¼Œå®ç°å›è°ƒæœºåˆ¶ï¼Œä»¥åŠåœ¨å¼‚æ­¥ç¼–ç¨‹å’Œå¤šçº¿ç¨‹ç¼–ç¨‹ä¸­æ‰®æ¼”å…³é”®è§’è‰²ã€‚ä»¥ä¸‹æ˜¯å…³äº C# å§”æ‰˜çš„è¯¦ç»†ä»‹ç»ï¼š å§”æ‰˜æ˜¯ C# è¯­è¨€ä¸­çš„ä¸€ä¸ªç‰¹è‰²ï¼Œé€šå¸¸å°†å§”æ‰˜åˆ†ä¸ºå‘½åæ–¹æ³•å§”æ‰˜ã€å¤šæ’­å§”æ‰˜ã€åŒ¿åå§”æ‰˜ï¼Œå…¶ä¸­å‘½åæ–¹æ³•å§”æ‰˜æ˜¯ä½¿ç”¨æœ€å¤šçš„ä¸€ç§å§”æ‰˜ã€‚ åœ¨ C#è¯­è¨€ä¸­å‘½åæ–¹æ³•å§”æ‰˜æ˜¯æœ€å¸¸ç”¨çš„ä¸€ç§å§”æ‰˜ï¼Œå…¶å®šä¹‰çš„è¯­æ³•å½¢å¼å¦‚ä¸‹ã€‚ 1ä¿®é¥°ç¬¦ delegate è¿”å›å€¼ç±»å‹ å§”æ‰˜å ( å‚æ•°åˆ—è¡¨ ); ä»ä¸Šé¢çš„å®šä¹‰å¯ä»¥çœ‹å‡ºï¼Œå§”æ‰˜çš„å®šä¹‰ä¸æ–¹æ³•çš„å®šä¹‰æ˜¯ç›¸ä¼¼çš„ã€‚ä¾‹å¦‚å®šä¹‰ä¸€ä¸ªä¸å¸¦å‚æ•°çš„å§”æ‰˜ï¼Œä»£ç å¦‚ä¸‹ã€‚ 1public delegate void MyDelegate(); åœ¨å®šä¹‰å¥½å§”æ‰˜åå°±åˆ°äº†å®ä¾‹åŒ–å§”æ‰˜çš„æ­¥éª¤ï¼Œå‘½åæ–¹æ³•å§”æ‰˜åœ¨å®ä¾‹åŒ–å§”æ‰˜æ—¶å¿…é¡»å¸¦å…¥æ–¹æ³•çš„å…·ä½“åç§°ã€‚ å®ä¾‹åŒ–å§”æ‰˜çš„è¯­æ³•å½¢å¼å¦‚ä¸‹ã€‚ 1å§”æ‰˜å å§”æ‰˜å¯¹è±¡å = new å§”æ‰˜å ( æ–¹æ³•å ); å§”æ‰˜ä¸­ä¼ é€’çš„æ–¹æ³•åæ—¢å¯ä»¥æ˜¯é™æ€æ–¹æ³•çš„åç§°ï¼Œä¹Ÿå¯ä»¥æ˜¯å®ä¾‹æ–¹æ³•çš„åç§°ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨å§”æ‰˜ä¸­æ‰€å†™çš„æ–¹æ³•åå¿…é¡»ä¸å§”æ‰˜å®šä¹‰æ—¶çš„è¿”å›å€¼ç±»å‹å’Œå‚æ•°åˆ—è¡¨ç›¸åŒã€‚ åœ¨å®ä¾‹åŒ–å§”æ‰˜åå³å¯è°ƒç”¨å§”æ‰˜ï¼Œè¯­æ³•å½¢å¼å¦‚ä¸‹ã€‚ 1å§”æ‰˜å¯¹è±¡å ( å‚æ•°åˆ—è¡¨ ); ï¼ˆ1ï¼‰å§”æ‰˜å¯ä»¥å£°æ˜åœ¨ç±»å¤–éƒ¨ï¼Œä¹Ÿå¯ä»¥åœ¨ç±»å†…éƒ¨ ï¼ˆ2ï¼‰è·Ÿæ–¹æ³•æœ‰ç‚¹ç±»ä¼¼ï¼Œæœ‰å‚æ•°ï¼Œè¿”å›å€¼ï¼Œè®¿é—®ä¿®é¥°ç¬¦ï¼Œæ¯”æ–¹æ³•å£°æ˜å¤šä¸€ä¸ªå…³é”®å­—delegate 123456789101112131415161718192021222324252627282930313233namespace MyDelegate&#123; /// &lt;summary&gt; /// 1.æ— å‚æ•°æ— è¿”å›å€¼å§”æ‰˜ /// &lt;/summary&gt; public delegate void NoReturnNoParaOutClass(); public class CustomDelegate &#123; /// &lt;summary&gt; /// 2.æ— å‚æ•°æ— è¿”å›å€¼å§”æ‰˜ /// &lt;/summary&gt; public delegate void NoReturnNoPara(); /// &lt;summary&gt; /// 3.æœ‰å‚æ•°æ— è¿”å›å€¼å§”æ‰˜ /// &lt;/summary&gt; /// &lt;param name=&quot;x&quot;&gt;&lt;/param&gt; /// &lt;param name=&quot;y&quot;&gt;&lt;/param&gt; public delegate void NoReturnWithPara(int x, int y); /// &lt;summary&gt; /// 4.æ— å‚æ•°æœ‰è¿”å›å€¼çš„å§”æ‰˜ /// &lt;/summary&gt; /// &lt;returns&gt;&lt;/returns&gt; public delegate int WithReturnNoPara(); /// &lt;summary&gt; /// 5.å¸¦å‚æ•°å¸¦è¿”å›å€¼çš„å§”æ‰˜ /// &lt;/summary&gt; /// &lt;param name=&quot;x&quot;&gt;&lt;/param&gt; /// &lt;param name=&quot;y&quot;&gt;&lt;/param&gt; /// &lt;returns&gt;&lt;/returns&gt; public delegate int WithReturnWithPara(out int x, ref int y); &#125;&#125; ï¼ˆ1ï¼‰å§”æ‰˜æ˜¯ä¸€ä¸ªç±»ï¼Œç»§æ‰¿è‡ªMulticastDelegate MulticastDelegateè¿™ä¸ªç±»æˆ‘ä»¬è‡ªå·±å®šä¹‰çš„ç±»æ˜¯æ— æ³•ç»§æ‰¿çš„ ï¼ˆ2ï¼‰å§”æ‰˜çš„æ„é€ å‡½æ•°ï¼Œéœ€è¦ä¼ é€’ä¸€ä¸ªæ–¹æ³•ä½œä¸ºå‚æ•° ï¼ˆ3ï¼‰å§”æ‰˜çš„å†…éƒ¨æœ‰ä¸‰ä¸ªæ–¹æ³•Invokeï¼ŒBeginInvokeï¼ŒEndInvoke äºŒã€å§”æ‰˜å®ä¾‹åŒ–å’Œæ‰§è¡Œ 1ã€å§”æ‰˜å®ä¾‹åŒ– ï¼ˆ1ï¼‰é€šè¿‡Newæ¥å®ä¾‹åŒ– ï¼ˆ2ï¼‰ç›´æ¥&#x3D;ä¸€ä¸ªæ–¹æ³•ï¼Œè¿™ä¸ªæ˜¯ç¼–è¯‘å™¨æä¾›çš„è¯­æ³•ç³– ï¼ˆ3ï¼‰ç›´æ¥&#x3D;ä¸€ä¸ªåŒ¿åå§”æ‰˜ ï¼ˆ4ï¼‰ç›´æ¥&#x3D;ä¸€ä¸ªLambda 2ã€å§”æ‰˜æ‰§è¡Œï¼ˆ1ï¼‰Inovkeæ‰§è¡Œå§”æ‰˜ å¦‚æœå§”æ‰˜å®šä¹‰æ²¡æœ‰å‚æ•°ï¼Œåˆ™Inovkeä¹Ÿæ²¡æœ‰å‚æ•°ï¼›å§”æ‰˜æ²¡æœ‰è¿”å›å€¼ï¼Œåˆ™Inovkeä¹Ÿæ²¡æœ‰è¿”å›å€¼ ï¼ˆ2ï¼‰BeginInvokeå¼€å¯ä¸€ä¸ªæ–°çº¿ç¨‹æ‰§è¡Œå§”æ‰˜ NetCoreä¸æ”¯æŒï¼ŒNetFameworkæ”¯æŒ NetCoreæœ‰æ›´å¥½çš„å¤šçº¿ç¨‹åŠŸèƒ½æ¥æ”¯æŒå®ç°ç±»ä¼¼åŠŸèƒ½ ï¼ˆ3ï¼‰EndInvokeç­‰å¾…BeginInvokeæ‰§è¡Œå®Œæˆåå†æ‰§è¡Œ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273using System;namespace MyDelegate&#123; public class CustomDelegateShow &#123; public static void Show() &#123; //1ã€å§”æ‰˜å®ä¾‹åŒ– //ï¼ˆ1ï¼‰é€šè¿‡Newæ¥å®ä¾‹åŒ–ï¼Œè¦æ±‚ä¼ é€’ä¸€ä¸ªå’Œè¿™ä¸ªå§”æ‰˜çš„å‚æ•°å’Œè¿”å›å€¼å®Œå…¨åŒ¹é…çš„æ–¹æ³• NoReturnNoParaOutClass noReturnNoParaOutClass = new NoReturnNoParaOutClass(NoReturnNoParaMehtod); //ï¼ˆ2ï¼‰ç›´æ¥=ä¸€ä¸ªæ–¹æ³•ï¼Œè¦æ±‚æ–¹æ³•å’Œè¿™ä¸ªå§”æ‰˜çš„å‚æ•°å’Œè¿”å›å€¼å®Œå…¨åŒ¹é…ï¼Œè¿™ä¸ªæ˜¯ç¼–è¯‘å™¨æä¾›çš„è¯­æ³•ç³– NoReturnNoParaOutClass noReturnNoParaOutClass2 = NoReturnNoParaMehtod; //ï¼ˆ3ï¼‰ç›´æ¥=ä¸€ä¸ªåŒ¿åå§”æ‰˜ï¼Œè¦æ±‚å’Œè¿™ä¸ªå§”æ‰˜çš„å‚æ•°å’Œè¿”å›å€¼å®Œå…¨åŒ¹é… NoReturnNoParaOutClass noReturnNoParaOutClass3 = delegate () &#123; Console.WriteLine(&quot;è¿™æ˜¯ä¸€ä¸ªæ— å‚æ•°æ— è¿”å›å€¼çš„æ–¹æ³•ã€‚ã€‚ã€‚&quot;); &#125;; //ï¼ˆ4ï¼‰ç›´æ¥=ä¸€ä¸ªLambdaï¼Œè¦æ±‚å’Œè¿™ä¸ªå§”æ‰˜çš„å‚æ•°å’Œè¿”å›å€¼å®Œå…¨åŒ¹é… NoReturnNoParaOutClass noReturnNoParaOutClass4 = ()=&gt; &#123; Console.WriteLine(&quot;è¿™æ˜¯ä¸€ä¸ªæ— å‚æ•°æ— è¿”å›å€¼çš„æ–¹æ³•ã€‚ã€‚ã€‚&quot;); &#125;; //æ— å‚æ— è¿”å›å€¼å§”æ‰˜å®ä¾‹åŒ– CustomDelegate.NoReturnNoPara noReturnNoPara = NoReturnNoParaMehtod; //å¸¦å‚æ•°æ— è¿”å›å€¼å§”æ‰˜å®ä¾‹åŒ– CustomDelegate.NoReturnWithPara noReturnWithPara = NoReturnWithParaMehtod; //æ— å‚æ•°å¸¦è¿”å›å€¼å§”æ‰˜å®ä¾‹åŒ– CustomDelegate.WithReturnNoPara withReturnNoPara = WithReturnNoParaMehtod; //å¸¦å‚æ•°å¸¦è¿”å›å€¼å§”æ‰˜å®ä¾‹åŒ– CustomDelegate.WithReturnWithPara withReturnWithPara = WithReturnWithParaMehtod; //2ã€å§”æ‰˜æ‰§è¡Œ //ï¼ˆ1ï¼‰Inovkeæ‰§è¡Œæ–¹æ³•ï¼Œå¦‚æœå§”æ‰˜å®šä¹‰æ²¡æœ‰å‚æ•°ï¼Œåˆ™Inovkeä¹Ÿæ²¡æœ‰å‚æ•°ï¼›å§”æ‰˜æ²¡æœ‰è¿”å›å€¼ï¼Œåˆ™Inovkeä¹Ÿæ²¡æœ‰è¿”å›å€¼ noReturnNoParaOutClass.Invoke(); //ï¼ˆ2ï¼‰BeginInvokeå¼€å¯ä¸€ä¸ªæ–°çš„çº¿ç¨‹å»æ‰§è¡Œå§”æ‰˜ //NetCoreä¸æ”¯æŒï¼ŒNetFameworkæ”¯æŒ NetCoreæœ‰æ›´å¥½çš„å¤šçº¿ç¨‹åŠŸèƒ½æ¥æ”¯æŒå®ç°ç±»ä¼¼åŠŸèƒ½ //noReturnNoParaOutClass.BeginInvoke((a) =&gt; Console.WriteLine(&quot;æ–¹æ³•è°ƒç”¨ç»“æŸã€‚ã€‚ã€‚&quot;), null); //ï¼ˆ3ï¼‰EndInvokeç­‰å¾…BeginInvokeæ–¹æ³•æ‰§è¡Œå®Œæˆåå†æ‰§è¡ŒEndInvokeåé¢çš„ä»£ç  //NetCoreä¸æ”¯æŒï¼ŒNetFameworkæ”¯æŒ NetCoreæœ‰æ›´å¥½çš„å¤šçº¿ç¨‹åŠŸèƒ½æ¥æ”¯æŒå®ç°ç±»ä¼¼åŠŸèƒ½ //noReturnNoParaOutClass.EndInvoke(null); //æ— å‚æ— è¿”å›å€¼å§”æ‰˜æ‰§è¡Œ noReturnNoPara.Invoke(); //å¸¦å‚æ•°æ— è¿”å›å€¼å§”æ‰˜æ‰§è¡Œ noReturnWithPara.Invoke(1,2); //æ— å‚æ•°å¸¦è¿”å›å€¼å§”æ‰˜æ‰§è¡Œ int result=withReturnNoPara.Invoke(); //å¸¦å‚æ•°å¸¦è¿”å›å€¼å§”æ‰˜æ‰§è¡Œ int x = 1; int y = 1; int result2 = withReturnWithPara.Invoke(out x, ref y); &#125; private static void NoReturnNoParaMehtod() &#123; Console.WriteLine(&quot;è¿™æ˜¯ä¸€ä¸ªæ— å‚æ•°æ— è¿”å›å€¼çš„æ–¹æ³•ã€‚ã€‚ã€‚&quot;); &#125; private static void NoReturnWithParaMehtod(int x, int y) &#123; Console.WriteLine($&quot;è¿™æ˜¯ä¸€ä¸ªå¸¦å‚æ•°æ— è¿”å›å€¼çš„æ–¹æ³•ã€‚ã€‚ã€‚&quot;); &#125; private static int WithReturnNoParaMehtod() &#123; Console.WriteLine($&quot;è¿™æ˜¯ä¸€ä¸ªæ— å‚æ•°å¸¦è¿”å›å€¼çš„æ–¹æ³•ã€‚ã€‚ã€‚&quot;); return default(int); &#125; private static int WithReturnWithParaMehtod(out int x, ref int y) &#123; Console.WriteLine($&quot;è¿™æ˜¯ä¸€ä¸ªå¸¦å‚æ•°å¸¦è¿”å›å€¼çš„æ–¹æ³•ã€‚ã€‚ã€‚&quot;); x = 1; return default(int); &#125; &#125;&#125; æ¡†æ¶å†…ç½®å§”æ‰˜Action&#x2F;Funcæ˜¯.NET Framework3.0æ—¶ä»£çš„äº§ç‰© 1ã€Actionï¼ˆ1ï¼‰Actionæ˜¯æ¥è‡ªäºSystem.RunTimeçš„ä¸€ä¸ªå£°æ˜å¥½çš„å¯ä»¥å¸¦æœ‰ä¸€ä¸ªæˆ–è€…å¤šä¸ªå‚æ•°æ— è¿”å›å€¼çš„å§”æ‰˜ï¼ˆ2ï¼‰æœ€å¤šæ”¯æŒ16ä¸ªå…¥å‚ï¼Œæ­£å¸¸ä½¿ç”¨è¶³å¤Ÿ 12Action action = new Action(NoreturnNopara);Action&lt;int&gt; action1 = new Action&lt;int&gt;(DoNothingInt); ï¼ˆ3ï¼‰æƒ³è¦æ”¯æŒæ›´å¤šçš„å‚æ•°å‘¢ï¼Œå¯ä»¥è‡ªå·±å®šä¹‰ &#x2F;&#x2F;å‚æ•°ä¸å¤Ÿè‡ªå·±å®šä¹‰ 12//å‚æ•°ä¸å¤Ÿè‡ªå·±å®šä¹‰public delegate void Action&lt;in T1, in T2, in T3, in T4, in T5, in T6, in T7, in T8, in T9, in T10, in T11, in T12, in T13, in T14, in T15, in T16, in T17&gt;(T1 arg1, T2 arg2, T3 arg3, T4 arg4, T5 arg5, T6 arg6, T7 arg7, T8 arg8, T9 arg9, T10 arg10, T11 arg11, T12 arg12, T13 arg13, T14 arg14, T15 arg15, T16 arg16, T17 arg17); 2ã€Funcï¼ˆ1ï¼‰Funcæ˜¯æ¥è‡ªäºSystem.RunTimeçš„ä¸€ä¸ªå£°æ˜å¥½æœ‰è¿”å›å€¼çš„å§”æ‰˜ï¼Œä¹Ÿå¯ä»¥æœ‰å‚æ•°ï¼ˆ2ï¼‰å¦‚æœæ—¢ç„¶æœ‰å‚æ•°ä¹Ÿæœ‰è¿”å›å€¼ï¼Œå‰é¢æ˜¯è¾“å…¥å‚æ•°ç±»å‹ï¼Œæœ€åé¢çš„ä½œä¸ºè¿”å›å€¼ç±»å‹ï¼ˆ3ï¼‰æœ€å¤šæ”¯æŒ16ä¸ªå…¥å‚ï¼Œæ­£å¸¸è¶³å¤Ÿä½¿ç”¨ 123Func&lt;int&gt; func = new Func&lt;int&gt;(ReturnNopara);Func&lt;int, int&gt; func1 = new Func&lt;int, int&gt;(ToInt);Func&lt;int, string, int&gt; func2 = new Func&lt;int, string, int&gt;(DoNothingIntAndStringNew); ï¼ˆ4ï¼‰æƒ³è¦æ”¯æŒæ›´å¤šçš„å‚æ•°å‘¢ï¼Œå¯ä»¥è‡ªå·±å®šä¹‰ 12//å‚æ•°ä¸å¤Ÿè‡ªå·±å®šä¹‰public delegate TResult Func&lt;in T1, in T2, in T3, in T4, in T5, in T6, in T7, in T8, in T9, in T10, in T11, in T12, in T13, in T14, in T15, in T16, in T17, out TResult&gt;(T1 arg1, T2 arg2, T3 arg3, T4 arg4, T5 arg5, T6 arg6, T7 arg7, T8 arg8, T9 arg9, T10 arg10, T11 arg11, T12 arg12, T13 arg13, T14 arg14, T15 arg15, T16 arg16, T17 arg17); 3ã€ä¸ºä»€ä¹ˆè¦ç”¨æ¡†æ¶å†…ç½®å§”æ‰˜ï¼ˆ1ï¼‰å§”æ‰˜çš„æœ¬è´¨æ˜¯ç±»ï¼Œå®šä¹‰å¤šä¸ªå§”æ‰˜ï¼Œå…¶å®å°±æ˜¯æ–°å¢äº†å¤šä¸ªç±»ï¼Œå®šä¹‰å¥½çš„ä¸¤ä¸ªå§”æ‰˜å‚æ•°å’Œè¿”å›å€¼éƒ½æ˜¯ä¸€è‡´çš„ï¼Œä½†æ˜¯å› ä¸ºæ˜¯ä¸åŒçš„ç±»ï¼Œæ²¡æœ‰ç»§æ‰¿ä¸èƒ½é€šç”¨ï¼ˆ2ï¼‰æ—¢ç„¶æ˜¯ç³»ç»Ÿæ¡†æ¶ç»™æˆ‘ä»¬å®šä¹‰å¥½äº†è¿™ä¸¤ä¸ªå§”æ‰˜ï¼Œè‡ªç„¶æ˜¯å¸Œæœ›æˆ‘ä»¬åœ¨ä»¥åçš„å¼€å‘ä¸­ï¼Œéƒ½å»ä½¿ç”¨è¿™ä¸¤ä¸ªå§”æ‰˜ï¼Œè¿™æ ·å°±å¯ä»¥æŠŠå§”æ‰˜ç±»å‹åšåˆ°ç»Ÿä¸€ï¼ˆ3ï¼‰é‚£ä¹‹å‰å®šä¹‰å¥½çš„å§”æ‰˜æ˜¯å»ä¸æ‰çš„ï¼Œè¿™è¢«ç§°ä¹‹ä¸ºå†å²åŒ…è¢± https://www.cnblogs.com/guoqiang1/p/8138889.html https://blog.csdn.net/wenchm/article/details/134553445 å¦ï¼šï¼ˆåæœˆçš„å¯’æµï¼‰ ä½œç”¨ 1ã€å°†å‡½æ•°ä½œä¸ºå‡½æ•°çš„å‚æ•°è¿›è¡Œä¼ é€’ï¼ˆå›è°ƒå‡½æ•°ã€LINQï¼‰ 2ã€åŸºäºå§”æ‰˜ç”Ÿæˆäº‹ä»¶ï¼ˆå£°æ˜äº‹ä»¶å¹¶ç”¨æ¥æ³¨å†Œï¼‰ ï¼ˆæŒ‰é’®ï¼‰ 123å¼ºç±»å‹å§”æ‰˜Action&lt;T1&gt;Func&lt;T1,TResult&gt; æ³¨æ„: è°ƒç”¨å§”æ‰˜æ—¶ï¼Œå¦‚æœå…¶ä¸­çš„ä¸€ä¸ªå§”æ‰˜æŠ¥é”™ï¼Œåˆ™åé¢çš„ä¸ä¼šè¢«è°ƒç”¨ åªæœ‰æœ€åä¸€ä¸ªçš„è¿”å›å€¼æ‰ä¼šä½œä¸ºå§”æ‰˜çš„è¿”å›å€¼ å› ä¸ºæ˜¯æ•°ç»„ï¼Œæ‰€ä»¥ remove çš„å¤æ‚åº¦æ˜¯O(n) çº¿ç¨‹ä¸å®‰å…¨ å§”æ‰˜ä¸ºä»€ä¹ˆä¸ç­‰äºå‡½æ•°æŒ‡é’ˆ å§”æ‰˜å¯ä»¥â€æŒ‡å‘â€å¤šä¸ªå‡½æ•° å§”æ‰˜å¯ä»¥æŒ‡å‘åŒä¸€ä¸ªå‡½æ•°å¤šæ¬¡ å‡½æ•°æ˜¯åŒ…å«åœ¨ç±»ä¸­çš„ï¼Œæ‰€ä»¥å‡½æ•°å¼•ç”¨ä¹ŸåŒ…å«äº†æ‰€åœ¨å¯¹è±¡çš„ä¿¡æ¯;è€ŒC&#x2F;c++çš„å‡½æ•°æŒ‡é’ˆåªæ˜¯å‡½æ•°çš„å…¥å£åœ°å€ å¼‚æ­¥è°ƒç”¨ BeginInvoke EndInvoke Covariance&amp; Contravariance Predicate è¿”å›å€¼æ˜¯bool ä¸ºä»€ä¹ˆä¸ä½¿ç”¨æ¥å£ ä½¿ç”¨æ¥å£éå¸¸ä¸çµæ´»ï¼Œæ¯”å¦‚ä½¿ç”¨LINQï¼Œè¦é¢‘ç¹ä¼ å…¥å„ç§å½¢å¼çš„å‡½æ•°ï¼Œä¸”å¿…é¡»æœ‰ç±»å»å®ç°æ¥å£ ä¼ æ¥å£å¯¹è±¡å…¶å®è¯´è‡ªäº†æ˜¯åœ¨ä¼ ç±»çš„å¼•ç”¨ï¼Œé‚£ä¹ˆå°±æœ‰å¯èƒ½ä¼šå°†ç±»çš„å…¶ä»–å…¬å…±æˆå‘˜ä¹Ÿæš´éœ²å‡ºæ¥ï¼Œå¼•èµ·ä¸å¿…è¦çš„éº» æ— æ³•ä½¿ç”¨å¤šæ’­å§”æ‰˜ä¸äº‹ä»¶æä¾›çš„å„ç§åŠŸèƒ½ï¼Œæ¯”å¦‚æ·»åŠ ä¸åˆ é™¤ ç±»çš„æ–¹æ³•æ˜¯å°è£…å¥½çš„ï¼Œè€Œä½¿ç”¨åŒ¿åå§”æ‰˜å¯ä»¥éšå¤„å£°æ˜ï¼Œå¹¶ä½¿ç”¨å½“å‰ä½œç”¨åŸŸå¯è®¿é—®çš„æ‰€æœ‰å˜é‡ å†…ç½®çš„å¼ºç±»å‹å§”æ‰˜ç­‰å……åˆ†æä¾›äº†å„ç§å¸¸è§å½¢å¼çš„å§”æ‰˜ç±»å‹ï¼Œæ²¡æœ‰å¿…è¦è‡ªå·±å†™å¤§é‡æ¥å£ äº‹ä»¶å¦ï¼šï¼ˆåæœˆçš„å¯’æµï¼‰ å¸Œæœ›ä¸€ä¸ªç±»çš„æŸäº›æˆå‘˜åœ¨å‘ç”Ÿå˜åŒ–æ—¶å€™èƒ½å¤Ÿè¢«å¤–ç•Œè§‚æµ‹åˆ° CollectionChanged TextChanged æ ‡å‡†.Netäº‹ä»¶æ¨¡å¼ 1234delegate EventHandler(object sender,EventArgs e)EventArgsButton.ClickTextbox.TextChanged æ¨èçš„å‘½åè§„èŒƒ åè¯+åŠ¨è¯ï¼ˆè¢«åŠ¨ï¼‰ 123456CollectionChangedEventRaisedPropertyChangedOnEventRaisedOnpropertyChangedRaisePropertyChange äº‹ä»¶è¯´ç™½äº†æ˜¯C#æä¾›çš„è¯­æ³•ç³–ï¼Œæ•ˆæœæ˜¯ å°†å§”æ‰˜ä»¥ç§æœ‰å˜é‡çš„å½¢å¼å°è£…åœ¨ç±»å†…ï¼Œä¸è®©å¤–é¢è®¿é—® å¯¹äºå§”æ‰˜è¿›è¡Œäº†å°è£…ï¼Œä»è€Œå®šä¹‰add ä¸remove æ–¹æ³• åœ¨add ä¸ remove ä¸­é€šè¿‡äº’é”çš„æ–¹å¼æä¾›äº†çº¿ç¨‹å®‰å…¨æ€§ ä¾èµ–å±æ€§is out refasync awitLinqSelectSelectManyç”¨äºå°†æ¯ä¸ªå…ƒç´ æŠ•å½±ä¸ºä¸€ä¸ªåºåˆ—ï¼Œç„¶åâ€œå¹³å±•â€è¿™äº›åºåˆ—ï¼Œå°†å®ƒä»¬åˆå¹¶ä¸ºä¸€ä¸ªåºåˆ—ã€‚ï¼ˆç”¨äºå°†å¤šä¸ªåºåˆ—åˆå¹¶ä¸ºä¸€ä¸ªåºåˆ—ã€‚ï¼‰ SelectMany æœ‰å‡ ä¸ªé‡è½½ç‰ˆæœ¬ï¼Œæœ€å¸¸ç”¨çš„ç‰ˆæœ¬æ¥å—ä¸¤ä¸ªå‚æ•°ï¼š ä¸€ä¸ªè½¬æ¢å‡½æ•°ï¼Œå®ƒæ¥å—ä¸€ä¸ªæºåºåˆ—ä¸­çš„å…ƒç´ ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ–°åºåˆ—ï¼ˆé€šå¸¸æ˜¯ä¸€ä¸ª IEnumerable&lt;T&gt; ç±»å‹çš„åºåˆ—ï¼‰ã€‚ ä¸€ä¸ªç»“æœé€‰æ‹©å‡½æ•°ï¼Œå®ƒæ¥å—è½¬æ¢å‡½æ•°è¿”å›çš„åºåˆ—ä¸­çš„æ¯ä¸ªå…ƒç´ ï¼Œå¹¶è¿”å›æœ€ç»ˆç»“æœä¸­çš„å…ƒç´ ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ SelectMany ç¤ºä¾‹ï¼š 12345678910111213141516171819202122using System;using System.Collections.Generic;using System.Linq;class Program&#123; static void Main() &#123; int[][] numbers = &#123; new int[] &#123;1, 2, 3&#125;, new int[] &#123;4, 5, 6&#125;, new int[] &#123;7, 8, 9&#125; &#125;; var flattened = numbers.SelectMany(arr =&gt; arr); foreach (var num in flattened) &#123; Console.WriteLine(num); &#125; &#125;&#125; åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªäºŒç»´æ•´æ•°æ•°ç»„ numbersã€‚æˆ‘ä»¬ä½¿ç”¨ SelectMany æ¥â€œå¹³å±•â€è¿™ä¸ªæ•°ç»„ï¼Œå°†å…¶è½¬æ¢ä¸ºä¸€ä¸ªä¸€ç»´æ•´æ•°æ•°ç»„ã€‚è½¬æ¢å‡½æ•° arr =&gt; arr æ¥å—æ¯ä¸ªå†…éƒ¨æ•°ç»„ arrï¼Œå¹¶ç›´æ¥è¿”å›å®ƒï¼Œè¿™æ · SelectMany å°±ä¼šå°†æ‰€æœ‰å†…éƒ¨æ•°ç»„åˆå¹¶ä¸ºä¸€ä¸ªæ•°ç»„ã€‚ SelectMany ä¹Ÿå¯ä»¥ç”¨äºæ›´å¤æ‚çš„åœºæ™¯ï¼Œä¾‹å¦‚ï¼Œå½“ä½ æœ‰ä¸€ä¸ªå¯¹è±¡æ•°ç»„ï¼Œæ¯ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªå­å¯¹è±¡é›†åˆï¼Œä½ å¯ä»¥ä½¿ç”¨ SelectMany æ¥è·å–æ‰€æœ‰å­å¯¹è±¡çš„åˆ—è¡¨ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªæ›´å¤æ‚çš„ç¤ºä¾‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839using System;using System.Collections.Generic;using System.Linq;class Program&#123; static void Main() &#123; var customers = new List&lt;Customer&gt; &#123; new Customer &#123; Name = &quot;Customer A&quot;, Orders = new List&lt;Order&gt; &#123; new Order &#123; OrderId = 1 &#125;, new Order &#123; OrderId = 2 &#125; &#125;&#125;, new Customer &#123; Name = &quot;Customer B&quot;, Orders = new List&lt;Order&gt; &#123; new Order &#123; OrderId = 3 &#125;, new Order &#123; OrderId = 4 &#125; &#125;&#125; &#125;; var allOrders = customers.SelectMany(c =&gt; c.Orders); foreach (var order in allOrders) &#123; Console.WriteLine($&quot;Order ID: &#123;order.OrderId&#125;&quot;); &#125; &#125;&#125;class Customer&#123; public string Name &#123; get; set; &#125; public List&lt;Order&gt; Orders &#123; get; set; &#125;&#125;class Order&#123; public int OrderId &#123; get; set; &#125;&#125; åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ª Customer å¯¹è±¡çš„åˆ—è¡¨ï¼Œæ¯ä¸ª Customer éƒ½æœ‰ä¸€ä¸ª Orders é›†åˆã€‚æˆ‘ä»¬ä½¿ç”¨ SelectMany æ¥è·å–æ‰€æœ‰ Order å¯¹è±¡çš„åˆ—è¡¨ï¼Œè€Œä¸æ˜¯åˆ†åˆ«å¯¹æ¯ä¸ª Customer çš„ Orders é›†åˆè¿›è¡Œæ“ä½œã€‚ å¦‚æœä½ çš„ç›®æ ‡æ˜¯åˆ›å»ºä¸€ä¸ªæ–°åºåˆ—ï¼Œå…¶ä¸­åŒ…å«å¯¹æºåºåˆ—ä¸­æ¯ä¸ªå…ƒç´ è¿›è¡Œä¸€å¯¹ä¸€è½¬æ¢çš„ç»“æœï¼Œä½¿ç”¨ Selectã€‚ å¦‚æœä½ çš„ç›®æ ‡æ˜¯åˆ›å»ºä¸€ä¸ªæ–°åºåˆ—ï¼Œå…¶ä¸­åŒ…å«å¯¹æºåºåˆ—ä¸­æ¯ä¸ªå…ƒç´ è¿›è¡Œä¸€å¯¹å¤šè½¬æ¢çš„ç»“æœï¼Œå¹¶ä¸”éœ€è¦å°†è¿™äº›ç»“æœâ€œå¹³é“ºâ€æˆä¸€ä¸ªå•ä¸€åºåˆ—ï¼Œä½¿ç”¨ SelectManyã€‚ WhereWhere æ–¹æ³•æ¥å—ä¸€ä¸ªè¿”å›å¸ƒå°”å€¼çš„å§”æ‰˜ï¼ˆé€šå¸¸æ˜¯ä¸€ä¸ªlambdaè¡¨è¾¾å¼ï¼‰ï¼Œå¹¶ä¸”è¿”å›ä¸€ä¸ªæ–°åºåˆ—ï¼Œå…¶ä¸­åªåŒ…å«æ»¡è¶³è¯¥æ¡ä»¶çš„å…ƒç´ ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨ Where æ–¹æ³•çš„åŸºæœ¬ç¤ºä¾‹ï¼š 12345678910111213141516171819using System;using System.Linq;public class Program&#123; public static void Main() &#123; int[] numbers = &#123; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 &#125;; // ä½¿ç”¨Whereæ–¹æ³•ç­›é€‰å‡ºå¶æ•° var evenNumbers = numbers.Where(n =&gt; n % 2 == 0); Console.WriteLine(&quot;Even numbers:&quot;); foreach (var number in evenNumbers) &#123; Console.WriteLine(number); &#125; &#125;&#125; åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼ŒWhere æ–¹æ³•ç”¨äºç­›é€‰å‡ºæ•°ç»„ numbers ä¸­çš„å¶æ•°ã€‚Lambdaè¡¨è¾¾å¼ n =&gt; n % 2 == 0 å®šä¹‰äº†ç­›é€‰æ¡ä»¶ï¼Œå³é€‰æ‹©é‚£äº›é™¤ä»¥2ä½™æ•°ä¸º0çš„æ•´æ•°ã€‚ Where æ–¹æ³•ä¸ä¼šæ”¹å˜åŸå§‹æ•°æ®é›†åˆï¼Œè€Œæ˜¯åˆ›å»ºä¸€ä¸ªæ–°çš„åºåˆ—ï¼ŒåŒ…å«æ»¡è¶³æ¡ä»¶çš„å…ƒç´ ã€‚è¿™ä¸ªæ–°åºåˆ—æ˜¯ä¸€ä¸ª IEnumerable&lt;T&gt; ç±»å‹ï¼Œä½ å¯ä»¥ä½¿ç”¨ foreach å¾ªç¯æ¥éå†å®ƒï¼Œæˆ–è€…å°†å…¶è½¬æ¢æˆå…¶ä»–é›†åˆç±»å‹ï¼Œå¦‚ List&lt;T&gt; æˆ– Arrayã€‚ Where æ–¹æ³•å¯ä»¥ä¸å…¶ä»–LINQæ–¹æ³•ç»“åˆä½¿ç”¨ï¼Œä»¥æ„å»ºæ›´å¤æ‚çš„æŸ¥è¯¢ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥å…ˆä½¿ç”¨ Where ç­›é€‰æ•°æ®ï¼Œç„¶åä½¿ç”¨ OrderBy å¯¹ç»“æœè¿›è¡Œæ’åºï¼Œæˆ–è€…ä½¿ç”¨ Select å¯¹ç»“æœè¿›è¡ŒæŠ•å½±ï¼ˆè½¬æ¢ï¼‰ã€‚ 12345678var evenNumbersSorted = numbers .Where(n =&gt; n % 2 == 0) // ç­›é€‰å‡ºå¶æ•° .OrderBy(n =&gt; n); // æŒ‰å‡åºæ’åºforeach (var number in evenNumbersSorted)&#123; Console.WriteLine(number);&#125; åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å…ˆç­›é€‰å‡ºå¶æ•°ï¼Œç„¶åå¯¹è¿™äº›å¶æ•°è¿›è¡Œæ’åºã€‚ Aggregateåœ¨ C# ä¸­ï¼ŒAggregate æ–¹æ³•æ˜¯ LINQï¼ˆè¯­è¨€é›†æˆæŸ¥è¯¢ï¼‰çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒç”¨äºå¯¹ä¸€ä¸ªé›†åˆä¸­çš„æ‰€æœ‰å…ƒç´ åº”ç”¨ä¸€ä¸ªç´¯ç§¯å‡½æ•°ã€‚è¿™ä¸ªæ–¹æ³•å¯ä»¥ç”¨æ¥æ‰§è¡Œå„ç§æ“ä½œï¼Œæ¯”å¦‚è®¡ç®—æ€»å’Œã€å¹³å‡å€¼ã€è¿æ¥å­—ç¬¦ä¸²ç­‰ã€‚ Aggregate æ–¹æ³•çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š 1result = source.Aggregate(func); å…¶ä¸­ source æ˜¯ä¸€ä¸ªé›†åˆï¼Œfunc æ˜¯ä¸€ä¸ªç´¯ç§¯å‡½æ•°ï¼Œå®ƒå®šä¹‰äº†å¦‚ä½•å¤„ç†æ¯ä¸ªå…ƒç´ ä»¥åŠå¦‚ä½•ç´¯ç§¯ç»“æœã€‚ ç´¯ç§¯å‡½æ•° func å¯ä»¥æ¥å—ä¸¤ä¸ªå‚æ•°ï¼š ç´¯ç§¯çŠ¶æ€ï¼ˆé€šå¸¸ç§°ä¸º accumulator æˆ– sï¼‰ï¼šè¿™æ˜¯ç´¯ç§¯è¿‡ç¨‹çš„ä¸­é—´ç»“æœã€‚ å½“å‰å…ƒç´ ï¼ˆé€šå¸¸ç§°ä¸º element æˆ– xï¼‰ï¼šè¿™æ˜¯é›†åˆä¸­å½“å‰æ­£åœ¨å¤„ç†çš„å…ƒç´ ã€‚ Aggregate æ–¹æ³•ä¹Ÿå¯ä»¥æ¥å—ä¸€ä¸ªç§å­å€¼ä½œä¸ºåˆå§‹ç´¯ç§¯çŠ¶æ€ï¼Œè¿™åœ¨æŸäº›æƒ…å†µä¸‹éå¸¸æœ‰ç”¨ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œç”¨äºè®¡ç®—ä¸€ä¸ªæ•´æ•°åˆ—è¡¨çš„æ€»å’Œï¼š 123List&lt;int&gt; numbers = new List&lt;int&gt; &#123; 1, 2, 3, 4, 5 &#125;;int sum = numbers.Aggregate(0, (s, x) =&gt; s + x);Console.WriteLine(sum); // è¾“å‡º 15 åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ0 æ˜¯ç§å­å€¼ï¼Œç´¯ç§¯å‡½æ•° (s, x) =&gt; s + x å®šä¹‰äº†å¦‚ä½•å°†æ¯ä¸ªå…ƒç´ ç´¯åŠ åˆ°ç´¯ç§¯çŠ¶æ€ä¸Šã€‚ Aggregate æ–¹æ³•ä¹Ÿå¯ä»¥ç”¨æ¥åˆ›å»ºå¤æ‚çš„æ•°æ®ç»“æ„ï¼Œæ¯”å¦‚è¿æ¥å­—ç¬¦ä¸²åˆ—è¡¨ï¼š 123List&lt;string&gt; words = new List&lt;string&gt; &#123; &quot;Hello&quot;, &quot;world&quot;, &quot;!&quot; &#125;;string sentence = words.Aggregate((s, x) =&gt; s + &quot; &quot; + x);Console.WriteLine(sentence); // è¾“å‡º &quot;Hello world !&quot; åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œç´¯ç§¯å‡½æ•° (s, x) =&gt; s + &quot; &quot; + x å®šä¹‰äº†å¦‚ä½•å°†æ¯ä¸ªå­—ç¬¦ä¸²è¿æ¥åˆ°ç´¯ç§¯çŠ¶æ€ä¸Šï¼Œåˆå§‹ç´¯ç§¯çŠ¶æ€æ˜¯åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚ Aggregate æ–¹æ³•éå¸¸çµæ´»ï¼Œå¯ä»¥æ ¹æ®éœ€è¦å®šä¹‰å¤æ‚çš„ç´¯ç§¯é€»è¾‘ã€‚å®ƒæ˜¯å¯¹é›†åˆè¿›è¡Œè¿­ä»£å’Œç´¯ç§¯æ“ä½œçš„æœ‰åŠ›å·¥å…·ã€‚ Z-score(Zè¯„åˆ†æ³•)Zè¯„åˆ†æ³•ï¼ˆZ-scoreï¼‰æ˜¯ä¸€ç§ç»Ÿè®¡å­¦ä¸Šçš„æ¦‚å¿µï¼Œç”¨äºè¡¨ç¤ºä¸€ä¸ªæ•°å€¼ç›¸å¯¹äºæ•´ä¸ªæ•°æ®é›†çš„å¹³å‡å€¼çš„æ ‡å‡†å·®æ•°ç›®ã€‚åœ¨ç»Ÿè®¡å­¦ä¸­ï¼ŒZåˆ†æ•°ï¼ˆZ-scoreï¼‰èƒ½å¤Ÿå‘Šè¯‰æˆ‘ä»¬ä¸€ä¸ªç»™å®šçš„æ•°æ®ç‚¹è·ç¦»å¹³å‡å€¼æœ‰å¤šè¿œï¼Œé€šè¿‡ç”¨æ ‡å‡†å·®æ¥è¡¨ç¤ºè¿™ä¸ªè·ç¦»ã€‚ä¸€ä¸ªæ•°æ®çš„Zåˆ†æ•°å‘Šè¯‰æˆ‘ä»¬å®ƒæ˜¯åœ¨å¹³å‡å€¼ä¹‹ä¸Šè¿˜æ˜¯ä¹‹ä¸‹ï¼Œä»¥åŠå®ƒä¸å¹³å‡å€¼çš„è·ç¦»æœ‰å¤šè¿œã€‚ Zè¯„åˆ†æ³•çš„è®¡ç®—å…¬å¼æ˜¯ï¼šZ&#x3D;(Xâˆ’Î¼) &#x2F; Ïƒ X æ˜¯è§‚æµ‹å€¼ \\muï¼šÎ¼ æ˜¯å¹³å‡å€¼ï¼ˆå‡å€¼ï¼‰ \\sigmaï¼šÏƒ æ˜¯æ ‡å‡†å·® åœ¨åº”ç”¨ä¸­ï¼ŒZè¯„åˆ†æ³•å¸¸ç”¨äºï¼š æ ‡å‡†åŒ–ï¼šå°†ä¸åŒåˆ†å¸ƒçš„æ•°æ®è½¬æ¢ä¸ºæ ‡å‡†æ­£æ€åˆ†å¸ƒï¼Œä¾¿äºæ¯”è¾ƒã€‚ æ’åå’Œæ¯”è¾ƒï¼šåœ¨æ•™è‚²ã€åŒ»å­¦ç­‰é¢†åŸŸçš„æµ‹è¯•æˆç»©ï¼Œå¯ä»¥é€šè¿‡Zåˆ†æ•°è¿›è¡Œæ¯”è¾ƒã€‚ å¼‚å¸¸å€¼æ£€æµ‹ï¼šåœ¨æ•°æ®åˆ†æä¸­ï¼ŒZåˆ†æ•°å¯ä»¥å¸®åŠ©è¯†åˆ«æ•°æ®é›†ä¸­çš„å¼‚å¸¸å€¼æˆ–ç¦»ç¾¤ç‚¹ã€‚ Ïƒï¼ˆæ ‡å‡†å·®ï¼‰æ ‡å‡†å·®ï¼ˆStandard Deviationï¼Œç¼©å†™ä¸ºSDæˆ–Ïƒï¼‰æ˜¯ç»Ÿè®¡å­¦ä¸­è¡¡é‡ä¸€ç»„æ•°å€¼ç¦»æ•£ç¨‹åº¦çš„ä¸€ç§åº¦é‡ã€‚å®ƒæè¿°çš„æ˜¯æ•°æ®åˆ†å¸ƒçš„å®½åº¦ï¼Œæˆ–è€…è¯´æ˜¯æ•°æ®åˆ†å¸ƒçš„ç¦»æ•£ç¨‹åº¦ã€‚æ ‡å‡†å·®è¶Šå¤§ï¼Œè¡¨ç¤ºæ•°æ®çš„æ³¢åŠ¨è¶Šå¤§ï¼Œæ•°æ®åˆ†å¸ƒè¶Šåˆ†æ•£ï¼›æ ‡å‡†å·®è¶Šå°ï¼Œè¡¨ç¤ºæ•°æ®çš„æ³¢åŠ¨è¶Šå°ï¼Œæ•°æ®åˆ†å¸ƒè¶Šé›†ä¸­ã€‚ å¯¹äºä¸€ç»„æ•°æ®ï¼Œæ ‡å‡†å·®è®¡ç®—çš„åŸºæœ¬æ­¥éª¤å¦‚ä¸‹ï¼š è®¡ç®—å¹³å‡å€¼ï¼ˆå‡å€¼ï¼‰Î¼ã€‚ æ±‚æ¯ä¸ªæ•°å€¼ä¸å¹³å‡å€¼çš„å·®çš„å¹³æ–¹ã€‚ è®¡ç®—è¿™äº›å¹³æ–¹å·®çš„å¹³å‡å€¼ï¼Œå³æ–¹å·®ÏƒÂ²ã€‚ è®¡ç®—æ–¹å·®çš„å¹³æ–¹æ ¹ï¼Œå¾—åˆ°æ ‡å‡†å·®Ïƒã€‚ ç”¨æ•°å­¦å…¬å¼è¡¨ç¤ºï¼Œæ ‡å‡†å·®çš„è®¡ç®—è¿‡ç¨‹æ˜¯ï¼š CPå’ŒCPKCPï¼ˆCapability Indexï¼Œèƒ½åŠ›æŒ‡æ•°ï¼‰å’ŒCPKï¼ˆCapability Process Indexï¼Œè¿‡ç¨‹èƒ½åŠ›æŒ‡æ•°ï¼‰æ˜¯è´¨é‡ç®¡ç†ä¸­çš„ä¸¤ä¸ªå¸¸ç”¨æŒ‡æ ‡ï¼Œç”¨æ¥è¡¡é‡ä¸€ä¸ªç”Ÿäº§è¿‡ç¨‹æ˜¯å¦èƒ½å¤Ÿæ»¡è¶³äº§å“è§„æ ¼çš„è¦æ±‚ã€‚é€šä¿—åœ°è¯´ï¼ŒCPå’ŒCPKå°±æ˜¯åœ¨è¯´ä¸€ä¸ªç”Ÿäº§è¿‡ç¨‹åšå‡ºæ¥çš„äº§å“è´¨é‡æ€ä¹ˆæ ·ï¼Œæ˜¯ä¸æ˜¯å¾ˆç¨³å®šï¼Œèƒ½ä¸èƒ½åšåˆ°å¤§å¤šæ•°äº§å“éƒ½åœ¨æ ‡å‡†èŒƒå›´å†…ã€‚ CPï¼ˆèƒ½åŠ›æŒ‡æ•°ï¼‰ï¼šè¿™ä¸ªæŒ‡æ ‡ä¸»è¦æ˜¯çœ‹ç”Ÿäº§å‡ºæ¥çš„äº§å“ç‰¹æ€§å€¼åˆ†å¸ƒçš„å®½åº¦æ˜¯å¦åœ¨è§„æ ¼å…è®¸çš„èŒƒå›´ä¹‹å†…ã€‚CPå€¼è¶Šå¤§ï¼Œè¯´æ˜äº§å“çš„è´¨é‡è¶Šç¨³å®šï¼Œå¤§éƒ¨åˆ†çš„äº§å“éƒ½é›†ä¸­åœ¨è§„æ ¼ä¸­å¿ƒé™„è¿‘ã€‚å¦‚æœCPå€¼å°ï¼Œé‚£ä¹ˆäº§å“è´¨é‡å°±å¯èƒ½æ¯”è¾ƒåˆ†æ•£ï¼Œæœ‰äº›äº§å“å¯èƒ½ä¼šè¶…å‡ºè§„æ ¼ã€‚ CPKï¼ˆè¿‡ç¨‹èƒ½åŠ›æŒ‡æ•°ï¼‰ï¼šè¿™ä¸ªæŒ‡æ ‡ä¸ä»…è€ƒè™‘äº†äº§å“ç‰¹æ€§å€¼çš„åˆ†å¸ƒå®½åº¦ï¼Œè¿˜è€ƒè™‘äº†è¿™ä¸ªåˆ†å¸ƒçš„ä¸­å¿ƒä½ç½®æ˜¯å¦åç¦»äº†è§„æ ¼çš„ä¸­å¿ƒã€‚CPKå€¼è¶Šå¤§ï¼Œè¡¨ç¤ºç”Ÿäº§è¿‡ç¨‹ä¸ä»…äº§å“è´¨é‡åˆ†å¸ƒçª„ï¼Œè€Œä¸”ä¸­å¿ƒä½ç½®ä¹Ÿæ§åˆ¶å¾—å¾ˆå¥½ï¼Œå‡ ä¹æ²¡æœ‰åç¦»ã€‚å¦‚æœCPKå€¼å°ï¼Œè¯´æ˜ç”Ÿäº§è¿‡ç¨‹å¯èƒ½å­˜åœ¨é—®é¢˜ï¼Œå¯¼è‡´äº§å“è´¨é‡ä¸ç¨³å®šæˆ–è€…åç¦»è§„æ ¼ä¸­å¿ƒã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå°±åƒå°„å‡»é¶å¿ƒä¸€æ ·ï¼ŒCPå€¼é«˜å°±åƒæ‰€æœ‰çš„å­å¼¹éƒ½æ‰“åœ¨äº†é¶å­ä¸Šï¼Œä½†å¯èƒ½æ²¡æœ‰å…¨éƒ¨é›†ä¸­åœ¨é¶å¿ƒï¼›è€ŒCPKå€¼é«˜åˆ™æ„å‘³ç€å­å¼¹ä¸ä»…éƒ½æ‰“åœ¨äº†é¶å­ä¸Šï¼Œè€Œä¸”è¿˜éå¸¸é›†ä¸­åœ°æ‰“åœ¨äº†é¶å¿ƒã€‚ä¸¤è€…éƒ½é«˜ï¼Œè¯´æ˜å°„æ‰‹æ—¢æœ‰å¾ˆå¥½çš„å‡†ç¡®åº¦ï¼Œä¹Ÿæœ‰å¾ˆå¥½çš„ç¨³å®šæ€§ã€‚ è¡¥å¿å€¼CavityData(è…”ä½“æ•°æ®) 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970/// &lt;summary&gt;/// è…”ä½“æ•°æ®/// &lt;/summary&gt;public class CavityData&#123; // é€šè¿‡ç´¢å¼•è·å–æ³¨æ¶²æ³µæ•°æ® public InjectorPumpData this[int index] &#123; get &#123; return InjectorPumpDatas[index]; &#125; &#125; public int CavitySerialNumber &#123; get; private set; &#125; /// &lt;summary&gt; /// æ³¨æ¶²æ³µæ•°æ®é›†åˆ /// &lt;/summary&gt; public List&lt;InjectorPumpData&gt; InjectorPumpDatas &#123; get; private set; &#125; /// &lt;summary&gt; /// åˆå§‹åŒ–è…”ä½“æ•°æ®ç»“æ„ /// &lt;/summary&gt; /// &lt;param name=&quot;needleCount&quot;&gt;é’ˆå¤´ä¸ªæ•°&lt;/param&gt; public CavityData(int CavitySerialNumber, int injectorPumpCount, int[] needleCount) &#123; //4-24ä¿®æ”¹ this.CavitySerialNumber = CavitySerialNumber; InjectorPumpDatas = new List&lt;InjectorPumpData&gt;(); for (int i = 0; i &lt; injectorPumpCount; i++) &#123; InjectorPumpDatas.Add(new InjectorPumpData(this.CavitySerialNumber, i, needleCount)); &#125; &#125; /// &lt;summary&gt; /// æ·»åŠ æ•°æ® /// &lt;/summary&gt; public void Add(int injectorPumpSerialNumber, int needleSerialNumber, double infusionVolume) &#123; InjectorPumpDatas[injectorPumpSerialNumber].Add(needleSerialNumber, infusionVolume); &#125; /// &lt;summary&gt; /// æ·»åŠ æ³¨æ¶²é’ˆè¡¥å¿æ•°æ® /// &lt;/summary&gt; public void AddCompensation(int injectorPumpSerialNumber, int needleSerialNumber, double compensation) &#123; InjectorPumpDatas[injectorPumpSerialNumber].AddCompensation(needleSerialNumber, compensation); &#125; /// &lt;summary&gt; /// æ·»åŠ æ•°æ® /// &lt;/summary&gt; public void AddRange(int injectorPumpSerialNumber, int needleSerialNumber, IEnumerable&lt;double&gt; infusionVolume) &#123; InjectorPumpDatas[injectorPumpSerialNumber].AddRange(needleSerialNumber, infusionVolume); &#125; /// &lt;summary&gt; /// æ¸…ç©º /// &lt;/summary&gt; public void Clear() &#123; foreach (var injectorPumpData in InjectorPumpDatas) &#123; injectorPumpData.Clear(); &#125; &#125;&#125; ä¿æœ‰é‡ï¼šäºŒæ³¨åç§° å‡å» ä¸€æ³¨å‰ç§° æ³¨æ¶²å·®ï¼šä¸‹æ–™ç§°é‡æ—¶ï¼Œè®¡ç®—æ³¨æ¶²é’ˆçŒå…¥é‡è¯¯å·®ã€‚åº”çŒæ³¨é‡-å®é™…çŒæ³¨é‡ æ•°æ®é›†Aï¼šçŒæ³¨é‡è¯¯å·®å’Œæ³¨æ¶²é’ˆè¡¥å¿ç¼“å­˜ æ•°æ®é›†Bï¼šæå–æ³¨æ¶²é’ˆè¡¥å¿å€¼ä¸å½“å‰æ³¨æ¶²é’ˆè¡¥å¿å€¼ç›¸ç­‰çš„æœ€åè¿ç»­nä¸ªæ•°æ®ï¼Œå†™å…¥PLCåœ°å€ æ•°æ®é›†Cï¼šé€šè¿‡è®¡ç®—é›†åˆBçš„å¹³å‡å€¼å’Œæ ‡å‡†å·®ï¼Œç»“åˆZè¯„åˆ†æ³•å‰”é™¤å¼‚å¸¸ç‚¹å¾—åˆ°é›†åˆCï¼ˆZåˆ†æ³•éœ€è¦ä¸€ä¸ªé˜ˆå€¼ï¼Œè¿™ä¸ªé˜ˆå€¼å¼€æ”¾ï¼‰ï¼›é€šè¿‡æŒ‡æ•°åŠ æƒç§»åŠ¨å¹³å‡ï¼ˆè¿™é‡Œæœ‰ä¸ªå¹³ç¼“ç³»æ•°ï¼Œä¹Ÿä¼šå¼€æ”¾ï¼‰ï¼Œè®¡ç®—æ•°æ®é›†Cçš„æ³¨æ¶²é’ˆçŒå…¥é‡è¯¯å·®çš„å¹³å‡å€¼meanï¼›è®¡ç®—æ–°çš„æ³¨æ¶²é’ˆè¡¥å¿å€¼ï¼Œæ³¨æ¶²é’ˆè¡¥å¿&#x3D;å½“å‰æ³¨æ¶²é’ˆè¡¥å¿+meanï¼ˆå½“å‰æ³¨æ¶²é’ˆè¡¥å¿é€šè¿‡plcè·å–ï¼‰ &#x2F;&#x2F;åº”çŒæ³¨é‡ï¼š1.733 å®é™…:1.741 è¯¯å·®0.008 å½“å‰è¡¥å¿å€¼0 æ•°æ®é›†Aï¼š0+0.008 12345//åº”çŒæ³¨é‡ 1.733 4.78()//å®é™…çŒæ³¨é‡ 1.741=ã€‹1.740//å¯¹åº”è¡¥å¿å€¼ -0.001//è¯¯å·® 1.733-1.741 = -0.008//ç†è®ºè¡¥å¿ = -0.001+(-0.008) = -0.009 1234567891011121314151617181920åŠ¨æ€æ³¨æ¶²é’ˆè¡¥å¿é€»è¾‘ PLCç«¯:1 PLCå¼€æ”¾æ³¨æ¶²é’ˆè¡¥å¿åœ°å€ï¼Œè¿™äº›åœ°å€é‡Œé¢çš„å€¼åªèƒ½ä¸Šä½æœºæ›´æ”¹ï¼ŒåŒæ—¶è§¦æ‘¸å±å®æ—¶æ˜¾ç¤º2 æ³¨æ¶²å‰ï¼ŒPLCå…ˆæŠŠç›¸åº”æ³¨æ¶²é’ˆè¡¥å¿åœ°å€é‡Œé¢çš„å€¼æ¬è¿åˆ°ä¸´æ—¶åœ°å€ (é˜²æ­¢ PLCæŠŠæ³¨æ¶²é’ˆè¡¥å¿å†™ç»™æ³¨æ¶²æ³µåï¼Œä¸Šä½æœºæ›´æ–°äº†æ•™å€¼ï¼Œå¯¼è‡´éšç”µèŠ¯æ¬è¿çš„æ³¨æ¶²é’ˆè¡¥å¿å€¼å’Œå®é™…çš„è¡¥å¿å€¼ä¸ä¸€è‡´)ï¼Œç„¶åæŠŠè¿™ä¸ªè¡¥å¿å½“ä½œå½“å‰ç”µèŠ¯çš„æ³¨æ¶²é’ˆè¡¥å¿å€¼ï¼Œå¹¶ä¸€èµ·æ¬è¿åˆ°ä¸‹æ–™3. æ³¨æ¶²å‰åï¼Œæ³¨æ¶²é’ˆè¡¥å¿å€¼éšç”µèŠ¯æ¬è¿åˆ°ä¸‹æ–™ç§°é‡å¤„ ä¸Šä½æœºç«¯:1ã€ä¸‹æ–™ç§°é‡ï¼Œè®¡ç®—æ³¨æ¶²é’ˆçŒå…¥é‡è¯¯å·®ï¼Œæ³¨æ¶²é’ˆçŒå…¥é‡è¯¯å·®=åº”çŒå…¥é‡-å®é™…çŒå…¥é‡2. è¯»å–å½“å‰ç”µèŠ¯çš„æ³¨æ¶²é’ˆè¡¥å¿å€¼ï¼Œå°†æ³¨æ¶²é’ˆçŒå…¥é‡è¯¯å·®å’Œæ³¨æ¶²é’ˆè¡¥å¿å€¼ç¼“å­˜èµ·æ¥ï¼Œä½œä¸ºæ•°æ®é›†A3. æ¯ä¸‹æ–™ä¸€ä¸ªç”µèŠ¯ï¼ŒæŸ¥è¯¢æ•°æ®é›†Aï¼ŒæŠŠæ³¨æ¶²é’ˆè¡¥å¿å€¼ä¸å½“å‰æ³¨æ¶²é’ˆè¡¥å¿å€¼ç›¸ç­‰çš„æœ€åè¿ç»­nä¸ªæ•°æ®æå–å‡ºæ¥ï¼Œä½œä¸ºæ•°æ®é›†B.å¹¶é€šè¿‡æ•°æ®é›†B çš„æ³¨æ¶²é’ˆçŒå…¥é‡è¯¯å·®è®¡ç®—æ–°çš„æ³¨æ¶²é’ˆè¡¥å¿å€¼ï¼Œå¦‚æœæ–°çš„æ³¨æ¶²é’ˆè¡¥å¿å€¼åœ¨è®¾å®šçš„èŒƒå›´å†…ï¼Œå†™ç»™PLCå¯¹åº”çš„åœ°å€ æŠŠæ³¨æ¶²é’ˆè¡¥å¿å€¼ä¸å½“å‰æ³¨æ¶²é’ˆè¡¥å¿å€¼ç›¸ç­‰çš„æœ€åè¿ç»­nä¸ªæ•°æ®æå–å‡ºæ¥ã€‚è¿™é‡Œä¸å¤ªå¯¹ï¼Œåº”è¯¥æ˜¯ä¸è®ºè¡¥å¿å€¼æ˜¯å¦ç›¸ç­‰ï¼Œéƒ½æå–å‡ºæ¥ï¼Œç„¶åæ ¹æ®æ¯å¯¹â€œæ³¨æ¶²é’ˆçŒå…¥é‡è¯¯å·®å’Œæ³¨æ¶²é’ˆè¡¥å¿å€¼â€è®¡ç®—å‡ºä¸€ä¸ªâ€œç†è®ºè¡¥å¿å€¼â€ï¼Œä¸€å…±è®¡ç®—å‡ºnä¸ªï¼Œå½¢æˆæ•°æ®é›†ï¼Œç„¶åç”¨è¿™ä¸ªæ•°æ®é›†æ¥åšEWMAè®¡ç®—æœ€ç»ˆçš„ï¼Œä¹Ÿå°±æ˜¯å½“å‰çš„â€œç†è®ºè¡¥å¿å€¼â€ï¼Œå¹¶å†™å…¥PLCã€‚å¦åˆ™çš„è¯ä½ æ‰“å¼€è‡ªåŠ¨è°ƒæ•´ï¼Œä»–ä¼šè¿ç»­ä¸åœçš„è°ƒæ•´è¡¥å¿å€¼ï¼Œä½ å¾ˆéš¾å¾—åˆ°åŒ…å«nä¸ªä¸å˜çš„æ³¨æ¶²é’ˆè¡¥å¿å€¼çš„æ•°æ®é›† è®¡ç®—æ³¨æ¶²é’ˆè¡¥å¿å€¼:1. é€šè¿‡è®¡ç®—æ•°æ®é›†Bçš„å¹³å‡å€¼å’Œæ ‡å‡†å·®ï¼Œå¹¶ç»“åˆZåˆ†æ³•æ¥åˆ«é™¤å¼‚å¸¸ç‚¹,å¾—åˆ°æ•°æ®é›†C(Zåˆ†æ³•éœ€è¦ä¸€ä¸ªè´Ÿå€¼ï¼Œè¿™ä¸ªè´Ÿå€¼å¼€æ”¾)2. é€šè¿‡æŒ‡æ•°åŠ æƒç§»åŠ¨å¹³å‡(è¿™é‡Œæœ‰ä¸ªå¹³ç¼“ç³»æ•°ï¼Œä¹Ÿä¼šå¼€æ”¾)ï¼Œè®¡ç®—æ•°æ®é›†Cçš„æ³¨æ¶²é’ˆçŒå…¥é‡è¯¯å·®çš„å¹³å‡å€¼mean3. è®¡ç®—æ–°çš„æ³¨æ¶²é’ˆè¡¥å¿å€¼,æ³¨æ¶²é’ˆè¡¥å¿=å½“å‰æ³¨æ¶²é’ˆè¡¥å¿+mean(å½“å‰æ³¨æ¶²é’ˆè¡¥å¿é€šè¿‡PLCå¯¹ç”¨çš„åœ°å€è¯»å–ã€‹ å¯¹åº”PCè¡¥å¿å€¼ï¼šå®é™…é‚£æ ¹é’ˆçš„è¡¥å¿å€¼ï¼ŒPLCç»™å‡ºå¯¹åº”PCè¡¥å¿å€¼ å½“å‰PCè¡¥å¿å€¼ï¼šä¸‹æ–™æ—¶å€™è¯»å–ï¼Œçœ‹çœ‹æ˜¯å¦äººä¸ºä¿®æ”¹äº† ç†è®ºPCè¡¥å¿å€¼ï¼šï¼ˆï¼Ÿç†è®ºä¸Šåº”è¯¥è¡¥å¿å¤šå°‘ï¼‰å¯¹åº”PCè¡¥å¿å€¼+æ³¨æ¶²å·® è®¡ç®—PCè¡¥å¿å€¼ï¼šï¼ˆï¼Ÿé€šè¿‡ç®—æ³•è®¡ç®—å‡ºï¼‰ åŠ¨æ€è¡¥å¿å€¼è®¡ç®—æƒé‡ï¼š0.1 åŠ¨æ€è¡¥å¿å€¼å¼‚å¸¸å› å­ï¼š1.5 è‡ªå®šä¹‰æ§ä»¶Visual Treeå’ŒLogical Treeï¼ˆå¯è§†åŒ–æ ‘å’Œé€»è¾‘æ ‘ï¼‰https://www.cnblogs.com/jellochen/p/3439903.html åœ¨WPFä¸­ï¼Œç”¨æˆ·ç•Œé¢æ˜¯ç”±XAMLæ¥å‘ˆç°çš„ã€‚ç²—ç•¥åœ°è®²ï¼Œä»å®è§‚ä¸Šçœ‹ï¼Œå¶å­ä¸ºå¸ƒå±€ç»„ä»¶å’Œæ§ä»¶æ‰€ç»„æˆçš„æ ‘æ—¢æ˜¯é€»è¾‘æ ‘ï¼Œä»å¾®è§‚ä¸Šçœ‹ï¼Œå°†é€»è¾‘æ ‘çš„å¶å­å†æ”¾å¤§å¯çœ‹åˆ°å…¶å†…éƒ¨æ˜¯ç”±å¯è§†åŒ–ç»„ä»¶ï¼ˆç»§æ‰¿è‡ªVisualç±»ï¼‰ç»„æˆçš„ï¼Œå¶å­ä¸ºè¿™äº›å¯è§†åŒ–ç»„ä»¶ç»„æˆçš„æ ‘æ—¢æ˜¯å¯è§†æ ‘ã€‚ å½“ç„¶ï¼Œè®©æˆ‘ä»¬æ›´è¯¦ç»†åœ°æ¢è®¨WPFä¸­çš„é€»è¾‘æ ‘å’Œå¯è§†åŒ–æ ‘ã€‚ é€»è¾‘æ ‘é€»è¾‘æ ‘æ˜¯åŸºäºå¯¹è±¡çš„å±‚æ¬¡ç»“æ„ï¼Œå®ƒåæ˜ äº†å…ƒç´ çš„çˆ¶å­å…³ç³»å’Œå†…å®¹å±æ€§ã€‚åœ¨é€»è¾‘æ ‘ä¸­ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½æ˜¯ä¸€ä¸ªç»§æ‰¿è‡ªFrameworkElementæˆ–FrameworkContentElementçš„å…ƒç´ ã€‚é€»è¾‘æ ‘ä¸»è¦ç”¨äºä»¥ä¸‹ç›®çš„ï¼š æ•°æ®ç»‘å®šï¼šé€»è¾‘æ ‘ç”¨äºç¡®å®šæ•°æ®ç»‘å®šçš„èŒƒå›´å’Œä¸Šä¸‹æ–‡ã€‚ æ ·å¼ç»§æ‰¿ï¼šæ ·å¼å¯ä»¥ä»çˆ¶å…ƒç´ ç»§æ‰¿åˆ°å­å…ƒç´ ï¼Œé€»è¾‘æ ‘å®šä¹‰äº†è¿™ç§ç»§æ‰¿çš„è·¯å¾„ã€‚ èµ„æºæŸ¥æ‰¾ï¼šå½“å…ƒç´ è¯·æ±‚èµ„æºæ—¶ï¼ŒWPFä¼šåœ¨é€»è¾‘æ ‘ä¸­å‘ä¸ŠæŸ¥æ‰¾ï¼Œä»¥æ‰¾åˆ°å®šä¹‰çš„èµ„æºã€‚ äº‹ä»¶è·¯ç”±ï¼šé€»è¾‘æ ‘ç”¨äºç¡®å®šäº‹ä»¶å¦‚ä½•åœ¨ä¸åŒå…ƒç´ ä¹‹é—´ä¼ é€’ï¼ŒåŒ…æ‹¬å†’æ³¡äº‹ä»¶å’Œéš§é“äº‹ä»¶ã€‚é€»è¾‘æ ‘çš„æ„å»ºé€šå¸¸æ˜¯é€šè¿‡XAMLæ–‡ä»¶ä¸­å®šä¹‰çš„å…ƒç´ å’Œå†…å®¹å±æ€§æ¥å®Œæˆçš„ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ åœ¨XAMLä¸­å®šä¹‰äº†ä¸€ä¸ªGridï¼Œé‡Œé¢åŒ…å«äº†ä¸€ä¸ªButtonï¼Œé‚£ä¹ˆGridå°†æ˜¯Buttonçš„çˆ¶å…ƒç´ ï¼Œåœ¨é€»è¾‘æ ‘ä¸­Buttonå°†æ˜¯Gridçš„å­èŠ‚ç‚¹ã€‚ å¯è§†åŒ–æ ‘å¯è§†åŒ–æ ‘æ˜¯ä¸€ä¸ªæ›´è¯¦ç»†çš„å±‚æ¬¡ç»“æ„ï¼Œå®ƒåŒ…å«äº†é€»è¾‘æ ‘ä¸­çš„æ‰€æœ‰å…ƒç´ ï¼Œä»¥åŠä¸ºäº†æ¸²æŸ“å’Œå¸ƒå±€ç›®çš„è€Œæ·»åŠ çš„å…¶ä»–å¯è§†åŒ–å¯¹è±¡ã€‚å¯è§†åŒ–æ ‘çš„æ¯ä¸ªèŠ‚ç‚¹éƒ½æ˜¯ä¸€ä¸ªç»§æ‰¿è‡ªVisualæˆ–Visual3Dçš„å¯¹è±¡ã€‚å¯è§†åŒ–æ ‘ä¸»è¦ç”¨äºä»¥ä¸‹ç›®çš„ï¼š å¸ƒå±€ï¼šå¯è§†åŒ–æ ‘ç”¨äºè®¡ç®—å…ƒç´ çš„å¤§å°å’Œä½ç½®ï¼Œä»¥åŠå¦‚ä½•å¯¹å®ƒä»¬è¿›è¡Œå¸ƒå±€ã€‚ æ¸²æŸ“ï¼šWPFæ¸²æŸ“å¼•æ“ä½¿ç”¨å¯è§†åŒ–æ ‘æ¥ç¡®å®šå¦‚ä½•åœ¨å±å¹•ä¸Šç»˜åˆ¶å…ƒç´ ã€‚ è¾“å…¥å¤„ç†ï¼šå¯è§†åŒ–æ ‘ç”¨äºç¡®å®šå“ªäº›å…ƒç´ æ¥æ”¶è¾“å…¥ï¼Œå¦‚é¼ æ ‡ç‚¹å‡»å’Œé”®ç›˜è¾“å…¥ã€‚å¯è§†åŒ–æ ‘çš„æ„å»ºæ˜¯åŸºäºé€»è¾‘æ ‘ï¼Œä½†æ¯”é€»è¾‘æ ‘æ›´å¤æ‚ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªç®€å•çš„Buttonå¯èƒ½åœ¨å¯è§†åŒ–æ ‘ä¸­åŒ…å«å¤šä¸ªå­èŠ‚ç‚¹ï¼Œå¦‚Borderã€ContentPresenterå’Œå…¶ä»–ç”¨äºæ¸²æŸ“æŒ‰é’®å¤–è§‚çš„å…ƒç´ ã€‚è¿™äº›é¢å¤–çš„å¯è§†åŒ–å¯¹è±¡ä¸ä¼šå‡ºç°åœ¨é€»è¾‘æ ‘ä¸­ã€‚ ä¸¤è€…ä¹‹é—´çš„å…³ç³»é€»è¾‘æ ‘å’Œå¯è§†åŒ–æ ‘æ˜¯ç´§å¯†ç›¸å…³çš„ã€‚æ¯ä¸ªé€»è¾‘æ ‘èŠ‚ç‚¹è‡³å°‘åœ¨å¯è§†åŒ–æ ‘ä¸­æœ‰ä¸€ä¸ªå¯¹åº”çš„èŠ‚ç‚¹ï¼Œä½†å¯è§†åŒ–æ ‘å¯èƒ½åŒ…å«é€»è¾‘æ ‘ä¸­æ²¡æœ‰çš„é¢å¤–èŠ‚ç‚¹ã€‚è¿™æ˜¯å› ä¸ºWPFçš„æ¸²æŸ“æ¨¡å‹éœ€è¦é¢å¤–çš„å¯è§†åŒ–å¯¹è±¡æ¥æ”¯æŒå¤æ‚çš„å¸ƒå±€å’Œæ¸²æŸ“æ•ˆæœã€‚ å®é™…åº”ç”¨åœ¨å¼€å‘WPFåº”ç”¨ç¨‹åºæ—¶ï¼Œç†è§£é€»è¾‘æ ‘å’Œå¯è§†åŒ–æ ‘çš„æ¦‚å¿µéå¸¸é‡è¦ã€‚ä¾‹å¦‚ï¼Œå½“ä½ é‡åˆ°å¸ƒå±€æˆ–æ¸²æŸ“é—®é¢˜æ—¶ï¼Œä½ å¯èƒ½éœ€è¦æ£€æŸ¥å¯è§†åŒ–æ ‘æ¥ç¡®å®šæ˜¯å¦æœ‰é¢å¤–çš„å¯è§†åŒ–å¯¹è±¡å½±å“äº†å¸ƒå±€æˆ–æ¸²æŸ“ã€‚åŒæ ·ï¼Œå½“ä½ ä½¿ç”¨æ•°æ®ç»‘å®šæˆ–æ ·å¼æ—¶ï¼Œä½ éœ€è¦è€ƒè™‘é€»è¾‘æ ‘ä¸­çš„å…ƒç´ å…³ç³»ã€‚WPFæä¾›äº†ä¸€ä¸ªåä¸ºVisualTreeHelperçš„ç±»ï¼Œå®ƒåŒ…å«äº†ä¸€äº›é™æ€æ–¹æ³•ï¼Œå¯ä»¥ç”¨äºéå†å’Œæ£€æŸ¥å¯è§†åŒ–æ ‘ã€‚æ­¤å¤–ï¼ŒLogicalTreeHelperç±»æä¾›äº†ä¸€äº›æ–¹æ³•æ¥éå†é€»è¾‘æ ‘ã€‚æ€»ç»“æ¥è¯´ï¼Œé€»è¾‘æ ‘å’Œå¯è§†åŒ–æ ‘æ˜¯WPFä¸­ç®¡ç†UIå…ƒç´ çš„ä¸¤ç§ä¸åŒå±‚æ¬¡çš„è¡¨ç¤ºã€‚é€»è¾‘æ ‘å…³æ³¨å…ƒç´ ä¹‹é—´çš„é€»è¾‘å…³ç³»ï¼Œè€Œå¯è§†åŒ–æ ‘å…³æ³¨å…ƒç´ å¦‚ä½•åœ¨å®é™…å±å¹•ä¸Šå‘ˆç°ã€‚ç†è§£è¿™ä¸¤è€…ä¹‹é—´çš„å…³ç³»å¯¹äºé«˜æ•ˆåœ°å¼€å‘WPFåº”ç”¨ç¨‹åºè‡³å…³é‡è¦ã€‚ ç±»ç´¢å¼•å™¨é—­åŒ…å¤šçº¿ç¨‹åŸºæœ¬æ¦‚å¿µä»€ä¹ˆæ˜¯çº¿ç¨‹ çº¿ç¨‹æ˜¯æ“ä½œç³»ç»Ÿä¸­èƒ½å¤Ÿç‹¬ç«‹è¿è¡Œçš„æœ€å°å•ä½ï¼Œä¹Ÿæ˜¯ç¨‹åºä¸­èƒ½å¤Ÿå¹¶å‘æ‰§è¡Œçš„ä¸€æ®µæŒ‡ä»¤åºåˆ— çº¿ç¨‹æ˜¯è¿›ç¨‹çš„ä¸€éƒ¨åˆ†ï¼Œä¸€ä¸ªè¿›ç¨‹å¯ä»¥åŒ…å«å¤šä¸ªçº¿ç¨‹ï¼Œè¿™äº›çº¿ç¨‹å…±äº«è¿›ç¨‹çš„èµ„æº è¿›ç¨‹æœ‰å…¥å£çº¿ç¨‹ï¼Œä¹Ÿå¯ä»¥åˆ›å»ºæ›´å¤šçš„çº¿ç¨‹ ä¸ºä»€ä¹ˆè¦å¤šçº¿ç¨‹ï¼Ÿ æ‰¹é‡é‡å¤ä»»åŠ¡å¸Œæœ›åŒæ—¶è¿›è¡Œï¼ˆæ¯”å¦‚å¯¹äºæ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½è¿›è¡Œç›¸åŒä¸”è€—æ—¶çš„æ“ä½œï¼‰ å¤šä¸ªä¸åŒä»»åŠ¡å¸Œæœ›åŒæ—¶è¿›è¡Œï¼Œäº’ä¸å¹²æ‰°ï¼ˆæ¯”å¦‚æœ‰å¤šä¸ªåå°çº¿ç¨‹éœ€è¦åšè½®è¯¢ç­‰æ“ä½œï¼‰ ä»€ä¹ˆæ˜¯çº¿ç¨‹æ± ï¼Ÿ ä¸€ç»„é¢„å…ˆåˆ›å»ºçš„çº¿ç¨‹ï¼Œå¯ä»¥è¢«é‡å¤ä½¿ç”¨æ¥æ‰§è¡Œå¤šä¸ªä»»åŠ¡ é¿å…é¢‘ç¹åœ°åˆ›å»ºå’Œé”€æ¯çº¿ç¨‹ï¼Œä»è€Œå‡å°‘äº†çº¿ç¨‹åˆ›å»ºå’Œé”€æ¯çš„å¼€é”€ï¼Œæé«˜äº†ç³»ç»Ÿçš„æ€§èƒ½å’Œæ•ˆç‡ å¼‚æ­¥ç¼–ç¨‹é»˜è®¤ä½¿ç”¨çº¿ç¨‹æ±  ä»€ä¹ˆæ˜¯çº¿ç¨‹å®‰å…¨ï¼Ÿçº¿ç¨‹å®‰å…¨ å¤šä¸ªçº¿ç¨‹è®¿é—®å…±äº«èµ„æºæ—¶ï¼Œå¯¹å…±äº«èµ„æºçš„è®¿é—®ä¸ä¼šå¯¼è‡´æ•°æ®ä¸ä¸€è‡´æˆ–ä¸å¯é¢„æœŸçš„ç»“æœ åŒæ­¥æœºåˆ¶ ç”¨äºåè°ƒå’Œæ§åˆ¶å¤šä¸ªçº¿ç¨‹ä¹‹é—´æ‰§è¡Œé¡ºåºå’Œäº’æ–¥è®¿é—®å…±äº«èµ„æº ç¡®ä¿çº¿ç¨‹æŒ‰ç…§ç‰¹å®šçš„é¡ºåºæ‰§è¡Œï¼Œé¿å…ç«æ€æ¡ä»¶å’Œæ•°æ®ä¸ä¸€è‡´çš„é—®é¢˜ åŸå­æ“ä½œ åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ä¸ä¼šè¢«ä¸­æ–­çš„æ“ä½œã€‚ä¸å¯åˆ†å‰²ï¼Œè¦ä¹ˆå®Œå…¨æ‰§è¡Œï¼Œè¦ä¹ˆå®Œå…¨ä¸æ‰§è¡Œï¼Œæ²¡æœ‰ä¸­é—´çŠ¶æ€ åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼ŒåŸå­æ“ä½œèƒ½å¤Ÿä¿è¯æ•°æ®çš„ä¸€è‡´æ€§å’Œå¯é æ€§ï¼Œé¿å…å‡ºç°ç«æ€æ¡ä»¶å’Œæ•°æ®ç«äº‰çš„é—®é¢˜ çº¿ç¨‹ä¸å®‰å…¨çš„ä¸¤ä¸ªä¾‹å­12345678910111213141516171819202122è®¡æ•°const int total = 100_000;int count = 0;var thread1 = new Thread(Increment);var thread2 = new Thread(Increment);thread1.Start();thread2.Start();thread1.Join();thread2.Join();Console.WriteLine($&quot;Count: &#123;count&#125;&quot;);void Increment()&#123; for (int i = 0; i &lt; total; i++) count++;&#125; 123456789101112131415161718192021222324252627282930313233343536373839404142434445æ“ä½œé˜Ÿåˆ—var queue = new Queue&lt;int&gt;();var producer = new Thread(Producer);var consumer1 = new Thread(Consumer);var consumer2 = new Thread(Consumer);producer.Start();consumer1.Start();consumer2.Start();producer.Join();Thread.Sleep(100); // Wait for consumers to finishconsumer1.Interrupt();consumer2.Interrupt();consumer1.Join();consumer2.Join();void Producer()&#123; for (int i = 0; i &lt; 20; i++) &#123; Thread.Sleep(20); queue.Enqueue(i); &#125;&#125;void Consumer()&#123; try &#123; while (true) &#123; if (queue.TryDequeue(out var res)) Console.WriteLine(res); Thread.Sleep(1); &#125; &#125; catch (ThreadInterruptedException) &#123; Console.WriteLine(&quot;Thread interrupted.&quot;); &#125;&#125; å¸¸ç”¨å®ç°æ–¹å¼ çº¿ç¨‹ çº¿ç¨‹æ±  å¼‚æ­¥ç¼–ç¨‹ è€ƒè™‘ä¸€ä¸‹è‡ªå¸¦æ–¹æ³•ï¼Ÿ Parallel Forã€ForEachã€Invoke PLINQ AsParallelã€AsSequential AsOrdered 1234567891011121314151617181920212223242526Parallel ä¸ PLINQvar inputs = Enumerable.Range(1,20).ToArray();int HeavyJob(int input)&#123; Thread.Sleep(300); return input;&#125;// Sequentialvar forOutputs = new int[inputs.Length];for (int i = 0; i &lt; inputs.Length; i++)&#123; forOutputs[i] = HeavyJob(inputs[i]);&#125;// Parallelvar parallelOutputs = new int[inputs.Length];Parallel.For(0, inputs.Length, i =&gt;&#123; parallelOutputs[i] = HeavyJob(inputs[i]);&#125;);// PLINQvar plinqOutputs = inputs.AsParallel().Select(HeavyJob).ToArray(); 12345678910111213141516171819PLINQ ä¸ä¿¡å·é‡using System.Diagnostics;var inputs = Enumerable.Range(1,20).ToArray();var semaphore = new Semaphore(3, 3);int HeavyJob(int input)&#123; semaphore.WaitOne(); Thread.Sleep(300); semaphore.Release(); return input;&#125;var sw = Stopwatch.StartNew();var plinqOutputs = inputs.AsParallel().Select(HeavyJob).ToArray();sw.Stop();Console.WriteLine($&quot;Elapsed time: &#123;sw.ElapsedMilliseconds&#125;ms&quot;); çº¿ç¨‹Threadçº¿ç¨‹çš„åˆ›å»º åˆ›å»º Thread å®ä¾‹ï¼Œå¹¶ä¼ å…¥ ThreadStart å§”æ‰˜ è¿˜å¯ä»¥é…ç½®çº¿ç¨‹ï¼Œå¦‚æ˜¯å¦ä¸ºåå°çº¿ç¨‹ è°ƒç”¨ Thread.Start æ–¹æ³•ï¼Œè¿˜å¯ä»¥ä¼ å‚ çº¿ç¨‹çš„ç»ˆæ­¢ è°ƒç”¨ Thread.Join æ–¹æ³•ï¼Œç­‰å¾…çº¿ç¨‹çš„ç»“æŸ è°ƒç”¨ Thread.Interrupt æ–¹æ³•ï¼Œä¸­æ–­çº¿ç¨‹çš„æ‰§è¡Œ ä¼šåœ¨ç›¸åº”çº¿ç¨‹ä¸­æŠ›å‡ºThreadInterruptedException å¦‚æœçº¿ç¨‹ä¸­åŒ…å«ä¸€ä¸ª while(true) å¾ªç¯ï¼Œé‚£ä¹ˆéœ€è¦ä¿è¯åŒ…å«ç­‰å¾…æ–¹æ³•ï¼Œå¦‚IOæ“ä½œï¼ŒThread.Sleepç­‰ ä¸èƒ½ç”¨ Abortï¼Ÿ ä½¿ç”¨ Abort æ–¹æ³•æ¥å¼ºåˆ¶ç»ˆæ­¢çº¿ç¨‹å¯èƒ½å¯¼è‡´ä¸€äº›ä¸¥é‡çš„é—®é¢˜ï¼ŒåŒ…æ‹¬èµ„æºæ³„æ¼å’Œä¸å¯é¢„æµ‹çš„è¡Œä¸º è¾ƒæ–°ç‰ˆæœ¬çš„ .NET ä¸­å¦‚æœä½¿ç”¨è¿™ä¸ªæ–¹æ³•ï¼Œä¼šæŠ¥PlatformNotSupportedException æ¨èä½¿ç”¨ Thread.Interrupt æˆ–CancellationToken çº¿ç¨‹çš„æŒ‚èµ·ä¸æ¢å¤ Thread.Suspend ä»¥åŠ Thread.Resume è¾ƒæ–°ç‰ˆæœ¬çš„ .NET ä¸­ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•å·²ç»è¢«æ ‡è®°ä¸ºObsoleteï¼Œä¸”è°ƒç”¨ä¼šæŠ¥é”™ æ¨èä½¿ç”¨é”ã€ä¿¡å·é‡ç­‰æ–¹å¼å®ç°è¿™ä¸€é€»è¾‘ çº¿ç¨‹çš„è¶…æ—¶ Join æ–¹æ³•æ‹¥æœ‰ Timeout å…¥å‚ï¼Œå¹¶ä¼šåœ¨è¶…æ—¶åè¿”å› false å¯ä»¥åœ¨è¿™ç§æƒ…å†µä¸‹è€ƒè™‘ä½¿ç”¨ Interrupt æˆ–CancellationToken çš„æ–¹å¼ç»ˆæ­¢ä¸€ä¸ªçº¿ç¨‹ 1234567891011121314151617181920212223çº¿ç¨‹ç»ˆæ­¢var thread = new Thread(() =&gt;&#123; try &#123; for (int i = 0; i &lt; 10; i++) &#123; Thread.Sleep(1000); Console.WriteLine(&quot;Sub thread: &quot; + i); &#125; &#125; catch (ThreadInterruptedException) &#123; Console.WriteLine(&quot;Thread interrupted&quot;); &#125;&#125;);thread.Start();Thread.Sleep(3500);thread.Interrupt();thread.Join();Console.WriteLine(&quot;Done&quot;); çº¿ç¨‹å®‰å…¨ä¸åŒæ­¥æœºåˆ¶Thread-SafetyåŸå­æ“ä½œ Interlocked é”ä¸ä¿¡å·é‡ lock &amp; Monitor Mutex Semaphore WaitHandle ManualResetEvent AutoResetEvent ReaderWriterLock è½»é‡å‹ SemaphoreSlim ManualResetEventSlim ReaderWriterLockSlim ä¸è¦è‡ªå·±é€ è½®å­ï¼ çº¿ç¨‹å®‰å…¨çš„å•ä¾‹ï¼šLazy çº¿ç¨‹å®‰å…¨çš„é›†åˆç±»å‹ï¼šConcurrentBagã€ConcurrentStackã€ConcurrentQueueã€ConcurrentDictionary é˜»å¡é›†åˆï¼šBlockingCollection é€šé“ï¼šChannel åŸå­æ“ä½œï¼šInterlocked å‘¨æœŸä»»åŠ¡ï¼šPeriodicTimer å¤šçº¿ç¨‹ç»ƒä¹ é¢˜ç»ƒä¹  1ï¼šåŸºæœ¬çº¿ç¨‹åˆ›å»ºåˆ›å»ºä¸€ä¸ªC#æ§åˆ¶å°åº”ç”¨ç¨‹åºï¼Œå®ç°ä»¥ä¸‹åŠŸèƒ½ï¼š åˆ›å»ºå¹¶å¯åŠ¨3ä¸ªçº¿ç¨‹ã€‚ æ¯ä¸ªçº¿ç¨‹æ‰“å°ä»1åˆ°10çš„æ•°å­—ã€‚ ç¡®ä¿æ‰€æœ‰çº¿ç¨‹éƒ½å®Œæˆåï¼Œä¸»çº¿ç¨‹æ‰“å°â€œæ‰€æœ‰çº¿ç¨‹å·²å®Œæˆâ€ã€‚ 123456789101112131415161718192021222324252627282930313233343536using System;using System.Threading;class Program&#123; static object lockObject = new object(); static void Main(string[] args) &#123; Thread[] threads = new Thread[3]; for (int i = 0; i &lt; threads.Length; i++) &#123; threads[i] = new Thread(PrintNumbers); threads[i].Start(); &#125; foreach (var thread in threads) &#123; thread.Join(); // ç­‰å¾…æ‰€æœ‰çº¿ç¨‹å®Œæˆ &#125; Console.WriteLine(&quot;æ‰€æœ‰çº¿ç¨‹å·²å®Œæˆ&quot;); &#125; static void PrintNumbers() &#123; lock (lockObject) // ç¡®ä¿æ‰“å°æ“ä½œæ˜¯çº¿ç¨‹å®‰å…¨çš„ &#123; for (int i = 1; i &lt;= 10; i++) &#123; Console.WriteLine($&quot;çº¿ç¨‹ &#123;Thread.CurrentThread.ManagedThreadId&#125;: &#123;i&#125;&quot;); &#125; &#125; &#125;&#125; ç»ƒä¹  2ï¼šçº¿ç¨‹åŒæ­¥åœ¨ç»ƒä¹ 1çš„åŸºç¡€ä¸Šï¼Œå®ç°ä»¥ä¸‹åŠŸèƒ½ï¼š ä½¿ç”¨é”ï¼ˆlockï¼‰æˆ–å…¶ä»–åŒæ­¥æœºåˆ¶ï¼ˆå¦‚Monitorã€Mutexï¼‰ç¡®ä¿æ•°å­—æ‰“å°æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚ æ¯ä¸ªçº¿ç¨‹æ‰“å°æ•°å­—æ—¶ï¼Œåº”è¯¥æŒ‰é¡ºåºæ‰“å°ï¼ˆä¾‹å¦‚ï¼Œçº¿ç¨‹1æ‰“å°1, 2, 3â€¦ï¼Œçº¿ç¨‹2æ‰“å°11, 12, 13â€¦ï¼‰ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041class TestThread&#123; static int globalNextNum = 1; static object lockObject = new object(); public static void Main() &#123; Task[] tasks = new Task[3]; for (int i = 0; i &lt; tasks.Length; i++) &#123; tasks[i] = new Task(() =&gt; &#123; PrintOneToTen(); &#125;); tasks[i].Start(); &#125; for (int i = 0; i &lt; tasks.Length; i++) &#123; tasks[i].Wait(); &#125; Console.WriteLine(&quot;æ‰€æœ‰çº¿ç¨‹å·²å®Œæˆ&quot;); &#125; static void PrintOneToTen() &#123; try &#123; Monitor.Enter(lockObject); // å®‰å…¨åœ°è®¿é—®å…±äº«èµ„æº for (int i = 1; i &lt;= 10; i++) &#123; Console.WriteLine($&quot;çº¿ç¨‹ &#123;Thread.CurrentThread.ManagedThreadId&#125;: &#123;globalNextNum++&#125;&quot;); // ä¸ºäº†è®©çº¿ç¨‹ä¹‹é—´çš„è¾“å‡ºæ›´æ˜æ˜¾ï¼Œæˆ‘ä»¬å¯ä»¥è®©çº¿ç¨‹ç¨å¾®ç­‰å¾…ä¸€ä¸‹ Thread.Sleep(100); &#125; &#125; finally &#123; // ç¡®ä¿é€€å‡ºé”å®šçŠ¶æ€ Monitor.Exit(lockObject); &#125; &#125;&#125; ç»ƒä¹  3ï¼šä½¿ç”¨çº¿ç¨‹æ± ä¿®æ”¹ç»ƒä¹ 1ï¼Œä½¿ç”¨çº¿ç¨‹æ± ï¼ˆThreadPoolï¼‰æ¥åˆ›å»ºå’Œç®¡ç†çº¿ç¨‹ï¼Œè€Œä¸æ˜¯ç›´æ¥åˆ›å»ºThreadå¯¹è±¡ã€‚ 1234567891011121314151617181920212223242526272829303132333435TestThread.Main();class TestThread&#123; static int globalNextNum = 1; static object lockObject = new object(); public static void Main() &#123; //WaitCallback[] waitCallBack = new WaitCallback[3]; ManualResetEvent[] doneEvents = new ManualResetEvent[3]; for (int i = 0; i &lt; 3; i++) &#123; doneEvents[i] = new ManualResetEvent(false); ThreadPool.QueueUserWorkItem(PrintOneToTen,doneEvents[i]); &#125; WaitHandle.WaitAll(doneEvents); Console.WriteLine(&quot;æ‰€æœ‰çº¿ç¨‹å·²å®Œæˆ&quot;); &#125; static void PrintOneToTen(object state) &#123; lock (lockObject) &#123; ManualResetEvent doneEvents = (ManualResetEvent)state; // å®‰å…¨åœ°è®¿é—®å…±äº«èµ„æº for (int i = 1; i &lt;= 10; i++) &#123; Console.WriteLine($&quot;çº¿ç¨‹ &#123;Thread.CurrentThread.ManagedThreadId&#125;: &#123;globalNextNum++&#125;&quot;); // ä¸ºäº†è®©çº¿ç¨‹ä¹‹é—´çš„è¾“å‡ºæ›´æ˜æ˜¾ï¼Œæˆ‘ä»¬å¯ä»¥è®©çº¿ç¨‹ç¨å¾®ç­‰å¾…ä¸€ä¸‹ Thread.Sleep(100); &#125; // è®¾ç½®äº‹ä»¶ï¼Œè¡¨ç¤ºçº¿ç¨‹å·²å®Œæˆ doneEvents.Set(); &#125; &#125;&#125; ç»ƒä¹  4ï¼šä½¿ç”¨Taskä½¿ç”¨Taskç±»é‡å†™ç»ƒä¹ 1ï¼Œå®ç°ç›¸åŒçš„åŠŸèƒ½ã€‚ 12345678910111213141516171819202122232425262728293031323334353637TestThread.Main();class TestThread&#123; static int globalNextNum = 1; static object lockObject = new object(); public static void Main() &#123; Task[] tasks = new Task[3]; for (int i = 0; i &lt; tasks.Length; i++) &#123; tasks[i] = new Task(() =&gt; &#123; PrintOneToTen(); &#125;); tasks[i].Start(); &#125; for (int i = 0; i &lt; tasks.Length; i++) &#123; tasks[i].Wait(); &#125; Console.WriteLine(&quot;æ‰€æœ‰çº¿ç¨‹å·²å®Œæˆ&quot;); &#125; static void PrintOneToTen() &#123; lock(lockObject) &#123; // å®‰å…¨åœ°è®¿é—®å…±äº«èµ„æº for (int i = 1; i &lt;= 10; i++) &#123; Console.WriteLine($&quot;çº¿ç¨‹ &#123;Thread.CurrentThread.ManagedThreadId&#125;: &#123;globalNextNum++&#125;&quot;); // ä¸ºäº†è®©çº¿ç¨‹ä¹‹é—´çš„è¾“å‡ºæ›´æ˜æ˜¾ï¼Œæˆ‘ä»¬å¯ä»¥è®©çº¿ç¨‹ç¨å¾®ç­‰å¾…ä¸€ä¸‹ Thread.Sleep(100); &#125; &#125; &#125;&#125; ç»ƒä¹  5ï¼šå¹¶è¡Œå¾ªç¯ä½¿ç”¨Parallel.Foræˆ–Parallel.ForEaché‡å†™ç»ƒä¹ 1ï¼Œå®ç°ç›¸åŒçš„åŠŸèƒ½ã€‚ 1234567891011121314151617181920using System;using System.Threading.Tasks;class Program&#123; static void Main(string[] args) &#123; Parallel.For(1, 31, (i) =&gt; &#123; // ç”±äºParallel.Forå¹¶è¡Œæ‰§è¡Œï¼Œæˆ‘ä»¬éœ€è¦è®¡ç®—æ¯ä¸ªçº¿ç¨‹åº”è¯¥æ‰“å°çš„æ•°å­— int threadId = Task.CurrentId.HasValue ? Task.CurrentId.Value : -1; Console.WriteLine($&quot;çº¿ç¨‹ &#123;threadId&#125;: &#123;i&#125;&quot;); // ä¸ºäº†è®©è¾“å‡ºæ›´æ¸…æ™°ï¼Œå¯ä»¥ç¨å¾®ç­‰å¾… Thread.Sleep(100); &#125;); Console.WriteLine(&quot;æ‰€æœ‰çº¿ç¨‹å·²å®Œæˆ&quot;); &#125;&#125; ç»ƒä¹  6ï¼šçº¿ç¨‹é—´é€šä¿¡åˆ›å»ºä¸€ä¸ªC#æ§åˆ¶å°åº”ç”¨ç¨‹åºï¼Œå®ç°ä»¥ä¸‹åŠŸèƒ½ï¼š åˆ›å»ºä¸¤ä¸ªçº¿ç¨‹ï¼Œä¸€ä¸ªçº¿ç¨‹ç”¨äºç”Ÿäº§æ•°æ®ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹ç”¨äºæ¶ˆè´¹æ•°æ®ã€‚ ä½¿ç”¨BlockingCollection&lt;T&gt;æˆ–å…¶ä»–æœºåˆ¶æ¥å®ç°ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å¼ã€‚ 1234567891011121314151617181920212223242526272829303132333435class TestThread&#123; static BlockingCollection&lt;int&gt; blockingCollection = new BlockingCollection&lt;int&gt;(); public static void Main() &#123; Thread producer = new Thread(Produce); Thread consumer = new Thread(Consumer); producer.Start(); consumer.Start(); producer.Join(); consumer.Join(); &#125; static void Produce() &#123; for (int i = 0; i &lt; 10; i++) &#123; blockingCollection.Add(i); Console.WriteLine($&quot;produce:&#123;i&#125;&quot;); Thread.Sleep(100); &#125; &#125; static void Consumer() &#123; foreach (var item in blockingCollection.GetConsumingEnumerable()) &#123; Console.WriteLine($&quot;consumer:&#123;item&#125;&quot;); Thread.Sleep(100); &#125; &#125;&#125; ç»ƒä¹  7ï¼šçº¿ç¨‹å±€éƒ¨å­˜å‚¨åˆ›å»ºä¸€ä¸ªC#æ§åˆ¶å°åº”ç”¨ç¨‹åºï¼Œå®ç°ä»¥ä¸‹åŠŸèƒ½ï¼š åˆ›å»ºä¸€ä¸ªçº¿ç¨‹å±€éƒ¨å­˜å‚¨ï¼ˆThreadLocal&lt;T&gt;ï¼‰å˜é‡ï¼Œç”¨äºå­˜å‚¨æ¯ä¸ªçº¿ç¨‹çš„è®¡æ•°ã€‚ å¯åŠ¨å¤šä¸ªçº¿ç¨‹ï¼Œæ¯ä¸ªçº¿ç¨‹å°†è‡ªå·±çš„è®¡æ•°å¢åŠ ï¼Œå¹¶æ‰“å°å‡ºå¢åŠ åçš„å€¼ã€‚ 12345678910111213141516171819202122232425262728293031//åœ¨C#ä¸­ï¼ŒThreadLocal&lt;T&gt; æ˜¯ä¸€ä¸ªç±»ï¼Œå®ƒæä¾›äº†ä¸€ç§çº¿ç¨‹å±€éƒ¨å­˜å‚¨ï¼ˆThread-Local Storage, TLSï¼‰æœºåˆ¶ï¼Œä½¿å¾—æ¯ä¸ªçº¿ç¨‹éƒ½å¯ä»¥æ‹¥æœ‰è‡ªå·±çš„å˜é‡å‰¯æœ¬ï¼Œè€Œä¸ä¼šä¸å…¶ä»–çº¿ç¨‹å…±äº«ã€‚class TestThread&#123; static ThreadLocal&lt;int&gt; threadLocal = new ThreadLocal&lt;int&gt;(()=&gt;0);//åˆå§‹åŒ–ä¸º0 public static void Main() &#123; Thread[] threads = new Thread[3]; for (int i = 0; i &lt; threads.Length; i++) &#123; threads[i] = new Thread(ThreadProc); threads[i].Start(); &#125; foreach (var thread in threads) &#123; thread.Join(); &#125; &#125; static void ThreadProc() &#123; for (int i = 0; i &lt; 5; i++) &#123; threadLocal.Value++; Console.WriteLine($&quot;Thread &#123;Thread.CurrentThread.ManagedThreadId&#125;: &#123;threadLocal.Value&#125;&quot;); &#125; &#125;&#125; ç»ƒä¹  8ï¼šæ­»é”æ¼”ç¤ºåˆ›å»ºä¸€ä¸ªC#æ§åˆ¶å°åº”ç”¨ç¨‹åºï¼Œæ¼”ç¤ºæ­»é”çš„æƒ…å†µï¼š åˆ›å»ºä¸¤ä¸ªèµ„æºï¼ˆä¾‹å¦‚ä¸¤ä¸ªobjectï¼‰ã€‚ åˆ›å»ºä¸¤ä¸ªçº¿ç¨‹ï¼Œæ¯ä¸ªçº¿ç¨‹åˆ†åˆ«é”å®šä¸€ä¸ªèµ„æºï¼Œç„¶åå°è¯•é”å®šå¦ä¸€ä¸ªèµ„æºï¼Œä»¥äº§ç”Ÿæ­»é”ã€‚ 1234567891011121314151617181920212223242526272829using System;using System.Threading;class Program&#123; static object lock1 = new object(); static object lock2 = new object(); static void Main(string[] args) &#123; Thread t1 = new Thread(DeadlockDemo); Thread t2 = new Thread(DeadlockDemo); t1.Start(); t2.Start(); &#125; static void DeadlockDemo() &#123; lock (lock1) &#123; Console.WriteLine($&quot;Thread &#123;Thread.CurrentThread.ManagedThreadId&#125; acquired lock1&quot;); Thread.Sleep(100); lock (lock2) &#123; Console.WriteLine($&quot;Thread &#123;Thread.CurrentThread.ManagedThreadId&#125; acquired lock2&quot;); &#125; &#125; &#125;&#125; ç»ƒä¹  9ï¼šè§£å†³æ­»é”ä¿®æ”¹ç»ƒä¹ 8ä¸­çš„ä»£ç ï¼Œä½¿ç”¨è¶…æ—¶æˆ–å…¶ä»–ç­–ç•¥æ¥é¿å…æ­»é”ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546using System;using System.Threading;class Program&#123; static object lock1 = new object(); static object lock2 = new object(); static void Main(string[] args) &#123; Thread t1 = new Thread(DeadlockFreeDemo); Thread t2 = new Thread(DeadlockFreeDemo); t1.Start(); t2.Start(); &#125; static void DeadlockFreeDemo() &#123; const int lockTimeout = 1000; // Timeout in milliseconds if (Monitor.TryEnter(lock1, lockTimeout)) &#123; try &#123; Console.WriteLine($&quot;Thread &#123;Thread.CurrentThread.ManagedThreadId&#125; acquired lock1&quot;); Thread.Sleep(100); if (Monitor.TryEnter(lock2, lockTimeout)) &#123; try &#123; Console.WriteLine($&quot;Thread &#123;Thread.CurrentThread.ManagedThreadId&#125; acquired lock2&quot;); &#125; finally &#123; Monitor.Exit(lock2); &#125; &#125; &#125; finally &#123; Monitor.Exit(lock1); &#125; &#125; &#125;&#125; ç»ƒä¹  10ï¼šçº¿ç¨‹å®‰å…¨çš„æ•°æ®ç»“æ„åˆ›å»ºä¸€ä¸ªC#æ§åˆ¶å°åº”ç”¨ç¨‹åºï¼Œå®ç°ä»¥ä¸‹åŠŸèƒ½ï¼š ä½¿ç”¨çº¿ç¨‹å®‰å…¨çš„é›†åˆï¼ˆå¦‚ConcurrentBag&lt;T&gt;ã€ConcurrentDictionary&lt;TKey, TValue&gt;ï¼‰ã€‚ å¤šä¸ªçº¿ç¨‹åŒæ—¶å‘é›†åˆä¸­æ·»åŠ å’Œç§»é™¤å…ƒç´ ã€‚ ç¡®ä¿é›†åˆæ“ä½œæ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960using System;using System.Collections.Concurrent;using System.Threading;using System.Threading.Tasks;class Program&#123; // ä½¿ç”¨ ConcurrentBag ä½œä¸ºçº¿ç¨‹å®‰å…¨çš„é›†åˆ static ConcurrentBag&lt;int&gt; bag = new ConcurrentBag&lt;int&gt;(); static void Main(string[] args) &#123; int numberOfThreads = 10; int itemsToAddPerThread = 100; // åˆ›å»ºå¹¶å¯åŠ¨å¤šä¸ªçº¿ç¨‹æ¥æ·»åŠ å…ƒç´  Task[] addingTasks = new Task[numberOfThreads]; for (int i = 0; i &lt; numberOfThreads; i++) &#123; int threadId = i; addingTasks[i] = Task.Run(() =&gt; AddItemsToBag(threadId, itemsToAddPerThread)); &#125; // åˆ›å»ºå¹¶å¯åŠ¨å¤šä¸ªçº¿ç¨‹æ¥ç§»é™¤å…ƒç´  Task[] removingTasks = new Task[numberOfThreads]; for (int i = 0; i &lt; numberOfThreads; i++) &#123; removingTasks[i] = Task.Run(RemoveItemsFromBag); &#125; // ç­‰å¾…æ‰€æœ‰æ·»åŠ ä»»åŠ¡å®Œæˆ Task.WaitAll(addingTasks); // ç­‰å¾…æ‰€æœ‰ç§»é™¤ä»»åŠ¡å®Œæˆ Task.WaitAll(removingTasks); Console.WriteLine(&quot;æ‰€æœ‰çº¿ç¨‹å·²å®Œæˆæ“ä½œã€‚&quot;); Console.WriteLine(&quot;é›†åˆä¸­çš„å…ƒç´ æ•°é‡: &quot; + bag.Count); &#125; static void AddItemsToBag(int threadId, int count) &#123; for (int i = 0; i &lt; count; i++) &#123; bag.Add(threadId * count + i); &#125; Console.WriteLine($&quot;çº¿ç¨‹ &#123;threadId&#125; å®Œæˆæ·»åŠ  &#123;count&#125; ä¸ªå…ƒç´ ã€‚&quot;); &#125; static void RemoveItemsFromBag() &#123; int itemsRemoved = 0; int item; while (bag.TryTake(out item)) &#123; itemsRemoved++; &#125; Console.WriteLine($&quot;ä¸€ä¸ªçº¿ç¨‹ç§»é™¤äº† &#123;itemsRemoved&#125; ä¸ªå…ƒç´ ã€‚&quot;); &#125;&#125; å¼‚æ­¥ç¼–ç¨‹å¸¸è§æ¦‚å¿µå·²ç»æœ‰å¤šçº¿ç¨‹äº†ï¼Œä¸ºä½•è¿˜è¦å¼‚æ­¥å¤šçº¿ç¨‹ä¸å¼‚æ­¥æ˜¯ä¸åŒçš„æ¦‚å¿µ å¼‚æ­¥å¹¶ä¸æ„å‘³ç€å¤šçº¿ç¨‹ï¼Œå•çº¿ç¨‹åŒæ ·å¯ä»¥å¼‚æ­¥ å¼‚æ­¥é»˜è®¤å€ŸåŠ©çº¿ç¨‹æ±  å¤šçº¿ç¨‹ç»å¸¸é˜»å¡ï¼Œè€Œå¼‚æ­¥è¦æ±‚ä¸é˜»å¡ å¤šçº¿ç¨‹ä¸å¼‚æ­¥çš„é€‚ç”¨åœºæ™¯ä¸åŒå¤šçº¿ç¨‹ é€‚åˆ CPU å¯†é›†å‹æ“ä½œ é€‚åˆé•¿æœŸè¿è¡Œçš„ä»»åŠ¡ çº¿ç¨‹çš„åˆ›å»ºä¸é”€æ¯å¼€é”€è¾ƒå¤§ æä¾›æ›´åº•å±‚çš„æ§åˆ¶ï¼Œæ“ä½œçº¿ç¨‹ã€é”ã€ä¿¡å·é‡ç­‰ çº¿ç¨‹ä¸æ˜“äºä¼ å‚åŠè¿”å› çº¿ç¨‹çš„ä»£ç ä¹¦å†™è¾ƒä¸ºç¹ç å¼‚æ­¥ é€‚åˆ IO å¯†é›†å‹æ“ä½œ é€‚åˆçŸ­æš‚çš„å°ä»»åŠ¡ é¿å…çº¿ç¨‹é˜»å¡ï¼Œæé«˜ç³»ç»Ÿå“åº”èƒ½åŠ› ä»€ä¹ˆæ˜¯å¼‚æ­¥ä»»åŠ¡ï¼ˆTaskï¼‰åŒ…å«äº†å¼‚æ­¥ä»»åŠ¡çš„å„ç§çŠ¶æ€çš„ä¸€ä¸ªå¼•ç”¨ç±»å‹ æ­£åœ¨è¿è¡Œã€å®Œæˆã€ç»“æœã€æŠ¥é”™ç­‰ å¦æœ‰ ValueTask å€¼ç±»å‹ç‰ˆæœ¬ å¯¹äºå¼‚æ­¥ä»»åŠ¡çš„æŠ½è±¡ å¼€å¯å¼‚æ­¥ä»»åŠ¡åï¼Œå½“å‰çº¿ç¨‹å¹¶ä¸ä¼šé˜»å¡ï¼Œè€Œæ˜¯å¯ ä»¥å»åšå…¶ä»–äº‹æƒ… å¼‚æ­¥ä»»åŠ¡ï¼ˆé»˜è®¤ï¼‰ä¼šå€ŸåŠ©çº¿ç¨‹æ± åœ¨å…¶ä»–çº¿ç¨‹ä¸Šè¿è¡Œ è·å–ç»“æœåå›åˆ°ä¹‹å‰çš„çŠ¶æ€ ä»»åŠ¡çš„ç»“æœ è¿”å›å€¼ä¸º Task çš„æ–¹æ³•è¡¨ç¤ºå¼‚æ­¥ä»»åŠ¡æ²¡æœ‰è¿”å›å€¼ è¿”å›å€¼ä¸º Task åˆ™è¡¨ç¤ºæœ‰ç±»å‹ä¸º T çš„è¿”å›å€¼ å¼‚æ­¥æ–¹æ³•ï¼ˆasync Taskï¼‰ å°†æ–¹æ³•æ ‡è®° async åï¼Œå¯ä»¥åœ¨æ–¹æ³•ä¸­ä½¿ç”¨ await å…³é”®å­— await å…³é”®å­—ä¼šç­‰å¾…å¼‚æ­¥ä»»åŠ¡çš„ç»“æŸï¼Œå¹¶è·å¾—ç»“ æœ async + await ä¼šå°†æ–¹æ³•åŒ…è£…æˆçŠ¶æ€æœºï¼Œawait ç±»ä¼¼äºæ£€æŸ¥ç‚¹ MoveNext æ–¹æ³•ä¼šè¢«åº•å±‚è°ƒç”¨ï¼Œä»è€Œåˆ‡æ¢çŠ¶æ€ async Task è¿”å›å€¼ä¾æ—§æ˜¯ Task ç±»å‹ï¼Œä½†æ˜¯åœ¨å…¶ä¸­å¯ä»¥ä½¿ç”¨ await å…³é”®å­— åœ¨å…¶ä¸­å†™è¿”å›å€¼å¯ä»¥ç›´æ¥å†™ Task ä¸­çš„ T ç±» å‹ï¼Œä¸ç”¨åŒ…è£…æˆ Task async void åŒæ ·æ˜¯çŠ¶æ€æœºï¼Œä½†ç¼ºå°‘è®°å½•çŠ¶æ€çš„ Task å¯¹è±¡ æ— æ³•èšåˆå¼‚å¸¸ï¼ˆAggregate Exceptionï¼‰ï¼Œéœ€è¦è°¨æ…å¤„ç†å¼‚å¸¸ å‡ ä¹åªç”¨äºå¯¹äºäº‹ä»¶çš„æ³¨å†Œ å¼‚æ­¥ç¼–ç¨‹å…·æœ‰ä¼ æŸ“æ€§ï¼ˆContagiousï¼‰ ä¸€å¤„ asyncï¼Œå¤„å¤„ async å‡ ä¹æ‰€æœ‰è‡ªå¸¦æ–¹æ³•éƒ½æä¾›äº†å¼‚æ­¥çš„ç‰ˆæœ¬ é‡è¦æ€æƒ³ï¼šä¸é˜»å¡ï¼ await ä¼šæš‚æ—¶é‡Šæ”¾å½“å‰çº¿ç¨‹ï¼Œä½¿å¾—è¯¥çº¿ç¨‹å¯ä»¥æ‰§ è¡Œå…¶ä»–å·¥ä½œï¼Œè€Œä¸å¿…é˜»å¡çº¿ç¨‹ç›´åˆ°å¼‚æ­¥æ“ä½œå®Œæˆ ä¸è¦åœ¨å¼‚æ­¥æ–¹æ³•é‡Œç”¨ä»»ä½•æ–¹å¼é˜»å¡å½“å‰çº¿ç¨‹ å¸¸è§é˜»å¡æƒ…å½¢ Task.Wait() &amp; Task.Result å¦‚æœä»»åŠ¡æ²¡æœ‰å®Œæˆï¼Œåˆ™ä¼šé˜»å¡å½“å‰çº¿ç¨‹ï¼Œå®¹æ˜“å¯¼è‡´æ­»é” Task.GetAwaiter().GetResult() ä¸ä¼šå°† Exception åŒ…è£…ä¸º AggregateException Task.Delay() vs. Thread.Sleep() åè€…ä¼šé˜»å¡å½“å‰çš„çº¿ç¨‹ï¼Œè¿™ä¸å¼‚æ­¥ç¼–ç¨‹çš„ç†å¿µä¸ ç¬¦ å‰è€…æ˜¯ä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡ï¼Œä¼šç«‹åˆ»é‡Šæ”¾å½“å‰çš„çº¿ç¨‹ IO ç­‰æ“ä½œçš„åŒæ­¥æ–¹æ³• è¾ƒæ–°ç‰ˆæœ¬çš„ .NET ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€æ•´å¥—çš„å¼‚æ­¥æ–¹ æ³•ï¼ŒåŒ…å« Webã€IOã€Stream ç­‰ å…¶ä»–ç¹é‡ä¸”è€—æ—¶çš„ä»»åŠ¡ ä½¿ç”¨ Task.Run åŒ…è£… åŒæ­¥ä¸Šä¸‹æ–‡ ä¸€ç§ç®¡ç†å’Œåè°ƒçº¿ç¨‹çš„æœºåˆ¶ï¼Œå…è®¸å¼€å‘è€…å°†ä»£ç  çš„æ‰§è¡Œåˆ‡æ¢åˆ°ç‰¹å®šçš„çº¿ç¨‹ WinForms ä¸ WPF æ‹¥æœ‰åŒæ­¥ä¸Šä¸‹æ–‡ï¼ˆUI çº¿ ç¨‹ï¼‰ï¼Œè€Œæ§åˆ¶å°ç¨‹åºé»˜è®¤æ²¡æœ‰ ConfigureAwait(false) é…ç½®ä»»åŠ¡é€šè¿‡ await æ–¹æ³•ç»“æŸåæ˜¯å¦ä¼šåˆ°åŸæ¥çš„ çº¿ç¨‹ï¼Œé»˜è®¤ä¸º true ä¸€èˆ¬åªæœ‰ UI çº¿ç¨‹ä¼šé‡‡ç”¨è¿™ç§ç­–ç•¥ TaskScheduler æ§åˆ¶ Task çš„è°ƒåº¦æ–¹å¼å’Œè¿è¡Œçº¿ç¨‹ çº¿ç¨‹æ± çº¿ç¨‹ Default å½“å‰çº¿ç¨‹ CurrentThread å•çº¿ç¨‹ä¸Šä¸‹æ–‡ STAThread é•¿æ—¶é—´è¿è¡Œçº¿ç¨‹ LongRunning ä¼˜å…ˆçº§ã€ä¸Šä¸‹æ–‡ã€æ‰§è¡ŒçŠ¶æ€ç­‰ ä¸€å‘å³å¿˜ï¼ˆFire-and-forgetï¼‰ è°ƒç”¨ä¸€ä¸ªå¼‚æ­¥æ–¹æ³•ï¼Œä½†æ˜¯å¹¶ä¸ä½¿ç”¨ await æˆ–é˜»å¡ çš„æ–¹å¼å»ç­‰å¾…å®ƒçš„ç»“æŸ æ— æ³•è§‚å¯Ÿä»»åŠ¡çš„çŠ¶æ€ï¼ˆæ˜¯å¦å®Œæˆã€æ˜¯å¦æŠ¥é”™ç­‰ï¼‰ ç®€å•ä»»åŠ¡å¦‚ä½•åˆ›å»ºå¼‚æ­¥ä»»åŠ¡ï¼ŸTask.Run() åœ¨ä¸€ä¸ªæ–°çš„çº¿ç¨‹ä¸Šæ‰§è¡Œä»£ç  ä¼ å…¥å¼‚æ­¥åŒ¿åæ–¹æ³•ä¼šè¢«åŒ…è£…æˆ Task Task.Run(async () &#x3D;&gt; await Task.Delay(100)) ä¿è¯å¼‚æ­¥æ–¹æ³•åœ¨åˆ«çš„çº¿ç¨‹ä¸Šè¿è¡Œ Task.Factory.StartNew() æä¾›æ›´å¤šåŠŸèƒ½ï¼Œæ¯”å¦‚ TaskCreationOptions.LongRunning Task.Run ç›¸å½“äºç®€åŒ–ç‰ˆ new Task + Task.Start()çœ‹èµ·æ¥ç±»ä¼¼ new Thread + Thread.Start()ï¼Œä¸ å¸¸ç”¨ å¦‚ä½•åŒæ—¶å¼€å¯å¤šä¸ªå¼‚æ­¥ä»»åŠ¡ï¼Ÿ ä¸è¦ for å¾ªç¯ä¸­ä½¿ç”¨ await Task.WhenAll()ã€Task.WhenAny() ä»»åŠ¡å¦‚ä½•å–æ¶ˆï¼Ÿ CancellationTokenSource + CancellationToken OperationCanceledException &amp; TaskCanceledException æ¨èå¼‚æ­¥æ–¹æ³•éƒ½å¸¦ä¸Š CancellationToken è¿™ä¸€ä¼  å‚ ã€Œæˆ‘å¯ä»¥ä¸ç”¨ï¼Œä½†ä½ ä¸èƒ½æ²¡æœ‰ã€ ä»»åŠ¡è¶…æ—¶å¦‚ä½•å®ç°ï¼Ÿåœ¨å¼‚æ­¥ä»»åŠ¡ä¸­æ±‡æŠ¥è¿›åº¦ï¼Ÿå¦‚ä½•åœ¨åŒæ­¥æ–¹æ³•ä¸­è°ƒç”¨å¼‚æ­¥æ–¹æ³•ï¼Ÿå¸¸è§è¯¯åŒºå¼‚æ­¥ä¸€å®šæ˜¯å¤šçº¿ç¨‹ï¼Ÿ å¼‚æ­¥ç¼–ç¨‹ä¸å¿…éœ€è¦å¤šçº¿ç¨‹æ¥å®ç° æ—¶é—´ç‰‡è½®è½¬è°ƒåº¦ æ¯”å¦‚å¯ä»¥åœ¨å•ä¸ªçº¿ç¨‹ä¸Šä½¿ç”¨å¼‚æ­¥ I&#x2F;O æˆ–äº‹ä»¶é©±åŠ¨ çš„ç¼–ç¨‹æ¨¡å‹ï¼ˆEAPï¼‰ å•çº¿ç¨‹å¼‚æ­¥ï¼šè‡ªå·±å®šå¥½è®¡æ—¶å™¨ï¼Œåˆ°æ—¶é—´ä¹‹å‰å…ˆå» åšåˆ«çš„äº‹æƒ… ã€‚å¤šçº¿ç¨‹å¼‚æ­¥ï¼šå°†ä»»åŠ¡äº¤ç»™ä¸åŒçš„çº¿ç¨‹ï¼Œå¹¶ç”±è‡ªå·± æ¥è¿›è¡ŒæŒ‡æŒ¥è°ƒåº¦ å¼‚æ­¥æ–¹æ³•ä¸€å®šè¦å†™æˆ async Taskï¼Ÿ async å…³é”®å­—åªæ˜¯ç”¨æ¥é…åˆ await ä½¿ç”¨ï¼Œä»è€Œå°† æ–¹æ³•åŒ…è£…ä¸ºçŠ¶æ€æœº æœ¬è´¨ä¸Šä»ç„¶æ˜¯ Taskï¼Œåªä¸è¿‡æä¾›äº†è¯­æ³•ç³–ï¼Œå¹¶ ä¸”å‡½æ•°ä½“ä¸­å¯ä»¥ç›´æ¥ return Task çš„æ³›å‹ç±»å‹ æ¥å£ä¸­æ— æ³•å£°æ˜ async Task await ä¸€å®šä¼šåˆ‡æ¢åŒæ­¥ä¸Šä¸‹æ–‡ï¼Ÿ åœ¨ä½¿ç”¨ await å…³é”®å­—è°ƒç”¨å¹¶ç­‰å¾…ä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡ æ—¶ï¼Œå¼‚æ­¥æ–¹æ³•ä¸ä¸€å®šä¼šç«‹åˆ»æ¥åˆ°æ–°çš„çº¿ç¨‹ä¸Š å¦‚æœ 1 await äº†ä¸€ä¸ªå·²ç»å®Œæˆçš„ä»»åŠ¡ï¼ˆåŒ…æ‹¬ Task.Delay(0)ï¼‰ï¼Œä¼šç›´æ¥è·å¾—ç»“æœ å¼‚æ­¥å¯ä»¥å…¨é¢å–ä»£å¤šçº¿ç¨‹ï¼Ÿ å¼‚æ­¥ç¼–ç¨‹ä¸å¤šçº¿ç¨‹æœ‰ä¸€å®šå…³ç³»ï¼Œä½†ä¸¤è€…å¹¶ä¸æ˜¯å¯ ä»¥å®Œå…¨äº’ç›¸æ›¿ä»£ Task.Result ä¸€å®šä¼šé˜»å¡å½“å‰çº¿ç¨‹ï¼Ÿ å¦‚æœä»»åŠ¡å·²ç»å®Œæˆï¼Œé‚£ä¹ˆ Task.Result å¯ä»¥ç›´æ¥ å¾—åˆ°ç»“æœ å¼€å¯çš„å¼‚æ­¥ä»»åŠ¡ä¸€å®šä¸ä¼šé˜»å¡å½“å‰çº¿ç¨‹ï¼Ÿ await å…³é”®å­—ä¸ä¸€å®šä¼šç«‹åˆ»é‡Šæ”¾å½“å‰çº¿ç¨‹ï¼Œæ‰€ä»¥ å¦‚æœè°ƒç”¨çš„å¼‚æ­¥æ–¹æ³•ä¸­å­˜åœ¨é˜»å¡ï¼ˆå¦‚ Thread.Sleep(0)ï¼‰ï¼Œé‚£ä¹ˆä¾æ—§ä¼šé˜»å¡å½“å‰ä¸Šä¸‹ æ–‡å¯¹åº”çš„çº¿ç¨‹ åŒæ­¥æœºåˆ¶ä¼ ç»Ÿæ–¹æ³• Monitorï¼ˆlockï¼‰ Mutex Semaphore EventWaitHandle è½»é‡å‹ SemaphoreSlim ManualResetEventSlim å¹¶å‘é›†åˆ ConcurrentBag&#x2F;Stack&#x2F;Queue BlockingCollection Channel ç¬¬ä¸‰æ–¹åº“ AsyncManualResetEvent Microsoft.VisualStudio.Threading AsyncLock Nito.AsyncEx è¿˜æœ‰ä»€ä¹ˆï¼Ÿ Task.FromResultã€Task.FromCanceledã€ Task.FromException Task.GetAwaiter().GetResult() ContinueWith() Task.Yield() ValueTask IAsyncEnumerableï¼Ÿ IAsyncDisposableï¼Ÿ Async Stream Built-in å¼‚æ­¥æ–¹æ³• HttpClient.GetAsync File.WriteAllTextAsync MemoryStream.ReadAsync Console.Out.WriteLineAsync åœ¨å¼‚æ­¥ç¼–ç¨‹ä¸­ä½¿ç”¨é”ä¸ä¿¡å·é‡ï¼Ÿ WPF &amp; Async ç»ƒä¹ é¢˜ç»ƒä¹  1: å¼‚æ­¥è¯»å–æ–‡ä»¶å†…å®¹ç¼–å†™ä¸€ä¸ªå¼‚æ­¥æ–¹æ³• ReadFileAsyncï¼Œè¯¥æ–¹æ³•æ¥æ”¶ä¸€ä¸ªæ–‡ä»¶è·¯å¾„ä½œä¸ºå‚æ•°ï¼Œå¼‚æ­¥è¯»å–æ–‡ä»¶å†…å®¹ï¼Œå¹¶è¿”å›è¯»å–åˆ°çš„å­—ç¬¦ä¸²ã€‚ 1234567public static async Task&lt;string&gt; ReadFileAsync(string filePath) &#123; using(var render = new StreamReader(filePath)) &#123; return await render.ReadToEndAsync(); &#125; &#125; ç»ƒä¹  2: å¹¶å‘å¼‚æ­¥æ“ä½œåˆ›å»ºä¸‰ä¸ªå¼‚æ­¥æ–¹æ³• GetDataAAsyncã€GetDataBAsync å’Œ GetDataCAsyncï¼Œæ¨¡æ‹Ÿä»ä¸åŒæ•°æ®æºè·å–æ•°æ®ã€‚ç„¶åç¼–å†™ä¸€ä¸ªæ–¹æ³• FetchAllDataAsyncï¼Œè¯¥æ–¹æ³•å¹¶å‘æ‰§è¡Œè¿™ä¸‰ä¸ªå¼‚æ­¥æ“ä½œï¼Œå¹¶åœ¨æ‰€æœ‰æ“ä½œå®Œæˆåè¿”å›ç»“æœã€‚ 123456789101112public static async Task FetchAllDataAsync() &#123; Task&lt;string&gt; taskA = GetDataAAsync(@&quot;D:\\log.txt&quot;); Task&lt;string&gt; taskB = GetDataBAsync(@&quot;D:\\log.txt&quot;); Task&lt;string&gt; taskC = GetDataCAsync(@&quot;D:\\log.txt&quot;); await Task.WhenAll(taskA, taskB, taskC); Console.WriteLine($&quot;Data A: &#123;taskA.Result&#125;&quot;); Console.WriteLine($&quot;Data B: &#123;taskB.Result&#125;&quot;); Console.WriteLine($&quot;Data C: &#123;taskC.Result&#125;&quot;); &#125; ç»ƒä¹  3: é¡ºåºæ‰§è¡Œå¼‚æ­¥æ“ä½œç¼–å†™ä¸€ä¸ªå¼‚æ­¥æ–¹æ³• SequenceAsyncOpsï¼Œè¯¥æ–¹æ³•é¡ºåºæ‰§è¡Œä»¥ä¸‹æ“ä½œï¼šå…ˆæ‰§è¡Œ GetDataAAsyncï¼Œç„¶åæ ¹æ® GetDataAAsync çš„ç»“æœæ‰§è¡Œ GetDataBAsyncï¼Œæœ€åæ ¹æ® GetDataBAsync çš„ç»“æœæ‰§è¡Œ GetDataCAsync å¹¶è¿”å›ç»“æœã€‚ ç»ƒä¹  4: å¼‚æ­¥å¤„ç†é”™è¯¯åœ¨ç»ƒä¹  3 çš„åŸºç¡€ä¸Šï¼Œå¢åŠ é”™è¯¯å¤„ç†åŠŸèƒ½ã€‚å¦‚æœä»»ä½•ä¸€æ­¥æ“ä½œå¤±è´¥ï¼Œæ•è·å¼‚å¸¸å¹¶æ‰“å°é”™è¯¯ä¿¡æ¯ã€‚ 123456789101112131415// ç»ƒä¹  3 &amp; 4: é¡ºåºæ‰§è¡Œå¼‚æ­¥æ“ä½œå¹¶å¤„ç†é”™è¯¯ public async Task SequenceAsyncOps() &#123; try &#123; string resultA = await GetDataAAsync(); string resultB = await GetDataBAsync(resultA); string resultC = await GetDataCAsync(resultB); Console.WriteLine($&quot;Result C: &#123;resultC&#125;&quot;); &#125; catch (Exception ex) &#123; Console.WriteLine($&quot;An error occurred: &#123;ex.Message&#125;&quot;); &#125; &#125; ç»ƒä¹  5: å¼‚æ­¥å¹¶å‘æ§åˆ¶åˆ›å»ºä¸€ä¸ªä»»åŠ¡åˆ—è¡¨ tasksï¼Œå…¶ä¸­æ¯ä¸ªä»»åŠ¡éƒ½æ˜¯ä¸€ä¸ªè¿”å› Task çš„å¼‚æ­¥æ–¹æ³•ã€‚ç¼–å†™ä¸€ä¸ªæ–¹æ³• RunTasksConcurrentlyAsyncï¼Œè¯¥æ–¹æ³•å¯ä»¥åŒæ—¶æ‰§è¡Œæœ€å¤š5ä¸ªå¼‚æ­¥æ“ä½œï¼Œå½“ä¸€ä¸ªæ“ä½œå®Œæˆæ—¶ï¼Œè‡ªåŠ¨ä»ä»»åŠ¡åˆ—è¡¨ä¸­å–ä¸‹ä¸€ä¸ªä»»åŠ¡æ‰§è¡Œã€‚ 12345678910111213141516171819202122232425262728293031// ç»ƒä¹  5: å¼‚æ­¥å¹¶å‘æ§åˆ¶ public async Task RunTasksConcurrentlyAsync(Task[] tasks, int limit) &#123; var semaphore = new SemaphoreSlim(limit); var runningTasks = new List&lt;Task&gt;(); foreach (var task in tasks) &#123; await semaphore.WaitAsync(); runningTasks.Add( task.ContinueWith(t =&gt; &#123; semaphore.Release(); &#125;)); &#125; await Task.WhenAll(runningTasks); &#125; Main()&#123; // ç»ƒä¹  5 var tasks = new Task[] &#123; exercises.GetDataAAsync(), exercises.GetDataBAsync(&quot;&quot;), exercises.GetDataCAsync(&quot;&quot;), // æ·»åŠ æ›´å¤šä»»åŠ¡... &#125;; await exercises.RunTasksConcurrentlyAsync(tasks, 5); &#125; 1SemaphoreSlim semaphore = new SemaphoreSlim(initialCount, maximumCount); initialCountï¼šä¿¡å·é‡åˆå§‹åŒ–æ—¶å…è®¸çš„æœ€å¤§å¹¶å‘è®¿é—®æ•°ã€‚ maximumCountï¼šä¿¡å·é‡å¯ä»¥å…è®¸çš„æœ€å¤§å¹¶å‘è®¿é—®æ•°ã€‚ ç­‰å¾…ä¿¡å· å½“è¦è¿›å…¥ä¸´ç•ŒåŒºä¹‹å‰ï¼Œéœ€è¦è°ƒç”¨ WaitAsync æ–¹æ³•æ¥ç­‰å¾…ä¿¡å·ã€‚ 1await semaphore.WaitAsync(); æˆ–è€…åŒæ­¥ç‰ˆæœ¬ï¼š 1semaphore.Wait(); å¦‚æœä¿¡å·é‡è®¡æ•°å¤§äº0ï¼Œåˆ™ç«‹å³è¿›å…¥ä¸´ç•ŒåŒºã€‚å¦‚æœè®¡æ•°ä¸º0ï¼Œåˆ™çº¿ç¨‹ä¼šé˜»å¡ï¼Œç›´åˆ°å…¶ä»–çº¿ç¨‹é‡Šæ”¾ä¿¡å·é‡ã€‚ é‡Šæ”¾ä¿¡å· å®Œæˆå¯¹å…±äº«èµ„æºçš„è®¿é—®åï¼Œéœ€è¦è°ƒç”¨ Release æ–¹æ³•æ¥é‡Šæ”¾ä¿¡å·é‡ï¼Œå¢åŠ å…¶è®¡æ•°ã€‚ 1semaphore.Release(); å¦‚æœé‡Šæ”¾æ“ä½œå¯¼è‡´ä¿¡å·é‡çš„è®¡æ•°è¶…è¿‡äº†æœ€å¤§å€¼ï¼Œå°†ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚","categories":[{"name":"C#","slug":"C","permalink":"http://example.com/categories/C/"}],"tags":[{"name":"ç¼–ç¨‹","slug":"ç¼–ç¨‹","permalink":"http://example.com/tags/%E7%BC%96%E7%A8%8B/"},{"name":"C#","slug":"C","permalink":"http://example.com/tags/C/"}],"author":"fly"}],"categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://example.com/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"C#","slug":"C","permalink":"http://example.com/categories/C/"},{"name":"é¢è¯•","slug":"é¢è¯•","permalink":"http://example.com/categories/%E9%9D%A2%E8%AF%95/"}],"tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://example.com/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"C#","slug":"C","permalink":"http://example.com/tags/C/"},{"name":"WPF - ç¼–ç¨‹","slug":"WPF-ç¼–ç¨‹","permalink":"http://example.com/tags/WPF-%E7%BC%96%E7%A8%8B/"},{"name":"é¢è¯•","slug":"é¢è¯•","permalink":"http://example.com/tags/%E9%9D%A2%E8%AF%95/"},{"name":"ç¼–ç¨‹","slug":"ç¼–ç¨‹","permalink":"http://example.com/tags/%E7%BC%96%E7%A8%8B/"}]}